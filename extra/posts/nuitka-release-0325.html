<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.3.25</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0325.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference external" href="https://nuitka.github.io/Nuitka-website">home</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.20 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-19">Nuitka Release 0.6.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-3-25">
<h1>Nuitka Release 0.3.25<a class="headerlink" href="#nuitka-release-0-3-25" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/sites/download.html">“download now”</a>.</p>
<p>This release brings about changes on all fronts, bug fixes, new
features. Also very importantly Nuitka no longer uses C++11 for its
code, but mere C++03. There is new re-formulation work, and re-factoring
of functions.</p>
<p>But the most important part is this: Mercurial unit tests are working.
Nearly. With the usual disclaimer of me being wrong, all remaining
errors are errors of the test, or minor things. Hope is that these unit
tests can be added as release tests to Nuitka. And once that is done,
the next big Python application can come.</p>
<section id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Local variables were released when an exception was raised that
escaped the local function. They should only be released, after
another exception was raised somewhere.</p></li>
<li><p>Identifiers of nested tuples and lists could collide.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Both tuples had the same name previously, not the end of the tuple is
marked too. Fixed in 0.3.24.1 already.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__name__</span></code> when used read-only in modules in packages was
optimized to a string value that didn’t contain the package name.</p></li>
<li><p>Exceptions set when entering compiled functions were unset at
function exit.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Compiled frames support. Before, Nuitka was creating frames with the
standard CPython C/API functions, and tried its best to cache them.
This involved some difficulties, but as it turns out, it is actually
possible to instead provide a compatible type of our own, that we
have full control over.</p>
<p>This will become the base of enhanced compatibility. Keeping
references to local variables attached to exception tracebacks is
something we may be able to solve now.</p>
</li>
<li><p>Enhanced Python3 support, added support for <code class="docutils literal notranslate"><span class="pre">nonlocal</span></code> declarations
and many small corrections for it.</p></li>
<li><p>Writable <code class="docutils literal notranslate"><span class="pre">__defaults__</span></code> attribute for compiled functions, actually
changes the default value used at call time. Not supported is
changing the amount of default parameters.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Keep the functions along with the module and added “FunctionRef” node
kind to point to them.</p></li>
<li><p>Reformulated <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> operators with the conditional
expression construct which makes the “short-circuit” branch.</p></li>
<li><p>Access <code class="docutils literal notranslate"><span class="pre">self</span></code> in methods from the compiled function object instead
of pointer to context object, making it possible to access the
function object.</p></li>
<li><p>Removed “OverflowCheck” module and its usage, avoids one useless scan
per function to determine the need for “locals dictionary”.</p></li>
<li><p>Make “compileTree” of “MainControl” module to only do what the name
says and moved the rest out, making the top level control clearer.</p></li>
<li><p>Don’t export module entry points when building executable and not
modules. These exports cause MinGW and MSVC compilers to create
export libraries.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul>
<li><p>More efficient code for conditional expressions in conditions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">a</span> <span class="k">if</span> <span class="n">b</span> <span class="k">else</span> <span class="n">c</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>See above, this code is now the typical pattern for each <code class="docutils literal notranslate"><span class="pre">or</span></code> and
<code class="docutils literal notranslate"><span class="pre">and</span></code>, so this was much needed now.</p>
</li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul>
<li><p>The remaining uses of C++11 have been removed. Code generated with
Nuitka and complementary C++ code now compile with standard C++03
compilers. This lowers the Nuitka requirements and enables at least
g++ 4.4 to work with Nuitka.</p></li>
<li><p>The usages of the GNU extension operation <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">?:</span> <span class="pre">b</span></code> have replaced
with standard C++ constructs. This is needed to support MSVC which
doesn’t have this.</p></li>
<li><p>Added examples for the typical use cases to the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a>.</p></li>
<li><p>The “compare_with_cpython” script has gained an option to immediately
remove the Nuitka outputs (build directory and binary) if successful.
Also the temporary files are now put under “/var/tmp” if available.</p></li>
<li><p>Debian package improvements, registering with <code class="docutils literal notranslate"><span class="pre">doc-base</span></code> the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User
Manual</a> so it is easier
to discover. Also suggest <code class="docutils literal notranslate"><span class="pre">mingw32</span></code> package which provides the
cross compiler to Windows.</p></li>
<li><p>Partial support for MSVC (Visual Studio 2008 to be exact, the version
that works with CPython2.6 and CPython2.7).</p>
<p>All basic tests that do not use generators are working now, but those
will currently cause crashes.</p>
</li>
<li><p>Renamed the <code class="docutils literal notranslate"><span class="pre">--g++-only</span></code> option to <code class="docutils literal notranslate"><span class="pre">--c++-only</span></code>.</p>
<p>The old name is no longer correct after clang and MSVC have gained
support, and it could be misunderstood to influence compiler
selection, rather than causing the C++ source code to not be updated,
so manual changes will the used.</p>
</li>
<li><p>Catch exceptions for <code class="docutils literal notranslate"><span class="pre">continue</span></code>, <code class="docutils literal notranslate"><span class="pre">break</span></code>, and <code class="docutils literal notranslate"><span class="pre">return</span></code> only
where needed for <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> and loop constructs.</p></li>
</ul>
</section>
<section id="new-tests">
<h2>New Tests<a class="headerlink" href="#new-tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added CPython3.2 test suite as “tests/CPython32” from 3.2.3 and run
it with CPython2.7 to check that Nuitka gives compatible error
messages. It is not expected to pass yet on Python3.2, but work will
be done towards this goal.</p></li>
<li><p>Make CPython2.7 test suite runner also execute the generated
“doctest” modules.</p></li>
<li><p>Enabled tests for default parameters and their reference counts.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release marks an important point. The compiled frames are exciting
new technology, that will allow even better integration with CPython,
while improving speed. Lowering the requirements to C++03 means, we will
become usable on Android and with MSVC, which will make adoption of
Nuitka on Windows easier for many.</p>
<p>Structurally the outstanding part is the function as references cleanup.
This was a blocker for value propagation, because now functions
references can be copied, whereas previously this was duplicating the
whole function body, which didn’t work, and wasn’t acceptable. Now, work
can resume in this domain.</p>
<p>Also very exciting when it comes to optimization is the remove of
special code for <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> operators, as these are now only
mere conditional expressions. Again, this will make value propagation
easier with two special cases less.</p>
<p>And then of course, with Mercurial unit tests running compiled with
Nuitka, an important milestone has been hit.</p>
<p>For a while now, the focus will be on completing Python3 support, XML
based optimization regression tests, benchmarks, and other open ends.
Once that is done, and more certainty about Mercurial tests support, I
may call it a 0.4 and start with local type inference for actual speed
gains.</p>
</section>
</section>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="letting-go-of-c11.html">
       Letting go of C++11
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="static-compilation-that-is-the-point.html">
      Static Compilation - That is the point 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0325.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0325.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0325.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>