<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.6.20 (Draft)</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/doc/Changelog.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Nuitka Roadmap" href="roadmap.html" />
    <link rel="prev" title="Nuitka Commercial" href="commercial.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
<intl>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <nav class="w3-dropdown-hover">
        <button class="w3-button w3-samll">intl</button>
        <ul class="w3-dropdown-content">
            <li>
                <a href="https://nuitka.net/">Home</a>
            </li>
            <li>
                <a href="https://nuitka.net/zh_CN/">zh_CN</a>
            </li>
        </ul>
        <div >
    </nav>
<intl>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Nuitka Release 0.6.20 (Draft)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optimization">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#organisational">Organisational</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#nuitka-release-0-6-19">Nuitka Release 0.6.19</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Bug Fixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">New Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Organisational</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cleanups">Cleanups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#nuitka-release-0-6-18">Nuitka Release 0.6.18</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id6">Bug Fixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">New Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">Organisational</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">Cleanups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#older-releases">Older Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-17">Nuitka Release 0.6.17</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-16">Nuitka Release 0.6.16</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-15">Nuitka Release 0.6.15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id26">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-14">Nuitka Release 0.6.14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id33">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-13">Nuitka Release 0.6.13</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id40">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-12">Nuitka Release 0.6.12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id47">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id51">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-11">Nuitka Release 0.6.11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id54">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id58">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id59">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id60">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-10">Nuitka Release 0.6.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id61">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id62">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id63">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id64">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id65">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id66">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id67">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-9">Nuitka Release 0.6.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id68">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id69">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id70">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id71">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id72">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id73">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-8">Nuitka Release 0.6.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id74">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id75">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id76">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id77">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id78">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id79">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id80">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-7">Nuitka Release 0.6.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id81">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id82">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id83">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id84">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id85">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id86">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id87">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-6">Nuitka Release 0.6.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id88">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id89">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id90">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id91">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id92">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id93">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id94">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-5">Nuitka Release 0.6.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id95">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id96">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id97">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id98">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id99">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id100">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id101">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-4">Nuitka Release 0.6.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id102">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id103">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id104">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id105">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id106">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id107">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id108">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-3">Nuitka Release 0.6.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id109">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id110">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id111">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id112">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id113">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id114">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id115">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-2">Nuitka Release 0.6.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id116">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id117">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id118">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id119">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id120">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-1">Nuitka Release 0.6.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id121">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id122">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id123">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id124">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id125">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id126">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-6-0">Nuitka Release 0.6.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id127">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id128">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id129">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id130">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id131">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id132">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id133">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-33">Nuitka Release 0.5.33</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id134">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id135">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id136">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id137">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id138">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id139">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id140">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-32">Nuitka Release 0.5.32</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id141">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id142">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id143">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id144">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id145">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id146">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id147">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-31">Nuitka Release 0.5.31</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id148">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id149">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id150">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id151">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id152">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id153">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-30">Nuitka Release 0.5.30</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id154">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id155">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id156">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id157">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id158">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id159">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id160">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-29">Nuitka Release 0.5.29</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id161">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id162">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id163">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id164">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id165">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id166">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-28">Nuitka Release 0.5.28</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id167">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id168">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id169">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id170">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id171">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id172">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id173">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-27">Nuitka Release 0.5.27</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id174">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id175">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id176">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id177">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id178">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id179">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id180">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-26">Nuitka Release 0.5.26</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id181">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id182">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id183">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id184">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id185">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id186">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id187">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-25">Nuitka Release 0.5.25</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id188">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id189">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id190">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id191">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id192">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id193">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id194">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-24">Nuitka Release 0.5.24</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id195">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id196">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id197">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id198">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-23">Nuitka Release 0.5.23</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id199">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id200">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id201">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id202">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id203">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id204">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-22">Nuitka Release 0.5.22</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id205">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id206">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id207">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id208">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-21">Nuitka Release 0.5.21</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id209">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id210">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id211">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id212">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id213">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id214">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-20">Nuitka Release 0.5.20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id215">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id216">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id217">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id218">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-19">Nuitka Release 0.5.19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id219">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id220">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id221">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id222">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-18">Nuitka Release 0.5.18</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id223">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id224">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id225">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id226">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id227">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-17">Nuitka Release 0.5.17</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id228">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id229">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id230">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id231">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id232">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id233">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id234">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-16">Nuitka Release 0.5.16</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id235">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id236">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id237">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id238">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id239">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id240">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-15">Nuitka Release 0.5.15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id241">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id242">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id243">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id244">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id245">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id246">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-14">Nuitka Release 0.5.14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id247">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id248">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id249">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id250">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id251">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id252">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id253">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-13">Nuitka Release 0.5.13</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id254">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id255">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id256">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id257">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id258">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id259">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id260">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-12">Nuitka Release 0.5.12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id261">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id262">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id263">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id264">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id265">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id266">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-11">Nuitka Release 0.5.11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id267">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id268">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id269">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id270">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id271">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id272">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-10">Nuitka Release 0.5.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id273">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id274">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleanup">Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id275">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id276">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id277">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-9">Nuitka Release 0.5.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id278">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id279">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id280">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id281">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id282">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id283">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-8">Nuitka Release 0.5.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id284">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id285">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id286">Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id287">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id288">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id289">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-7">Nuitka Release 0.5.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id290">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id291">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id292">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id293">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id294">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id295">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-6">Nuitka Release 0.5.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id296">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id297">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id298">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id299">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id300">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-5">Nuitka Release 0.5.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id301">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id302">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id303">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id304">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id305">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id306">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id307">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-4">Nuitka Release 0.5.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id308">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id309">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id310">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id311">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id312">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-3">Nuitka Release 0.5.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id313">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id314">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id315">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-tests">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id316">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id317">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id318">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-2">Nuitka Release 0.5.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id319">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id320">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id321">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id322">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id323">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id324">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id325">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-1">Nuitka Release 0.5.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id326">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id327">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id328">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id329">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id330">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-5-0">Nuitka Release 0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id331">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id332">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id333">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id334">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id335">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id336">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-7">Nuitka Release 0.4.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id337">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id338">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id339">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id340">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id341">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id342">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id343">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-6">Nuitka Release 0.4.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id344">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id345">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id346">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id347">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id348">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id349">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-5">Nuitka Release 0.4.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id350">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id351">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id352">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id353">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id354">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-4">Nuitka Release 0.4.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id355">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id356">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id357">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id358">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id359">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id360">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id361">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-3">Nuitka Release 0.4.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id362">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id363">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id364">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id365">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id366">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id367">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id368">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-2">Nuitka Release 0.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id369">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id370">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id371">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id372">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id373">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id374">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-1">Nuitka Release 0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id375">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id376">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id377">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id378">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id379">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id380">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id381">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-4-0">Nuitka Release 0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id382">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id383">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id384">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id385">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id386">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id387">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id388">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-25">Nuitka Release 0.3.25</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id389">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id390">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id391">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id392">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id393">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id394">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id395">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-24">Nuitka Release 0.3.24</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id396">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id397">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id398">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id399">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id400">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id401">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-23">Nuitka Release 0.3.23</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id402">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id403">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id404">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id405">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id406">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-22">Nuitka Release 0.3.22</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id407">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id408">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id409">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id410">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id411">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id412">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id413">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-21">Nuitka Release 0.3.21</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id414">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id415">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id416">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id417">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id418">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id419">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-20">Nuitka Release 0.3.20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id420">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id421">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id422">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id423">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id424">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id425">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id426">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-19">Nuitka Release 0.3.19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id427">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id428">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id429">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id430">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id431">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id432">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id433">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-18">Nuitka Release 0.3.18</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id434">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id435">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id436">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id437">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id438">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id439">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-17">Nuitka Release 0.3.17</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id440">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id441">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id442">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id443">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id444">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id445">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id446">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-16">Nuitka Release 0.3.16</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id447">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id448">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id449">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id450">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id451">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id452">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id453">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-15">Nuitka Release 0.3.15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id454">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id455">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id456">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id457">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id458">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id459">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id460">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-14">Nuitka Release 0.3.14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id461">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id462">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id463">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id464">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id465">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id466">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id467">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-13">Nuitka Release 0.3.13</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id468">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id469">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id470">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id471">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id472">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id473">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-12">Nuitka Release 0.3.12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id474">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id475">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id476">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id477">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id478">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-11">Nuitka Release 0.3.11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id479">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id480">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id481">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id482">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id483">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#numbers">Numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id484">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-10">Nuitka Release 0.3.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id485">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id486">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id487">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id488">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id489">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id490">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-9">Nuitka Release 0.3.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id491">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id492">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-calls">Function Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameter-parsing">Parameter Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attribute-access">Attribute Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iteration">Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#built-ins">Built-ins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id493">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id494">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id495">Organisational</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-8">Nuitka Release 0.3.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id496">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id497">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id498">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id499">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id500">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id501">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-7">Nuitka Release 0.3.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id502">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id503">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id504">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id505">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id506">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id507">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-6">Nuitka Release 0.3.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id508">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id509">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id510">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id511">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id512">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id513">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id514">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-5">Nuitka Release 0.3.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id515">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id516">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id517">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id518">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id519">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id520">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id521">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-4">Nuitka Release 0.3.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id522">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id523">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id524">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id525">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id526">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id527">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id528">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-3">Nuitka Release 0.3.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id529">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generators">Generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id530">Function Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#others">Others</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id531">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id532">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id533">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id534">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id535">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id536">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-2">Nuitka Release 0.3.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id537">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id538">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id539">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id540">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id541">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id542">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-1">Nuitka Release 0.3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id543">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id544">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id545">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-3-0">Nuitka Release 0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id546">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-enhancements">Performance Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id547">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id548">Numbers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-2-4">Nuitka Release 0.2.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id549">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id550">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id551">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id552">New Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-2-3">Nuitka Release 0.2.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id553">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduced-differences-new-features">Reduced Differences / New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests-work">Tests Work</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id554">Cleanups</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-2-2">Nuitka Release 0.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id555">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduced-differences">Reduced Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id556">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id557">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id558">Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id559">New Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id560">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-2-1">Nuitka Release 0.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id561">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id562">Reduced Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id563">Cleanups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id564">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-2">Nuitka Release 0.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id565">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id566">Organisational</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id567">Reduced Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id568">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id569">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nuitka-release-0-1-1">Nuitka Release 0.1.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="nuitka-release-0-6-20-draft">
<h1>Nuitka Release 0.6.20 (Draft)<a class="headerlink" href="#nuitka-release-0-6-20-draft" title="Permalink to this headline"></a></h1>
<section id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">set</span></code> creation wasnt annotating its possible exception exit
from hashing values and is not as free of side effects as <code class="docutils literal notranslate"><span class="pre">list</span></code>
and <code class="docutils literal notranslate"><span class="pre">tuple</span></code> creations are. Fixed in 0.6.19.1 already.</p></li>
<li><p>Windows: Fix, experimental options got lost when switching from MSVC
to MinGW64, making them have no effect. Fixed in 0.6.19.1 already.</p></li>
<li><p>Windows: Fix, Clang from MinGW64 doesnt support LTO at this time,
default to <code class="docutils literal notranslate"><span class="pre">no</span></code> for it. Fixed in 0.6.19.1 already.</p></li>
<li><p>Debian: Fix, failed to detect Debian unstable as suitable for
linking, it doesnt have the release number. Fixed in 0.6.19.1
already.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">pygsheets</span></code> package.</p></li>
<li><p>Fix, paths from plugin related file paths need to be made absolute
before used internally, otherwise the cache can fail to deduplicate
them. Fixed in 0.6.19.2 already.</p></li>
<li><p>Python3: With gcc before 5, e.g. on CentOS 7, where we switch to
using <code class="docutils literal notranslate"><span class="pre">g++</span></code>, the gcc version checks could crash. Fixed in 0.6.19.2
already.</p></li>
<li><p>Windows: Disable MinGW64 wildcard expansion for command line
arguments. This was breaking command lines with arguments like
<code class="docutils literal notranslate"><span class="pre">--filename</span> <span class="pre">*.txt</span></code>, which under <code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> are left alone by the
shell, and are to be expanded by the program. Fixed in 0.6.19.2
already.</p></li>
<li><p>Standalone: Added missing implicit dependency needed for
<code class="docutils literal notranslate"><span class="pre">--follow-stdlib</span></code> with Python for some uses of the <code class="docutils literal notranslate"><span class="pre">locale</span></code>
module. Fixed in 0.6.19.2 already.</p></li>
<li><p>Standalone: Added workarounds for newest <code class="docutils literal notranslate"><span class="pre">numpy</span></code> that wants to set
<code class="docutils literal notranslate"><span class="pre">__code__</span></code> objects and required improvements for macOS library
handling. Fixed in 0.6.19.3 already.</p></li>
<li><p>Windows: Caching of DLL dependencies for main programs was not really
working, requiring to detect them anew for every standalone
compilation. Fixed in 0.6.19.3 already.</p></li>
<li><p>Fix, wasnt checking the <code class="docutils literal notranslate"><span class="pre">zstandard</span></code> version and as a result could
crash if too old versions of it. This is now checked.</p></li>
<li><p>Windows: Fix, CTRL-C from a terminal was not propagated to child
processes on Windows. Fixed in 0.6.19.4 already.</p></li>
<li><p>Standalone: With <code class="docutils literal notranslate"><span class="pre">certifi</span></code> and Python3.10 the
<code class="docutils literal notranslate"><span class="pre">importlib.resource</span></code> could trigger Virus scanner inflicted file
access errors. Fixed in 0.6.19.4 already.</p></li>
<li><p>Python3.10: Reverted error back iteration past end of generator
change for Python 3.10.2 or higher to become compatible with that
too. Fixed in 0.6.19.5 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">anyio</span></code> and by proxy for Solana.
Fixed in 0.6.19.5 already.</p></li>
<li><p>Fix, compilation with resource mode <code class="docutils literal notranslate"><span class="pre">incbin</span></code> and <code class="docutils literal notranslate"><span class="pre">--debugger</span></code> was
not working together. Fixed in 0.6.19.5 already.</p></li>
<li><p>Fix, format optimization of known <code class="docutils literal notranslate"><span class="pre">str</span></code> objects was not properly
annotating its exception exit while being optimized away. Fixed in
0.6.19.5 already.</p></li>
<li><p>Windows: Fix, <code class="docutils literal notranslate"><span class="pre">clcache</span></code> didnt work for non-standard encoding
source paths due to using th direct mode, where wrong filenames are
output by MSVC. Fixed in 0.6.19.5 already.</p></li>
<li><p>Windows: Fix, <code class="docutils literal notranslate"><span class="pre">ccache</span></code> cannot handle source code paths for
non-standard encoding source paths. Fixed in 0.6.19.5 already.</p></li>
<li><p>Python2.6: Fix, calls to <code class="docutils literal notranslate"><span class="pre">iteritems</span></code> and <code class="docutils literal notranslate"><span class="pre">iterkeys</span></code> on known
dictionary values could give wrong values. Fixed in 0.6.19.5 already.</p></li>
<li><p>Fix, the value of <code class="docutils literal notranslate"><span class="pre">__module__</span></code> if set by the metaclass was
overwritten when creating types. Fixed in 0.6.19.6 already.</p></li>
<li><p>Plugins: Add support for the latest version of <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> that
has vendored even more packages. Fixed in 0.6.19.6 already.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added support for compression in onefile mode through the use of an
other Python installation, that has the <code class="docutils literal notranslate"><span class="pre">zstandard</span></code> module
installed. With this it will work with 2.6 or higher, but require a
3.5 or higher Python with it installed in either <code class="docutils literal notranslate"><span class="pre">PATH</span></code> or on
Windows in the registry alternatively.</p></li>
<li><p>Added UPX plugin to compress created extension modules and binaries
and for standalone mode, the included DLLs. For onefile, the
compression is not useful since it is as payload already compressed.</p></li>
<li><p>Added more explicit way to list usable MSVC versions with
<code class="docutils literal notranslate"><span class="pre">--msvc=list</span></code> rather than requiring an invalid value. Check values
given in the same way that Scons will do.</p></li>
</ul>
</section>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Standalone: Do not include <code class="docutils literal notranslate"><span class="pre">encodings.bz2_codec</span></code> and
<code class="docutils literal notranslate"><span class="pre">encodings.idna</span></code> anymore, these are not file system encodings, but
require extension modules.</p></li>
</ul>
</section>
<section id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>There is now a <a class="reference external" href="https://discord.gg/nZ9hr9tUck">Discord server for Nuitka community</a> where you can hang out with the
developers and ask questions. It is mirrored with the Gitter
community chat, but offers more features.</p></li>
<li><p>Added section to User Manual that explains how to manually load
files, such that it is cleaner and compatible code.</p></li>
<li><p>Report the MSVC version in Scons output during compilation.</p></li>
</ul>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release is not done yet.</p>
</section>
</section>
<section id="nuitka-release-0-6-19">
<h1>Nuitka Release 0.6.19<a class="headerlink" href="#nuitka-release-0-6-19" title="Permalink to this headline"></a></h1>
<p>This release adds support for 3.10 while also adding very many new
optimization, and doing a lot of bug fixes.</p>
<section id="id1">
<h2>Bug Fixes<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Calls to <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> with expressions that need
releases, i.e. are not constant values, could crash the compilation.
Fixed in 0.6.18.1 already.</p></li>
<li><p>After a fix for the previous release, modules that fail to import are
attempted again when another import is executed. However, during this
initialization for top level module in <code class="docutils literal notranslate"><span class="pre">--module</span></code> mode, this was
was done repeatedly, and could cause issues. Fixed in 0.6.18.1
already.</p></li>
<li><p>Standalone: Ignore warning given by <code class="docutils literal notranslate"><span class="pre">patchelf</span></code> on Linux with at
least newer OpenSUSE. Fixed in 0.6.18.1 already.</p></li>
<li><p>Fix, need to avoid computing large values out of <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operation as
well. Fixed in 0.6.18.2 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This large value was computed at runtime and then if used, also</span>
<span class="c1"># converted to a string and potentially hashed, taking a long time.</span>
<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Ignore warning given by <code class="docutils literal notranslate"><span class="pre">patchelf</span></code> on Linux about a
workaround being applied.</p></li>
<li><p>Fix, calls to <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> were not correctly creating
code for dynamic argument values that need to be released, causing
the compilation to report the error. Fixed in 0.6.18.1 already.</p></li>
<li><p>MSYS2: Fix, the console scripts are actually good for it as opposed
to CPython, and the batch scripts should not be installed. Fixed in
0.6.18.2 already.</p></li>
<li><p>Setuptools: Added support older version of <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> in meta
<code class="docutils literal notranslate"><span class="pre">build</span></code> integration of Nuitka.</p></li>
<li><p>Fix, calls to <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> with 2 arguments that are
dynamic, were not working at all. Fixed in 0.6.18.2 already.</p></li>
<li><p>Windows: Compiling with MinGW64 without <code class="docutils literal notranslate"><span class="pre">ccache</span></code> was not working
due to issues in Scons. Fixed in 0.6.18.2 already.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">repr</span></code> built-in was falsely annotated as producing a
<code class="docutils literal notranslate"><span class="pre">str</span></code> value, but it can be also derived or <code class="docutils literal notranslate"><span class="pre">unicode</span></code> in Python2.</p></li>
<li><p>Fix, attribute nodes were not considering the value they are looking
up on. Now that more values will know to have the attributes, that
was causing errors. Fixed in 0.6.18.2 already.</p></li>
<li><p>Fix, left shifting can also produce large values and needs to be
avoided in that case, similar to what we do for multiplications
already. Fixed in 0.6.18.2 already.</p></li>
<li><p>UI: The new option <code class="docutils literal notranslate"><span class="pre">--disable-ccache</span></code> didnt really have the
intended effect. Fixed in 0.6.18.3 already.</p></li>
<li><p>UI: The progress bar was causing tearing and corrupted outputs, when
outputs were made, now using proper <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> API for doing it, this
has been solved. Fixed in 0.6.18.4 already.</p></li>
<li><p>Fix, the constant value <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> didnt yet have support
for its type to be also a compile time constant in e.g. tuples. Fixed
in 0.6.18.4 already.</p></li>
<li><p>Onefile: Assertions were not disabled, and on Windows with MinGW64
this lead to including the C filenames of the <code class="docutils literal notranslate"><span class="pre">zstd</span></code> inline copy
files and obviously less optimal code. Fixed in 0.6.18.4 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">bottle.ext</span></code> loading extensions to
resolve at compile time. Fixed in 0.6.18.5 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">seedir</span></code> required data file. Fixed in
0.6.18.5 already.</p></li>
<li><p>MSYS2: Failed to link when using the static libpython, which is also
now the default for MSYS2. Fixed in 0.6.18.5 already.</p></li>
<li><p>Python3.6+: Fix, the intended finalizer of compiled <code class="docutils literal notranslate"><span class="pre">asyncgen</span></code> was
not present and in fact associated to help type. This could have
caused corruption, but that was also very unlikely. Fixed in 0.6.18.5
already.</p></li>
<li><p>Python3: Fix, need to set <code class="docutils literal notranslate"><span class="pre">__file__</span></code> before executing modules, as
some modules, e.g. newer PyWin32 use them to locate things during
their initialization already.</p></li>
<li><p>Standalone: Handle all PyWin32 modules that need the special DLLs and
not just a few.</p></li>
<li><p>Fix, some <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files create module namespaces with <code class="docutils literal notranslate"><span class="pre">__path__</span></code>
that does not exist, ignore these in module importing.</p></li>
<li><p>Python2.6-3.4: Fix, modules with an error could use their module name
after it was released.</p></li>
<li><p>Distutils: When providing arguments, the method suggested in the docs
is not compatible with all other systems, e.g. not
<code class="docutils literal notranslate"><span class="pre">setuptools_rust</span></code> for which a two elemented tuple form needs to be
used for values. Added support for that and documented its use as
well in the User Manual.</p></li>
<li><p>Python3.7+: Do no longer allow deleting cell values, this can lead to
corruption and should be avoided, it seems unlikely outside of tests
anyway.</p></li>
<li><p>Standalone: Added support for more ciphers and hashes with
<code class="docutils literal notranslate"><span class="pre">pycryptodome</span></code> and <code class="docutils literal notranslate"><span class="pre">pycryptodomex</span></code>, while also only including
Ciphers when needed.</p></li>
<li><p>Distutils: Was not including modules or packages only referenced in
the entry point definition, but not in the list of packages. That is
not compatible and has been fixed.</p></li>
<li><p>Fix, must not expose the constants blob from extension modules, as
loading these into a compiled binary can cause issues in this case.</p></li>
<li><p>Standalone: Added support for including OpenGL and SSL libraries with
<code class="docutils literal notranslate"><span class="pre">PySide2</span></code> and <code class="docutils literal notranslate"><span class="pre">PySide6</span></code> packages.</p></li>
<li><p>Windows: Fix, the <code class="docutils literal notranslate"><span class="pre">cmd</span></code> files created for uninstalled Python and
accelerated programs to find the Python installation were not passing
command line arguments.</p></li>
<li><p>Windows: Executing modules with <code class="docutils literal notranslate"><span class="pre">--run</span></code> was not working properly
due to missing escaping of file paths.</p></li>
<li><p>Fix, parsing <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> files that make relative imports was not
resolving them correctly.</p></li>
<li><p>Python3: Fix, when disabling the console on Windows, make sure the
file handles still work and are not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>Windows: Fix, need to claim all OS versions of Windows as supported,
otherwise e.g. high DPI features are not available.</p></li>
</ul>
</section>
<section id="id2">
<h2>New Features<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Programs that are to be executed with the <code class="docutils literal notranslate"><span class="pre">-m</span></code> flag, can now be
compiled with <code class="docutils literal notranslate"><span class="pre">--python-flag=-m</span></code> and will then behave in a
compatible way, i.e. load the containing package first, and have a
proper <code class="docutils literal notranslate"><span class="pre">__package__</span></code> value at run time.</p></li>
<li><p>We now can write XML reports with information about the compilation.
This is initially for use in PGO tests, to decide if the expected
forms of inclusions have happened and should grow into a proper
reporting tool over time. At this point, the report is not very
useful yet.</p></li>
<li><p>Added support for Python 3.10, only <code class="docutils literal notranslate"><span class="pre">match</span></code> statements are not
completely supported. Variations with <code class="docutils literal notranslate"><span class="pre">|</span></code> matches that also assign
are not allowed currently.</p></li>
<li><p>Windows: Allow using <code class="docutils literal notranslate"><span class="pre">--clang</span></code> with <code class="docutils literal notranslate"><span class="pre">--mingw64</span></code> to e.g. use the
<code class="docutils literal notranslate"><span class="pre">clang.exe</span></code> that is contained in the Nuitka automatic download
rather than <code class="docutils literal notranslate"><span class="pre">gcc.exe</span></code>.</p></li>
<li><p>Added support for Kivy. Works through a plugin that is automatically
enabled and needs no other inputs, detecting everything from using
Kivy at compile time.</p></li>
<li><p>Added initial support for Haiku OS, a clone of BeOS with a few
differences in their Python installation.</p></li>
<li><p>Added experimental plugin <code class="docutils literal notranslate"><span class="pre">trio</span></code> that works around issues with that
package.</p></li>
</ul>
</section>
<section id="id3">
<h2>Optimization<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Also trust hard imports made on the module level in function level
code, this unlocks many more static optimization e.g. with
<code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> when the import and the use are not on the same
level.</p></li>
<li><p>For the built-in type method calls with generic implementation, we
now do faster method descriptor calls. These avoid creating a
temporary <code class="docutils literal notranslate"><span class="pre">PyCFunction</span></code> object, that the normal call slot would,
this should make these calls faster. Checking them for compiled
function, etc. was only wasteful, so this makes it more direct.</p></li>
<li><p>Loop and normal merge traces were keeping assignments made before the
loop or inside a branch, that was otherwise unused alive. This should
enable more optimization for code with branches and loops. Also
unused loop traces are now recognized and removed as well.</p></li>
<li><p>Avoiding merges of escaped traces with the unescaped trace, there is
no point in them. This was actually happening a lot and should mean a
scalability improvement and unlock new optimization as well.</p></li>
<li><p>Avoid escaping un-init traces. Unset values need not be considered as
potentially modified as that cannot be done.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">str</span></code> shape is now detected through variables, this enables
many optimization on the function level.</p></li>
<li><p>Added many <code class="docutils literal notranslate"><span class="pre">str</span></code> operation nodes.</p>
<p>These are specifically all methods with no arguments, as these are
very generic to add, introduced a base class for them, where we know
they all have no effect or raise, as these functions are all
guaranteed to succeed and can be served by a common base class.</p>
<p>This covers the <code class="docutils literal notranslate"><span class="pre">str.capitalize</span></code>, <code class="docutils literal notranslate"><span class="pre">str.upper</span></code>, <code class="docutils literal notranslate"><span class="pre">str.lower</span></code>,
<code class="docutils literal notranslate"><span class="pre">str.swapcase</span></code>, <code class="docutils literal notranslate"><span class="pre">str.title</span></code>, <code class="docutils literal notranslate"><span class="pre">str.isalnum</span></code>, <code class="docutils literal notranslate"><span class="pre">str.isalpha</span></code>,
<code class="docutils literal notranslate"><span class="pre">str.isdigit</span></code>, <code class="docutils literal notranslate"><span class="pre">str.islower</span></code>, <code class="docutils literal notranslate"><span class="pre">str.isupper</span></code>, <code class="docutils literal notranslate"><span class="pre">str.isspace</span></code>,
and <code class="docutils literal notranslate"><span class="pre">str.istitle</span></code> functions.</p>
<p>For static optimization <code class="docutils literal notranslate"><span class="pre">str.find</span></code> and <code class="docutils literal notranslate"><span class="pre">str.rfind</span></code> were added, as
they are e.g. used in a <code class="docutils literal notranslate"><span class="pre">sys.version.find(...)</span></code> style in the <code class="docutils literal notranslate"><span class="pre">os</span></code>
module, helping to decide to not consider <code class="docutils literal notranslate"><span class="pre">OS/2</span></code> only modules.</p>
<p>Then, support for <code class="docutils literal notranslate"><span class="pre">str.index</span></code> and <code class="docutils literal notranslate"><span class="pre">str.rindex</span></code> was added, as
these are very similar to <code class="docutils literal notranslate"><span class="pre">str.find</span></code> forms, only that these may
raise an exception.</p>
<p>Also add support for <code class="docutils literal notranslate"><span class="pre">str.split</span></code> and <code class="docutils literal notranslate"><span class="pre">str.rsplit</span></code> which will be
used sometimes for code needed to be compile time computed, to e.g.
detect imports.</p>
<p>Same goes for <code class="docutils literal notranslate"><span class="pre">endswith</span></code> and <code class="docutils literal notranslate"><span class="pre">startswith</span></code>, the later is e.g.
popular with <code class="docutils literal notranslate"><span class="pre">sys.platform</span></code> checks, and can remove a lot of code
from compilation with them now being decided at compile time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A few <code class="docutils literal notranslate"><span class="pre">str</span></code> methods are still missing, with time we will achieve
all of them, but this will take time.</p>
</div>
</li>
<li><p>Added trust for <code class="docutils literal notranslate"><span class="pre">sys.builtin_module_names</span></code> as well. The <code class="docutils literal notranslate"><span class="pre">os</span></code>
module is using it to make platform determinations.</p></li>
<li><p>When writing constant values, esp. <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, or <code class="docutils literal notranslate"><span class="pre">dict</span></code>
values, an encoding of last value has been added, avoiding the need
to repeat the same value again, making many values more compact.</p></li>
<li><p>When starting Nuitka, it usually restarts itself with information
collected in a mode without the <code class="docutils literal notranslate"><span class="pre">site</span></code> module loaded, and with hash
randomization disabled, for deterministic behaviour. There is a
option to prevent this from happening, where the goal is to avoid it,
e.g. in testing, say for the coverage taking, but that meant to parse
the options twice, which also loads a lot of code.</p>
<p>Now only a minimal amount of code is used, and the options are parsed
only on the restart, and then an error is raised when it notices, it
was not allowed to do so. This also makes code a lot cleaner.</p>
</li>
<li><p>Specialized comparison code for Python2 <code class="docutils literal notranslate"><span class="pre">long</span></code> and Python3 <code class="docutils literal notranslate"><span class="pre">int</span></code>
code, making these operations much faster to use.</p></li>
<li><p>Specialized comparison code for Python2 <code class="docutils literal notranslate"><span class="pre">unicode</span></code> and Python3
<code class="docutils literal notranslate"><span class="pre">str</span></code> code, making these operations much faster to use, currently
only <code class="docutils literal notranslate"><span class="pre">==</span></code> and <code class="docutils literal notranslate"><span class="pre">!=</span></code> are fully accelerated, the other comparisons
will follow.</p></li>
<li><p>Enable static libpython with Python3 Debian packages too. As with
Python2, this will improve the performance of the created binary a
lot and reduce size for standalone distribution.</p></li>
<li><p>Comparisons with <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> also consider value traces and
go through variables as well where possible. So far only the rich
comparisons and <code class="docutils literal notranslate"><span class="pre">is</span></code> and <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code> did that.</p></li>
<li><p>Create fixed import nodes in re-formulations rather than
<code class="docutils literal notranslate"><span class="pre">__import__</span></code> nodes, avoiding later optimization doing that, and of
course thats simpler code too.</p></li>
<li><p>Python 3.10: Added support for <code class="docutils literal notranslate"><span class="pre">union</span></code> types as compiled time
constants.</p></li>
<li><p>Modules are now fully optimized before considering which modules they
are in turn using, this avoids temporary dependencies, that later
turn out unused, and can shorten the compilation in some cases by a
lot of time.</p></li>
<li><p>On platforms without a static link library, in LTO mode, and with
gcc, we can use the <code class="docutils literal notranslate"><span class="pre">-O3</span></code> mode, which doesnt work for
<code class="docutils literal notranslate"><span class="pre">libpython</span></code>, but thats not used there. This also includes fake
static libpython, as used by MinGW64 and Anaconda on Windows.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin now also handles newer <code class="docutils literal notranslate"><span class="pre">sklearn</span></code> and
knows more about the standard library, and its runners which it will
exclude from compilation if use for it. Currently that is not the
default, but it should become that.</p></li>
</ul>
</section>
<section id="id4">
<h2>Organisational<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Migrated the Nuitka blog from Nikola to Sphinx based ABlog and made
the whole site render with Sphinx, making it a lot more usable.</p></li>
<li><p>Added a small presentation about Nuitka on the Download page, to make
sure people are aware of core features.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">gi</span></code> plugin is now always on. The copying of the typelib when
<code class="docutils literal notranslate"><span class="pre">gi</span></code> is imported is harmless and people can disable the plugin if
thats not needed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> plugin is new and also always on. It previously
was part of the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> plugin, which is doing too many unrelated
things. Moving this one out is part of a plan to split it up and have
it on by default without causing issues.</p></li>
<li><p>MSYS2: Detecting <code class="docutils literal notranslate"><span class="pre">MinGW</span></code> and <code class="docutils literal notranslate"><span class="pre">POSIX</span></code> flavors of this Python. For
the <code class="docutils literal notranslate"><span class="pre">MinGW</span></code> flavor of MSYS2, the option <code class="docutils literal notranslate"><span class="pre">--mingw64</span></code> is now the
default, before it could attempt to use MSVC, which is not going to
work for it. And also the Tcl and Tk installations of it are being
detected automatically for the <code class="docutils literal notranslate"><span class="pre">tk-inter</span></code> plugin.</p></li>
<li><p>Added Windows version to Nuitka version output, so we have this for
bug reports.</p></li>
<li><p>User Manual: Added example explaining how to access values from your
code in Nuitka project options.</p></li>
<li><p>UI: For Python flavors where we expect a static libpython, the error
message will now point out how to achieve it for each flavor.</p></li>
<li><p>UI: Disable progress bar when <code class="docutils literal notranslate"><span class="pre">--show-scons</span></code> is used, it makes
capturing the output from the terminal only harder.</p></li>
<li><p>UI: Catch error of specifying both <code class="docutils literal notranslate"><span class="pre">--msvc=</span></code> and <code class="docutils literal notranslate"><span class="pre">--mingw64</span></code>
options.</p></li>
<li><p>Distutils: Improved error messages when using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> or
<code class="docutils literal notranslate"><span class="pre">build</span></code> integration and failing to provide packages to compile.</p></li>
<li><p>Plugins: Removed now unused feature to rename modules on import, as
it was only making the code more complex, while being no more needed
after recently adding a place for meta path based importers to be
accounted for.</p></li>
<li><p>Twitter: Use embedded Tweet in Credits, and regular follow button in
User Manual.</p></li>
<li><p>Warnings about imports not done, are now only given when optimization
can not remove the usage, and no options relatved to following have
been given.</p></li>
<li><p>Added Windows version to <code class="docutils literal notranslate"><span class="pre">--version</span></code> output of Nuitka. This is to
more clearly recognize Windows 10 from Windows 11 report, and also
the odd Windows 7 report, where tool chain will be different.</p></li>
<li><p>In Visual Code, the default Python used is now 3.9 in the Linux C
configuration. This matches Debian Bullseye.</p></li>
<li><p>Nicer outputs from check mode of the autoformat as run for CI
testing, displays problematic files more clearly.</p></li>
<li><p>Remove broken links to old bug tracker that is no longer online from
the Changelog.</p></li>
<li><p>UI: When hitting CTRL-C during initial technical import detection, no
longer ask to submit a bug report with the exception stack, instead
exit cleanly.</p></li>
<li><p>Windows: Enable LTO mode for MinGW64 and other gcc by default. We
require a version that can do it, so take advantage of that.</p></li>
<li><p>For cases, where code generation of a module takes long, make sure
its name is output when CTRL-C is hit.</p></li>
<li><p>Windows: Splash screen only works with MSVC, added error indicator
for MinGW64 that states that and asks for porting help.</p></li>
</ul>
</section>
<section id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Generate all existing C code for generic builtin type method calls
automatically, and use those for method attribute lookups, making it
easier to add more.</p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">TkInter</span></code> module to data file providing interface, yielding
the 2 directories in question, with a filter for <code class="docutils literal notranslate"><span class="pre">demos</span></code>.</p></li>
<li><p>The importing code got a major overhaul and no longer works with
relative filenames, or filenames combined with package names, and
module names, but always only with module names and absolute
filenames. This cleans up some of the oldest and most complex code in
Nuitka, that had grown to address various requirements discovered
over time.</p></li>
<li><p>Major cleanup of Jinja2 template organisation.</p>
<p>Renamed all C templates from <code class="docutils literal notranslate"><span class="pre">.j2</span></code> to <code class="docutils literal notranslate"><span class="pre">.c.j2</span></code> for clarity, this
was not done fully consistent before. Also move all C templates to
<code class="docutils literal notranslate"><span class="pre">nuitka.codegen</span></code> package data, it will be confusing to make a
difference between ones used during compile time and for the static
generation, and the lines are going to become blurry.</p>
<p>Added Jinja2 new macro <code class="docutils literal notranslate"><span class="pre">CHECK_OBJECTS</span></code> to avoid branches on
argument count in the call code templates. More of these things
should be added.</p>
<p>Cleanup of code that generates header declarations, there was some
duplication going on, that made it hard to generate consistent code.</p>
</li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">nuitka.finalizatios.FinalizationBase</span></code>, we only have one
final visitor that does everything, and that of course makes a lot of
sense for its performance.</p></li>
<li><p>Major cleanup of the Scons C compiler configuration setup. Moved
things to the dedicate function, and harmonized it more.</p></li>
<li><p>Resolved deprecation warnings given by with <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> for
Nuitka.</p></li>
</ul>
</section>
<section id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Started test suite for Python PGO, not yet completely working though,
its not yet doing what is needed though.</p></li>
<li><p>Added generated test that exercises str methods in multiple
variations.</p></li>
<li><p>Revived <code class="docutils literal notranslate"><span class="pre">reflected</span></code> test suite, that had been removed, because of
Nuitka special needs. This one is not yet passing again though, due
to a few details not yet being as compatible as needed.</p></li>
<li><p>Added test suite for CPython 3.10 and enable execution of tests with
this version on Github actions.</p></li>
</ul>
</section>
<section id="id5">
<h2>Summary<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h2>
<p>This release is another big step forward.</p>
<p>The amount of optimization added is again very large, some of which yet
again unlocks more static optimization of module imports, that
previously would have to be considered implicit. Now analysing these on
the function level as well, we can start searching for cases, where it
could be done, but is not done yet.</p>
<p>After starting with <code class="docutils literal notranslate"><span class="pre">dict</span></code>, method optimization has focused on <code class="docutils literal notranslate"><span class="pre">str</span></code>
which is esp. important for static optimization of imports. The next
goal will here be to cover <code class="docutils literal notranslate"><span class="pre">list</span></code> which are important for run time
performance and currently not yet optimized. Future releases will
progress there, and also add more types.</p>
<p>The C type specialization for Python3 has finally progressed, such that
it is also covering the <code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">unicode</span></code> and as such not limited
to Python2 as much. The focus now needs to turn back to not working with
<code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> for these types, but e.g. with <code class="docutils literal notranslate"><span class="pre">+=</span> <span class="pre">1</span></code> to make it
directly work with <code class="docutils literal notranslate"><span class="pre">CLONG</span></code> rather than <code class="docutils literal notranslate"><span class="pre">LONG</span></code> for which structural
changes in code generation will be needed.</p>
<p>For scalability, the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> work has not yet progressed as much
as to be able to enable it by default. It needs to be more possible to
disable it where it causes problems, e.g. when somebody really wants to
include <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and test frameworks generally, thats something that
needs to be doable. Compiling without <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin is something
that is immediately noticeable in exploding module amounts. It is very
urgently recommended to enable it for your compilations.</p>
<p>The support for Windows has been further refined, actually fixing a few
important issues, esp. for the Qt bindings too.</p>
<p>This release adds support for 3.10 outside of very special <code class="docutils literal notranslate"><span class="pre">match</span></code>
statements, bringing Nuitka back to where it works great with recent
Python. Unfortunately <code class="docutils literal notranslate"><span class="pre">orderedset</span></code> is not available for it yet, which
means it will be slower than 3.9 during compilation.</p>
<p>Overall, Nuitka is closing many open lines of action with this. The
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> support has yet again improved and at this point should
be very good.</p>
</section>
</section>
<section id="nuitka-release-0-6-18">
<h1>Nuitka Release 0.6.18<a class="headerlink" href="#nuitka-release-0-6-18" title="Permalink to this headline"></a></h1>
<p>This release has a focus on new features of all kinds, and then also new
kinds of performance improvements, some of which enable static
optimization of what normally would be dynamic imports, while also
polishing plugins and adding also many new features and a huge amount of
organisational changes.</p>
<section id="id6">
<h2>Bug Fixes<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Python3.6+: Fixes to asyncgen, need to raise <code class="docutils literal notranslate"><span class="pre">StopAsyncInteration</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> in some situations to be fully
compatible.</p></li>
<li><p>Onefile: Fix, LTO mode was always enabled for onefile compilation,
but not all compilers support it yet, e.g. MinGW64 did not. Fixed in
0.6.17.1 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">type</span></code> calls with 3 arguments didnt annotate their potential
exception exit. Fixed in 0.6.17.2 already.</p></li>
<li><p>Fix, trusted module constants were not working properly in all cases.
Fixed in 0.6.17.2 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> exiting with error at compile time for
unresolved requirements in compiled code, but these can of course
still be optional, i.e. that code would never run. Instead give only
a warning, and runtime fail on these. Fixed in 0.6.17.2 already.</p></li>
<li><p>Standalone: Prevent the inclusion of <code class="docutils literal notranslate"><span class="pre">drm</span></code> libraries on Linux, they
have to come from the target OS at runtime. Fixed in 0.6.17.2
already.</p></li>
<li><p>Standalone: Added missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">ipcqueue</span></code>
module. Fixed in 0.6.17.3 already.</p></li>
<li><p>Fix, Qt webengine support for everything but <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> wasnt
working properly. Partially fixed in 0.6.17.3 already.</p></li>
<li><p>Windows: Fix, bootstrap splash screen code for Windows was missing in
release packages. Fixed in 0.6.17.3 already.</p></li>
<li><p>Fix, could crash on known implicit data directories not present.
Fixed in 0.6.17.3 already.</p></li>
<li><p>macOS: Disable download of <code class="docutils literal notranslate"><span class="pre">ccache</span></code> binary for M1 architecture and
systems before macOS 10.14 as it doesnt work on these. Fixed in
0.6.17.3 already.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">pendulum.locals</span></code> handling for Python 3.6 was
regressed. Fixed in 0.6.17.4 already.</p></li>
<li><p>Onefile: Make sure the child process is cleaned up even after its
successful exit. Fixed in 0.6.17.4 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">xmlschema</span></code>. Fixed in 0.6.17.4
already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">curses</span></code> on Windows. Fixed in
0.6.17.4 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">coincurve</span></code> module. Fixed in 0.6.17.5
already.</p></li>
<li><p>Python3.4+: Up until Python3.7 inclusive, a workaround for stream
encoding (was ASCII), causing crashes on output of non-ASCII, other
Python versions are not affected. Fixed in 0.6.17.5 already.</p></li>
<li><p>Python2: Workaround for LTO error messages from older gcc versions.
Fixed in 0.6.17.5 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">win32print</span></code>. Fixed in 0.6.17.6
already.</p></li>
<li><p>Fix, need to prevent usage of static <code class="docutils literal notranslate"><span class="pre">libpython</span></code> in module mode or
else on some Python versions, linker errors can happen. Fixed in
0.6.17.6 already.</p></li>
<li><p>Standalone: Do not load <code class="docutils literal notranslate"><span class="pre">site</span></code> module early anymore. This might
have caused issues in some configurations, but really only would be
needed for loading <code class="docutils literal notranslate"><span class="pre">inspect</span></code> which doesn`t depend on it in
standalone mode. Fixed in 0.6.17.6 already.</p></li>
<li><p>Fix, could crash with generator expressions in finally blocks of
tried blocks that return. Fixed in 0.6.17.7 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
   <span class="k">return</span> <span class="mi">9</span>
<span class="k">finally</span><span class="p">:</span>
   <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="sa">b</span><span class="s2">&quot;some_iterable&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Python3.5+: Compatibility of comparisons with <code class="docutils literal notranslate"><span class="pre">types.CoroutineType</span></code>
and <code class="docutils literal notranslate"><span class="pre">types.AsyncGeneratorType</span></code> types was not yet implemented. Fixed
in 0.6.17.7 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># These already worked:</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">compiledCoroutine</span><span class="p">(),</span> <span class="n">types</span><span class="o">.</span><span class="n">CoroutineType</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">compiledAsyncgen</span><span class="p">(),</span> <span class="n">types</span><span class="o">.</span><span class="n">AsyncGeneratorType</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>

<span class="c1"># These now work too:</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">compiledCoroutine</span><span class="p">())</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">CoroutineType</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">compiledAsyncgen</span><span class="p">())</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">AsyncGeneratorType</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">ruamel.yaml</span></code>. Fixed in 0.6.17.7
already.</p></li>
<li><p>Distutils: Fix, when building more than one package, things could go
wrong. Fixed in 0.6.17.7 already.</p></li>
<li><p>Fix, for module mode filenames are used, and for packages, you can
specify a directory, however, a trailing slash was not working. Fixed
in 0.6.17.7 already.</p></li>
<li><p>Compatibility: Fix, when locating modules, a package directory and an
extension module of the same name were not used according to
priority. Fixed in 0.6.17.7 already.</p></li>
<li><p>Standalone: Added workaround <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> insisting on
Python source files to exist to be able to load datafiles. Fixed in
0.6.17.7 already.</p></li>
<li><p>Standalone: Properly detect usage of hard imports from standard
library in <code class="docutils literal notranslate"><span class="pre">--follow-stdlib</span></code> mode.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">opensapi_spec_validator</span></code>.</p></li>
<li><p>MSYS2: Fix, need to normalize compiler paths before comparing.</p></li>
<li><p>Anaconda: For accelerated binaries, the created <code class="docutils literal notranslate"><span class="pre">.cmd</span></code> file wasnt
containing all needed environment.</p></li>
<li><p>macOS: Set minimum OS version derived from the Python executable
used, this should make it work on all supported platforms (of that
Python).</p></li>
<li><p>Standalone: Added support for automatic inclusion of <code class="docutils literal notranslate"><span class="pre">xmlschema</span></code>
package datafiles.</p></li>
<li><p>Standalone: Added support for automatic inclusion of <code class="docutils literal notranslate"><span class="pre">eel</span></code> package
datafiles.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">h5py</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">phonenumbers</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">feedparser</span></code> package, this currently
depends on the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin to be enabled, which will become
enabled by default in the future.</p></li>
<li><p>Standalone: Added <code class="docutils literal notranslate"><span class="pre">gi</span></code> plugin for said package that copies
<code class="docutils literal notranslate"><span class="pre">typelib</span></code> files and sets the search path for them in standalone
mode.</p></li>
<li><p>Standalone: Added necessary datafiles for <code class="docutils literal notranslate"><span class="pre">eel</span></code> package.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">QtWebEngine</span></code> to all Qt bindings and
also make it work on Linux. Before only PySide2 on Windows was
supported.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">all</span></code> built-in was wrongly assuming that bytes
values could not be false, but in fact they are if they contain
<code class="docutils literal notranslate"><span class="pre">\0</span></code> which is actually false. The same does not happen for string
values, but thats a difference to be considered.</p></li>
<li><p>Windows: The LTO was supposed to be used automatically on with MSVC
14.2 or higher, but that was regressed and has been repaired now.</p></li>
<li><p>Standalone: Extension modules contained in packages, depending on
their mode of loading had the <code class="docutils literal notranslate"><span class="pre">__package__</span></code> value set to a wrong
value, which at least impacted new matplotlib detection of Qt
backend.</p></li>
<li><p>Windows: The <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> was installing binaries for
no good reason.</p></li>
</ul>
</section>
<section id="id7">
<h2>New Features<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Setuptools support. Documented <code class="docutils literal notranslate"><span class="pre">bdist_nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code>
integration and added support for Nuitka as a <code class="docutils literal notranslate"><span class="pre">build</span></code> package
backend in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files. Using Nuitka to build your
wheels is supposed to be easy now.</p></li>
<li><p>Added experimental support for Python 3.10, there are however still
important issues with compatibility with the CPython 3.9 test suite
with at least asyncgen and coroutines.</p></li>
<li><p>macOS: For app bundles, version information can be provided with the
new option <code class="docutils literal notranslate"><span class="pre">--macos-app-version</span></code>.</p></li>
<li><p>Added Python vendor detection of <code class="docutils literal notranslate"><span class="pre">Anaconda</span></code>, <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>, <code class="docutils literal notranslate"><span class="pre">Apple</span>
<span class="pre">Python</span></code>, and <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> and output the result in version output, this
should make it easiert to analyse reported issues.</p></li>
<li><p>Plugins: Also handle the usage of <code class="docutils literal notranslate"><span class="pre">__name__</span></code> for metadata version
resolution of the <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> standard plugin.</p></li>
<li><p>Plugins: The <code class="docutils literal notranslate"><span class="pre">data-files</span></code> standard plugin now reads configuration
from a Yaml file that <code class="docutils literal notranslate"><span class="pre">data-files.yml</span></code> making it more accessible
for contributions.</p></li>
<li><p>Windows: Allow enforcing usage of MSVC with <code class="docutils literal notranslate"><span class="pre">--msvc=latest</span></code>. This
allows you to prevent accidental usage of MinGW64 on Windows, when
MSVC is intended, but achieves that without fixing the version to
use.</p></li>
<li><p>Windows: Added support for LTO with MinGW64 on Windows, this was
previously limited to the MSVC compiler only.</p></li>
<li><p>Windows: Added support for using <code class="docutils literal notranslate"><span class="pre">--debugger</span></code> with the downloaded
MinGW64 provided <code class="docutils literal notranslate"><span class="pre">gdb.exe</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It doesn`t work when executed from a Git bash prompt, but e.g.
from a standard command prompt.</p>
</div>
</li>
<li><p>Added new experimental flag for compiled types to inherit from
uncompiled types. This should allow easier and more complete
compatibility, making even code in extension modules that uses
<code class="docutils literal notranslate"><span class="pre">PyObject_IsInstance</span></code> work, providing support for packages like
<code class="docutils literal notranslate"><span class="pre">pydanctic</span></code>.</p></li>
<li><p>Plugins: The Qt binding plugins now resolve <code class="docutils literal notranslate"><span class="pre">pyqtgraph</span></code> selection
of binding by hard coding <code class="docutils literal notranslate"><span class="pre">QT_LIB</span></code>. This will allow to resolve its
own dynamic imports depending on that variable at compile time. At
this time, the compile time analysis is not covering all cases yet,
but we hope to get there.</p></li>
<li><p>macOS: Provide <code class="docutils literal notranslate"><span class="pre">minOS</span></code> for standalone builds, derived from the
setting of the Python used to create it.</p></li>
<li><p>UI: Added new option <code class="docutils literal notranslate"><span class="pre">--disable-ccache</span></code> to prevent Nuitka from
injecting <code class="docutils literal notranslate"><span class="pre">ccache</span></code> (Clang, gcc) and <code class="docutils literal notranslate"><span class="pre">clcache</span></code> (MSVC) for caching
the C results of the compilation.</p></li>
<li><p>Plugins: Added experimental support for <code class="docutils literal notranslate"><span class="pre">PyQt6</span></code>. While using
<code class="docutils literal notranslate"><span class="pre">PySide2</span></code> or <code class="docutils literal notranslate"><span class="pre">PySide6</span></code> is very much recommended with Nuitka, this
allows its use.</p></li>
<li><p>UI: Added option <code class="docutils literal notranslate"><span class="pre">--low-memory</span></code> to allow the user to specify that
the compilation should attempt to use less memory where possible,
this increases compile times, but might enable compilation on some
weaker machines.</p></li>
</ul>
</section>
<section id="id8">
<h2>Optimization<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Added dedicated attribute nodes for attribute values that match names
of dictionary operations. These are optimized into dedicate nodes for
methods of dictionaries should their expression have an exact
dictionary shape. These in turn optimize calls on them statically
into dictionary operations. This is done for all methods of <code class="docutils literal notranslate"><span class="pre">dict</span></code>
for both Python2 and Python3, namely <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">items</span></code>,
<code class="docutils literal notranslate"><span class="pre">iteritems</span></code>, <code class="docutils literal notranslate"><span class="pre">itervalues</span></code>, <code class="docutils literal notranslate"><span class="pre">iterkeys</span></code>, <code class="docutils literal notranslate"><span class="pre">viewvalues</span></code>,
<code class="docutils literal notranslate"><span class="pre">viewkeys</span></code>, <code class="docutils literal notranslate"><span class="pre">pop</span></code>, <code class="docutils literal notranslate"><span class="pre">setdefault</span></code>, <code class="docutils literal notranslate"><span class="pre">has_key</span></code>, <code class="docutils literal notranslate"><span class="pre">clear</span></code>,
<code class="docutils literal notranslate"><span class="pre">copy</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>.</p>
<p>The new operation nodes also add compile time optimization for being
used on constant values where possible.</p>
</li>
<li><p>Also added dedicated attribute nodes for string operations. For
operations, currently only part of the methods are done. These are
currently only <code class="docutils literal notranslate"><span class="pre">join</span></code>, <code class="docutils literal notranslate"><span class="pre">strip</span></code>, <code class="docutils literal notranslate"><span class="pre">lstrip</span></code>, <code class="docutils literal notranslate"><span class="pre">rstrip</span></code>,
<code class="docutils literal notranslate"><span class="pre">partition</span></code>, <code class="docutils literal notranslate"><span class="pre">rpartition</span></code>. Besides performance, this subset was
enough to cover compile time evaluation of module name computation
for <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> as done by SWIG bindings, allowing
these implicit dependencies to be discovered at compile time without
any help, marking a significant improvement for standalone usage.</p></li>
<li><p>Annotate type shape for dictionary <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> nodes, this was
missing unlike in the generic <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> nodes.</p></li>
<li><p>Faster processing of expression only statement nodes. These are
nodes, where a value is computed, but then not used, it still needs
to be accounted for though, representing the value release.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">something</span><span class="p">()</span> <span class="c1"># ignores return value, means statement only node</span>
</pre></div>
</div>
</li>
<li><p>Windows: Enabled LTO by default with MinGW64, which makes it produce
much faster results. It now yield faster binaries than MSVC 2019 with
pystone.</p></li>
<li><p>Windows: Added support for C level PGO (Profile Guided Optimization)
with MSVC and MinGW64, allowing extra speed boosts from the C
compilation on Windows as well.</p></li>
<li><p>Standalone: Better handling of <code class="docutils literal notranslate"><span class="pre">requests.packages</span></code> and
<code class="docutils literal notranslate"><span class="pre">six.moves</span></code>. The old handling could duplicate their code. Now uses
a new mechanism to resolve metapath based importer effects at compile
time.</p></li>
<li><p>Avoid useless exception checks in our dictionary helpers, as these
could only occur when working with dictionary overloads, which we
know to not be the case.</p></li>
<li><p>For nodes, have dedicated child mixin classes for nodes with a single
child value and for nodes with a tuple of children, so that these
common kind of nodes operate faster and dont have to check at
runtime what type they are during access.</p></li>
<li><p>Actually make use of the egg cache. Nuitka was unpacking eggs in
every compilation, but in wheel installs, these can be quite common
and should be faster.</p></li>
<li><p>Star arguments annotated their type shape, but the methods to check
for dictionary exactly were not affected by this preventing
optimization in some cases.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> configuration for main programs present in the
modules of the standard library, these can be removed from the
compilation and should lower dependencies detected.</p></li>
<li><p>Using static libpython with <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> automatically. This should give
both smaller (standalone mode) and faster results as is the case when
using this feature..</p></li>
<li><p>Plugins: Added improvements to the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin for
<code class="docutils literal notranslate"><span class="pre">gevent</span></code> to avoid including its testing framework.</p></li>
<li><p>Python3.9+: Faster calls into uncompiled functions from compiled code
using newly introduced API of that version.</p></li>
<li><p>Statically optimize <code class="docutils literal notranslate"><span class="pre">importlib.import_module</span></code> calls with constant
args into fixed name imports.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> to be used as a compile time
constant. This should enable many checks to be done at compile time.</p></li>
<li><p>Added hard import and static optimization for
<code class="docutils literal notranslate"><span class="pre">typing.TYPE_CHECKING</span></code>.</p></li>
<li><p>Also compute named import lookup through variables, expanding their
use to more cases, e.g. like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="o">...</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
   <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Also optimize compile time comparisons through variable names if
possible, i.e. the value cannot have changed.</p></li>
<li><p>Faster calls of uncompiled code with Python3.9 or higher avoiding DLL
call overhead.</p></li>
</ul>
</section>
<section id="id9">
<h2>Organisational<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Commercial: There are <code class="docutils literal notranslate"><span class="pre">Buy</span> <span class="pre">Now</span></code> buttons available now for the
direct purchase of the <a class="reference external" href="/pages/commercial.html">Nuitka Commercial</a>
offering. Finally Credit Card, Google Pay, and Apple Pay are all
possible. This is using Stripe. Get in touch with me if you want to
use bank transfer, which is of course still best for me.</p></li>
<li><p>The main script runners for Python2 have been renamed to <code class="docutils literal notranslate"><span class="pre">nuitka2</span></code>
and <code class="docutils literal notranslate"><span class="pre">nuitka2-run</span></code>, which is consistent with what we do for Python3,
and avoids issues where <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder ends up in <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> and
prevents the loading of <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> package.</p></li>
<li><p>Windows: Added support for Visual Studio 2022 by updating the inline
copy of Scons used for Windows to version 4.3.0, on non Windows, the
other ones will keep being used.</p></li>
<li><p>Windows: Requiring latest MinGW64 with version 11.2 as released by
winlibs, because this is known to allow LTO, where previous releases
were missing needed binaries.</p></li>
<li><p>Reject standalone mode usage with Apple Python, as it works only with
the other supported Pythons, avoiding pitfalls in attempting to
distribute it.</p></li>
<li><p>Move hosting of documentation to Sphinx, added Changelog and some
early parts of API documentation there too. This gives much more
readable results than what we have done so far with Nikola. More
things will move there.</p></li>
<li><p>User Manual: Add description how to access code attributes in
<code class="docutils literal notranslate"><span class="pre">nuitka-project</span></code> style options.</p></li>
<li><p>User Manual: Added commands used to generate performance numbers for
Python.</p></li>
<li><p>User Manual: List other Pythons for which static linking is supposed
to work.</p></li>
<li><p>Improved help for <code class="docutils literal notranslate"><span class="pre">--include-package</span></code> with a hint how to exclude
some of the subpackages.</p></li>
<li><p>Started using Jinja2 in code templates with a few types, adding basic
infrastructure to do that. This will be expanded in the future.</p></li>
<li><p>Updated plugin documentation with more recent information.</p></li>
<li><p>Added Python flavor as detected to the <code class="docutils literal notranslate"><span class="pre">--version</span></code> output for
improved bug reports.</p></li>
<li><p>Linux: Added distribution name to <code class="docutils literal notranslate"><span class="pre">--version</span></code> output for improved
bug reports.</p></li>
<li><p>Always enable the <code class="docutils literal notranslate"><span class="pre">gevent</span></code> plugin, we want to achieve this for all
plugins, and this is only a step in that direction.</p></li>
<li><p>Added project URLs for PyPI, so people looking at it from there have
some immediate places to checkout.</p></li>
<li><p>Debian: Use common code for included PDF files, which have page
styles and automatic corrections for <code class="docutils literal notranslate"><span class="pre">rst2pdf</span></code> applied.</p></li>
<li><p>Updated to latest <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">isort</span></code>, <code class="docutils literal notranslate"><span class="pre">pylint</span></code> versions.</p></li>
<li><p>The binary names for Python2 changed from <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> and
<code class="docutils literal notranslate"><span class="pre">nuitka-run</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka2</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka2-run</span></code>. This harmonizes it
with Python2 and avoids issues, where the <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder in
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> can cause issues with re-execution of Nuitka finding
those to import.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You ought to be using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">nuitka</span></code> style of calling Nuitka
anyway, as it gives you best control over what Python is used to
run Nuitka, you can pick <code class="docutils literal notranslate"><span class="pre">python2</span></code> there if you want it to run
with that, even with full path. Check the relevant section in the
User Manual too.</p>
</div>
</li>
<li><p>Added support for Fedora 34 and Fedora 35.</p></li>
</ul>
</section>
<section id="id10">
<h2>Cleanups<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>In a change of mind <code class="docutils literal notranslate"><span class="pre">--enable-plugin</span></code> has become the only form to
enable a plugin used in documentation and tests.</p></li>
<li><p>Massive cleanup of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and Qt binding plugins, e.g.
<code class="docutils literal notranslate"><span class="pre">pyside2</span></code>. Data files and DLLs are now provided through proper
declarative objects rather than copied manually. The handling of
PyQt5 from the plugin should have improved as a side effect.</p></li>
<li><p>Massive cleanups of all documentation in ReST format. Plenty of
formatting errors were resolved. Many typos were identified and
globally fixed. Spellings e.g. of Developer Manual are now enforced
with automatic replacements. Also missing or wrong quotes were turned
to proper methods. Also enforce code language for shell scripts to be
the same everywhere.</p></li>
<li><p>Removed last usages of <code class="docutils literal notranslate"><span class="pre">getPythonFlags()</span></code> and made the function
private, replacing their use with dedicated function to check for
individual flags.</p></li>
<li><p>Avoid string comparison with <code class="docutils literal notranslate"><span class="pre">nuitka.utils.getOS()</span></code> and instead add
accessors that are more readable, e.g. <code class="docutils literal notranslate"><span class="pre">nuitka.utils.isMacOS()</span></code> and
put them to use where it makes sense.</p></li>
<li><p>Replaced usages of string tests in list of python flags specified,
with functions that check for a specific name with a speaking
function name.</p></li>
<li><p>Added mixin for expressions that have no side effect outside of their
value, providing common method implementation more consistently.</p></li>
<li><p>Remove code geared to using old PyLint and on Python2, we no longer
use that. Also removed annotations only used for overriding Python2
builtins from Nuitka code.</p></li>
<li><p>The PDF specific annotations were moved into being applied only in
the PDF building step, avoiding errors for raw PDF directives.</p></li>
<li><p>Apply Visual Code autoformat to our Yaml files. This is unfortunately
not and automatic formatting yet.</p></li>
<li><p>Introduce dedicated <code class="docutils literal notranslate"><span class="pre">nuitka.utils.Json</span></code> module, as we intend to
expand its usage, e.g. for caching.</p></li>
<li><p>Replacing remaining usages of <code class="docutils literal notranslate"><span class="pre">print</span></code> functions with uses of
<code class="docutils literal notranslate"><span class="pre">nuitka.Tracing</span></code> instead.</p></li>
<li><p>Massive cleanup of the <code class="docutils literal notranslate"><span class="pre">gevent</span></code> plugin, user proper method to
execute code after module load, rather than source patching without
need. The plugin no longer messes with inclusions that other code
already provides for standalone.</p></li>
<li><p>Using own helper to update <code class="docutils literal notranslate"><span class="pre">sys</span></code> module attributes, to avoid errors
from old C compilers, and also cleaning up using code to not have to
cast on string constants.</p></li>
<li><p>More consistent naming of plugin classes, and enforce a relationship
of detector class names to the names of detected plugins. The new
naming consistency is now enforced.</p></li>
</ul>
</section>
<section id="id11">
<h2>Tests<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added CPython 3.10 test suite, it needs more work though.</p></li>
<li><p>Added generated test that exercises dictionary methods in multiple
variations.</p></li>
<li><p>Test suite names were specified wrongly in a few of them.</p></li>
</ul>
</section>
<section id="id12">
<h2>Summary<a class="headerlink" href="#id12" title="Permalink to this headline"></a></h2>
<p>This release is again a huge step forward. It refines on PGO and LTO for
C level to work with all relevant compilers. Internally Python level PGO
is prepared, but only a future release will feature it. With that,
scalability improvements as well as even more performance improvements
will be unlocked.</p>
<p>The amount of optimization added this time is even bigger, some of which
unlocks static optimization of module imports, that previously would
have to be considered implicit. This work will need one extra step,
namely to also trace hard imports on the function level, then this will
be an extremely powerful tool to solve these kinds of issues in the
future. The next release will have this and go even further in this
area.</p>
<p>With the dictionary methods, and some string methods, also a whole new
kind of optimization has been started. These will make working with
<code class="docutils literal notranslate"><span class="pre">dict</span></code> containers faster, but obviously a lot of ground is to cover
there still, e.g. <code class="docutils literal notranslate"><span class="pre">list</span></code> values are a natural target not yet started.
Future releases will progress here.</p>
<p>Type specialization for Python3 has not progressed though, and will have
to be featured in a future releases though.</p>
<p>For scalability, the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> work has continued, and this should
be the last release, where this is not on by default. Compiling without
it is something that is immediately noticeable in exploding module
amounts. It is very urgently recommended to enable it for your
compilations.</p>
<p>The support for macOS has been refined, with version information being
possible to add, and adding information to the binary about which OSes
are supported, as well as rejecting Apple Python, which is only a trap
if you want to deploy to other OS versions. More work will be needed to
support <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> or even Homebrew there too, for now CPython is still
the recommended platform to use.</p>
<p>This release achieves major compatibility improvements. And of course,
the experimental support for 3.10 is not the least. The next release
will strive to complete the support for it fully, but this should be
usable at least, for now please stay on 3.9 if you can.</p>
</section>
</section>
<section id="older-releases">
<h1>Older Releases<a class="headerlink" href="#older-releases" title="Permalink to this headline"></a></h1>
<p>These are older releases of Nuitka.</p>
<section id="nuitka-release-0-6-17">
<h2>Nuitka Release 0.6.17<a class="headerlink" href="#nuitka-release-0-6-17" title="Permalink to this headline"></a></h2>
<p>This release has a focus on performance improvements, while also
polishing plugins and adding many new features.</p>
<section id="id13">
<h3>Bug Fixes<a class="headerlink" href="#id13" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, plugins were not catching being used on packages not installed.
Fixed in 0.6.16.2 already.</p></li>
<li><p>macOS: Fix weaknesses in the <code class="docutils literal notranslate"><span class="pre">otool</span></code> parsing to determine DLL
dependency parsing. Fixed in 0.6.16.2 already.</p></li>
<li><p>Linux: Allow onefile program args with spaces contained to be
properly passed. Fixed in 0.6.16.3 already.</p></li>
<li><p>Windows: Avoid using less portable C function for <code class="docutils literal notranslate"><span class="pre">%PID%</span></code>
formatting, which restores compilation on Windows 7 with old
toolchains. Fixed in 0.6.16.3 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">fstrings</span></code> package. Fixed in 0.6.16.3
already.</p></li>
<li><p>Compatibility: Fix, need to import <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files after <code class="docutils literal notranslate"><span class="pre">site</span></code>
module, not before. This was causing crashes on CentOS7 with Python2.
Fixed in 0.6.16.3 already.</p></li>
<li><p>Compatibility: Fix, when extension modules failed to load, in some
cases the <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> was lost to a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>. Fixed in
0.6.16.3 already.</p></li>
<li><p>Fix, linker resource modes <code class="docutils literal notranslate"><span class="pre">code</span></code> and <code class="docutils literal notranslate"><span class="pre">linker</span></code> were not working
anymore, but are needed with LTO mode at least. Fixed in 0.6.16.3
already.</p></li>
<li><p>Standalone: Bytecode modules with null bytes in standard library,
typically from disk corruption, were not handled properly. Fixed in
0.6.16.3 already.</p></li>
<li><p>Fix, failed <code class="docutils literal notranslate"><span class="pre">.throw()</span></code> into generators could cause corruption.
Fixed in 0.6.16.4 already.</p></li>
<li><p>Python2: Fix, the bytecode compilation didnt respect the
<code class="docutils literal notranslate"><span class="pre">--python-flag=no_asserts</span></code> mode. Fixed in 0.6.16.4 already.</p></li>
<li><p>Fix, calls were not annotating their arguments as escaped, causing
corruption of mutable in static optimization. Fixed in 0.6.16.5
already.</p></li>
<li><p>Fix, some sequence objects, e.g. <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code> actually implement
in-place add operations that need to be called. Fixed in 0.6.16.5
already.</p></li>
<li><p>Windows: Fix, onefile binaries were not working after being signed.
This now works.</p></li>
<li><p>Standalone: Added missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">sklearn</span></code>.</p></li>
<li><p>Compatibility: Modules giving <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> from source were not
properly handled, giving runtime <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>. Now they are giving
<code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.</p></li>
<li><p>Fix, the LTO mode has issues with <code class="docutils literal notranslate"><span class="pre">incbin</span></code> usage on older gcc, so
use <code class="docutils literal notranslate"><span class="pre">linker</span></code> mode when it is enabled.</p></li>
<li><p>Python3: Fix, locals dict codes were not properly checking errors
that the mapping might raise when setting values.</p></li>
<li><p>Fix, modules named <code class="docutils literal notranslate"><span class="pre">entry</span></code> were causing compile time errors in the
C stage.</p></li>
<li><p>macOS: Never include files from OS private frameworks in standalone
mode.</p></li>
<li><p>Fix, the python flag <code class="docutils literal notranslate"><span class="pre">--python-flag=no_warning</span></code> wasnt working on
all platforms.</p></li>
<li><p>Compatibility: Fix, the main code of the <code class="docutils literal notranslate"><span class="pre">site</span></code> module wasnt
executing, so that its added builtins were not there. Of course, you
ought to use <code class="docutils literal notranslate"><span class="pre">--python-flag=no_site</span></code> to not have it in the normal
case.</p></li>
<li><p>Python2: Added code path to handle edited standard library source
code which then has no valid bytecode file.</p></li>
<li><p>Anaconda: In module mode, the CondaCC wasnt recognized as form of
gcc.</p></li>
<li><p>Fix, bytecode modules could shadow compiled modules of the same name.</p></li>
<li><p>Onefile: Fix, expansion of <code class="docutils literal notranslate"><span class="pre">%PID%</span></code> wasnt working properly on
non-Windows, making temp paths less unique. The time stamp is not
necessarily enough.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> error exits from slave processes were not
reporting tracebacks.</p></li>
<li><p>Standalone: Added <code class="docutils literal notranslate"><span class="pre">xcbglintegrations</span></code> to the list of sensible Qt
plugins to include by default, otherwise rendering will be inferior.</p></li>
<li><p>Standalone: Added <code class="docutils literal notranslate"><span class="pre">platformthemes</span></code> to the list of sensible Qt
plugins to include by default, otherwise file dialogs on non-Windows
would be inferior.</p></li>
<li><p>Fix, created <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> files were not ordered deterministically.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">win32file</span></code>.</p></li>
<li><p>Fix, namespace packages were not using runtime values for their
<code class="docutils literal notranslate"><span class="pre">__path__</span></code> value.</p></li>
<li><p>Python3.7+: Fix, was leaking <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> exceptions during
name imports.</p></li>
<li><p>Fix, standard library detection could fail for relative paths.</p></li>
</ul>
</section>
<section id="id14">
<h3>New Features<a class="headerlink" href="#id14" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added experimental support for C level PGO (Profile Guided
Optimization), which runs your program and then uses feedback from
the execution. At this time only gcc is supported, and only C
compiler is collecting feedback. Check the User Manual for a table
with current results.</p></li>
<li><p>macOS: Added experimental support for creating application bundles.
For these, icons can be specified and console can be disabled. But at
this time, onefile and accelerated mode are not yet usable with it,
only standalone mode works.</p></li>
<li><p>Plugins: Add support for <code class="docutils literal notranslate"><span class="pre">pkg_resources.require</span></code> calls to be
resolved at compile time. These are not working at runtime, but this
avoids the issue very nicely.</p></li>
<li><p>Plugins: Massive improvements to the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin, it can
now make <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">scipy</span></code>, <code class="docutils literal notranslate"><span class="pre">skimage</span></code>, <code class="docutils literal notranslate"><span class="pre">pywt</span></code>, and
<code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> use much less packages and has better error handling.</p></li>
<li><p>Plugins: Added <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> ability ability to append code to a
module, which might get used in the future by other plugins that need
some sort of post load changes to be applied.</p></li>
<li><p>Plugins: Added ability to replace code of functions at parse time,
and use this in <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin to replace functions that do
unnecessary stuff with variants that often just do nothing. This is
illustrated here.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gevent._util</span><span class="p">:</span><span class="w"></span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;remove</span><span class="nv"> </span><span class="s">gevent</span><span class="nv"> </span><span class="s">release</span><span class="nv"> </span><span class="s">framework&quot;</span><span class="w"></span>
<span class="nt">change_function</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="s">&quot;prereleaser_middle&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&#39;(lambda</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">None)&#39;&quot;</span><span class="w"></span>
<span class="w">   </span><span class="s">&quot;postreleaser_before&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;&#39;(lambda</span><span class="nv"> </span><span class="s">data:</span><span class="nv"> </span><span class="s">None)&#39;&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>This example is removing <code class="docutils literal notranslate"><span class="pre">gevent</span></code> code that loads dependencies used
for their CI release process, that need not be part of normal
programs.</p>
</li>
<li><p>Added ability to persist source code changes done by plugins in the
Python installation. This is considered experimental and needs write
access to the Python installation, so this is best done in a
virtualenv and it may confuse plugins.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">multiprocessing.tracker</span></code> and spawn mode for all
platforms. For non-default modes outside of Windows, you need to
<code class="docutils literal notranslate"><span class="pre">--enable-plugin=multiprocessing</span></code> to use these.</p></li>
<li><p>Plugins: Allow multiple entry points to be provided by one or several
plugins for the same modules. These are now merged into one
automatically.</p></li>
<li><p>Standalone: Fix for numpy not working when compiling with
<code class="docutils literal notranslate"><span class="pre">--python-flag=no_docstrings</span></code>.</p></li>
<li><p>Fix, method calls were not respecting descriptors provided by types
with non-generic attribute lookups.</p></li>
<li><p>Windows: Add support for using self-compiled Python3 from the build
folder too.</p></li>
<li><p>Added support for Nuitka-Python 2.7, which will be our faster Python
fork.</p></li>
<li><p>Colorized output for error outputs encountered in Scons, these are
now yellow for better recognition.</p></li>
</ul>
</section>
<section id="id15">
<h3>Optimization<a class="headerlink" href="#id15" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Faster threading code was used for Python3.8 or higher, and this has
been extended to 3.7 on Windows, but we wont be able to have it
other platforms and not on earlier Python3 versions.</p></li>
<li><p>Faster calls esp. with keyword arguments. Call with keywords no
longer create dictionaries if the call target supports that, and with
3.8 or higher, non-compiled code that allows vectorcall is taken
advantage of.</p></li>
<li><p>Faster class creation that avoids creation of argument tuples and
dictionaries.</p></li>
<li><p>Faster attribute check code in case of non-present attributes.</p></li>
<li><p>Faster unbound method calls, unlike bound methods calls these were
not optimized as well yet.</p></li>
<li><p>Type shapes for star arguments are now known and used in
optimization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
   <span class="nb">type</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="c1"># Statically known to be tuple</span>
   <span class="nb">type</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># Statically known to be dict</span>
</pre></div>
</div>
</li>
<li><p>Python2: Faster old-style class creation. These are classes that do
not explicitly inherit from <code class="docutils literal notranslate"><span class="pre">object</span></code>.</p></li>
<li><p>Python2: Faster string comparisons for Python by specializing for the
<code class="docutils literal notranslate"><span class="pre">str</span></code> type as well.</p></li>
<li><p>Python3: Added specialization for <code class="docutils literal notranslate"><span class="pre">bytes</span></code> comparisons too. These
are naturally very much the same as <code class="docutils literal notranslate"><span class="pre">str</span></code> comparisons in Python2.</p></li>
<li><p>Added specialization for <code class="docutils literal notranslate"><span class="pre">list</span></code> comparisons too. We had them for
<code class="docutils literal notranslate"><span class="pre">tuples</span></code> only so far.</p></li>
<li><p>Faster method calls when called from Python core, our <code class="docutils literal notranslate"><span class="pre">tp_call</span></code>
slot wasnt as good as it can be.</p></li>
<li><p>Optimization: Faster deep copies of constants. This can speed up
constant calls with mutable types. Before it was checking the type
too often to be fast.</p></li>
<li><p>Allow using static linking with Debian Python giving much better
performance with the system Python. This is actually a huge
improvement as it makes things much faster. So far its only
automatically enabled for Python2, but it seems to work for Python3
on Debian too. Needs more tweaking in the future.</p></li>
<li><p>Optimization: Added <code class="docutils literal notranslate"><span class="pre">functools</span></code> module to the list of hard imports
in preparation of optimizing <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> to work better
with compiled functions.</p></li>
<li><p>Python2: Demote to <code class="docutils literal notranslate"><span class="pre">xrange</span></code> when iterating over <code class="docutils literal notranslate"><span class="pre">range</span></code> calls,
even for small ranges, they are always faster. Previously this was
only done for values with at least 256 values.</p></li>
<li><p>Enable LTO automatically for Debian Python, this also allows more
optimization.</p></li>
<li><p>Enable LTO automatically for Anaconda with CondaCC on non-Windows,
also allowing more optimization.</p></li>
</ul>
</section>
<section id="id16">
<h3>Organisational<a class="headerlink" href="#id16" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added section in the User Manual on how to deal with memory issues
and C compiler bugs. This is a frequent topic and should serve as a
pointer for this kind of issue.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--lto</span></code> option was changed to require an argument, so that it
can also be disabled. The default is <code class="docutils literal notranslate"><span class="pre">auto</span></code> which is the old
behaviour where its enabled if possible.</p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">--no-progress</span></code> to <code class="docutils literal notranslate"><span class="pre">--no-progressbar</span></code> in order to make it
more clear what its about. Previously it was possible to relate it
to <code class="docutils literal notranslate"><span class="pre">--show-progress</span></code>.</p></li>
<li><p>No longer require specific versions of dependencies in our
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> and relegate those to only being in
<code class="docutils literal notranslate"><span class="pre">requirements-devel.txt</span></code> such that by default Nuitka doesnt
collide with user requirements on those same packages which
absolutely all the time dont really make a difference.</p></li>
<li><p>Added ability to check all unpushed changes with pylint with a new
<code class="docutils literal notranslate"><span class="pre">./bin/check-nuitka-with-pylint</span> <span class="pre">--unpushed</span></code> option. Before it was
only possible to make the check (quickly) with <code class="docutils literal notranslate"><span class="pre">--diff</span></code>, but that
stopped working after commits are made.</p></li>
<li><p>Revived support for <code class="docutils literal notranslate"><span class="pre">vmprof</span></code> based analysis of compiled programs,
but it requires a fork of it now.</p></li>
<li><p>Make Windows specific compiler options visible on all platforms.
There is no point in them being errors, instead warnings are given
when they are specified on non-Windows.</p></li>
<li><p>Added project variable <code class="docutils literal notranslate"><span class="pre">Commercial</span></code> for use in Nuitka project
syntax.</p></li>
<li><p>Consistent use of metavars for nicer help output should make it more
readable.</p></li>
<li><p>Avoid <code class="docutils literal notranslate"><span class="pre">ast</span></code> tree dumps in case of <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> exceptions,
they are just very noisy. Also not annotate where Nuitka was in
optimization when a plugin is asking to <code class="docutils literal notranslate"><span class="pre">sysexit</span></code>.</p></li>
</ul>
</section>
<section id="id17">
<h3>Cleanups<a class="headerlink" href="#id17" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Encoding names for UTF8 in calls to <code class="docutils literal notranslate"><span class="pre">.encode()</span></code> were used
inconsistent with and without dashes in the source code, added
cleanup to autoformat that picks the one blessed.</p></li>
<li><p>Cleanup taking of runtime traces of DLLs used in preparation for
using it in main code eventually, moving it to a dedicated module.</p></li>
<li><p>Avoid special names for Nuitka options in test runner, this only adds
a level of confusion. Needs more work in future release.</p></li>
<li><p>Unify implementation to create modules into single function. We had 3
forms, one in recursion, one for main module, and one for plugin
generated code. This makes it much easier to understand and use in
plugins.</p></li>
<li><p>Further reduced code duplication between the two Scons files, but
more work will be needed there.</p></li>
<li><p>Escaped variables are still known to be assigned/unassigned rather
than unknown, allowing for many optimizations to still work on them.,
esp. for immutable value</p></li>
<li><p>Enhanced autoformat for rest documents, bullet list spacing is now
consistent and spelling of organisational is unified automatically.</p></li>
<li><p>Moved icon conversion functionality to separate module, so it can be
reused for other platforms more easily.</p></li>
</ul>
</section>
<section id="id18">
<h3>Tests<a class="headerlink" href="#id18" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">reflected</span></code> test, because of Nuitka special needs to
restart with variable Python flags. This could be reverted though,
since Nuitka no longer needs anything outside inline copies, and
therefore no longer loads from site packages.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin in standalone tests of Numpy, Pandas and
tests to reduce their compile times, these have become much more
manageable now.</p></li>
<li><p>Enhanced checks for used files to use proper below path checks for
their ignoring.</p></li>
<li><p>Remove reflected test, compiling Nuitka with Nuitka has gotten too
difficult.</p></li>
<li><p>Verify constants integrity at program end in debug mode again, so we
catch corruption of them in tests.</p></li>
</ul>
</section>
<section id="id19">
<h3>Summary<a class="headerlink" href="#id19" title="Permalink to this headline"></a></h3>
<p>This release is one of the most important ones in a long time. The PGO
and LTO, and static libpython work make a big different for performance
of created binaries.</p>
<p>The amount of optimization added is also huge, calls are much faster
now, and object creations too. These avoiding to go through actual
dictionaries and tuples in most cases when compiled code interacts gives
very significant gains. This can be seen in the increase of pystone
performance.</p>
<p>The new type specializations allow many operations to be much faster.
More work will follow in this area and important types, <code class="docutils literal notranslate"><span class="pre">str</span></code> and
<code class="docutils literal notranslate"><span class="pre">int</span></code> do not have specialized comparisons for Python3, holding it back
somewhat to where our Python2 performance is for these things.</p>
<p>For scalability, the <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> work is extremely valuable, and this
plugin should become active by default in the future, for now it must be
strongly recommended. It needs more control over what parts you want to
deactivate from it, in case of it causing problems, then we can and
should do it.</p>
<p>The support for macOS has been enhanced a lot, and will become perfect
in the next release (currently develop). The bundle mode is needed for
all kinds of GUI programs to not need a console. This platform is
becoming as well supported as the others now.</p>
<p>Generally this release marks a huge step forward. We hope to add Python
level PGO in the coming releases, for type knowledge retrofitted without
any annotations used. Benchmarks will become more fun clearly.</p>
</section>
</section>
<section id="nuitka-release-0-6-16">
<h2>Nuitka Release 0.6.16<a class="headerlink" href="#nuitka-release-0-6-16" title="Permalink to this headline"></a></h2>
<p>This release is mostly polishing and new features. Optimization looked
only at threading performance, and LTO improvements on Windows.</p>
<section id="id20">
<h3>Bug Fixes<a class="headerlink" href="#id20" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> failed to resolve versions for
<code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> from its standard library at compile time.
Fixed in 0.6.15.1 already.</p></li>
<li><p>Standalone: Fix, <code class="docutils literal notranslate"><span class="pre">--include-module</span></code> was not including the module if
it was an extension modules, but only for Python modules. Fixed in
0.6.15.1 already.</p></li>
<li><p>Standalone: Added missing implicit dependencies for <code class="docutils literal notranslate"><span class="pre">gi.overrides</span></code>.
Fixed in 0.6.15.1 already.</p></li>
<li><p>Python3.9: Fix, could crash when using generic aliases in certain
configurations. Fixed in 0.6.15.2 already.</p></li>
<li><p>Fix, the tensorflow plugin needed an update due to changed API. Fixed
in 0.6.15.3 already.</p></li>
<li><p>When error exiting Nuitka, it now closes any open progress bar for
cleaner display.</p></li>
<li><p>Standalone: Added missing dependency for <code class="docutils literal notranslate"><span class="pre">skimage</span></code>.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">numpy</span></code> plugin now automatically includes Qt
backend if any of the Qt binding plugins is active.</p></li>
</ul>
</section>
<section id="id21">
<h3>New Features<a class="headerlink" href="#id21" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Pyton3.5+: Added support for onefile compression. This is using
<code class="docutils literal notranslate"><span class="pre">zstd</span></code> which is known to give very good compression with very high
decompression, much better than e.g. <code class="docutils literal notranslate"><span class="pre">zlib</span></code>.</p></li>
<li><p>macOS: Added onefile support.</p></li>
<li><p>FreeBSD: Added onefile support.</p></li>
<li><p>Linux: Added method to use tempdir onefile support as used on other
platforms as an alternative to <code class="docutils literal notranslate"><span class="pre">AppImage</span></code> based.</p></li>
<li><p>Added support for recursive addition of files from directories with
patterns.</p></li>
<li><p>Attaching the payload to onefile now has a progress bar too.</p></li>
<li><p>Windows: Prelimary support for the yet unfinished Nuitka-Python that
allows static linking and higher performance on Windows, esp. with
Nuitka.</p></li>
<li><p>Windows: In acceleration mode, for uninstalled Python, now a CMD file
is created rather than copying the DLL to the binary directory. That
avoids conflicts with architectures and of course useless file
copies.</p></li>
<li><p>New abilities for plugin <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> allow to make it an error
when certain modules are imported. Added more specific options for
usual trouble makes, esp. <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> are causing an
explosion for some programs, while being unused code. This makes it
now easier to oversee this.</p></li>
<li><p>Its now possible to override <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> decision for where cache
files live with an environment variable <code class="docutils literal notranslate"><span class="pre">NUITKA_CACHE_DIR</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-o</span></code> option now also works with onefile mode, it previously
rejected anything but acceleration mode. Fixed in 0.6.15.3 already.</p></li>
<li><p>Plugins: Its now possible for multiple plugins to provide pre or
post load code for the same module.</p></li>
<li><p>Added indications for compilation modes <code class="docutils literal notranslate"><span class="pre">standalone</span></code> and
<code class="docutils literal notranslate"><span class="pre">onefile</span></code> to the <code class="docutils literal notranslate"><span class="pre">__compiled__</span></code> attribute.</p></li>
<li><p>Plugins: Give nicer error message in case of colliding command line
options.</p></li>
</ul>
</section>
<section id="id22">
<h3>Optimization<a class="headerlink" href="#id22" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Faster threading code is now using for Python3.8 or higher and not
only 3.9, giving a performance boost, esp. on Windows.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">--lto</span></code> is now the default with MSVC 2019 or higher. This
will given smaller and faster binaries. It has been available for
some time, but not been the default yet.</p></li>
</ul>
</section>
<section id="id23">
<h3>Cleanups<a class="headerlink" href="#id23" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Using different progress bar titles for C compilation of Python code
and C compilation of onefile bootstrap.</p></li>
<li><p>Moved platform specific detections, for FreeBSD/OpenBSD/macOS out of
the Scons file and to common Nuitka code, sometimes eliminating
duplications with one version being more correct than the other.</p></li>
<li><p>Massive cleanup of datafile plugin, using pattern descriptions, so
more code duplication can be removed.</p></li>
<li><p>More cleanup of the scons files, sharing more common code.</p></li>
</ul>
</section>
<section id="id24">
<h3>Organisational<a class="headerlink" href="#id24" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Under the name Nuitka-Python we are now also developing a fork of
CPython with enhancements, you can follow and joint it at
<a class="reference external" href="https://github.com/Nuitka/Nuitka-Python">https://github.com/Nuitka/Nuitka-Python</a> but at this time it is not
yet ready for prime time.</p></li>
<li><p>Onefile under Windows now only is temporary file mode. Until we
figure out how to solve the problems with locking and caching, the
mode where it installs to the AppData of the user is no longer
available.</p></li>
<li><p>Renamed the plugin responsible for PyQt5 support to match the names
of others. Note however, that at this time, PySide2 or PySide6 are to
be recommended.</p></li>
<li><p>Make it clear that PySide 6.1.2 is actually going to be the supported
version of PySide6.</p></li>
<li><p>Use MSVC in Github actions.</p></li>
</ul>
</section>
<section id="id25">
<h3>Summary<a class="headerlink" href="#id25" title="Permalink to this headline"></a></h3>
<p>This release had a massive focus on expanding existing features, esp.
for onefile, and plugins API, such that we can now configure
<code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> with yaml, have really nice datafile handling options,
and have onefile on all OSes practically.</p>
</section>
</section>
<section id="nuitka-release-0-6-15">
<h2>Nuitka Release 0.6.15<a class="headerlink" href="#nuitka-release-0-6-15" title="Permalink to this headline"></a></h2>
<p>This release polished previous work with bug fixes, but there are also
important new things that help make Nuitka more usable, with one
important performance improvement.</p>
<section id="id26">
<h3>Bug Fixes<a class="headerlink" href="#id26" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, hard imports were not automatically used in code generation
leading to errors when used. Fixed in 0.6.14.2 already.</p></li>
<li><p>Windows: Fix, <code class="docutils literal notranslate"><span class="pre">clcache</span></code> was disabled by mistake. Fixed in 0.6.14.2
already.</p></li>
<li><p>Standalone: Added data files for <code class="docutils literal notranslate"><span class="pre">jsonschema</span></code> to be copied
automatically.</p></li>
<li><p>Standalone: Support for <code class="docutils literal notranslate"><span class="pre">pendulum</span></code> wasnt working anymore with the
last release due to plugin interface issues.</p></li>
<li><p>Retry downloads without SSL if that fails, as some Python do not have
working SSL. Fixed in 0.6.14.5 already.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">ccache</span></code> path wasnt working if it contained spaces. Fixed
in 0.6.14.5 already.</p></li>
<li><p>Onefile: For Linux and ARM using proper download off appimage. Fixed
in 0.6.14.5 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">pyreadstat</span></code>. Fixed in 0.6.14.5
already.</p></li>
<li><p>Standalone: Added missing dependencies for <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. Fixed in
0.6.14.6 already.</p></li>
<li><p>Standalone: Some preloaded packages from <code class="docutils literal notranslate"><span class="pre">.pth</span></code> do not have a
<code class="docutils literal notranslate"><span class="pre">__path__</span></code>, these can and must be ignored.</p></li>
<li><p>Onefile: On Linux, the <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> was not the original file as
advertised.</p></li>
<li><p>Standalone: Do not consider <code class="docutils literal notranslate"><span class="pre">.mesh</span></code> and <code class="docutils literal notranslate"><span class="pre">.frag</span></code> files as DLls in
the Qt bindings when including the qml support. This was causing
errors on Linux, but was generally wasteful.</p></li>
<li><p>Fix, project options could be injected twice, which could lead to
errors with options that were only allowed once, e.g.
<code class="docutils literal notranslate"><span class="pre">--linux-onefile-icon</span></code>.</p></li>
<li><p>Windows: When updating the resources in created binaries, treat all
kinds of <code class="docutils literal notranslate"><span class="pre">OSError</span></code> with information output.</p></li>
<li><p>Onefile: Remove onefile target binary path at startup as well, so it
cannot cause confusion after error exit.</p></li>
<li><p>Onefile: In case of error exit from <code class="docutils literal notranslate"><span class="pre">AppImage</span></code>, preserve its
outputs and attempt to detect if there was a locking issue.</p></li>
<li><p>Standalone: Scan package folders on Linux for DLLs too. This is
necessary to properly handle <code class="docutils literal notranslate"><span class="pre">PyQt5</span></code> in case of Qt installed in the
system as well.</p></li>
<li><p>Standalone: On Linux, standard QML files were not found.</p></li>
<li><p>Standalone: Enforce C locale when detecting DLLs on Linux, otherwise
whitelisting messages didnt work properly on newer Linux.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">tzdata</span></code> package data files.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">exchangelib</span></code>.</p></li>
<li><p>Python3.9: Fix, type subscripts could cause optimization errors.</p></li>
<li><p>UI: Project options didnt properly handle quoting of arguments,
these are normally removed by the shell.</p></li>
<li><p>Linux: The default icon for Python in the system is now found with
more version specific names and should work on more systems.</p></li>
<li><p>Standalone: Do not include <code class="docutils literal notranslate"><span class="pre">libstdc++</span></code> as it should come from the
system rather.</p></li>
</ul>
</section>
<section id="id27">
<h3>New Features<a class="headerlink" href="#id27" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added plugin <code class="docutils literal notranslate"><span class="pre">anti-bloat</span></code> plugin, intended to fight bloat. For now
it can make including certain modules an error, a warning, or force
<code class="docutils literal notranslate"><span class="pre">ImportError</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">--noinclude-setuptools-mode=nofollow</span></code> is
very much recommended to limit compilation size.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> builtin now covers <code class="docutils literal notranslate"><span class="pre">metadata</span></code> and
importlib_metadata packages for compile time version resolution as
well.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> on Python version before 3.6, because
the patched code needs no workarounds. Fixed in 0.6.14.3 already.</p></li>
<li><p>Windows: Convert images to icon files on the fly. So now you can
specify multiple PNG files, and Nuitka will create an icon out of
that automatically.</p></li>
<li><p>macOS: Automatically download <code class="docutils literal notranslate"><span class="pre">ccache</span></code> binary if not present.</p></li>
<li><p>Plugins: New interface to query the main script path. This allows
plugins to look at its directory.</p></li>
<li><p>UI: Output the versions of Nuitka and Python during compilation.</p></li>
<li><p>UI: Added option to control static linking. So far this had been
enabled only automatically for cases where we are certain, but this
allows to force enable or disable it. Now an info is given, if Nuitka
thinks it might be possible to enable it, but doesnt do it
automatically.</p></li>
<li><p>UI: Added <code class="docutils literal notranslate"><span class="pre">--no-onefile</span></code> to disable <code class="docutils literal notranslate"><span class="pre">--onefile</span></code> from project
options.</p></li>
</ul>
</section>
<section id="id28">
<h3>Optimization<a class="headerlink" href="#id28" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Much enhanced GIL interaction with Python3.9 giving a big speed boost
and better threading behaviour.</p></li>
<li><p>Faster conversion of iterables to <code class="docutils literal notranslate"><span class="pre">list</span></code>, if size can be know,
allocation ahead saves a lot of effort.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">GenericAlias</span></code> objects as compile time constants.</p></li>
</ul>
</section>
<section id="id29">
<h3>Organisational<a class="headerlink" href="#id29" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Enhanced Github issue raising instructions.</p></li>
<li><p>Apply <code class="docutils literal notranslate"><span class="pre">rstfmt</span></code> to all documentation and make it part of the commit
hook.</p></li>
<li><p>Make sure to check Scons files as well. This would have caught the
code used to disable <code class="docutils literal notranslate"><span class="pre">clcache</span></code> temporarily.</p></li>
<li><p>Do not mention Travis in PR template anymore, we have stopped using
it.</p></li>
<li><p>Updated requirements to latest versions.</p></li>
<li><p>Bump requirements for development to 3.7 at least, toosl like black
do not work with 3.6 anymore.</p></li>
<li><p>Started work on Nuitka Python, a CPython fork intended for enhanced
performance and standalone support with Nuitka.</p></li>
</ul>
</section>
<section id="id30">
<h3>Cleanups<a class="headerlink" href="#id30" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Determine system prefix without virtualenv outside of Scons, such
that plugins can share the code. There was duplication with the
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> plugin, and this will only be more complete using all
approaches. This also removes a lot of noise from the scons file
moving it to shared code.</p></li>
<li><p>The Qt plugins now collect QML files with cleaner code.</p></li>
</ul>
</section>
<section id="id31">
<h3>Tests<a class="headerlink" href="#id31" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nicer error message if a wrong search mode is given.</p></li>
<li><p>Windows: Added timeout for determining run time traces with
dependency walker, sometimes this hangs.</p></li>
<li><p>Added test to cover the zip importer.</p></li>
<li><p>Making use of project options in onefile tests, making it easier to
execute them manually.</p></li>
</ul>
</section>
<section id="id32">
<h3>Summary<a class="headerlink" href="#id32" title="Permalink to this headline"></a></h3>
<p>For Windows, its now easier than ever to create an icon for your
deployment, because you can use PNG files, and need not produce ICO
files anymore, with Nuitka doing that for you.</p>
<p>The onefile for Linux had some more or less severe problems that got
addressed, esp. also when it came to QML applications with PySide.</p>
<p>On the side, we are preparing to greatly improve the caching of Nuitka,
starting with retaining modules that were demoted to bytecode. There are
changes in this release, to support that, but its not yet complete. We
expect that scalability will then be possible to improve even further.</p>
<p>Generally this is mostly a maintenance release, which outside of the
threading performance improvement has very little to offer for faster
execution, but that actually does a lot. Unfortunately right now its
limited to 3.9, but some of the newer Pythons will also be supported in
later releases.</p>
</section>
</section>
<section id="nuitka-release-0-6-14">
<h2>Nuitka Release 0.6.14<a class="headerlink" href="#nuitka-release-0-6-14" title="Permalink to this headline"></a></h2>
<p>This release has few, but important bug fixes. The main focus was on
expanding standalone support, esp. for PySide2, but also and in general
with plugins added that workaround <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> usage for version
information.</p>
<p>Also an important new features was added, e.g. the project configuration
in the main file should prove to be very useful.</p>
<section id="id33">
<h3>Bug Fixes<a class="headerlink" href="#id33" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compatibility: Fix, modules that failed to import, should be retried
on next import.</p>
<p>So far we only ever executed the module body once, but that is not
how its supposed to be. Instead, only if its in <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>
that should happen, which is the case after successful import.</p>
</li>
<li><p>Compatibility: Fix, constant <code class="docutils literal notranslate"><span class="pre">False</span></code> values in right hand side of
<code class="docutils literal notranslate"><span class="pre">and</span></code>/<code class="docutils literal notranslate"><span class="pre">or</span></code> conditions were generating wrong code if the left side
was of known <code class="docutils literal notranslate"><span class="pre">bool</span></code> shape too.</p></li>
<li><p>Standalone: Fix, add <code class="docutils literal notranslate"><span class="pre">styles</span></code> Qt plugins to list of sensible
plugins.</p>
<p>Otherwise no mouse hover events are generated on some platforms.</p>
</li>
<li><p>Compatibility: Fix, relative <code class="docutils literal notranslate"><span class="pre">from</span></code> imports beyond level 1 were not
loadingg modules from packages if necessary. Fixed in 0.6.13.3
already.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">crypto</span></code> DLL check for Qt bindings was wrong. Fixed
in 0.6.13.2 already.</p></li>
<li><p>Standalone: Added experimental support for PySide6, but for good
results, 6.1 will be needed.</p></li>
<li><p>Standalone: Added support for newer matplotlib. Fixed in 0.6.12.1
already.</p></li>
<li><p>Standalone: Reverted changes related to <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> that were
causing regressions. Fixed in 0.6.13.1 already.</p></li>
<li><p>Standalone: Adding missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">cytoolz</span></code>
package. Fixed in 0.6.13.1 already.</p></li>
<li><p>Standalone: Matching for package names to not suggest recompile for
was broken and didnt match. Fixed in 0.6.13.1 already.</p></li>
</ul>
</section>
<section id="id34">
<h3>New Features<a class="headerlink" href="#id34" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added support for project options.</p>
<p>When found in the filename provided, Nuitka will inject options to
the commandline, such that it becomes possible to do a complex
project with only using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m nuitka filename.py
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compilation mode, support OS specific.</span>
<span class="c1"># nuitka-project-if: {OS} in (&quot;Windows&quot;, &quot;Linux&quot;):</span>
<span class="c1">#    nuitka-project: --onefile</span>
<span class="c1"># nuitka-project-if: {OS} not in (&quot;Windows&quot;, &quot;Linux&quot;):</span>
<span class="c1">#    nuitka-project: --standalone</span>

<span class="c1"># The PySide2 plugin covers qt-plugins</span>
<span class="c1"># nuitka-project: --enable-plugin=pyside2</span>
<span class="c1"># nuitka-project: --include-qt-plugins=sensible,qml</span>

<span class="c1"># The pkg-resources plugin is not yet automatic</span>
<span class="c1"># nuitka-project: --enable-plugin=pkg-resources</span>

<span class="c1"># Nuitka Commercial only features follow:</span>

<span class="c1"># Protect the constants from being readable.</span>
<span class="c1"># nuitka-project: --enable-plugin=data-hiding</span>

<span class="c1"># Include datafiles for Qt into the binary directory.</span>
<span class="c1"># nuitka-project: --enable-plugin=datafile-inclusion</span>
<span class="c1"># nuitka-project: --qt-datadir={MAIN_DIRECTORY}</span>
<span class="c1"># nuitka-project: --qt-datafile-pattern=*.js</span>
<span class="c1"># nuitka-project: --qt-datafile-pattern=*.qml</span>
<span class="c1"># nuitka-project: --qt-datafile-pattern=*.svg</span>
<span class="c1"># nuitka-project: --qt-datafile-pattern=*.png</span>
</pre></div>
</div>
<p>Refer to the User Manual for a table of directives and the variables
allowed to be used.</p>
</li>
<li><p>Added option to include whole data directory structures in
standalone.</p>
<p>The new option <code class="docutils literal notranslate"><span class="pre">--include-data-dir</span></code> was added and is mostly
required for onefile mode, but recommended for standalone too.</p>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">pkg-resources</span></code> plugin.</p>
<p>This one can resolve code like this at compile time without any need
for pip metadata to be present or used.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pkg_resources</span><span class="o">.</span><span class="n">get_distribution</span><span class="p">(</span><span class="s2">&quot;module_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">version</span>
<span class="n">pkg_resources</span><span class="o">.</span><span class="n">get_distribution</span><span class="p">(</span><span class="s2">&quot;module_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parsed_version</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Also process early imports in optimization.</p>
<p>Otherwise plugins cannot work on standard library modules. This makes
it possible to handle them as well.</p>
</li>
</ul>
</section>
<section id="id35">
<h3>Optimization<a class="headerlink" href="#id35" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Faster binary operations.</p>
<p>Applying lessons learnt during the enhancements for in-place
operations that initially gave worse results than some manual code,
we apply the same tricks for all binary operations, which speeds them
up by significant margins, e.g. 30% for float addition, 25% for
Python int addition, and still 6% for Python int addition.</p>
</li>
<li><p>More direct optimization of unary operations on constant value.</p>
<p>Without this, <code class="docutils literal notranslate"><span class="pre">-1</span></code> was not directly a constant value, but had to go
through the unary <code class="docutils literal notranslate"><span class="pre">-</span></code> operation, which it still does, but now its
done at tree building time.</p>
</li>
<li><p>More direct optimization for <code class="docutils literal notranslate"><span class="pre">not</span></code> in branches.</p>
<p>Invertible comparisons, i.e. <code class="docutils literal notranslate"><span class="pre">is</span></code>/<code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code> and <code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>
do not have do be done during optimization. This mainly avoids noise
during optimization from such unimportant steps.</p>
</li>
<li><p>More direct optimization for constant slices.</p>
<p>These are used in Python3 for all subscripts, e.g. <code class="docutils literal notranslate"><span class="pre">a[1:2]</span></code> will
use <code class="docutils literal notranslate"><span class="pre">slice(1,2)</span></code> effectively. For Python2 they are used less often,
but still. This also avoids a lot of noise during optimization,
mostly on Python3</p>
</li>
<li><p>Scons: Avoid writing database to disk entirely.</p>
<p>This saves a bit of disk churn and makes it unnecessary to specify
the location such that it doesnt collide between Python versions.</p>
</li>
<li><p>For optimization passes, use previous max total as minimum for next
pass. That will usually be a more accurate result, rather than
starting from 1 again. Part of 0.6.13.1 already.</p></li>
<li><p>Enhancements to the branch merging improve the scalability of Nuitka
somewhat, although the merging itself is still not very scalable,
there are some modules that are very slow to optimize still.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">orderset</span></code> if available over the inline copy for <code class="docutils literal notranslate"><span class="pre">OrderedSet</span></code>
which is much faster and improves Nuitka compile times.</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">pkgutil</span></code> a hard import too, this is in preparation of more
optimization for its functions.</p></li>
</ul>
</section>
<section id="id36">
<h3>Organisational<a class="headerlink" href="#id36" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Upstream patches for <code class="docutils literal notranslate"><span class="pre">PySide6</span></code> have been contributed and merged
into the development branch <code class="docutils literal notranslate"><span class="pre">dev</span></code>. Full support should be available
once this is released as part of 6.1 which is waiting for Qt 6.1
naturally.</p></li>
<li><p>Patches for <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> are available to commercial customers, see
<a class="reference external" href="https://nuitka.net/pages/pyside2.html">PySide2 support</a> page.</p></li>
<li><p>Formatted all documents with <code class="docutils literal notranslate"><span class="pre">rstfmt</span></code> and made that part of the
commit hook for Nuitka. It now works for all documents we have.</p></li>
<li><p>Updated inline copy of <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> to 4.59.0 which ought to address
spurious errors given.</p></li>
<li><p>User Manual: Remove <code class="docutils literal notranslate"><span class="pre">--show-progress</span></code> from the tutoral. The default
progress bar is then disabled, and is actually much nicer to use.</p></li>
<li><p>Developer Manual: Added description of how context managers should be
named.</p></li>
<li><p>Cleanup language for some warnings and outputs.</p>
<p>It was still using obsolete recursion language rather than talking
about following imports, which is the new one.</p>
</li>
</ul>
</section>
<section id="id37">
<h3>Cleanups<a class="headerlink" href="#id37" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Remove dead code related to constants marshal, the data composer has
replaced this.</p></li>
<li><p>Avoid internal API usage for loading extension modules on Linux,
there is a function in <code class="docutils literal notranslate"><span class="pre">sys</span></code> module to get the ld flags.</p></li>
</ul>
</section>
<section id="id38">
<h3>Tests<a class="headerlink" href="#id38" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">only</span></code> mode wasnt working properly.</p></li>
<li><p>Use new project options feature for specific options in basic tests
allowing to remove them from the test runner.</p></li>
</ul>
</section>
<section id="id39">
<h3>Summary<a class="headerlink" href="#id39" title="Permalink to this headline"></a></h3>
<p>For PySide2 things became more perfect, but it takes upstream patches
unfortunately such that only PySide6.1 will be working out of the box
outside of the commercial offering. We will also attempt to provide
workarounds, but there are some things that cannot be done that way.</p>
<p>This release added some more scalability to the optimization process,
however there will be more work needed to make efficient branch merges.</p>
<p>For onefile, a feature to include whole directories had been missing,
and could not easily be achieved with the existing options. This further
rounds this up, now whats considered missing is compression and macOS
support, both of which should be coming in a future release.</p>
<p>For the performance side of things, the binary operator work can
actually yield pretty good gains, with double digit improvements, but
this covers only so much. Much more C types and better type tracing
would be needed, but there was no progress on this front. Future
releases will have to revisit the type tracing to make sure, we know
more about loop variables, etc. so we can achieve the near C speed we
are looking for, at least in the field of <code class="docutils literal notranslate"><span class="pre">int</span></code> performance.</p>
<p>This release has largely been driven by the <a class="reference external" href="/doc/commercial.html">Nuitka Commercial</a> offering and needs for compatibility with more
code, which is of course always a good thing.</p>
</section>
</section>
<section id="nuitka-release-0-6-13">
<h2>Nuitka Release 0.6.13<a class="headerlink" href="#nuitka-release-0-6-13" title="Permalink to this headline"></a></h2>
<p>This release follows up with yet again massive improvement in many ways
with lots of bug fixes and new features.</p>
<section id="id40">
<h3>Bug Fixes<a class="headerlink" href="#id40" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Icon group entries were not still not working properly in
some cases, leading to no icon or too small icons being displayed.
Fixed in 0.6.12.2 already.</p></li>
<li><p>Windows: Icons and version information were copied from the
standalone executable to the onefile executable, but that failed due
to race situations, sometimes reproducible. Instead we now apply
things to both independently. Fixed in 0.6.12.2 already.</p></li>
<li><p>Standalone: Fixup scanning for DLLs with <code class="docutils literal notranslate"><span class="pre">ldconfig</span></code> on Linux and
newer versions making unexpected outputs. Fixed in 0.6.12.2 already.</p></li>
<li><p>UI: When there is no standard input provided, prompts were crashing
with <code class="docutils literal notranslate"><span class="pre">EOFError</span></code> when <code class="docutils literal notranslate"><span class="pre">--assume-yes-for-downloads</span></code> is not given,
change that to defaulting to <code class="docutils literal notranslate"><span class="pre">&quot;no&quot;</span></code> instead. Fixed in 0.6.12.2
already.</p></li>
<li><p>Windows: Detect empty strings for company name, product name, product
and file versions rather than crashing on them later. Them being
empty rather than not there can cause a lot of issues in other
places. Fixed in 0.6.12.2 already.</p></li>
<li><p>Scons: Pass on exceptions during execution in worker threads and
abort compilation immediately. Fixed in 0.6.12.2 already.</p></li>
<li><p>Python3.9: Still not fully compatible with typing subclasses, the
enhanced check is now closely matching the CPython code. Fixed in
0.6.12.2 already.</p></li>
<li><p>Linux: Nicer error message for missing <code class="docutils literal notranslate"><span class="pre">libfuse</span></code> requirement.</p></li>
<li><p>Compatibility: Lookups on dictionaries with <code class="docutils literal notranslate"><span class="pre">None</span></code> value giving a
<code class="docutils literal notranslate"><span class="pre">KeyError</span></code> exception, but with no value, which is not what CPython
does.</p></li>
<li><p>Python3.9: Fix, future annotations were crashing in debug mode. Fixed
in 0.6.12.3 already.</p></li>
<li><p>Standalone: Corrections to the <code class="docutils literal notranslate"><span class="pre">glfw</span></code> were made. Fixed in 0.6.12.3
already.</p></li>
<li><p>Standalone: Added missing mplicit dependency for <code class="docutils literal notranslate"><span class="pre">py.test</span></code>. Fixed
in 0.6.12.3 already.</p></li>
<li><p>Standalone: Adding missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">pyreadstat</span></code>.</p></li>
<li><p>Windows: Added workaround for common clcache locking problems. Since
we use it only inside a single Scons process, we can avoiding using
Windows mutexes, and use a process level lock instead.</p></li>
<li><p>Plugins: Fix plugin for support for <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>. Fixed in 0.6.12.3
already.</p></li>
<li><p>Standalone: Added support for latest <code class="docutils literal notranslate"><span class="pre">zmq</span></code> on Windows.</p></li>
<li><p>Scons: the <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> flag was not fully honored yet, with Scons
still making a few outputs.</p></li>
<li><p>Standalone: Added support for alternative DLL name for newer
<code class="docutils literal notranslate"><span class="pre">PyGTK3</span></code> on Windows. Fixed in 0.6.12.4 already.</p></li>
<li><p>Plugins: Fix plugin for support for <code class="docutils literal notranslate"><span class="pre">gevent</span></code>. Fixed in 0.6.12.4
already.</p></li>
<li><p>Standalone: Added yet another missing implicit dependency for
<code class="docutils literal notranslate"><span class="pre">pandas</span></code>.</p></li>
<li><p>Plugins: Fix, the <code class="docutils literal notranslate"><span class="pre">qt-plugins</span></code> plugin could stumble over <code class="docutils literal notranslate"><span class="pre">.mesh</span></code>
files.</p></li>
<li><p>Windows: Fix, dependency walker wasnt properly working with unicode
<code class="docutils literal notranslate"><span class="pre">%PATH%</span></code> which could e.g. happen with a virtualenv in a home
directory that requires them.</p></li>
<li><p>Python3: Fixed a few Python debug mode warnings about unclosed files
that have sneaked into the codebase.</p></li>
</ul>
</section>
<section id="id41">
<h3>New Features<a class="headerlink" href="#id41" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added new options <code class="docutils literal notranslate"><span class="pre">--windows-force-stdout-spec</span></code> and
<code class="docutils literal notranslate"><span class="pre">--windows-force-stderr-spec</span></code> to force output to files. The paths
provided at compile time can resolve symbolic paths, and are intended
to e.g. place these files near the executable. Check the User Manual
for a table of the currently supported values. At this time, the
feature is limited to Windows, where the need arose first, but it
will be ported to other supported OSes eventually. These are most
useful for programs run as <code class="docutils literal notranslate"><span class="pre">--windows-disable-console</span></code> or with
<code class="docutils literal notranslate"><span class="pre">--enable-plugin=windows-service</span></code>.</p></li>
<li><p>Windows: Added option <code class="docutils literal notranslate"><span class="pre">--windows-onefile-tempdir-spec</span></code> to provide
the temporary directory used with <code class="docutils literal notranslate"><span class="pre">--windows-onefile-tempdir</span></code> in
onefile mode, you can now select your own pattern, and e.g. hardcode
a base directory of your choice rather than <code class="docutils literal notranslate"><span class="pre">%TEMP</span></code>.</p></li>
<li><p>Added experimental support for <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> with workarounds for
compiled methods not being accepted by its core. There are known
issues with <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> still, but its working fine for some people
now. Upstream patches will have to be created to remove the need for
workarounds and full support.</p></li>
</ul>
</section>
<section id="id42">
<h3>Optimization<a class="headerlink" href="#id42" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Use binary operation code for their in-place variants too, giving
substantial performance improvements in all cases that were not dealt
with manually already, but were covered in standard binary
operations. Until now only some string, some float operations were
caught sped up, most often due to findings of Nuitka being terribly
slower, e.g. not reusing string memory for inplace concatenation, but
now all operations have code that avoids a generic code path, that is
also very slow on Windows due calling to using the embedded Python
via API being slow.</p></li>
<li><p>For mixed type operations, there was only one direction provided,
which caused fallbacks to slower forms, e.g. with <code class="docutils literal notranslate"><span class="pre">long</span></code> and
<code class="docutils literal notranslate"><span class="pre">float</span></code> values leading to inconsistent results, such that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-</span> <span class="pre">1</span></code>
and <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">a</span></code> being accelerated or not.</p></li>
<li><p>Added C boolean optimization for a few operations that didnt have
it, as these allow to avoid doing full computation of what the object
result would have to do. This is not exhausted fully yet.</p></li>
<li><p>Python3: Faster <code class="docutils literal notranslate"><span class="pre">+</span></code>/<code class="docutils literal notranslate"><span class="pre">-</span></code>/<code class="docutils literal notranslate"><span class="pre">+=</span></code>/<code class="docutils literal notranslate"><span class="pre">-=</span></code> binary and in-place
operations with <code class="docutils literal notranslate"><span class="pre">int</span></code> values providing specialized code helpers
that are much faster, esp. in cases where no new storage is allocated
for in-place results and where not a lot of digits are involved.</p></li>
<li><p>Python2: The Python3 <code class="docutils literal notranslate"><span class="pre">int</span></code> code is the Python2 <code class="docutils literal notranslate"><span class="pre">long</span></code> type and
benefits from the optimization of <code class="docutils literal notranslate"><span class="pre">+</span></code>/<code class="docutils literal notranslate"><span class="pre">-</span></code>/<code class="docutils literal notranslate"><span class="pre">+=</span></code>/<code class="docutils literal notranslate"><span class="pre">-=</span></code> code as
well, but of course its use is relatively rare.</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports to become hard imports, so more
efficient code is generated for them.</p></li>
<li><p>Counting of instances had a runtime impact by providing a <code class="docutils literal notranslate"><span class="pre">__del__</span></code>
that was still needed to be executed and limits garbage collection on
types with older Python versions.</p></li>
<li><p>UI: Avoid loading <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> module before its actually used if at all
(it may get disabled by the user), speeding up the start of Nuitka.</p></li>
<li><p>Make sure to optimize internal helpers only once and immediately,
avoiding extra global passes that were slowing down Python level
compilation by of large programs by a lot.</p></li>
<li><p>Make sure to recognize the case where a module optimization can
provide no immediate change, but only after a next run, avoiding
extra global passes originating from these, that were slowing down
compilation of large programs by a lot. Together with the other
change, this can improve scalability by a lot.</p></li>
<li><p>Plugins: Remove implicit dependencies for <code class="docutils literal notranslate"><span class="pre">pkg_resources.extern</span></code>
and use aliases instead. Using one of the packages, was causing all
that might be used, to be considered as used, with some being
relatively large. This was kind of a mistake in how we supported this
so far.</p></li>
<li><p>Plugins: Revamped the <code class="docutils literal notranslate"><span class="pre">eventlet</span></code> plugin, include needed DNS modules
as bytecode rather than as source code, scanning them with
<code class="docutils literal notranslate"><span class="pre">pkgutil</span></code> rather than filesystem, with much cleaner code in the
plugin.</p></li>
</ul>
</section>
<section id="id43">
<h3>Organisational<a class="headerlink" href="#id43" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Removed support for <code class="docutils literal notranslate"><span class="pre">pefile</span></code> dependency walker choice and inline
copy of the code. It was never as good giving incomplete results, and
after later improvements, slower, and therefore has lost the original
benefit over using Dependency Walker that is faster and more correct.</p></li>
<li><p>Added example for onefile on Windows with the version information and
with the temporary directory mode.</p></li>
<li><p>Describe difference in file access with onefile on Windows, where
<code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> and <code class="docutils literal notranslate"><span class="pre">os.path.dirname(__file__)</span></code> will be different
things.</p></li>
<li><p>Added inline copy of <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> to make sure its available for
progress bar output for 2.7 or higher. Recommend having it in the
Debian package.</p></li>
<li><p>Added inline copy of <code class="docutils literal notranslate"><span class="pre">colorama</span></code> for use on Windows, where on some
terminals it will give better results with the progress bar.</p></li>
<li><p>Stop using old PyLint for Python2, while it would be nice to catch
errors, the burden of false alarms seems to high now.</p></li>
<li><p>UI: Added even more checks on options that make no sense, made sure
to do this only after a possible restart in proper environment, so
warnings are not duplicated.</p></li>
<li><p>For Linux onefile, keep appimage outputs in case of an error, that
should help debugging it in case of issues.</p></li>
<li><p>UI: Added traces for plugin provided implicit dependencies leading to
inclusions.</p></li>
<li><p>Added inline copy of <code class="docutils literal notranslate"><span class="pre">zstd</span></code> C code for use in decompression for the
Windows onefile bootstrap, not yet used though.</p></li>
<li><p>Added checks to options that accept package names for obvious
mistakes, such that <code class="docutils literal notranslate"><span class="pre">--include-package-data</span> <span class="pre">--mingw64</span></code> will not
swallow an option, as that is clearly not a package name, that would
hide that option, while also not having any intended effect.</p></li>
<li><p>Added ignore list for decision to recompile extension modules with
available source too. For now, Nuitka will not propose to recompile
<code class="docutils literal notranslate"><span class="pre">Cython</span></code> modules that are very likely not used by the program
anyway, and also not for <code class="docutils literal notranslate"><span class="pre">lxml</span></code> until its clear if theres any
benefit in that. More will be added in the future, this is mostly for
cases, where Cython causes incompatibilities.</p></li>
<li><p>Added support for using abstract base classes in plugins. These are
not considered for loading, and allow nicer implementation of shared
code, e.g. between <code class="docutils literal notranslate"><span class="pre">PyQt5</span></code> and <code class="docutils literal notranslate"><span class="pre">PySide2</span></code> plugins, but allow e.g.
to enforce the provision of certain overloads.</p></li>
<li><p>User Manual: Remove the instruction to install <code class="docutils literal notranslate"><span class="pre">clcache</span></code>, since
its an inline copy, this makes no sense anymore and that was
obsolete.</p></li>
<li><p>Updated PyLint to latest versions, and our requirements in general.</p></li>
</ul>
</section>
<section id="id44">
<h3>Cleanups<a class="headerlink" href="#id44" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Started removal of PyLint annotations used for old Python2 only. This
will be a continuous action to remove these.</p></li>
<li><p>Jinja2 based static code generation for operations was cleaned up, to
avoid code for static mismatches in the result C, avoiding language
constructs like <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(1</span> <span class="pre">&amp;&amp;</span> <span class="pre">0)</span></code> with sometimes larger branches,
replacing it with Jinja2 branches of the <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">...</span> <span class="pre">%}</span></code> form.</p></li>
<li><p>Jinja2 based Python2 <code class="docutils literal notranslate"><span class="pre">int</span></code> code was pioniering the use of macros,
but this was expanded to allow kinds of types for binary operations,
allow their reuse for in-place operation, with these macros making
returns via goto exits rather than return statements in a function.
Landing pads for these exits can then assign target values for
in-place different from what those for binary operation result return
do.</p></li>
<li><p>Changed the interfacing of plugins with DLL dependency detection,
cleaning up the interactions considerably with more unified code, and
faster executing due to cached plugin decisons.</p></li>
<li><p>Integrate manually provided slot function for <code class="docutils literal notranslate"><span class="pre">unicode</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code>
into the standard static code generation. Previously parts were
generated and parts could be generated, but also provided with manual
code. The later is now all gone.</p></li>
<li><p>Use a less verbose progress bar format with less useless infos,
making it less likely to overflow.</p></li>
<li><p>Cleanup how payload data is accessed in Windows onefile bootstrap,
preparing the addition of decompression, doing the reading from the
file in only one dedicated function.</p></li>
<li><p>When Jinja2 generated exceptions in the static code, it is now done
via proper Jinja2 macros rather than Python code, and these now avoid
useless Python version branches where possible, e.g. because a type
like <code class="docutils literal notranslate"><span class="pre">bytes</span></code> is already Python version specific, with the goal to
get rid of <code class="docutils literal notranslate"><span class="pre">PyErr_Format</span></code> usage in our generated static code. That
goal is future work though.</p></li>
<li><p>Move safe strings helpers (cannot overflow) to a dedicated file, and
remove the partial duplication on the Windows onefile bootstrap code.</p></li>
<li><p>The Jinja2 static code generation was enhanced to track the usage of
labels used as goto targets, so that error exits, and value typed
exits from operations code no longer emitted when not used, and
therefore labels that are not used are not present.</p></li>
<li><p>For implicit dependencies, the parsing of the <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> file of a
module no longer emits a dependency on the module itself. Also from
plugins, these are now filtered away.</p></li>
</ul>
</section>
<section id="id45">
<h3>Tests<a class="headerlink" href="#id45" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Detect if onefile mode has required downloads and if there is user
consent, otherwise skip onefile tests in the test runner.</p></li>
<li><p>Need to also allow accesses to files via short paths on Windows if
these are allowed long paths.</p></li>
<li><p>The standalone tests on Windows didnt actually take run time traces
and therefore were ineffective.</p></li>
<li><p>Added standalone test for <code class="docutils literal notranslate"><span class="pre">glfw</span></code> coverage.</p></li>
<li><p>Construct based tests for in-place operations are now using a value
for the first time, and then a couple more times, allowing for real
in-place usage, so we are sure we measure correctly if thats
happening.</p></li>
</ul>
</section>
<section id="id46">
<h3>Summary<a class="headerlink" href="#id46" title="Permalink to this headline"></a></h3>
<p>Where the big change of the last release were optimization changes to
reduce the global passes, this release addresses remaining causes for
extra passes, that could cause these to still happen. That makes sure,
Nuitka scalability is very much enhanced in this field again.</p>
<p>The new features for forced outputs are at this time Windows only and
make a huge difference when it comes to providing a way to debug Windows
Services or programs in general without a console, i.e. a GUI program.
These will need even more specifiers, e.g. to cover program directory,
rather than exe filename only, but its a very good start.</p>
<p>On the tooling side, not a lot has happened, with the clcache fix, it
seems that locking issues on Windows are gone.</p>
<p>The plugin changes from previous releases had left a few of them in a
state where they were not working, but this should be restored.
Interaction with the plugins is being refined constantly, and this
releases improved again on their interfaces. It will be a while until
this becomes stable.</p>
<p>Adding support for PySide2 is a headline feature actually, but not as
perfect as we are used to in other fields. More work will be needed,
also in part with upstream changes, to get this to be fully supported.</p>
<p>For the performance side of things, the in-place work and the binary
operations work has taken proof of concept stuff done for Python2 and
applied it more universally to Python3. Until we cover all long
operations, esp. <code class="docutils literal notranslate"><span class="pre">*</span></code> seems extremely important and is lacking, this
cannot be considered complete, but it gives amazing speedups in some
cases now.</p>
<p>Future releases will revisit the type tracing to make sure, we know more
about loop variables, to apply specific code helpers more often, so we
can achieve the near C speed we are looking for in the field of <code class="docutils literal notranslate"><span class="pre">int</span></code>
performance.</p>
</section>
</section>
<section id="nuitka-release-0-6-12">
<h2>Nuitka Release 0.6.12<a class="headerlink" href="#nuitka-release-0-6-12" title="Permalink to this headline"></a></h2>
<p>This release is yet again a massive improvement in many ways with lots
of bug fixes and new features.</p>
<section id="id47">
<h3>Bug Fixes<a class="headerlink" href="#id47" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Windows: Icon group entries were not working properly in some cases,
leading to no icon or too small icons being displayed.</p></li>
<li><p>Standalone: The PyQt implicit dependencies were broken. Fixed in
0.6.11.1 already.</p></li>
<li><p>Standalone: The datafile collector plugin was broken. Fixed in
0.6.11.3 already.</p></li>
<li><p>Standalone: Added support for newer forms of <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> which
need a different file layout and config file format. Fixed in
0.6.11.1 already.</p></li>
<li><p>Plugins: If there was an error during loading of the module or
plugin, it could still be attempted for use. Fixed in 0.6.11.1
already.</p></li>
<li><p>Disable notes given by gcc, these were treated as errors. Fixed in
0.6.11.1 already.</p></li>
<li><p>Windows: Fix, spaces in gcc installation paths were not working.
Partially fixed in 0.6.11.4 already.</p></li>
<li><p>Linux: Fix, missing onefile icon error message was not complete.
Fixed in 0.6.11.4 already.</p></li>
<li><p>Standalone: Workaround <code class="docutils literal notranslate"><span class="pre">zmq</span></code> problem on Windows by duplicating a
DLL in both expected places. Fixed in 0.6.11.4 already.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">dill-compat</span></code> plugin wasnt working anymore. Fixed
in 0.6.11.4 already.</p></li>
<li><p>Windows: Fix mistaken usage of <code class="docutils literal notranslate"><span class="pre">sizeof</span></code> for wide character buffers.
This caused Windows onefile mode in temporary directory. Fixed in
0.6.11.4 already.</p></li>
<li><p>Windows: Fix, checking subfolder natured crashed with different
drives on Windows. Fixed in 0.6.11.4 already.</p></li>
<li><p>Windows: Fix, usage from MSVC prompt was no longer working, detect
used SDK properly. Fixed in 0.6.11.4 already.</p></li>
<li><p>Windows: Fix, old clcache installation uses pth files that prevented
our inline copy from working, workaround was added.</p></li>
<li><p>Windows: Also specify stack size to be used when compiling with gcc
or clang.</p></li>
<li><p>Fix, claim of Python 3.9 support also in PyPI metadata was missing.
Fixed in 0.6.11.5 already.</p></li>
<li><p>Python3.9: Subscripting <code class="docutils literal notranslate"><span class="pre">type</span></code> for annotations wasnt yet
implemented.</p></li>
<li><p>Python3.9: Better matching of types for metaclass selection, generic
aliases were not yet working, breaking some forms of type annotations
in base classes.</p></li>
<li><p>Windows: Allow selecting <code class="docutils literal notranslate"><span class="pre">--msvc-version</span></code> when a MSVC prompt is
currently activated.</p></li>
<li><p>Windows: Do not fallback to using gcc when <code class="docutils literal notranslate"><span class="pre">--msvc-version</span></code> has
been specified. Instead its an error if that fails to work.</p></li>
<li><p>Python3.6+: Added support for <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">()</span></code> statements, these have no
effect, but were crashing Nuitka.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">a</span>  <span class="c1"># standard form</span>
<span class="k">del</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>  <span class="c1"># same as del a; del b</span>
<span class="k">del</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <span class="c1"># braces are allowed</span>
<span class="k">del</span> <span class="p">()</span>  <span class="c1"># allowed for consistency, but wasn&#39;t working.</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">glfw</span></code> through a dedicated plugin.</p></li>
<li><p>macOS: Added support for Python3 from system and CPython official
download for latest OS version.</p></li>
</ul>
</section>
<section id="id48">
<h3>New Features<a class="headerlink" href="#id48" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>UI: With <code class="docutils literal notranslate"><span class="pre">tqdm</span></code> installed alongside Nuitka, experimental progress
bars are enabled. Do not use `` show-progress`` or <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> as
these might have to disable it.</p></li>
<li><p>Plugins: Added APIs for final processing of the result and onefile
post processing.</p></li>
<li><p>Onefile: On Windows, the Python process terminates with
<code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> when the user sends CTRL-break, CTRL-C,
shutdown or logoff signals.</p></li>
<li><p>Onefile: On Windows, in case of the launching process terminating
unexpectedly, e.g. due to Taskmanager killing it, or a <code class="docutils literal notranslate"><span class="pre">os.sigkill</span></code>
resulting in that, the Python process still terminates with
<code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code>.</p></li>
<li><p>Windows: Now can select icons by index from files with multiple
icons.</p></li>
</ul>
</section>
<section id="id49">
<h3>Optimization<a class="headerlink" href="#id49" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Avoid global passes caused by module specific optimization. The
variable completeness os now traced per module and function scope,
allowing a sooner usage. Unused temporary variables and closure
variables are remove immediately. Recognizing possible auto releases
of parameter variables is also instantly.</p>
<p>This should bring down current passes from 5-6 global passes to only
2 global passes in the normal case, reducing frontend compile times
in some cases massively.</p>
</li>
<li><p>Better unary node handling. Dedicated nodes per operation allow for
more compact memory usage and faster optimization.</p></li>
<li><p>Detect flow control and value escape for the repr of node based on
type shape.</p></li>
<li><p>Enhanced optimization of caught exception references, these never
raise or have escapes of control flow.</p></li>
<li><p>Exception matching operations are more accurately annotated, and may
be recognized to not raise in more cases.</p></li>
<li><p>Added optimization for the <code class="docutils literal notranslate"><span class="pre">issubclass</span></code> built-in.</p></li>
<li><p>Removed scons caching as used on Windows entirely. We should either
be using <code class="docutils literal notranslate"><span class="pre">clcache</span></code> or <code class="docutils literal notranslate"><span class="pre">ccache</span></code> automatically now.</p></li>
<li><p>Make sure to use <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> for all node classes. In some cases,
mixins were preventing the feature from being it. We now enforce
their correct specification of slots, which makes sure we cant miss
it anymore. This should again gain more speed and save memory at
frontend compile time.</p></li>
<li><p>Scons: Enhanced gcc version detection with improved caching behavior,
this avoids querying the same gcc binary twice.</p></li>
</ul>
</section>
<section id="id50">
<h3>Organisational<a class="headerlink" href="#id50" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The description of Nuitka on PyPI was absent for a while. Added back
by adding long description of the project derived from the README
file.</p></li>
<li><p>Avoid terms <code class="docutils literal notranslate"><span class="pre">blacklist</span></code>, <code class="docutils literal notranslate"><span class="pre">whilelist</span></code> and <code class="docutils literal notranslate"><span class="pre">slave</span></code> in the Nuitka
code preferring <code class="docutils literal notranslate"><span class="pre">blocklist</span></code>, <code class="docutils literal notranslate"><span class="pre">ignorelist</span></code> and <code class="docutils literal notranslate"><span class="pre">child</span></code> instead,
which are actually more clear anyway. We follow a general trend to do
this.</p></li>
<li><p>Configured the inline copy of Scons so pylance has an easier time to
find it.</p></li>
<li><p>The git commit hook had stopped applying diffs with newest git,
improved that.</p></li>
<li><p>Updated description for adding new CPython test suite.</p></li>
<li><p>Using https URLs for downloading dependency walker, for it to be more
secure.</p></li>
<li><p>The commit hook can now be disabled, its in the Developer Manual how
to do it.</p></li>
</ul>
</section>
<section id="id51">
<h3>Cleanups<a class="headerlink" href="#id51" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved unary operations to their own module, the operators module was
getting too crowded.</p></li>
<li><p>The scons files for Python C backend and Windows onefile got cleaned
up some more and moved more common code to shared modules.</p></li>
<li><p>When calling external tools, make sure to provide null input where
possible.</p></li>
<li><p>Unified calling <code class="docutils literal notranslate"><span class="pre">install_name_tool</span></code> into a single method for adding
rpath and name changes both at the same time.</p></li>
<li><p>Unified how tools like <code class="docutils literal notranslate"><span class="pre">readelf</span></code>, <code class="docutils literal notranslate"><span class="pre">ldconfig</span></code> etc. are called and
error exits and outputs checked to make sure we dont miss anything
as easily.</p></li>
</ul>
</section>
<section id="id52">
<h3>Tests<a class="headerlink" href="#id52" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Adapted for some openSUSE specific path usages in standalone tests.</p></li>
<li><p>Basic tests for onefile operation and with termination signal sent
were added.</p></li>
</ul>
</section>
<section id="id53">
<h3>Summary<a class="headerlink" href="#id53" title="Permalink to this headline"></a></h3>
<p>The big changes in this release are the optimization changes to reduce
the global passes and the memory savings from other optimization. These
should again make Nuitka more scalable with large projects, but there
definitely is work remaining.</p>
<p>Adding nice stopping behaviour for the Onefile mode on Windows is
seemingly a first, and it wasnt easy, but it will make it more reliable
to users.</p>
<p>Also tooling of gcc and MSVC on Windows got a lot more robust, covering
more cases, and macOS support has been renewed and should be a lot
better now.</p>
<p>The progress bar is a nice touch and improves the overall feel of the
compilation process, but obviously we need to aim at getting faster
overall still. For projects using large dependencies, e.g. Pandas the
compilation is still far too slow and that will need work on caching
frontend results, and better optimization and C code generation for the
backend.</p>
</section>
</section>
<section id="nuitka-release-0-6-11">
<h2>Nuitka Release 0.6.11<a class="headerlink" href="#nuitka-release-0-6-11" title="Permalink to this headline"></a></h2>
<p>This release is a massive improvement in many ways with lots of bug
fixes and new features.</p>
<section id="id54">
<h3>Bug Fixes<a class="headerlink" href="#id54" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> file parser didnt handle relative imports. Fixed
in 0.6.10.1 already.</p></li>
<li><p>Windows: Fix, multiprocessing plugin was not working reliable
following of imports from the additional entry point. Fixed in
0.6.10.1 already.</p></li>
<li><p>Pipenv: Workaround parsing issue with our <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> to allow
installation from Github. Fixed in 0.6.10.1 already.</p></li>
<li><p>Merging of branches in optimization could give indeterministic
results leading to more iterations than necessary. Fixed in 0.6.10.1
already.</p></li>
<li><p>Windows: Avoid profile powershell when attempting to resolve
symlinks. Fixed in 0.6.10.1 already.</p></li>
<li><p>Windows: Fix, always check for stdin, stdout, and stderr presence.
This was so far restricted to gui mode applications, but it seems to
be necessary in other situations too. Fixed in 0.6.10.1 already.</p></li>
<li><p>Python2: Fix, <code class="docutils literal notranslate"><span class="pre">--trace-execution</span></code> was not working for standalone
mode but can be useful for debugging. Fixed in 0.6.10.1 already.</p></li>
<li><p>Windows: Onefile could run into path length limits. Fixed in 0.6.10.3
already.</p></li>
<li><p>Windows: The winlib gcc download link became broken and was updated.
Fixed in 0.6.10.3 already.</p></li>
<li><p>Plugins: The __main__ module was not triggering all plugin hooks,
but it needs to for completeness.</p></li>
<li><p>Standalone: Fix, symlinked Python installations on Windows were not
working, with dependency walker being unable to look into these.
Fixed in 0.6.10.4 already.</p></li>
<li><p>Standalone: Fix support for numpy on Windows and macOS, the plugin
failed to copy important DLLs. Fixed in 0.6.10.4 already.</p></li>
<li><p>Python3: For versions before 3.7, the symlink resolution also needs
to be done, but wasnt handling the bytes output yet. Fixed in
0.6.10.4 already.</p></li>
<li><p>Fix, folder based inclusion would both pick up namespace folders and
modules of the same name, crashing the compilation due to conflicts.
Fixed in 0.6.10.4 already.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">--lto</span></code> wasnt used for clang on non-Windows yet.</p></li>
<li><p>Fix, the order of locals dict releases wasnt enforced, which could
lead to differences that break caching of C files potentially. Fixed
in 0.6.10.5 already.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">hash</span></code> nodes didnt consider if their argument was raising,
even if the type of the argument was <code class="docutils literal notranslate"><span class="pre">str</span></code> and therefore the
operation should not. Fixed in 0.6.10.5 already.</p></li>
<li><p>Fix, need to copy type shape and escape description for the
replacement inverted comparisons when used with <code class="docutils literal notranslate"><span class="pre">not</span></code>, otherwise
the compilation can crash as these are expected to be present at all
times. Fixed in 0.6.10.5 already.</p></li>
<li><p>Fix, some complex constant values could be confused, e.g. <code class="docutils literal notranslate"><span class="pre">-0j</span></code> and
<code class="docutils literal notranslate"><span class="pre">0j</span></code>. These corner cases were not properly considered in the
constant loading code, only for <code class="docutils literal notranslate"><span class="pre">float</span></code> so far.</p></li>
<li><p>Standalone: Fix, bytecode only standard library modules were not
working. This is at least used with Fedora 33.</p></li>
<li><p>Linux: Fix, extension modules compiled with <code class="docutils literal notranslate"><span class="pre">--lto</span></code> were not
working.</p></li>
<li><p>Windows: Retry if updating resources fails due to Virus checkers
keeping files locked.</p></li>
<li><p>Plugins: Pre- and postload code of modules should not be allowed to
cause <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>, as these will be invisible to the other parts
of optimization, instead make them unraisable error traces.</p></li>
<li><p>Standalone: Adding missing import for SciPy 1.6 support.</p></li>
<li><p>Windows: Fix, only export required symbols when using MinGW64 in
module mode.</p></li>
</ul>
</section>
<section id="id55">
<h3>New Features<a class="headerlink" href="#id55" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.9: Added official support for this version.</p></li>
<li><p>Onefile: Added command line options to include data files. These are
<code class="docutils literal notranslate"><span class="pre">--include-package-data</span></code> which will copy all non-DLLs and
non-Python files of package names matching the pattern given. And
<code class="docutils literal notranslate"><span class="pre">--include-data-file</span></code> takes source and relative target file paths
and copies them. For onefile this is the only way to include files,
for standalone mode they are mostly a convenience function.</p></li>
<li><p>Onefile: Added mode where the file is unpacked to a temporary folder
before running instead of doing it to appdata.</p></li>
<li><p>Onefile: Added linux specific options <code class="docutils literal notranslate"><span class="pre">--linux-onefile-icon</span></code> to
allow provision of an icon to use in onefile mode on Linux, so far
this was only available as the hard coded path to a Python icon,
which also didnt exist on all platforms.</p></li>
<li><p>UI: Major logging cleanup. Everything is now using our tracing
classes and even error exits go through there and are therefore
colored if possible.</p></li>
<li><p>Plugins: Make it easier to integrate commercial plugins, now only an
environment variable needs to point to them.</p></li>
<li><p>UI: Enhanced option parsing gives notes. This complains about options
that conflict or that are implied in others. Trying to catch more
usage errors sooner.</p></li>
<li><p>Plugins: Ignore exceptions in buggy plugin code, only warn about them
unless in debug mode, where they still crash Nuitka.</p></li>
<li><p>Scons: More complete scons report files, includes list values as well
and more modes used.</p></li>
<li><p>Windows: The <code class="docutils literal notranslate"><span class="pre">clcache</span></code> is now included and no longer used from the
system.</p></li>
<li><p>Output for <code class="docutils literal notranslate"><span class="pre">clcache</span></code> and <code class="docutils literal notranslate"><span class="pre">ccache</span></code> results got improved.</p></li>
<li><p>Enhanced support for <code class="docutils literal notranslate"><span class="pre">clang</span></code>, on Windows if present near a
<code class="docutils literal notranslate"><span class="pre">gcc.exe</span></code> like it is the case for some winlibs downloads, it will
be used. To use it provide <code class="docutils literal notranslate"><span class="pre">--mingw64</span> <span class="pre">--clang</span></code> both. Without the
first one, it will mean <code class="docutils literal notranslate"><span class="pre">clangcl.exe</span></code> which uses the MSVC compiler
as a host.</p></li>
</ul>
</section>
<section id="id56">
<h3>Optimization<a class="headerlink" href="#id56" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Some modules had very slow load times, e.g. if they used many list
objects due to linear searches for memory deduplication of objects.
We now have dictionaries of practically all constant objects loaded,
making these more instant.</p></li>
<li><p>Use less memory at compile time due using <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> for all node
types, finally figured out, how to achieve this with multiple
inheritance.</p></li>
<li><p>Use hedley for compiler macros like <code class="docutils literal notranslate"><span class="pre">unlikely</span></code> as they know best
how to do these.</p></li>
<li><p>Special case the merging of 2 branches avoiding generic code and
being much faster.</p></li>
<li><p>Hard imports have better code generated, and are being optimized into
for the few standard library modules and builtin modules we handle,
they also now annotate the type shape to be module.</p></li>
<li><p>No longer annotate hard module import attribute lookups as control
flow escapes. Not present attributes are changed into static raises.
Trust for values is configured for a few values, and experimental.</p></li>
<li><p>Avoid preloaded packages for modules that have no side effects and
are in the standard library, typically <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files will use e.g.
<code class="docutils literal notranslate"><span class="pre">os</span></code> but thats not needed to be preserved.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">incbin</span></code> for including binary data through inline assembly of
the C compiler. This covers many more platforms than our previous
linker option hacks, and the fallback to generated C code. In fact
everything but Windows uses this now.</p></li>
</ul>
</section>
<section id="id57">
<h3>Organisational<a class="headerlink" href="#id57" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: For Scons we now require a Python 3.5 or higher to be
installed to use it.</p></li>
<li><p>Windows: Removed support for gcc older than version 8. This
specifically affects CondaCC and older MinGW64 installations. Since
Nuitka can now download the MinGW64 10, there is no point in having
these and they cause issues.</p></li>
<li><p>We took over the maintenance of clcache as Nuitka/clcache which is
not yet ready for public consumption, but should become the new
source of clache in the future.</p></li>
<li><p>Include an inline copy of clcache in Nuitka and use it on Windows for
MSVC and ClangCL.</p></li>
<li><p>Removed compatibility older aliases of follow option, <code class="docutils literal notranslate"><span class="pre">--recurse-*</span></code>
and require <code class="docutils literal notranslate"><span class="pre">--follow-*</span></code> options to be used instead.</p></li>
<li><p>For pylint checking, the tool now supports a <code class="docutils literal notranslate"><span class="pre">--diff</span></code> mode where
only the changed files get checked. This is much faster and allows to
do it more often before commit.</p></li>
<li><p>Check the versions of isort and black when doing the autoformat to
avoid using outdated versions.</p></li>
<li><p>Handling missing pylint more gracefully when checking source code
quality.</p></li>
<li><p>Make sure to use the codespell tool with Python3 and make sure to
error exit when spelling problems were found, so we can use this in
Github actions too.</p></li>
<li><p>Removed Travis config, we now only use Github actions.</p></li>
<li><p>Removed landscape config, it doesnt really exist anymore.</p></li>
<li><p>Bumped all PyPI dependnecies to their latest versions.</p></li>
<li><p>Recommend ccache on Debian, as we now consider the absence of ccache
something to warn about.</p></li>
<li><p>Plugins: The DLLs asked for by plugins that are not found are no
longer warned about.</p></li>
<li><p>Allow our checker and format tools to run on outside of tree code. We
are using that for Nuitka/clcache.</p></li>
<li><p>Added support for Fedora 33 and openSUSE 15.3, as well as Ubuntu
Groovy.</p></li>
<li><p>Windows: Check if Windows SDK is installed for MSVC and ClangCL.</p></li>
<li><p>Windows: Enhanced wording in case no compiler was found. No longer
tell people how to manually install MinGW64, that is no longer
necessary and <code class="docutils literal notranslate"><span class="pre">pywin32</span></code> is not needed to detect MSVC, so its not
installed if not found.</p></li>
<li><p>Detect embeddable Python by missing include files, and reject it
with proper error message.</p></li>
<li><p>Added onefile and standalone as a use case to the manual and put also
the DLL and data files problems as typically issues.</p></li>
</ul>
</section>
<section id="id58">
<h3>Cleanups<a class="headerlink" href="#id58" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Avoid decimal and string comparisons for Python versions checks,
these were lazy and are going to break once 3.10 surfaces. In testing
we now use tuples, in Nuitka core hexacimal values much like CPython
itself does.</p></li>
<li><p>Stop using subnode child getters and setters, and instead only use
subnode attributes. This was gradually changed so far, but in this
release all remaining uses have migrated. This should also make the
optimization stage go faster.</p></li>
<li><p>Change node constructors to not use a decorator to resolve conflicts
with builtin names, rather handle these with manual call changes, the
decorator only made it difficult to read and less performant.</p></li>
<li><p>Move safe string helpers to their own dedicated helper file, allowing
for reuse in plugin code that doesnt want to use all of Nuitka C
helpers.</p></li>
<li><p>Added utils code for inline copy imports, as we use that for quite a
few things now.</p></li>
<li><p>Further restructured the Scons files to use more common code.</p></li>
<li><p>Plugins: The module name objects now reject many <code class="docutils literal notranslate"><span class="pre">str</span></code> specific
APIs that ought to not be used, and the code got changed to use these
instead, leading to cleaner and more correct usages.</p></li>
<li><p>Using named tuples to specify included data files and entry points.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">pkgutil</span></code> in plugins to scan for modules rather than listing
directories.</p></li>
</ul>
</section>
<section id="id59">
<h3>Tests<a class="headerlink" href="#id59" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New option to display executed commands during comparisons.</p></li>
<li><p>Added test suite for onefile testing.</p></li>
</ul>
</section>
<section id="id60">
<h3>Summary<a class="headerlink" href="#id60" title="Permalink to this headline"></a></h3>
<p>This release has seen Python3.9 and Onefile both being completed. The
later needs compression added on Windows, but that can be added in a
coming release, for now its fully functional.</p>
<p>The focus clearly has been on massive cleanups, some of which will
affect compile time performance. There is relatively little new
optimization otherwise.</p>
<p>The adoption of clcache enables a very fast caching, as its now loaded
directly into the Scons process, avoiding a separate process fork.</p>
<p>Generally a lot of polishing has been applied with many cleanups
lowering the technical debt. It will be interesting to see where the
hard module imports can lead us in terms of more optimization. Static
optimization of the Python version comparisons and checks is needed to
lower the amount of imports to be processed.</p>
<p>Important fixes are also included, e.g. the constants loading
performance was too slow in some cases. The <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> on
Windows and <code class="docutils literal notranslate"><span class="pre">numpy</span></code> plugins were regressed and finally everything
ought to be back to working fine.</p>
<p>Future work will have to aim at enhanced scalability. In some cases,
Nuitka still takes too much time to compile if projects like Pandas
include virtually everything installed as an option for it to use.</p>
</section>
</section>
<section id="nuitka-release-0-6-10">
<h2>Nuitka Release 0.6.10<a class="headerlink" href="#nuitka-release-0-6-10" title="Permalink to this headline"></a></h2>
<p>This release comes with many new features, e.g. onefile support, as well
as many new optimization and bug fixes.</p>
<section id="id61">
<h3>Bug Fixes<a class="headerlink" href="#id61" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, was memory leaking arguments of all complex call helper
functions. Fixed in 0.6.9.6 already.</p></li>
<li><p>Plugins: Fix, the dill-compat code needs to follow API change. Fixed
in 0.6.9.7 already.</p></li>
<li><p>Windows: Fixup for multiprocessing module and complex call helpers
that could crash the program. Fixed in 0.6.9.7 already.</p></li>
<li><p>Fix, the frame caching could leak memory when using caching for
functions and generators used in multiple threads.</p></li>
<li><p>Python3: Fix, importing an extension module below a compiled module
was not possible in accelerated mode.</p></li>
<li><p>Python3: Fix, keyword arguments for <code class="docutils literal notranslate"><span class="pre">open</span></code> built-in were not fully
compatible.</p></li>
<li><p>Fix, the scons python check should also not accept directories,
otherwise strange misleading error will occur later.</p></li>
<li><p>Windows: When Python is installed through a symbolic link, MinGW64
and Scons were having issues, added a workaround to resolve it even
on Python2.</p></li>
<li><p>Compatibility: Added support for <code class="docutils literal notranslate"><span class="pre">co_freevars</span></code> in code objects,
e.g. newer matplotlib needs this.</p></li>
<li><p>Standalone: Add needed data files for gooey. Fixed in 0.6.9.4
already.</p></li>
<li><p>Scons: Fix, was not respecting <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> option when running Scons.
Fixed in 0.6.9.3 already.</p></li>
<li><p>Scons: Fix, wasnt automatically detecting Scons from promised paths.
Fixed in 0.6.9.2 already.</p></li>
<li><p>Scons: Fix, the clcache output parsing wasnt robust enough. Fixed in
0.6.9.1 already.</p></li>
<li><p>Python3.8: Ignore all non-strings provided in doc-string fashion,
they are not to be considered.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, <code class="docutils literal notranslate"><span class="pre">setattr</span></code> and <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> could not be used in
finally clauses anymore. Fixed in 0.6.9.1 already.</p></li>
<li><p>Windows: For Python3 enhanced compatibility for Windows no console
mode, they need a <code class="docutils literal notranslate"><span class="pre">sys.stdin</span></code> or else e.g. <code class="docutils literal notranslate"><span class="pre">input</span></code> will not be
compatible and raise <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p></li>
</ul>
</section>
<section id="id62">
<h3>New Features<a class="headerlink" href="#id62" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python 3.9, in such a way that the
CPython3.8 test suite passes now, the 3.9 suite needs investigation
still, so we might be missing new features.</p></li>
<li><p>Added experimental support for Onefile mode with <code class="docutils literal notranslate"><span class="pre">--onefile</span></code> that
uses <code class="docutils literal notranslate"><span class="pre">AppImage</span></code> on Linux and our own bootstrap binary on Windows.
Other platforms are not supported at this time. With this, the
standalone folder is packed into a single binary. The Windows variant
currently doesnt yet do any compression yet, but the Linux one does.</p></li>
<li><p>Windows: Added downloading of <code class="docutils literal notranslate"><span class="pre">ccache.exe</span></code>, esp. as the other
sources so far recommended were not working properly after updates.
This is taken from the official project and should be good.</p></li>
<li><p>Windows: Added downloading of matching MinGW64 C compiler, if no
other was found, or that was has the wrong architecture, e.g. 32 bits
where we need 64 bits.</p></li>
<li><p>Windows: Added ability to copy icon resources from an existing binary
with new option <code class="docutils literal notranslate"><span class="pre">--windows-icon-from-exe</span></code>.</p></li>
<li><p>Windows: Added ability to provide multiple icon files for use with
different desktop resolutions with new option
<code class="docutils literal notranslate"><span class="pre">--windows-icon-from-ico</span></code> that got renamed to disambiguate from
other icon options.</p></li>
<li><p>Windows: Added support for requesting UAC admin right with new option
<code class="docutils literal notranslate"><span class="pre">--windows-uac-admin</span></code>.</p></li>
<li><p>Windows: Added support for requesting uiaccess rights with yet
another new option <code class="docutils literal notranslate"><span class="pre">--windows-uac-uiaccess</span></code>.</p></li>
<li><p>Windows: Added ability to specify version info to the binary. New
options <code class="docutils literal notranslate"><span class="pre">--windows-company-name</span></code>, <code class="docutils literal notranslate"><span class="pre">--windows-product-name</span></code>,
<code class="docutils literal notranslate"><span class="pre">--windows-file-version</span></code>, <code class="docutils literal notranslate"><span class="pre">--windows-product-version</span></code>, and
<code class="docutils literal notranslate"><span class="pre">--windows-file-description</span></code> have been added. Some of these have
defaults.</p></li>
<li><p>Enhanced support for using the Win32 compiler of MinGW64, but its
not perfect yet and not recommended.</p></li>
<li><p>Windows: Added support for LTO mode for MSVC as well, this seems to
allow more optimization.</p></li>
<li><p>Plugins: The numpy plugin now handles matplotlib3 config files
correctly.</p></li>
</ul>
</section>
<section id="id63">
<h3>Optimization<a class="headerlink" href="#id63" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Use less C variables in dictionary created, not one per key/value
pair. This improved scalability of C compilation.</p></li>
<li><p>Use common code for module variable access, leading to more compact
code and enhanced scalability of C compilation.</p></li>
<li><p>Use error exit during dictionary creation to release the dictionary,
list, tuple, and set in case of an error occurring while they are
still under construction. That avoids releases of it in error exists,
reducing the generated code size by a lot. This improves scalability
of C compilation for generating these.</p></li>
<li><p>Annotate no exception raise for local variables of classes with know
dict shape, to avoid useless error exits.</p></li>
<li><p>Annotate no exception exit for <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> and <code class="docutils literal notranslate"><span class="pre">classmethod</span></code>
as they do not check their arguments at all. This makes code
generated for classes with these methods much more compact, mainly
improving their scalability in C compilation.</p></li>
<li><p>In code generation, prefer <code class="docutils literal notranslate"><span class="pre">bool</span></code> over <code class="docutils literal notranslate"><span class="pre">nuitka_bool</span></code> which allows
to annotate exception result, leading to more compact code. Also
cleanup so that code generation always go through the C type objects,
rather than doing cases locally, adding a C type for <code class="docutils literal notranslate"><span class="pre">bool</span></code>.</p></li>
<li><p>Use common code for C code handling const <code class="docutils literal notranslate"><span class="pre">None</span></code> return only, to
cases where there is any immutable constant value returned, avoid
code generation for this common case. Currently mutable constants are
not handled, this may be added in the future.</p></li>
<li><p>Annotate no exception for exception type checks in handlers for
Python2 and no exception if the value has exception type shape for
Python3. The exception type shape was newly added. This avoids
useless exception handlers in most cases, where the provided
exception is just a built-in exception name.</p></li>
<li><p>Improve speed of often used compile time methods on nodes
representing constant values, by making their implementation type
specific to improve frontend compile time speed, we check e.g.
mutable and hashable a lot.</p></li>
<li><p>Provide truth value for variable references, enhancing loop
optimization and merge value tracing, to also decide this correctly
for values only read, and then changed through attribute, e.g.
<code class="docutils literal notranslate"><span class="pre">append</span></code> on lists. This allows many more static optimization.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> for methods in Nuitka nodes to achieve faster
frontend compile times where possible.</p></li>
<li><p>Use dedicated helper code for calls with single argument, avoiding
the need have a call site local C array of size one, just to pass a
pointer to it.</p></li>
<li><p>Added handling of <code class="docutils literal notranslate"><span class="pre">hash</span></code> slot, to predict hashable keys for
dictionary and sets.</p></li>
<li><p>Share more slot provision for built-in type shapes from mixin
classes, to get them more universally provided, even for special
types, where their consideration is unusual.</p></li>
<li><p>Trace user provided flag only for constants where it really
matters, i.e. for containers and generally potentially large values,
but not for every number or boolean value.</p></li>
<li><p>Added lowering of <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> constant values to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> value
iteration, while handling constant values for this optimization with
dedicated code for improved frontend compilation speed.</p></li>
<li><p>The dict built-in now annotates the dictionary type shape of its
result.</p></li>
<li><p>The wrapping side-effects node now passes on the type shape of the
wrapped value, allowing for optimization of these too.</p></li>
<li><p>Split <code class="docutils literal notranslate"><span class="pre">slice</span></code> nodes into variants with 1, 2 or 3 arguments, to
avoid the overhead of determining which case we have, as well as to
save a bit of memory, since these are more frequently used on Python3
for subscript operations. Also annotate their type shape, allowing
more optimization.</p></li>
<li><p>Faster dictionary lookups, esp. in cases where errors occur, because
we were manually recreating a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> that is already provided
by the dict implementation. This should also be faster, as it avoids
a CPython API call overhead on the DLL and they can provide a
reference or not for the returned value, simplifying using code.</p></li>
<li><p>Faster dictionary containment checks, with our own dedicated helper,
we can use code that wont create an exception when an item is not
present at all.</p></li>
<li><p>Faster hash lookups with our own helper, separating cases where we
want an exception for non-hashable values or not. These should also
be faster to call.</p></li>
<li><p>Avoid acquiring thread state in exception handling that checks if a
<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> occurred, to improved speed on Python3, where is
involves locking, but this needs to be applied way more often.</p></li>
<li><p>Make sure checks to debug mode and full compatibility mode are done
with the variables introduced, to avoid losing performance due to
calls for Nuitka compile time enhancements. This was so far only done
partially.</p></li>
<li><p>Split constant references into two base classes, only one of them
tracking if the value was provided by the user. This saves compile
time memory and avoids the overhead to check if sizes are exceeded in
cases they cannot possibly be so.</p></li>
<li><p>The truth value of container creations is now statically known,
because the empty container creation is no longer a possibility for
these nodes, allowing more optimization for them.</p></li>
<li><p>Optimize the bool built-in with no arguments directory, allow to
simplify the node for single argument form to avoid checks if an
argument was given.</p></li>
<li><p>Added iteration handles for <code class="docutils literal notranslate"><span class="pre">xrange</span></code> values, and make them faster
to create by being tied to the node type, avoiding shared types,
instead using the mixin approach. This is in preparation to using
them for standard iterator tracing as well. So far they are only used
for <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> decision.</p></li>
<li><p>Added detection if a iterator next can raise, using existing iterator
checking which allows to remove needless checks and exception traces.
Adding a code variant for calls to next that cannot fail, while
tuning the code used for <code class="docutils literal notranslate"><span class="pre">next</span></code> and unpacking next, to use faster
exception checking in the C code. This will speed up unpacking
performance for some forms of unpacking from known sizes.</p></li>
<li><p>Make sure to use the fastest tuple API possible in all of Nuitka,
many place e.g. used <code class="docutils literal notranslate"><span class="pre">PyTuple_Size</span></code>, and one was in a performance
critical part, e.g. in code that used when compiled functions as
called as a method.</p></li>
<li><p>Added optimized variant for <code class="docutils literal notranslate"><span class="pre">_PyList_Extend</span></code> for slightly faster
unpacking code.</p></li>
<li><p>Added optimized variant for <code class="docutils literal notranslate"><span class="pre">PyList_Append</span></code> for faster list
contractions code.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">RemoveFileSpec</span></code> and instead provide our own code for
that task, slightly reducing file size and avoiding to use the
<code class="docutils literal notranslate"><span class="pre">Shlapi</span></code> link library.</p></li>
</ul>
</section>
<section id="id64">
<h3>Tests<a class="headerlink" href="#id64" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Made reflected test use common cleanup of test folder, which is more
robust against Windows locking issues.</p></li>
<li><p>Only output changed CPython output after the forced update of cached
value was done, avoiding duplicate or outdated outputs.</p></li>
<li><p>Avoid complaining about exceptions for in-place operations in case
they are lowered to non-inplace operations and then raise
unsupported, not worth the effort to retain original operator.</p></li>
<li><p>Added generated test for subscript operations, also expanding
coverage in generated tests by making sure, conditional paths are
both taken by varying the <code class="docutils literal notranslate"><span class="pre">cond</span></code> value.</p></li>
<li><p>Use our own code helper to check if an object has an attribute, which
is faster, because it avoids creating exceptions in the first place,
instead of removing them afterwards.</p></li>
</ul>
</section>
<section id="id65">
<h3>Cleanups<a class="headerlink" href="#id65" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Make sure that code generation always go through the C type objects
rather than local <code class="docutils literal notranslate"><span class="pre">elif</span></code> casing of the type. This required cleaning
up many of the methods and making code more abstract.</p></li>
<li><p>Added base class for C types without reference counting, so they can
share the code that ignores their handling.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">getConstant</span></code> for constant value nodes, use the more general
<code class="docutils literal notranslate"><span class="pre">getCompileTimeConstant</span></code> instead, and provide quick methods that
test for empty tuple or dict, to use for checking concrete values,
e.g. with call operations.</p></li>
<li><p>Unified container creation into always using a factory function, to
be sure that existing container creations are not empty.</p></li>
<li><p>Stop using <code class="docutils literal notranslate"><span class="pre">&#64;calledWithBuiltinArgumentNamesDecorator</span></code> where
possible, and instead make explicit wrapping or use correct names.
This was used to allow e.g. an argument named <code class="docutils literal notranslate"><span class="pre">list</span></code> to be passed
from built-in optimization, but that can be done in a cleaner
fashion. Also aligned no attributes and the argument names, there was
inconsistency there.</p></li>
<li><p>Name mangling was done differently for attribute names and normal
names and with non-shared code, and later than necessary, removing
this as a step from variable closure taking after initial tree build.</p></li>
<li><p>As part of the icon changes, now handled in Python code, we stop
using the <code class="docutils literal notranslate"><span class="pre">rc</span></code> binary and handle all resources ourselves, allowing
to remove that code from the Scons side of things.</p></li>
<li><p>Moved file comparison code of standalone mode into file utils
function for use in plugins as well.</p></li>
<li><p>Unified how path concatenation is done in Nuitka helper code, there
were more or less complete variants, this is making sure, the most
capable form is used in all cases.</p></li>
<li><p>Massive cleanup to our scons file, by moving out util code that only
scons uses, hacks we apply to speed up scons, and more to separate
modules with dedicated interfaces.</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">enumerate</span></code> we now provide start value of 1 where it is
appropriate, e.g. when counting source code lines, rather than adding
<code class="docutils literal notranslate"><span class="pre">count+1</span></code> on every usage, making code more readable.</p></li>
</ul>
</section>
<section id="id66">
<h3>Organisational<a class="headerlink" href="#id66" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Do not recommend Anaconda on Windows anymore, it seems barely
possible to get anything installed on it with a fresh download, due
to the resolver literally working for days without finishing, and
then reporting conflicts, it would only we usable when starting with
Miniconda, but that seems less interesting to users, also gcc 5.2 is
way too old these days.</p></li>
<li><p>The commit hook should be reinstalled, since it got improved and
adapted for newer git versions.</p></li>
<li><p>Added link to donations to funding document, following a Github
standard.</p></li>
<li><p>Bumped requirements for development to the latest versions, esp.
newer isort.</p></li>
<li><p>Added a rough description of tests to do to add a new CPython test
suite, to allow others to take this task in the future.</p></li>
<li><p>Updated the git hook so that Windows and newest git works.</p></li>
<li><p>Make it more clear in the documentation that Microsoft Appstore
Python is not supported.</p></li>
</ul>
</section>
<section id="id67">
<h3>Summary<a class="headerlink" href="#id67" title="Permalink to this headline"></a></h3>
<p>This is the big release in terms of scalability. The optimization in
this release mostly focused on getting things that cause increased
compile times sorted out. A very important fix avoids loop optimization
to leak into global passes of all modules unnecessarily, but just as
important, generated code now is much better for the C compiler to
consume in observed problematic cases.</p>
<p>More optimization changes are geared towards reducing Nuitka frontend
compile time, which could also be a lot in some cases, ending up
specializing more constant nodes and how they expose themselves to
optimization.</p>
<p>Other optimization came from supporting Python 3.9 and things come
across during the implementation of that feature, e.g. to be able to
make differences with unpacking error messages, we provide more code to
handle it ourselves, and to manually optimize how to interact with e.g.
<code class="docutils literal notranslate"><span class="pre">list</span></code> objects.</p>
<p>For Windows, the automatic download of <code class="docutils literal notranslate"><span class="pre">ccache</span></code> and a matching MinGW64
if none was found, is a new step, that should lower the barrier of entry
for people who have no clue what a C compiler is. More changes are bound
to come in this field with future releases, e.g. making a minimum
version requirement for gcc on Windows that excludes unfit C compilers.</p>
<p>All in all, this release should be taken as a major cleanup, resolving
many technical debts of Nuitka and preparing more optimization to come.</p>
</section>
</section>
<section id="nuitka-release-0-6-9">
<h2>Nuitka Release 0.6.9<a class="headerlink" href="#nuitka-release-0-6-9" title="Permalink to this headline"></a></h2>
<p>This releases contains important bug fixes for regressions of the 0.6.8
series which had relatively many problems. Not all of these could be
addressed as hotfixes, and other issues were even very involved, causing
many changes to be necessary.</p>
<p>There are also many general improvements and performance work for
tracing and loops, but the full potential of this will not be unlocked
with this release yet.</p>
<section id="id68">
<h3>Bug Fixes<a class="headerlink" href="#id68" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, loop optimization sometimes didnt determinate, effectively
making Nuitka run forever, with no indication why. This has been
fixed and a mechanism to give up after too many attempts has been
added.</p></li>
<li><p>Fix, closure taking object allowed a brief period where the garbage
collector was exposed to uninitialized objects. Fixed in 0.6.8.1
already.</p></li>
<li><p>Python3.6+: Fix corruption for exceptions thrown into asyncgen. Fixed
in 0.6.8.1 already.</p></li>
<li><p>Fix, deleting variables detected as C type bool could raise an
<code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> that was wrong. Fixed in 0.6.8.1 already.</p></li>
<li><p>Python3.8.3+: Fix, future annotations parsing was using hard coded
values that were changed in CPython, leading to errors.</p></li>
<li><p>Windows: Avoid encoding issues for Python3 on more systems, by going
from wide characters to unicode strings more directly, avoiding an
encoding as UTF8 in the middle. Fixed in 0.6.8.2 already.</p></li>
<li><p>Windows: Do not crash when warning about uninstalled MSVC using
Python3. This is a Scons bug that we fixed. Fixed in 0.6.8.3 already.</p></li>
<li><p>Standalone: The output of dependency walker should be considered as
latin1 rather than UTF8. Fixed in 0.6.8.3 already.</p></li>
<li><p>Standalone: Added missing hidden dependencies for <code class="docutils literal notranslate"><span class="pre">flask</span></code>. Fixed in
0.6.8.1 already.</p></li>
<li><p>Standalone: Fixed <code class="docutils literal notranslate"><span class="pre">win32com.client</span></code> on Windows. Fixed in 0.6.8.1
already.</p></li>
<li><p>Standalone: Use <code class="docutils literal notranslate"><span class="pre">pkgutil</span></code> to scan encoding modules, properly
ignoring the same files as Python does in case of garbage files being
there. Fixed in 0.6.8.2 already.</p></li>
<li><p>Plugins: Enabling a plugin after the filename to compile was given,
didnt allow for arguments to the passed, causing problems. Fixed in
0.6.8.3 already.</p></li>
<li><p>Standalone: The <code class="docutils literal notranslate"><span class="pre">certifi</span></code> data file is now supported for all
modules using it and not only some.</p></li>
<li><p>Standalone: The bytecode for the standard library had filenames
pointing to the original installation attached. While these were not
used, but replaced at runtime, they increased the size of the binary,
and leaked information.</p></li>
<li><p>Standalone: The path of <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> was not None, but pointing
to the original executable, which could also point to some temporary
virtualenv directory and therefore not exist, also it was leaking
information about the original install.</p></li>
<li><p>Windows: With the MSVC compiler, elimination of duplicate strings was
not active, causing even unused strings to be present in the binary,
some of which contained file paths of the Nuitka installation.</p></li>
<li><p>Standalone: Added support for pyglet.</p></li>
<li><p>Plugins: The command line handling for Pmw plugin was using wrong
defaults, making it include more code than necessary, and to crash if
it was not there.</p></li>
</ul>
</section>
<section id="id69">
<h3>New Features<a class="headerlink" href="#id69" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Added support for using Python 2.7 through a symlink too.
This was already working for Python3, but a scons problem prevented
this from working.</p></li>
<li><p>Caching of compiled C files is now checked with ccache and clcache,
and added automatically where possible, plus a report of the success
is made. This can accelerate the re-compile very much, even if you
have to go through Nuitka compilation itself, which is not (yet)
cached.</p></li>
<li><p>Added new <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> option that will disable informational traces
that are going to become more.</p></li>
<li><p>The Clang from MSVC installation is now picked up for both 32 and 64
bits and follows the new location in latest Visual Studio 2019.</p></li>
<li><p>Windows: The <code class="docutils literal notranslate"><span class="pre">ccache</span></code> from Anaconda is now supported as well as the
one from msys64.</p></li>
</ul>
</section>
<section id="id70">
<h3>Optimization<a class="headerlink" href="#id70" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The value tracing has become more correct with loops and in general
less often inhibits optimization. Escaping of value traces is now a
separate trace state allowing for more appropriate handling of actual
unknowns.</p></li>
<li><p>Memory used for value tracing has been lowered by removing
unnecessary states for traces, that we dont use anymore.</p></li>
<li><p>Windows: Prevent scons from scanning for MSVC when asked to use
MinGW64. This avoids a performance loss doing something that will
then end up being unused.</p></li>
<li><p>Windows: Use function level linking with MSVC, this will allow for
smaller binaries to be created, that dont have to include unused
helper functions.</p></li>
</ul>
</section>
<section id="id71">
<h3>Cleanups<a class="headerlink" href="#id71" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The scons file now uses Nuitka utils functions and is itself split up
into several modules for enhanced readability.</p></li>
<li><p>Plugin interfaces for providing extra entry points have been cleaned
up and now named tuples are used. Backward compatibility is
maintained though.</p></li>
</ul>
</section>
<section id="id72">
<h3>Organisational<a class="headerlink" href="#id72" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of the logging module was replaced with more of our custom
tracing and we now have the ability to write the optimization log to
a separate file.</p></li>
<li><p>Old style plugin options are now detected and reported as a usage
error rather than unknown plugin.</p></li>
<li><p>Changed submodules to use git over https, so as to not require ssh
which requires a key registered and causes problems with firewalls
too.</p></li>
<li><p>More correct Debian copyright file, made formatting of emails in
source code consistent.</p></li>
<li><p>Added repository for Ubuntu focal.</p></li>
</ul>
</section>
<section id="id73">
<h3>Summary<a class="headerlink" href="#id73" title="Permalink to this headline"></a></h3>
<p>The main focus of this release has been bug fixes with only a little
performance work due to the large amount of regressions and other
findings from the last release.</p>
<p>The new constants loading for removes a major scalability problem. The
checked and now consistently possible use of <code class="docutils literal notranslate"><span class="pre">ccache</span></code> and <code class="docutils literal notranslate"><span class="pre">clcache</span></code>
allows for much quicker recompilation. Nuitka itself can still be slow
in some cases, but should have seen some improvements too. Scalability
will have to remain a focus for the next releases too.</p>
<p>The other focus, was to make the binaries contain no original path
location, which is interesting for standalone mode. Nuitka should be
very good in this area now.</p>
<p>For optimization, the new loop code is again better. But it was also
very time consuming, to redo it, yet again. This has prevented other
optimization to be added.</p>
<p>And then for correctness, the locals scope work, while very invasive,
was necessary, to handle the usage of locals inside of contractions, but
also will be instrumental for function inlining to become generally
available.</p>
<p>So, ultimately, this release is a necessary intermediate step. Upcoming
releases will be able to focus more clearly on run time performance
again as well as on scalability for generated C code.</p>
</section>
</section>
<section id="nuitka-release-0-6-8">
<h2>Nuitka Release 0.6.8<a class="headerlink" href="#nuitka-release-0-6-8" title="Permalink to this headline"></a></h2>
<p>This releases contains important general improvements and performance
improvements and enhanced optimization as well as many bug fixes that
enhance the Python 3.8 compatibility.</p>
<section id="id74">
<h3>Bug Fixes<a class="headerlink" href="#id74" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.5+: Fix, coroutines and asyncgen could continue iteration of
awaited functions, even after their return, leading to wrong
behaviour.</p></li>
<li><p>Python3.5+: Fix, absolute imports of names might also refer to
modules and need to be handled for module loading as well.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">fromlist</span></code> of imports could loose references, potentially
leading to corruption of contained strings.</p></li>
<li><p>Python3.8: Fix, positional only arguments were not enforced to
actually be that way.</p></li>
<li><p>Python3.8: Fix, complex calls with star arguments that yielded the
same value twice, were not yet caught.</p></li>
<li><p>Python3.8: Fix, evaluation order for nested dictionary contractions
was not followed yet.</p></li>
<li><p>Windows: Use short paths, these work much better to load extension
modules and TCL parts of TkInter cannot handle unicode paths at all.
This makes Nuitka work in locations, where normal Python cannot.</p></li>
<li><p>Windows: Fixup dependency walker in unicode input directories.</p></li>
<li><p>Standalone: Use frozen module loader only at <code class="docutils literal notranslate"><span class="pre">libpython</span></code>
initialisation and switch to built-in bytecode loader that is more
compatible afterwards, increasing compatibility.</p></li>
<li><p>Standalone: Fix for pydanctic support.</p></li>
<li><p>Standalone: Added missing hidden dependency of uvicorn.</p></li>
<li><p>Fix, the parser for <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> files couldnt handle multiline imports.</p></li>
<li><p>Windows: Derive linker arch of Python from running binary, since it
can happen that the Python binary is actually a script.</p></li>
<li><p>Fixup static linking with <code class="docutils literal notranslate"><span class="pre">libpython.a</span></code> that contains <code class="docutils literal notranslate"><span class="pre">main.o</span></code> by
making our colliding symbols for <code class="docutils literal notranslate"><span class="pre">Py_GetArgcArgv</span></code> weak.</p></li>
<li><p>Python3.7: Fix misdetection as asyncgen for a normal generator, if
the iterated value is async.</p></li>
<li><p>Distutils: Fix <code class="docutils literal notranslate"><span class="pre">build_nuitka</span></code> for modules under nested namespaces.</p></li>
<li><p>OpenBSD: Follow usage of clang and other corrections to make
accelerated mode work.</p></li>
<li><p>macOS: Fixup for standalone mode library scan.</p></li>
<li><p>Fix, the logging of <code class="docutils literal notranslate"><span class="pre">--show-modules</span></code> was broken.</p></li>
<li><p>Windows: Enable <code class="docutils literal notranslate"><span class="pre">/bigobj</span></code> mode for MSVC for large compilations to
work.</p></li>
<li><p>Windows: Fixup crash in warning with pefile dependency manager.</p></li>
<li><p>Windows: Fixup <code class="docutils literal notranslate"><span class="pre">win32com</span></code> standalone detection of other Python
version <code class="docutils literal notranslate"><span class="pre">win32com</span></code> is in system <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p></li>
<li><p>Fix, the python flag for static hashes didnt have the intended
effect.</p></li>
<li><p>Fix, generators may be resurrected in the cause of their destruction,
and then must not be released.</p></li>
<li><p>Fix, method objects didnt implement the methods <code class="docutils literal notranslate"><span class="pre">__reduce__</span></code> and
<code class="docutils literal notranslate"><span class="pre">__reduce_ex__</span></code> necessary for pickling them.</p></li>
<li><p>Windows: Fix, using a Python installation through a symlink was not
working.</p></li>
<li><p>Windows: Fix, icon paths that were relative were not working anymore.</p></li>
<li><p>Python3.8: Detect duplicate keywords yielded from star arguments.</p></li>
<li><p>Fix, methods could not be pickled.</p></li>
<li><p>Fix, generators, coroutines and asyncgen might be resurrected during
their release, allow for that.</p></li>
<li><p>Fix, frames need to traverse their attached locals to be released in
some cases.</p></li>
</ul>
</section>
<section id="id75">
<h3>New Features<a class="headerlink" href="#id75" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Plugin command line handling now allows for proper <code class="docutils literal notranslate"><span class="pre">optparse</span></code>
options to be used, doing away with special parameter code for
plugins. The arguments now also become automatically passed to the
instantiations of plugins.</p>
<p>Loading and creation of plugins are now two separate phases. They are
loaded when they appear on the command line and can add options in
their own group, even required ones, but also with default values.</p>
</li>
<li><p>Started using logging with name-spaces. Applying logging per plugin
to make it easier to recognize which plugin said what. Warnings are
now colored in red.</p></li>
<li><p>Python3.5+: Added support for two step module loading, making Nuitka
loading even more compatible.</p></li>
<li><p>Enhanced import tracing to work on standalone binaries in a useful
manner, allow to compare with normal binaries.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">setattr</span></code> built-in was leaking a reference to the <code class="docutils literal notranslate"><span class="pre">None</span></code>
value.</p></li>
</ul>
</section>
<section id="id76">
<h3>Optimization<a class="headerlink" href="#id76" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Proper loop SSA capable of detecting shapes with an incremental
initial phase and a final result of alternatives for variables
written in the loop. This detects shapes of manual integer
incrementing loops correctly now, it doesnt see through iterators
yet, but this will come too.</p></li>
<li><p>Added type shapes for all operations and all important built-in types
to allow more compile time optimization and better target type
selection.</p></li>
<li><p>Target type code generation was expanded from manual usage with
conditions to all operations allowing to get at bool target values
more directly.</p></li>
<li><p>For in-place operations, there is the infrastructure to generate them
for improved performance, but so far its only used for Python2 int,
and not for the many types normal operations are supported.</p></li>
<li><p>Force usage of C boolean type for all indicator variables from the
re-formulation. In some cases, we are not yet there with detections,
and this gives instant benefit.</p></li>
<li><p>Complex constants didnt annotate their type shape, preventing
compile time optimization for them.</p></li>
<li><p>Python3.8: Also support vectorcall for compiled method objects. These
are rarely used in new Python, but can make a difference.</p></li>
<li><p>Remove loops that have only a final break. This happens in static
optimization in some cases, and allows more optimization to be done.</p></li>
<li><p>Avoid using a preparing a constant tuple value for calls with only
constant arguments.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">PyErr_Format</span></code> where its not necessary by adding
specialized helpers for common cases.</p></li>
<li><p>Detect <code class="docutils literal notranslate"><span class="pre">del</span></code> statements that will raise an exception and replace
with that.</p></li>
<li><p>Exception matching is boolean shape, allowing for faster code
generation.</p></li>
<li><p>Disable recursion checks outside of full compat mode.</p></li>
<li><p>Avoid large blocks for conditional statements that only need to
enclose the condition evaluation.</p></li>
<li><p>Added shortcuts for interactions between compiled generator variants,
to avoid calls to their C methods with argument passing, etc.</p></li>
</ul>
</section>
<section id="id77">
<h3>Organisational<a class="headerlink" href="#id77" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Updated Developer Manual with changes that happened, removing the
obsolete language choice section.</p></li>
<li><p>Added 3.8 support mentions in even more places.</p></li>
<li><p>The mailing list has been deleted. We now prefer Gitter chat and
Github issues for discussions.</p></li>
<li><p>Visual Code recommended extensions are now defined as such in the
project configuration and you will be prompted to install them.</p></li>
<li><p>Visual Code environents for <code class="docutils literal notranslate"><span class="pre">Py38</span></code> and <code class="docutils literal notranslate"><span class="pre">Py27</span></code> were added for
easier switch.</p></li>
<li><p>Catch usage of Python from the Microsoft App Store, it is not
supported and seems to limit access to the Python installation for
security reasons that make support impossible.</p></li>
<li><p>Make it clear that <code class="docutils literal notranslate"><span class="pre">--full-compat</span></code> should not be used in help
output.</p></li>
<li><p>Added instructions for MSVC runtimes and standalone compilation to
support Windows 7.</p></li>
<li><p>More complete listing of copyright holders for Debian.</p></li>
<li><p>Updated to newer black and PyLint.</p></li>
<li><p>Enhanced gcc version check, properly works with gcc 10 and higher.</p></li>
</ul>
</section>
<section id="id78">
<h3>Tests<a class="headerlink" href="#id78" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Pylint cleanups for some of the tests.</p></li>
<li><p>Added test for loading of user plugins.</p></li>
<li><p>Removed useless outputs for <code class="docutils literal notranslate"><span class="pre">search</span></code> mode skipping non-matches.</p></li>
</ul>
</section>
<section id="id79">
<h3>Cleanups<a class="headerlink" href="#id79" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Limit command line handling for multiprocessing module to when the
plugin is actually used, avoiding useless code of Windows binaries.</p></li>
<li><p>Pylint cleanup also foreign code like <code class="docutils literal notranslate"><span class="pre">oset</span></code> and <code class="docutils literal notranslate"><span class="pre">odict</span></code>.</p></li>
<li><p>In preparation of deprecating the alternative, <code class="docutils literal notranslate"><span class="pre">--enable-plugin</span></code>
has become the only form used in documentation and tests.</p></li>
<li><p>Avoid numeric pylint symbols more often.</p></li>
<li><p>Distutils: Cleanup module name for distutils commands, these are not
actually enforced by distutils, but very ugly in our coding
conventions.</p></li>
<li><p>The cannot get here code to mark unreachable code has been improved
and no longer needs an identifier passed, but uses the standard C
mechanism for that.</p></li>
<li><p>Removed accessors for lookup sources from nodes, allowing for faster
usage and making sure, lookups are only done where needed.</p></li>
</ul>
</section>
<section id="id80">
<h3>Summary<a class="headerlink" href="#id80" title="Permalink to this headline"></a></h3>
<p>This release is huge in terms of bugs fixed, but also extremely
important, because the new loop SSA and type tracing, allows for many
more specialized code usages. We now can trace the type for some loops
to be specifically an integer or long value only, and will become able
to generate code that avoids using Python objects, in these cases.</p>
<p>Once that happens, the performance will make a big jump. Future releases
will have to consolidate the current state, but it is expected that at
least an experimental addition of C type <code class="docutils literal notranslate"><span class="pre">float</span></code> or <code class="docutils literal notranslate"><span class="pre">C</span> <span class="pre">long</span></code> can be
added, add to that <code class="docutils literal notranslate"><span class="pre">iterator</span></code> type shape and value analsis, and an
actual jump in performance can be expected.</p>
</section>
</section>
<section id="nuitka-release-0-6-7">
<h2>Nuitka Release 0.6.7<a class="headerlink" href="#nuitka-release-0-6-7" title="Permalink to this headline"></a></h2>
<p>This release contains bug fixes and improvements to the packaging, for
the RPM side as well as for Debian, to cover Python3 only systems as
they are now becoming more common.</p>
<section id="id81">
<h3>Bug Fixes<a class="headerlink" href="#id81" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Compatibility: The value of <code class="docutils literal notranslate"><span class="pre">__module__</span></code> for extension modules was
not dependent into which package the module was loaded, it now is.</p></li>
<li><p>Anaconda: Enhanced detection of Anaconda for Python 3.6 and higher.</p></li>
<li><p>CentOS6: Detect gcc version to allow saving on macro memory usage,
very old gcc didnt have that.</p></li>
<li><p>Include Python3 for all Fedora versions where it works as well as for
openSUSE versions 15 and higher.</p></li>
<li><p>Windows: Using short path names to interact with Scons avoids
problems with unicode paths in all cases.</p></li>
<li><p>macOS: The usage of <code class="docutils literal notranslate"><span class="pre">install_name_tool</span></code> could sometimes fail due to
length limits, we now increase it at link time.</p></li>
<li><p>macOS: Do not link against <code class="docutils literal notranslate"><span class="pre">libpython</span></code> for module mode. This
prevented extension modules from actually being usable.</p></li>
<li><p>Python3.6: Follow coroutine fixes in our asyncgen implementation as
well.</p></li>
<li><p>Fix, our version number handling could overflow with minor versions
past 10, so we limited it for now.</p></li>
</ul>
</section>
<section id="id82">
<h3>New Features<a class="headerlink" href="#id82" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Python 3.8, the experimental was already there and
pretty good, but now added the last obscure features too.</p></li>
<li><p>Plugins can now provide C code to be included in the compilation.</p></li>
<li><p>Distutils: Added targets <code class="docutils literal notranslate"><span class="pre">build_nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">install_nuitka</span></code> to
complement <code class="docutils literal notranslate"><span class="pre">bdist_nuitka</span></code>, so we support software other than
wheels, e.g. RPM packaging that compiles with Nuitka.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">lldb</span></code> the Clang debugger with the <code class="docutils literal notranslate"><span class="pre">--debugger</span></code>
mode.</p></li>
</ul>
</section>
<section id="id83">
<h3>Optimization<a class="headerlink" href="#id83" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Make the file prefix map actually work for gcc and clang, and compile
files inside the build folder, unless we are running in debugger
mode, so we use <code class="docutils literal notranslate"><span class="pre">ccache</span></code> caching across different compilations for
at least the static parts.</p></li>
<li><p>Avoid compilation of <code class="docutils literal notranslate"><span class="pre">__frozen.c</span></code> in accelerated mode, its not
used.</p></li>
<li><p>Prefer using the inline copy of scons over systems scons. The later
will only be slower. Use the fallback to external scons only from the
Debian packages, since there we consider it forbidden to include
software as a duplicate.</p></li>
</ul>
</section>
<section id="id84">
<h3>Organisational<a class="headerlink" href="#id84" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added recommended plugins for Visual Code, replacing the list in the
Developer Manual.</p></li>
<li><p>Added repository for Fedora 30 for download.</p></li>
<li><p>Added repository for CentOS 8 for download.</p></li>
<li><p>Updated inline copy of Scons used for Python3 to 3.1.2, which is said
to be faster for large compilations.</p></li>
<li><p>Removed Eclipse setup from the manual, its only infererior at this
point and we do not use it ourselves.</p></li>
<li><p>Debian: Stop recommending PyQt5 in the package, we no longer use it
for built-in GUI that was removed.</p></li>
<li><p>Debian: Bumped the standards version and modernized the packaging,
solving a few warnings during the build.</p></li>
</ul>
</section>
<section id="id85">
<h3>Cleanups<a class="headerlink" href="#id85" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Scons: Avoid to add Unix only include paths on Windows.</p></li>
<li><p>Scons: Have the static source code in a dedicated folder for clarity.</p></li>
</ul>
</section>
<section id="id86">
<h3>Tests<a class="headerlink" href="#id86" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added tests to Github Actions, for the supported Python versions for
all of Linux, macOS and Windows, covering the later publicly for the
first time. We use Anaconda on macOS for the tests now, rather than
Homebrew.</p></li>
<li><p>Enable IO encoding to make sure we use UTF8 for more test suites that
actually need it in case of problems.</p></li>
<li><p>Comparing module outputs now handles segfaults by running in the
debugger too.</p></li>
</ul>
</section>
<section id="id87">
<h3>Summary<a class="headerlink" href="#id87" title="Permalink to this headline"></a></h3>
<p>This release adds full support for Python 3.8 finally, which took us a
while, and it cleans up a lot on the packaging side. There arent that
many important bug fixes, but its still nice to this cleaned up.</p>
<p>We have important actual optimization in the pipeline that will apply
specialization to target types and for comparison operations. We expect
to see actual performance improvements in the next release again.</p>
</section>
</section>
<section id="nuitka-release-0-6-6">
<h2>Nuitka Release 0.6.6<a class="headerlink" href="#nuitka-release-0-6-6" title="Permalink to this headline"></a></h2>
<p>This release contains huge amounts of crucial bug fixes all across the
board. There is also new optimization and many organisational
improvements.</p>
<section id="id88">
<h3>Bug Fixes<a class="headerlink" href="#id88" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the top level module must not be bytecode. Otherwise we end up
violating the requirement for an entry point on the C level.</p></li>
<li><p>Fix, avoid optimizing calls with default values used. This is not yet
working and needed to be disabled for now.</p></li>
<li><p>Python3: Fix, missing keyword only arguments were not enforced to be
provided keyword only, and were not giving the compatible error
message when missing.</p></li>
<li><p>Windows: Find <code class="docutils literal notranslate"><span class="pre">win32com</span></code> DLLs too, even if they live in sub folders
of site-packages, and otherwise not found. They are used by other
DLLs that are found.</p></li>
<li><p>Standalone: Fixup for problem with standard library module in most
recent Anaconda versions.</p></li>
<li><p>Scons: Fix, was using <code class="docutils literal notranslate"><span class="pre">CXXFLAGS</span></code> and <code class="docutils literal notranslate"><span class="pre">CPPFLAGS</span></code> even for the C
compiler, which is wrong, and could lead to compilation errors.</p></li>
<li><p>Windows: Make <code class="docutils literal notranslate"><span class="pre">--clang</span></code> limited to <code class="docutils literal notranslate"><span class="pre">clang-cl.exe</span></code> as using it
inside a MinGW64 is not currently supported.</p></li>
<li><p>Standalone: Added support for using <code class="docutils literal notranslate"><span class="pre">lib2to2.pgen</span></code>.</p></li>
<li><p>Standalone: Added paths used by openSUSE to the Tcl/Tk plugin.</p></li>
<li><p>Python3.6+: Fix, the <code class="docutils literal notranslate"><span class="pre">__main__</span></code> package was <code class="docutils literal notranslate"><span class="pre">None</span></code>, but should be
<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> which allows relative imports from itself.</p></li>
<li><p>Python2: Fix, compile time optimization of floor division was using
normal division.</p></li>
<li><p>Python3: Fix, some run time operations with known type shapes, were
falsely reporting error message with <code class="docutils literal notranslate"><span class="pre">unicode</span></code> or <code class="docutils literal notranslate"><span class="pre">long</span></code>, which
is of course not compatible.</p></li>
<li><p>Fix, was caching parent package, but these could be replaced e.g. due
to bytecode demotion later, causing crashes during their
optimization.</p></li>
<li><p>Fix, the value of <code class="docutils literal notranslate"><span class="pre">__compiled__</span></code> could be corrupted when being
deleted, which some modules wrappers do.</p></li>
<li><p>Fix, the value of <code class="docutils literal notranslate"><span class="pre">__package__</span></code> could be corrupted when being
deleted.</p></li>
<li><p>Scons: Make sure we can always output the compiler output, even if it
has a broken encoding. This should resolve MSVC issues on non-English
systems, e.g. German or Chinese.</p></li>
<li><p>Standalone: Support for newest <code class="docutils literal notranslate"><span class="pre">sklearn</span></code> was added.</p></li>
<li><p>macOS: Added resolver for run time variables in <code class="docutils literal notranslate"><span class="pre">otool</span></code> output,
that gets PyQt5 to work on it again.</p></li>
<li><p>Fix, floor division of run time calculations with float values should
not result in <code class="docutils literal notranslate"><span class="pre">int</span></code>, but <code class="docutils literal notranslate"><span class="pre">float</span></code> values instead.</p></li>
<li><p>Standalone: Enhanced support for <code class="docutils literal notranslate"><span class="pre">boto3</span></code> data files.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">osgeo</span></code> and <code class="docutils literal notranslate"><span class="pre">gdal</span></code>.</p></li>
<li><p>Windows: Fix, there were issues with spurious errors attaching the
constants blob to the binary due to incorrect C types provided.</p></li>
<li><p>Distutils: Fix, need to allow <code class="docutils literal notranslate"><span class="pre">/</span></code> as separator for package names
too.</p></li>
<li><p>Python3.6+: Fix reference losses in asyncgen when throwing exceptions
into them.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">dill</span></code>.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">scikit-image</span></code> and <code class="docutils literal notranslate"><span class="pre">skimage</span></code>.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">weasyprint</span></code>.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">dask</span></code>.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">pendulum</span></code>.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">pytz</span></code> and <code class="docutils literal notranslate"><span class="pre">pytzdata</span></code>.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">--python-flags=no_docstrings</span></code> no longer implies disabling the
assertions.</p></li>
</ul>
</section>
<section id="id89">
<h3>New Features<a class="headerlink" href="#id89" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python 3.8, there is only very few
things missing for full support.</p></li>
<li><p>Distutils: Added support for packages that are in a namespace and not
just top level.</p></li>
<li><p>Distutils: Added support for single modules, not only packages, by
supporting <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> as well.</p></li>
<li><p>Distutils: Added support for distinct namespaces.</p></li>
<li><p>Windows: Compare Python and C compiler architecture for MSVC too, and
catch the most common user error of mixing 32 and 64 bits.</p></li>
<li><p>Scons: Output variables used from the outside, so the debugging is
easier.</p></li>
<li><p>Windows: Detect if clang installed inside MSVC automatically and use
it if requested via <code class="docutils literal notranslate"><span class="pre">--clang</span></code> option. This is only the 32 bits
variant, but currently the easy way to use it on Windows with Nuitka.</p></li>
</ul>
</section>
<section id="id90">
<h3>Optimization<a class="headerlink" href="#id90" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Loop variables were analysed, but results were only available on the
inside of the loop, preventing many optimization in these cases.</p></li>
<li><p>Added optimization for the <code class="docutils literal notranslate"><span class="pre">abs</span></code> built-in, which is also a
numerical operator.</p></li>
<li><p>Added optimization for the <code class="docutils literal notranslate"><span class="pre">all</span></code> built-in, adding a new concept of
iteration handle, for efficient checking that avoids looking at very
large sequences, of which properties can still be known.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">all</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>  <span class="c1"># no need to look at all of them</span>
</pre></div>
</div>
</li>
<li><p>Added support for optimizing <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> construction with
keyword-only arguments. Previously only used without these were
optimized.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;lala&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;lele&quot;</span><span class="p">)</span>  <span class="c1"># now optimized</span>
</pre></div>
</div>
</li>
<li><p>Added manual specialization for single argument calls, sovling a
TODO, as these will be very frequent.</p></li>
<li><p>Memory: Use single child form of node class where possible, the
general class now raises an error if used with used with only one
child name, this will use less memory at compile time.</p></li>
<li><p>Memory: Avoid list for non-local declarations in every function,
these are very rare, only have it if absolutely necessary.</p></li>
<li><p>Generate more compact code for potential <code class="docutils literal notranslate"><span class="pre">NameError</span></code> exceptions
being raised. These are very frequent, so this improves scalability
with large files.</p></li>
<li><p>Python2: Annotate comparison of <code class="docutils literal notranslate"><span class="pre">None</span></code> with <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code>
types as not raising an exception.</p></li>
<li><p>Shared empty body functions and generators.</p>
<p>One shared implementation for all empty functions removes that burden
from the C compiler, and from the CPU instruction cache. All the
shared C code does is to release its arguments, or to return an empty
generator function in case of generator.</p>
</li>
<li><p>Memory: Added support for automatic releases of parameter variables
from the node tree. These are normally released in a try finally
block, however, this is now handled during code generation for much
more compact C code generated.</p></li>
<li><p>Added specialization for <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> operations <code class="docutils literal notranslate"><span class="pre">%</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>.</p></li>
<li><p>Added dedicated nodes for representing and optimizing based on shapes
for all binary operations.</p></li>
<li><p>Disable gcc macro tracing unless in debug mode, to save memory during
the C compilation.</p></li>
<li><p>Restored Python2 fast path for <code class="docutils literal notranslate"><span class="pre">int</span></code> with unknown object types,
restoring performance for these.</p></li>
</ul>
</section>
<section id="id91">
<h3>Cleanups<a class="headerlink" href="#id91" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Use dedicated <code class="docutils literal notranslate"><span class="pre">ModuleName</span></code> type that makes the tests that check if
a given module name is inside a namespace as methods. This was hard
to get right and as a result, adopting this fixed a few bugs and or
inconsistent results.</p></li>
<li><p>Expand the use of <code class="docutils literal notranslate"><span class="pre">nuitka.PostProcessing</span></code> to cover all actions
needed to get a runnable binary. This includes using
<code class="docutils literal notranslate"><span class="pre">install_name_tool</span></code> on macOS standalone, as well copying the Python
DLL for acceleration mode, cleaning the <code class="docutils literal notranslate"><span class="pre">x</span></code> bit for module mode.
Previously only a part of these lived there.</p></li>
<li><p>Avoid including the definitions of dynamically created helper
functions in the C code, instead just statically declare the ones
expected to be there. This resolves Visual Code complaining about it,
and should make life also easier for the compiler and caches like
<code class="docutils literal notranslate"><span class="pre">ccache</span></code>.</p></li>
<li><p>Create more helper code in closer form to what <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> does,
so they are easier to compare to the static forms. We often create
hard coded variants for few arguments of call functions, and generate
them for many argument variations.</p></li>
<li><p>Moved setter/getter methods for Nuitka nodes consistently to the
start of the node class definitions.</p></li>
<li><p>Generate C code much closer to what <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> would change it
to be.</p></li>
<li><p>Unified calling <code class="docutils literal notranslate"><span class="pre">install_name_tool</span></code> on macOS into one function that
takes care of all the things, including e.g. making the file
writable.</p></li>
<li><p>Debug output from scons should be more consistent and complete now.</p></li>
<li><p>Sort files for compilation in scons for better reproducible results.</p></li>
<li><p>Create code objects version independent, avoiding python version
checks by pre-processor, hiding new stuff behind macros, that ignore
things on older Python versions.</p></li>
</ul>
</section>
<section id="id92">
<h3>Tests<a class="headerlink" href="#id92" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added many more built-in tests for increased coverage of the newly
covered ones, some of them being generic tests that allow to test all
built-ins with typical uses.</p></li>
<li><p>Many tests have become more PyLint clean as a result of work with
Visual Code and it complaining about them.</p></li>
<li><p>Added test to check PyPI health of top 50 packages. This is a major
GSoC 2019 result.</p></li>
<li><p>Output the standalone directory contents for Windows too in case of a
failure.</p></li>
<li><p>Added generated tests to fully cover operations on different type
shapes and their errors as well as results for typical values.</p></li>
<li><p>Added support for testing against installed version of Nuitka.</p></li>
<li><p>Cleanup up tests, merging those for only Python 3.2 with 3.3 as we no
longer support that version anyway.</p></li>
<li><p>Execute the Python3 tests for macOS on Travis too.</p></li>
</ul>
</section>
<section id="id93">
<h3>Organisational<a class="headerlink" href="#id93" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The donation sponsored machine called <code class="docutils literal notranslate"><span class="pre">donatix</span></code> had to be replaced
due to hardware breakage. It was replaced with a Raspberry-Pi 4.</p></li>
<li><p>Enhanced plugin documentation.</p></li>
<li><p>Added description of the git workflow to the Developer Manual.</p></li>
<li><p>Added checker script <code class="docutils literal notranslate"><span class="pre">check-nuitka-with-codespell</span></code> that reports
typos in the source code for easier use of <code class="docutils literal notranslate"><span class="pre">codespell</span></code> with Nuitka.</p></li>
<li><p>Use newest PyLint and clang-format.</p></li>
<li><p>Also check plugin documentation files for ReST errors.</p></li>
<li><p>Much enhanced support for Visual Code configuration.</p></li>
<li><p>Trigger module code is now written into the build directory in debug
mode, to aid debugging.</p></li>
<li><p>Added deep check function that descends into tuples to check their
elements too.</p></li>
</ul>
</section>
<section id="id94">
<h3>Summary<a class="headerlink" href="#id94" title="Permalink to this headline"></a></h3>
<p>This release comes after a long time of 4 months without a release, and
has accumulated massive amounts of changes. The work on CPython 3.8 is
not yet complete, and the performance work has yet to show actual fruit,
but has also progressed on all fronts. Connecting the dots and pieces
seems not far away.</p>
</section>
</section>
<section id="nuitka-release-0-6-5">
<h2>Nuitka Release 0.6.5<a class="headerlink" href="#nuitka-release-0-6-5" title="Permalink to this headline"></a></h2>
<p>This release contains many bug fixes all across the board. There is also
new optimization and many organisational improvements.</p>
<section id="id95">
<h3>Bug Fixes<a class="headerlink" href="#id95" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Python3.4+: Fixed issues with modules that exited with an exception,
that could lead to a crash, dealing with their <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> value.</p></li>
<li><p>Python3.4+: The <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> method <code class="docutils literal notranslate"><span class="pre">is_package</span></code> had the wrong
signature.</p></li>
<li><p>Python3.6+: Fix for <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> being broken with uncompiled
generators.</p></li>
<li><p>Python3.5+: Fix for <code class="docutils literal notranslate"><span class="pre">coroutines</span></code> that got their awaited object
closed behind their back, they were complaining with <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>
should they be closed themselves.</p></li>
<li><p>Fix, constant values <code class="docutils literal notranslate"><span class="pre">None</span></code> in a bool target that could not be
optimized away, lead to failure during code generation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span><span class="p">()</span> <span class="ow">and</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Standalone: Added support for sha224, sha384, sha512 in crypto
package.</p></li>
<li><p>Windows: The icon wasnt properly attached with MinGW64 anymore, this
was a regression.</p></li>
<li><p>Windows: For compiler outputs, also attempt preferred locale to
interpret outputs, so we have a better chance to not crash over MSVC
error messages that are not UTF-8 compatible.</p></li>
<li><p>macOS: Handle filename collisions for generated code too, Nuitka now
treats all filesystems for all OS as case insensitive for this
purpose.</p></li>
<li><p>Compatibility: Added support for tolerant <code class="docutils literal notranslate"><span class="pre">del</span></code> in class exception
handlers.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="o">...</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">e</span>

        <span class="c1"># At exception handler exit, &quot;e&quot; is deleted if still assigned</span>
</pre></div>
</div>
<p>We already were compatible for functions and modules here, but due to
the special nature of class variables really living in dictionaries,
this was delayed. But after some other changes, it was now possible
to solve this TODO.</p>
</li>
<li><p>Standalone: Added support for Python3 variant of Pmw.</p></li>
<li><p>Fix, the NumPy plugin now handles more installation types.</p></li>
<li><p>Fix, the qt plugin now handles multiple library paths.</p></li>
<li><p>Fix, need <code class="docutils literal notranslate"><span class="pre">libm</span></code> for some Anaconda variants too.</p></li>
<li><p>Fix, left over bytecode from plugins could crash the plugin loader.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">pkgutil.iter_packages</span></code> is now working for loaded packages.</p></li>
</ul>
</section>
<section id="id96">
<h3>New Features<a class="headerlink" href="#id96" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.8: Followed some of the changes and works with beta2 as a
Python 3.7, but none of the new features are implemented yet.</p></li>
<li><p>Added support for Torch, Tensorflow, Gevent, Sklearn, with a new
Nuitka plugin.</p></li>
<li><p>Added support for hinted compilation, where the used modules are
determined through a test run.</p></li>
<li><p>Added support for including TCL on Linux too.</p></li>
</ul>
</section>
<section id="id97">
<h3>Optimization<a class="headerlink" href="#id97" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">any</span></code> built-in. This handles a wide range of
type shapes and constant values at compile time, while also having
optimized C code.</p></li>
<li><p>Generate code for some <code class="docutils literal notranslate"><span class="pre">CLONG</span></code> operations in preparation of
eventual per expression C type selection, it then will allow to avoid
objects in many instances.</p></li>
<li><p>Windows: Avoid creating link libraries for MinGW64 as these have
become unnecessary is the mean time.</p></li>
<li><p>Packages: Do not export entry points for all included packages, only
for the main package name it is importable as.</p></li>
</ul>
</section>
<section id="id98">
<h3>Organisational<a class="headerlink" href="#id98" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Visual Studio 2019 as a C compiler backend.</p></li>
<li><p>Improved plugin documentation describing how to create plugins for
Nuitka even better.</p></li>
<li><p>The is now a mode for running the tests called <code class="docutils literal notranslate"><span class="pre">all</span></code> which will
execute all the tests and report their errors, and only fail at the
very end. This doesnt avoid wasting CPU cycles to report that e.g.
all tests are broken, but it allows to know all errors before fixing
some.</p></li>
<li><p>Added repository for Fedora 30 for download.</p></li>
<li><p>Added repository for openSUSE 15.1 for download.</p></li>
<li><p>Ask people to compile hello world program in the Github issue
template, because many times, they have setup problems only.</p></li>
<li><p>Visual Studio Code is now the recommended IDE and has integrated
configuration to make it immediately useful.</p></li>
<li><p>Updated internal copy of Scons to 3.1.0 as it incorporates many of
our patches.</p></li>
<li><p>Changed wordings for optimization to use lowering as the only term
to describe an optimization that simplifies.</p></li>
</ul>
</section>
<section id="id99">
<h3>Cleanups<a class="headerlink" href="#id99" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Plugins: Major refactoring of Nuitka plugin API.</p></li>
<li><p>Plugins: To locate module kind, use core Nuitka code that handles
more cases.</p></li>
<li><p>The test suite runners are also now autoformatted and checked with
PyLint.</p></li>
<li><p>The Scons file is now PyLint clean too.</p></li>
<li><p>Avoid <code class="docutils literal notranslate"><span class="pre">build_definitions.h</span></code> to be included everywhere, in that its
only used in the main program part. This makes C linter hate us much
less for using a non-existent file.</p></li>
</ul>
</section>
<section id="id100">
<h3>Tests<a class="headerlink" href="#id100" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Run the tests using Travis on macOS for Python2 too.</p></li>
<li><p>More standalone tests have been properly whitelisting to cover
openSSL usage from local system.</p></li>
<li><p>Disabled PySide2 test, its not useful to fail and ignore it.</p></li>
<li><p>Tests: Fixups for coverage testing mode.</p></li>
<li><p>Tests: Temporarily disable some checks for constants code in
reflected tests as it only exposes <code class="docutils literal notranslate"><span class="pre">marshal</span></code> not being
deterministic.</p></li>
</ul>
</section>
<section id="id101">
<h3>Summary<a class="headerlink" href="#id101" title="Permalink to this headline"></a></h3>
<p>This release is huge again. Main points are compatibility fixes, esp. on
the coroutine side. These have become apparently very compatible now and
we might eventually focus on making them better.</p>
<p>Again, GSoC 2019 is also showing effects, and will definitely continue
to do soin the next release.</p>
<p>Many use cases have been improved, and on an organisational level, the
adoption of Visual Studio Code seems an huge improvement to have a well
configured IDE out of the box too.</p>
<p>In upcoming releases, more built-ins will be optimized, and hopefully
the specialization of operations will hit more and more code with more
of the infrastructure getting there.</p>
</section>
</section>
<section id="nuitka-release-0-6-4">
<h2>Nuitka Release 0.6.4<a class="headerlink" href="#nuitka-release-0-6-4" title="Permalink to this headline"></a></h2>
<p>This release contains many bug fixes all across the board. There is also
new optimization and many organisational improvements.</p>
<section id="id102">
<h3>Bug Fixes<a class="headerlink" href="#id102" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>When linking very large programs or packages, with gcc compiler,
Scons can produce commands that are too large for the OS. This
happens sooner on the Windows OS, but also on Linux. We now have a
workaround that avoids long command lines by using <code class="docutils literal notranslate"><span class="pre">&#64;sources.tmp</span></code>
syntax.</p></li>
<li><p>Standalone: Remove temporary module after its use, instead of keeping
it in <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> where e.g. <code class="docutils literal notranslate"><span class="pre">Quart</span></code> code tripped over its
<code class="docutils literal notranslate"><span class="pre">__file__</span></code> value that is illegal on Windows.</p></li>
<li><p>Fixed non-usage of our enhanced detection of <code class="docutils literal notranslate"><span class="pre">gcc</span></code> version for
compilers if given as a full path.</p></li>
<li><p>Fixed non-detection of <code class="docutils literal notranslate"><span class="pre">gnu-cc</span></code> as a form of gcc compiler.</p></li>
<li><p>Python3.4: The <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> value corrections for compiled modules
was not taking into account that there was a <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> value,
which can happen if something is wrapping imported modules.</p></li>
<li><p>Standalone: Added implicit dependencies for <code class="docutils literal notranslate"><span class="pre">passlib</span></code>.</p></li>
<li><p>Windows: Added workaround for OS command line length limit in
compilation with MinGW64.</p></li>
<li><p>Python2: Revive the <code class="docutils literal notranslate"><span class="pre">enum</span></code> plugin, there are backports of the buggy
code it tries to patch up.</p></li>
<li><p>Windows: Fixup handling of SxS with non zero language id, these occur
e.g. in Anaconda.</p></li>
<li><p>Plugins: Handle multiple PyQt plugin paths, e.g. on openSUSE this is
done, also enhanced finding that path with Anaconda on Windows.</p></li>
<li><p>Plugins: For <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> on Windows, allow the <code class="docutils literal notranslate"><span class="pre">.exe</span></code>
suffix to not be present, which can happen when ran from command
line.</p></li>
<li><p>Windows: Better version checks for DLLs on Python3, the <code class="docutils literal notranslate"><span class="pre">ctypes</span></code>
helper code needs more definitions to work properly.</p></li>
<li><p>Standalone: Added support for both <code class="docutils literal notranslate"><span class="pre">pycryptodome</span></code> and
<code class="docutils literal notranslate"><span class="pre">pycryptodomex</span></code>.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">chr</span></code> built-in was not giving fully compatible error on
non number input.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">id</span></code> built-in doesnt raise an exception, but said
otherwise.</p></li>
<li><p>Python3: Proper C identifiers for names that fit into <code class="docutils literal notranslate"><span class="pre">latin-1</span></code>,
but are not <code class="docutils literal notranslate"><span class="pre">ascii</span></code> encodings.</p></li>
</ul>
</section>
<section id="id103">
<h3>New Features<a class="headerlink" href="#id103" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Catch most common user error of using compiler from one
architecture against Python from another. We now check those and
compare it, and if they do not match, inform the user directly.
Previously the compilation could fail, or the linking, with cryptic
errors.</p></li>
<li><p>Distutils: Using setuptools and its runners works now too, not merely
only pure distutils.</p></li>
<li><p>Distutils: Added more ways to pass Nuitka specific options via
distutils.</p></li>
<li><p>Python3.8: Initial compatibility changes to get basic tests to work.</p></li>
</ul>
</section>
<section id="id104">
<h3>Organisational<a class="headerlink" href="#id104" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nuitka is participating in the GSoC 2019 with 2 students, Batakrishna
and Tommy.</p></li>
<li><p>Point people creating PRs to using the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> hook in the
template. Due to making the style issues automatic, we can hope to
encounter less noise and resulting merge problems.</p></li>
<li><p>Many improvements to the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> hook were done, hopefully
completing its development.</p></li>
<li><p>Updated to latest <code class="docutils literal notranslate"><span class="pre">pylint</span></code>, <code class="docutils literal notranslate"><span class="pre">black</span></code>, and <code class="docutils literal notranslate"><span class="pre">isort</span></code> versions, also
added <code class="docutils literal notranslate"><span class="pre">codespell</span></code> to check for typos in the source code, but that
is not automated yet.</p></li>
<li><p>Added description of how to use experimental flags for your PRs.</p></li>
<li><p>Removed mirroring from Bitbucket and Gitlab, as we increasingly use
the Github organisation features.</p></li>
<li><p>Added support for Ubuntu Disco, removed support for Ubuntu Artful
packages.</p></li>
</ul>
</section>
<section id="id105">
<h3>Optimization<a class="headerlink" href="#id105" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Attach data blobs as Windows resource files directly for
programs and avoid using C data files for modules or MinGW64, which
can be slow.</p></li>
<li><p>Specialization of helper codes for <code class="docutils literal notranslate"><span class="pre">+</span></code> is being done for more types
and more thoroughly and fully automatic with Jinja2 templating code.
This does replace previously manual code.</p></li>
<li><p>Added specialization of helper codes for <code class="docutils literal notranslate"><span class="pre">*</span></code> operation which is
entirely new.</p></li>
<li><p>Added specialization of helper codes for <code class="docutils literal notranslate"><span class="pre">-</span></code> operation which is
entirely new.</p></li>
<li><p>Dedicated nodes for specialized operations now allow to save memory
and all use type shape based analysis to predict result types and
exception control flow.</p></li>
<li><p>Better code generation for boolean type values, removing error checks
when possible.</p></li>
<li><p>Better static analysis for even more type operations.</p></li>
</ul>
</section>
<section id="id106">
<h3>Cleanups<a class="headerlink" href="#id106" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fixed many kinds of typos in the code base with <code class="docutils literal notranslate"><span class="pre">codespell</span></code>.</p></li>
<li><p>Apply automatic formatting to more test runner code, these were
previously not done.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">shutil.copytree</span></code> which fails to work when directory
already exists, instead provide
<code class="docutils literal notranslate"><span class="pre">nuitka.util.FileOperations.copyTree</span></code> and use that exclusively.</p></li>
</ul>
</section>
<section id="id107">
<h3>Tests<a class="headerlink" href="#id107" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added new mode of operation to test runners, <code class="docutils literal notranslate"><span class="pre">only</span></code> that executes
just one test and stops, useful during development.</p></li>
<li><p>Added new mechanism for standalone tests to expression modules that
need to be importable, or else to skip the test by a special comment
in the file, instead of by coded checks in the test runner.</p></li>
<li><p>Added also for more complex cases, another form of special comment,
that can be any expression, that decides if the test makes sense.</p></li>
<li><p>Cover also setuptools in our distutils tests and made the execution
more robust against variable behavior of distutils and setuptools.</p></li>
<li><p>Added standalone test for Urllib3.</p></li>
<li><p>Added standalone test for rsa.</p></li>
<li><p>Added standalone test for Pmw.</p></li>
<li><p>Added standalone test for passlib.</p></li>
</ul>
</section>
<section id="id108">
<h3>Summary<a class="headerlink" href="#id108" title="Permalink to this headline"></a></h3>
<p>Again this release is a sign of increasing adoption of Nuitka. The GSoC
2019 is also showing effects, definitely will in the next release.</p>
<p>This release has a lot of new optimization, called specialization, but
for it to really used, in many instances, we need to get away from
working on C types for variables only, and get to them beig used for
expressions more often. Otherwise much of the new special code is not
used for most code.</p>
<p>The focus of this release has been again to open up development further
and to incorporate findings from users. The number of fixes or new use
cases working is astounding.</p>
<p>In upcoming releases, new built-ins will be optimized, and
specialization of operations will hit more and more code now that the
infrastructure for it is in place.</p>
</section>
</section>
<section id="nuitka-release-0-6-3">
<h2>Nuitka Release 0.6.3<a class="headerlink" href="#nuitka-release-0-6-3" title="Permalink to this headline"></a></h2>
<p>This has a focus on organisational improvements. With more and more
people joining Nuitka, normal developers as well as many GSoC 2019
students, the main focus was to open up the development tools and
processes, and to improve documentation.</p>
<p>That said, an impressive amount of bug fixes was contributed, but
optimization was on hold.</p>
<section id="id109">
<h3>Bug Fixes<a class="headerlink" href="#id109" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Added support for running compiled binaries in unicode path
names.</p></li>
<li><p>Standalone: Added support for crytodomex and pycparser packages.</p></li>
<li><p>Standalone: Added support for OpenSSL support in PyQt on Windows.</p></li>
<li><p>Standalone: Added support for OpenGL support with QML in PyQt on
Windows.</p></li>
<li><p>Standalone: Added support for SciPy and extended the NumPy plugin to
also handle it.</p></li>
<li><p>UI: The option <code class="docutils literal notranslate"><span class="pre">--plugin-list</span></code> still needed a positional argument
to work.</p></li>
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">sys.base_prefix</span></code> is set correctly too.</p></li>
<li><p>Python3: Also make sure <code class="docutils literal notranslate"><span class="pre">sys.exec_prefix</span></code> and
<code class="docutils literal notranslate"><span class="pre">sys.base_exec_prefix</span></code> are set correctly.</p></li>
<li><p>Standalone: Added platform plugins for PyQt to the default list of
sensible plugins to include.</p></li>
<li><p>Fix detection of standard library paths that include <code class="docutils literal notranslate"><span class="pre">..</span></code> path
elements.</p></li>
</ul>
</section>
<section id="id110">
<h3>Optimization<a class="headerlink" href="#id110" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Avoid static C++ runtime library when using MinGW64.</p></li>
</ul>
</section>
<section id="id111">
<h3>New Features<a class="headerlink" href="#id111" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Plugins: A plugin may now also generate data files on the fly for a
given module.</p></li>
<li><p>Added support for FreeBSD/PowerPC arch which still uses <code class="docutils literal notranslate"><span class="pre">gcc</span></code> and
not <code class="docutils literal notranslate"><span class="pre">clang</span></code>.</p></li>
</ul>
</section>
<section id="id112">
<h3>Organisational<a class="headerlink" href="#id112" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nuitka is participating in the GSoC 2019.</p></li>
<li><p>Added documentation on how to create or use Nuitka plugins.</p></li>
<li><p>Added more API doc to functions that were missing them as part of the
ongoing effort to complete it.</p></li>
<li><p>Updated to latest PyLint 2.3.1 for checking the code.</p></li>
<li><p>Scons: Using newer Scons inline copy with Python 2.7 as, the old one
remains only used with Python 2.6, making it easier to know the
relevant code.</p></li>
<li><p>Autoformat was very much enhanced and handles C and ReST files too
now. For Python code it does pylint comment formatting, import
statement sorting, and blackening.</p></li>
<li><p>Added script <code class="docutils literal notranslate"><span class="pre">misc/install-git-hooks.py</span></code> that adds a commit hook
that runs autoformat on commit. Currently it commits unstaged content
and therefore is not yet ready for prime time.</p></li>
<li><p>Moved adapted CPython test suites to <a class="reference external" href="https://github.com/Nuitka/Nuitka-CPython-tests">Github repository under Nuitka
Organisation</a>.</p></li>
<li><p>Moved Nuitka-website repository to <a class="reference external" href="https://github.com/Nuitka/Nuitka-website">Github repository under Nuitka
Organisation</a>.</p></li>
<li><p>Moved Nuitka-speedcenter repository to <a class="reference external" href="https://github.com/Nuitka/Nuitka-speedcenter">Github repository under
Nuitka Organisation</a>.</p></li>
<li><p>There is now a <a class="reference external" href="https://gitter.im/Nuitka-chat/community">Gitter chat for Nuitka community</a>.</p></li>
<li><p>Many typo and spelling corrections on all the documentation.</p></li>
<li><p>Added short installation guide for Nuitka on Windows.</p></li>
</ul>
</section>
<section id="id113">
<h3>Cleanups<a class="headerlink" href="#id113" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved commandline parsing helper functions from common code helpers
to the main program where of course their only usage is.</p></li>
<li><p>Moved post processing of the created standalone binary from main
control to the freezer code.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">chmod</span></code> binary to remove executable bit from created
extension modules.</p></li>
<li><p>Windows: Avoid using <code class="docutils literal notranslate"><span class="pre">rt.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">mt.exe</span></code> to deal with copying
the manifest from the <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> to created binaries. Instead use
new code that extracts and adds Windows resources.</p></li>
<li><p>Fixed many <code class="docutils literal notranslate"><span class="pre">ResourceWarnings</span></code> on Python3 by improved ways of
handling files.</p></li>
<li><p>Fixed deprecation warnings related to not using <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code>.</p></li>
<li><p>The runners in <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory are now formatted with <code class="docutils literal notranslate"><span class="pre">black</span></code>
too.</p></li>
</ul>
</section>
<section id="id114">
<h3>Tests<a class="headerlink" href="#id114" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Detect Windows permission errors for two step execution of Nuitka as
well, leading to retries should they occur.</p></li>
<li><p>The salt value for CPython cached results was improved to take more
things into account.</p></li>
<li><p>Tests: Added more trick assignments and generally added more tests
that were so far missing.</p></li>
</ul>
</section>
<section id="id115">
<h3>Summary<a class="headerlink" href="#id115" title="Permalink to this headline"></a></h3>
<p>With the many organisational changes in place, my normal work is
expected to resume for after and yield quicker improvements now.</p>
<p>It is also important that people are now enabled to contribute to the
Nuitka web site and the Nuitka speedcenter. Hope is to see more
improvements on this otherwise neglected areas.</p>
<p>And generally, its great to see that a community of people is now
looking at this release in excitement and pride. Thanks to everybody who
contributed!</p>
</section>
</section>
<section id="nuitka-release-0-6-2">
<h2>Nuitka Release 0.6.2<a class="headerlink" href="#nuitka-release-0-6-2" title="Permalink to this headline"></a></h2>
<p>This release has a huge focus on organisational things. Nuitka is
growing in terms of contributors and supported platforms.</p>
<section id="id116">
<h3>Bug Fixes<a class="headerlink" href="#id116" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the Python flag <code class="docutils literal notranslate"><span class="pre">--python-flag=-O</span></code> was removing doc strings,
but that should only be done with <code class="docutils literal notranslate"><span class="pre">--python-flag=-OO</span></code> which was
added too.</p></li>
<li><p>Fix, accelerated binaries failed to load packages from the
<code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> (not <code class="docutils literal notranslate"><span class="pre">venv</span></code>) that they were created and ran with,
due to not propagating <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code>.</p></li>
<li><p>Standalone: Do not include <code class="docutils literal notranslate"><span class="pre">plat-*</span></code> directories as frozen code, and
also on some platforms they can also contain code that fails to
import without error.</p></li>
<li><p>Standalone: Added missing implicit dependency needed for newer NumPy
versions.</p></li>
</ul>
</section>
<section id="id117">
<h3>New Features<a class="headerlink" href="#id117" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added support for Alpine Linux.</p></li>
<li><p>Added support for MSYS2 based Python on Windows.</p></li>
<li><p>Added support for Python flag <code class="docutils literal notranslate"><span class="pre">--python</span> <span class="pre">flag=-OO</span></code>, which allows to
remove doc strings.</p></li>
<li><p>Added experimental support for <code class="docutils literal notranslate"><span class="pre">pefile</span></code> based dependency scans on
Windows, thanks to Orsiris for this contribution.</p></li>
<li><p>Added plugin for proper Tkinter standalone support on Windows, thanks
to Jorj for this contribution.</p></li>
<li><p>There is now a <code class="docutils literal notranslate"><span class="pre">__compiled__</span></code> attribute for each module that Nuitka
has compiled. Should be like this now, and contains Nuitka version
information for you to use, similar to what <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code>
gives as a <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> for your checks.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">__nuitka_version__</span><span class="p">(</span><span class="n">major</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">micro</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">releaselevel</span><span class="o">=</span><span class="s2">&quot;release&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id118">
<h3>Optimization<a class="headerlink" href="#id118" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Experimental code for variant types for <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> values,
that can be plain C value, as well as the <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>. This is not
yet completed though.</p></li>
<li><p>Minor refinements of specialized code variants reducing them more
often the actual needed code.</p></li>
</ul>
</section>
<section id="id119">
<h3>Organisational<a class="headerlink" href="#id119" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The Nuitka Github Organisation that was created a while ago and owns
the Nuitka repo now, has gained members. Check out
<a class="reference external" href="https://github.com/orgs/Nuitka/people">https://github.com/orgs/Nuitka/people</a> for their list. This is an
exciting transformation for Nuitka.</p></li>
<li><p>Nuitka is participating in the GSoC 2019 under the PSF umbrella. We
hope to grow even further. Thanks to the mentors who volunteered for
this important task. Check out the <a class="reference external" href="https://nuitka.net/pages/gsoc2019.html#mentors">GSoC 2019 page</a> and thanks to the
students that are already helping out.</p></li>
<li><p>Added Nuitka internal <a class="reference external" href="https://nuitka.net/apidoc">API documentation</a> that will receive more love in the
future. It got some for this release, but a lot is missing.</p></li>
<li><p>The Nuitka code has been <code class="docutils literal notranslate"><span class="pre">black</span></code>-ened and is formatted with an
automatic tool now all the way, which makes contributors lives
easier.</p></li>
<li><p>Added documentation for questions received as part of the GSoC
applications and ideas work.</p></li>
<li><p>Some proof reading pull requests were merged for the documentation,
thanks to everybody who addresses these kinds of errors. Sometimes
typos, sometimes broken links, etc.</p></li>
<li><p>Updated inline copy of Scons used for Python3 to 3.0.4, which
hopefully means more bugs are fixed.</p></li>
</ul>
</section>
<section id="id120">
<h3>Summary<a class="headerlink" href="#id120" title="Permalink to this headline"></a></h3>
<p>This release is a sign of increasing adoption of Nuitka. The GSoC 2019
is showing early effects, as is more developers joining the effort.
These are great times for Nuitka.</p>
<p>This release has not much on the optimization side that is user visible,
but the work that has begun is capable of producing glorious benchmarks
once it will be finished.</p>
<p>The focus on this and coming releases is definitely to open up the
Nuitka development now that people are coming in as permanent or
temporary contributors in (relatively) high numbers.</p>
</section>
</section>
<section id="nuitka-release-0-6-1">
<h2>Nuitka Release 0.6.1<a class="headerlink" href="#nuitka-release-0-6-1" title="Permalink to this headline"></a></h2>
<p>This release comes after a relatively long time, and contains important
new optimization work, and even more bug fixes.</p>
<section id="id121">
<h3>Bug Fixes<a class="headerlink" href="#id121" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, the options <code class="docutils literal notranslate"><span class="pre">--[no]follow-import-to=package_name</span></code> was supposed
to not follow into the given package, but the check was executed too
broadly, so that e.g. <code class="docutils literal notranslate"><span class="pre">package_name2</span></code> was also affected. Fixed in
0.6.0.1 already.</p></li>
<li><p>Fix, wasnt detecting multiple recursions into the same package in
module mode, when attempting to compile a whole sub-package. Fixed in
0.6.0.1 already.</p></li>
<li><p>Fix, constant values are used as C boolean values still for some of
the cases. Fixed in 0.6.0.1 already.</p></li>
<li><p>Fix, referencing a function cannot raise an exception, but that was
not annotated. Fixed in 0.6.0.2 already.</p></li>
<li><p>macOS: Use standard include of C bool type instead of rolling our
own, which was not compatible with newest Clang. Fixed in 0.6.0.3
already.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> built-in type actually does have a
<code class="docutils literal notranslate"><span class="pre">__float__</span></code> slot. Fixed in 0.6.0.4 already.</p></li>
<li><p>Python3.7: Types that are also sequences still need to call the
method <code class="docutils literal notranslate"><span class="pre">__class_getitem__</span></code> for consideration. Fixed in 0.6.0.4
already.</p></li>
<li><p>Python3.7: Error exits from program exit could get lost on Windows
due to <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> handling not preserving errors. Fixed in 0.6.0.4
already.</p></li>
<li><p>Windows: Negative exit codes from Nuitka, e.g. due to a triggered
assertion in debug mode were not working. Fixed in 0.6.0.4 already.</p></li>
<li><p>Fix, conditional <code class="docutils literal notranslate"><span class="pre">and</span></code> expressions were mis-optimized when not used
to not execute the right hand side still. Fixed in 0.6.0.4 already.</p></li>
<li><p>Python3.6: Fix, generators, coroutines, and asyncgen were not
properly supporting annotations for local variables. Fixed in 0.6.0.5
already.</p></li>
<li><p>Python3.7: Fix, class declarations had memory leaks that were
untestable before 3.7.1 fixed reference count issues in CPython.
Fixed in 0.6.0.6 already.</p></li>
<li><p>Python3.7: Fix, asyncgen expressions can be created in normal
functions without an immediate awaiting of the iterator. This new
feature was not correctly supported.</p></li>
<li><p>Fix, star imports on the module level should disable built-in name
optimization except for the most critical ones, otherwise e.g. names
like <code class="docutils literal notranslate"><span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">pow</span></code> can become wrong. Previous workarounds for
<code class="docutils literal notranslate"><span class="pre">pow</span></code> were not good enough.</p></li>
<li><p>Fix, the scons for Python3 failed to properly report build errors due
to a regression of the Scons version used for it. This would mask
build errors on Windows.</p></li>
<li><p>Python3.4: Fix, packages didnt indicate that they are packages in
their <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> value, causing issues with <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code>
module.</p></li>
<li><p>Python3.4: The <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> values of compiled modules didnt have
compatible <code class="docutils literal notranslate"><span class="pre">origin</span></code> and <code class="docutils literal notranslate"><span class="pre">has_location</span></code> values preventing
<code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> module from working to load data files.</p></li>
<li><p>Fix, packages created from <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files were also considered when
checking for sub-packages of a module.</p></li>
<li><p>Standalone: Handle cases of conflicting DLLs better. On Windows pick
the newest file version if different, and otherwise just report and
pick randomly because we cannot really decide which ought to be
loaded.</p></li>
<li><p>Standalone: Warn about collisions of DLLs on non-Windows only as this
can happen with wheels apparently.</p></li>
<li><p>Standalone: For Windows Python extension modules <code class="docutils literal notranslate"><span class="pre">.pyd</span></code> files,
remove the SxS configuration for cases where it causes problems, not
needed.</p></li>
<li><p>Fix: The <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement on file handles was not using the proper
filename when compiling, therefore breaking e.g.
<code class="docutils literal notranslate"><span class="pre">inspect.getsource</span></code> on functions defined there.</p></li>
<li><p>Standalone: Added support for OpenGL platform plugins to be included
automatically.</p></li>
<li><p>Standalone: Added missing implicit dependency for <code class="docutils literal notranslate"><span class="pre">zmq</span></code> module.</p></li>
<li><p>Python3.7: Fix, using the <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">utf8</span></code> flag on the calling
interpreter, aka <code class="docutils literal notranslate"><span class="pre">--python-flag=utf8_mode</span></code> was not preserved in the
compiled binary in all cases.</p></li>
</ul>
</section>
<section id="id122">
<h3>Optimization<a class="headerlink" href="#id122" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Enabled C target type <code class="docutils literal notranslate"><span class="pre">void</span></code> which will catch creating unused stuff
more immediately and give better code for expression only statements.</p></li>
<li><p>Enabled in-place optimization for module variables, avoiding write
back to the module dict for unchanged values, accelerating these
operations.</p></li>
<li><p>Compile time memory savings for the <code class="docutils literal notranslate"><span class="pre">yield</span></code> node of Python2, no
need to track if it is in an exception handler, not relevant there.</p></li>
<li><p>Using the single child node for the <code class="docutils literal notranslate"><span class="pre">yield</span></code> nodes gives memory
savings at compile time for these, while also making them operate
faster.</p></li>
<li><p>More kinds of in-place operations are now optimized, e.g. <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">+=</span>
<span class="pre">int</span></code> and the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> ones were specialized to perform real
in-place extension where possible.</p></li>
<li><p>Loop variables no longer loose type information, but instead collect
the set of possible type shapes allowing optimization for them.</p></li>
</ul>
</section>
<section id="id123">
<h3>Organisational<a class="headerlink" href="#id123" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Corrected download link for Arch AUR link of develop package.</p></li>
<li><p>Added repository for Ubuntu Cosmic (18.10) for download.</p></li>
<li><p>Added repository for Fedora 29 for download.</p></li>
<li><p>Describe the exact format used for <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> in the Developer
Manual.</p></li>
<li><p>Added description how to use CondaCC on Windows to the User Manual.</p></li>
</ul>
</section>
<section id="id124">
<h3>Cleanups<a class="headerlink" href="#id124" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The operations used for <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code>, and <code class="docutils literal notranslate"><span class="pre">await</span></code>
were all doing a look-up of an awaitable, and then executing the
<code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> that awaitable as one thing. Now this is split into
two parts, with a new <code class="docutils literal notranslate"><span class="pre">ExpressionYieldFromAwaitable</span></code> as a dedicated
node.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">yield</span></code> node types, now 3 share a base class and common
computation for now, enhancing the one for awaitiable, which was not
fully annotating everything that can happen.</p></li>
<li><p>In code generation avoid statement blocks that are not needed,
because there are no local C variables declared, and properly indent
them.</p></li>
</ul>
</section>
<section id="id125">
<h3>Tests<a class="headerlink" href="#id125" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fixups for the manual Valgrind runner and the UI changes.</p></li>
<li><p>Test runner detects lock issue of <code class="docutils literal notranslate"><span class="pre">clcache</span></code> on Windows and
considers it a permission problem that causes a retry.</p></li>
</ul>
</section>
<section id="id126">
<h3>Summary<a class="headerlink" href="#id126" title="Permalink to this headline"></a></h3>
<p>This addresses even more corner cases not working correctly, the out of
the box experience should be even better now.</p>
<p>The push towards C level performance for integer operation was held up
by the realization that loop SSA was not yet there really, and that it
had to be implemented, which of course now makes a huge difference for
the cases where e.g. <code class="docutils literal notranslate"><span class="pre">bool</span></code> are being used. There is no C type for
<code class="docutils literal notranslate"><span class="pre">int</span></code> used yet, which limits the impact of optimization to only taking
shortcuts for the supported types. These are useful and faster of
course, but only building blocks for what is to come.</p>
<p>Most of the effort went into specialized helpers that e.g. add a
<code class="docutils literal notranslate"><span class="pre">float</span></code> and and <code class="docutils literal notranslate"><span class="pre">int</span></code> value in a dedicated fashion, as well as
comparison operations, so we can fully operate some minimal examples
with specialized code. This is too limited still, and must be applied to
ever more operations.</p>
<p>Whats more is that the benchmarking situation has not improved. Work
will be needed in this domain to make improvements more demonstrable. It
may well end up being the focus for the next release to improve Nuitka
speedcenter to give more fine grained insights across minor changes of
Nuitka and graphs with more history.</p>
</section>
</section>
<section id="nuitka-release-0-6-0">
<h2>Nuitka Release 0.6.0<a class="headerlink" href="#nuitka-release-0-6-0" title="Permalink to this headline"></a></h2>
<p>This release adds massive improvements for optimization and a couple of
bug fixes.</p>
<p>It also indicates reaching the mile stone of doing actual type
inference, even if only very limited.</p>
<p>And with the new version numbers, lots of UI changes go along. The
options to control recursion into modules have all been renamed, some
now have different defaults, and finally the filenames output have
changed.</p>
<section id="id127">
<h3>Bug Fixes<a class="headerlink" href="#id127" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.5: Fix, the awaiting flag was not removed for exceptions
thrown into a coroutine, so next time it appeared to be awaiting
instead of finished.</p></li>
<li><p>Python3: Classes in generators that were using built-in functions
crashed the compilation with C errors.</p></li>
<li><p>Some regressions for XML outputs from previous changes were fixed.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> was not raising an exception if used with non-string
attributes.</p></li>
<li><p>For really large compilations, MSVC linker could choke on the input
file, line length limits, which is now fixed for the inline copy of
Scons.</p></li>
<li><p>Standalone: Follow changed hidden dependency of <code class="docutils literal notranslate"><span class="pre">PyQt5</span></code> to
<code class="docutils literal notranslate"><span class="pre">PyQt5.sip</span></code> for newer versions</p></li>
<li><p>Standalone: Include certificate file using by <code class="docutils literal notranslate"><span class="pre">requests</span></code> module in
some cases as a data file.</p></li>
</ul>
</section>
<section id="id128">
<h3>Optimization<a class="headerlink" href="#id128" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Enabled C target type <code class="docutils literal notranslate"><span class="pre">nuitka_bool</span></code> for variables that are stored
with boolean shape only, and generate C code for those</p></li>
<li><p>Using C target type <code class="docutils literal notranslate"><span class="pre">nuitka_bool</span></code> many more expressions are now
handled better in conditions.</p></li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">is</span></code> and <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code> to be C source type aware, so they can
be much faster for them.</p></li>
<li><p>Use C target type for <code class="docutils literal notranslate"><span class="pre">bool</span></code> built-in giving more efficient code
for some source values.</p></li>
<li><p>Annotate the <code class="docutils literal notranslate"><span class="pre">not</span></code> result to have boolean type shape, allowing for
more compile time optimization with it.</p></li>
<li><p>Restored previously lost optimization of loop break handling
<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> which makes loops much faster again.</p></li>
<li><p>Restore lost optimization of subscripts with constant integer values
making them faster again.</p></li>
<li><p>Optimize in-place operations for cases where left, right, or both
sides have known type shapes for some values. Initially only a few
variants were added, but there is more to come.</p></li>
<li><p>When adjacent parts of an f-string become known string constants,
join them at compile time.</p></li>
<li><p>When there is only one remaining part in an f-string, use that
directly as the result.</p></li>
<li><p>Optimize empty f-strings directly into empty strings constant during
the tree building phase.</p></li>
<li><p>Added specialized attribute check for use in re-formulations that
doesnt expose exceptions.</p></li>
<li><p>Remove locals sync operation in scopes without local variables, e.g.
classes or modules, making <code class="docutils literal notranslate"><span class="pre">exec</span></code> and the like slightly leaner
there.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">try</span></code> nodes that did only re-raise exceptions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">del</span></code> of variables is now driven fully by C types and generates
more compatible code.</p></li>
<li><p>Removed useless double exception exits annotated for expressions of
conditions and added code that allows conditions to adapt themselves
to the target shape bool during optimization.</p></li>
</ul>
</section>
<section id="id129">
<h3>New Features<a class="headerlink" href="#id129" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for using <code class="docutils literal notranslate"><span class="pre">.egg</span></code> files in <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>, one of the
more rare uses, where Nuitka wasnt yet compatible.</p></li>
<li><p>Output binaries in standalone mode with platform suffix, on
non-Windows that means no suffix. In accelerated mode on non-Windows,
use <code class="docutils literal notranslate"><span class="pre">.bin</span></code> as a suffix to avoid collision with files that have no
suffix.</p></li>
<li><p>Windows: Its now possible to use <code class="docutils literal notranslate"><span class="pre">clang-cl.exe</span></code> for <code class="docutils literal notranslate"><span class="pre">CC</span></code> with
Nuitka as a third compiler on Windows, but it requires an existing
MSVC install to be used for resource compilation and linking.</p></li>
<li><p>Windows: Added support for using <code class="docutils literal notranslate"><span class="pre">ccache.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">clcache.exe</span></code>,
so that object files can now be cached for re-compilation.</p></li>
<li><p>For debug mode, report missing in-place helpers. These kinds of
reports are to become more universal and are aimed at recognizing
missed optimization chances in Nuitka. This features is still in its
infancy. Subsequent releases will add more like these.</p></li>
</ul>
</section>
<section id="id130">
<h3>Organisational<a class="headerlink" href="#id130" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Disabled comments on the web site, we are going to use Twitter
instead, once the site is migrated to an updated Nikola.</p></li>
<li><p>The static C code is now formatted with <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> to make it
easier for contributors to understand.</p></li>
<li><p>Moved the construct runner to top level binary and use it from there,
with future changes coming that should make it generally useful
outside of Nuitka.</p></li>
<li><p>Enhanced the issue template to tell people how to get the <code class="docutils literal notranslate"><span class="pre">develop</span></code>
version of Nuitka to try it out.</p></li>
<li><p>Added documentation for how use the object caching on Windows to the
User Manual.</p></li>
<li><p>Removed the included GUI, originally intended for debugging, but XML
outputs are more powerful anyway, and it had been in disrepair for a
long time.</p></li>
<li><p>Removed long deprecated options, e.g. <code class="docutils literal notranslate"><span class="pre">--exe</span></code> which has long been
the default and is no more accepted.</p></li>
<li><p>Renamed options to include plugin files to
<code class="docutils literal notranslate"><span class="pre">--include-plugin-directory</span></code> and <code class="docutils literal notranslate"><span class="pre">--include-plugin-files</span></code> for
more clarity.</p></li>
<li><p>Renamed options for recursion control to e.g. <code class="docutils literal notranslate"><span class="pre">--follow-imports</span></code> to
better express what they actually do.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> support for switching the version during
compilation. This has only worked for very specific circumstances and
has been deprecated for a while.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">--code-gen-no-statement-lines</span></code> support for not having line
numbers updated at run time. This has long been hidden and probably
would never gain all that much, while causing a lot of
incompatibilty.</p></li>
</ul>
</section>
<section id="id131">
<h3>Cleanups<a class="headerlink" href="#id131" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved command line arguments to dedicated module, adding checks was
becoming too difficult.</p></li>
<li><p>Moved rich comparison helpers to a dedicated C file.</p></li>
<li><p>Dedicated binary and unary node bases for clearer distinction and
more efficient memory usage of unuary nodes. Unary operations also no
longer have in-place operation as an issue.</p></li>
<li><p>Major cleanup of variable accesses, split up into multiple phases and
all including module variables being performed through C types, with
no special cases anymore.</p></li>
<li><p>Partial cleanups of C type classes with code duplications, there is
much more to resolve though.</p></li>
<li><p>Windows: The way <code class="docutils literal notranslate"><span class="pre">exec</span></code> was performed is discouraged in the
<code class="docutils literal notranslate"><span class="pre">subprocess</span></code> documentation, so use a variant that cannot block
instead.</p></li>
<li><p>Code proving information about built-in names and values was using
not very portable constructs, and is now written in a way that PyPy
would also like.</p></li>
</ul>
</section>
<section id="id132">
<h3>Tests<a class="headerlink" href="#id132" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">2to3</span></code> for basic operators test, removing test of some
Python2 only stuff, that is covered elsewhere.</p></li>
<li><p>Added ability to cache output of CPython when comparing to it. This
is to allow CI tests to not execute the same code over and over, just
to get the same value to compare with. This is not enabled yet.</p></li>
</ul>
</section>
<section id="id133">
<h3>Summary<a class="headerlink" href="#id133" title="Permalink to this headline"></a></h3>
<p>This release marks a point, from which on performance improvements are
likely in every coming release. The C target types are a major
milestone. More C target types are in the work, e.g. <code class="docutils literal notranslate"><span class="pre">void</span></code> is coming
for expressions that are done, but not used, that is scheduled for the
next release.</p>
<p>Although there will be a need to also adapt optimization to take full
advantage of it, progress should be quick from here. There is a lot of
ground to cover, with more C types to come, and all of them needing
specialized helpers. But as soon as e.g. <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code> are covered,
many more programs are going to benefiting from this.</p>
</section>
</section>
<section id="nuitka-release-0-5-33">
<h2>Nuitka Release 0.5.33<a class="headerlink" href="#nuitka-release-0-5-33" title="Permalink to this headline"></a></h2>
<p>This release contains a bunch of fixes, most of which were previously
released as part of hotfixes, and important new optimization for
generators.</p>
<section id="id134">
<h3>Bug Fixes<a class="headerlink" href="#id134" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, nested functions with local classes using outside function
closure variables were not registering their usage, which could lead
to errors at C compile time. Fixed in 0.5.32.1 already.</p></li>
<li><p>Fix, usage of built-in calls in a class level could crash the
compiler if a class variable was updated with its result. Fixed in
0.5.32.1 already.</p></li>
<li><p>Python 3.7: The handling of non-type bases classes was not fully
compatible and wrong usages were giving <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code>. Fixed in 0.5.32.2 already.</p></li>
<li><p>Python 3.5: Fix, <code class="docutils literal notranslate"><span class="pre">await</span></code> expressions didnt annotate their
exception exit. Fixed in 0.5.32.2 already.</p></li>
<li><p>Python3: The <code class="docutils literal notranslate"><span class="pre">enum</span></code> module usages with <code class="docutils literal notranslate"><span class="pre">__new__</span></code> in derived
classes were not working, due to our automatic <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code>
decoration. Turns out, that was only needed for Python2 and can be
removed, making enum work all the way. Fixed in 0.5.32.3 already.</p></li>
<li><p>Fix, recursion into <code class="docutils literal notranslate"><span class="pre">__main__</span></code> was done and could lead to compiler
crashes if the main module was named like that. This is not
prevented. Fixed in 0.5.32.3 already.</p></li>
<li><p>Python3: The name for list contractions frames was wrong all along
and not just changed for 3.7, so drop that version check on it. Fixed
in 0.5.32.3 already.</p></li>
<li><p>Fix, the hashing of code objects has creating a key that could
produce more overlaps for the hash than necessary. Using a <code class="docutils literal notranslate"><span class="pre">C1</span></code> on
line 29 and <code class="docutils literal notranslate"><span class="pre">C</span></code> on line 129, was considered the same. And that is
what actually happened. Fixed in 0.5.32.3 already.</p></li>
<li><p>macOS: Various fixes for newer Xcode versions to work as well. Fixed
in 0.5.32.4 already.</p></li>
<li><p>Python3: Fix, the default <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> was the empty dict and
could be modified, leading to severe corruption potentially. Fixed in
0.5.32.4 already.</p></li>
<li><p>Python3: When an exception is thrown into a generator that currently
does a <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> is not to be normalized.</p></li>
<li><p>Python3: Some exception handling cases of <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> were leaking
references to objects. Fixed in 0.5.32.5 already.</p></li>
<li><p>Python3: Nested namespace packages were not working unless the
directory continued to exist on disk. Fixed in 0.5.32.5 already.</p></li>
<li><p>Standalone: Do not include <code class="docutils literal notranslate"><span class="pre">icuuc.dll</span></code> which is a system DLL. Fixed
in 0.5.32.5 already.</p></li>
<li><p>Standalone: Added hidden dependency of newer version of <code class="docutils literal notranslate"><span class="pre">sip</span></code>.
Fixed in 0.5.32.5 already.</p></li>
<li><p>Standalone: Do not copy file permissions of DLLs and extension
modules as that makes deleting and modifying them only harder. Fixed
in 0.5.32.6 already.</p></li>
<li><p>Windows: The multiprocessing plugin was not always properly patching
the run time for all module loads, made it more robust. Fixed in
0.5.32.6 already.</p></li>
<li><p>Standalone: Do not preserve permissions of copied DLLs, which can
cause issues with read-only files on Windows when later trying to
overwrite or remove files.</p></li>
<li><p>Python3.4: Make sure to disconnect finished generators from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.5: Make sure to disconnect finished coroutines from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.6: Make sure to disconnect finished asyncgen from their
frames to avoid potential data corruption. Fixed in 0.5.32.6 already.</p></li>
<li><p>Python3.5: Explicit frame closes of frames owned by coroutines could
corrupt data. Fixed in 0.5.32.7 already.</p></li>
<li><p>Python3.6: Explicit frame closes of frames owned by asyncgen could
corrupt data. Fixed in 0.5.32.7 already.</p></li>
<li><p>Python 3.4: Fix threaded imports by properly handling
<code class="docutils literal notranslate"><span class="pre">_initializing</span></code> in compiled modules <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> attributes. Before
it happen that another thread attempts to use an unfinished module.
Fixed in 0.5.32.8 already.</p></li>
<li><p>Fix, the options <code class="docutils literal notranslate"><span class="pre">--include-module</span></code> and <code class="docutils literal notranslate"><span class="pre">--include-package</span></code> were
present but not visible in the help output. Fixed in 0.5.32.8
already.</p></li>
<li><p>Windows: The multiprocessing plugin failed to properly pass compiled
functions. Fixed in 0.5.32.8 already.</p></li>
<li><p>Python3: Fix, optimization for in-place operations on mapping values
are not allowed and had to be disabled. Fixed in 0.5.32.8 already.</p></li>
<li><p>Python 3.5: Fixed exception handling with coroutines and asyncgen
<code class="docutils literal notranslate"><span class="pre">throw</span></code> to not corrupt exception objects.</p></li>
<li><p>Python 3.7: Added more checks to class creations that were missing
for full compatibility.</p></li>
<li><p>Python3: Smarter hashing of unicode values avoids increased memory
usage from cached converted forms in debug mode.</p></li>
</ul>
</section>
<section id="id135">
<h3>Organisational<a class="headerlink" href="#id135" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The issue tracker on Github is now the one that should be used with
Nuitka, winning due to easier issue templating and integration with
pull requests.</p></li>
<li><p>Document the threading model and exception model to use for MinGW64.</p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">enum</span></code> plug-in which is no longer useful after the
improvements to the <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> handling for Python3.</p></li>
<li><p>Added Python 3.7 testing for Travis.</p></li>
<li><p>Make it clear in the documentation that <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> is not supported.</p></li>
<li><p>The version output includes more information now, OS and
architecture, so issue reports should contain that now.</p></li>
<li><p>On PyPI we didnt yet indicated Python 3.7 as supported, which it of
course is.</p></li>
</ul>
</section>
<section id="id136">
<h3>New Features<a class="headerlink" href="#id136" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for MiniConda Python.</p></li>
</ul>
</section>
<section id="id137">
<h3>Optimization<a class="headerlink" href="#id137" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Using goto based generators that return from execution and resume
based on heap storage. This makes tests using generators twice as
fast and they no longer use a full C stack of 2MB, but only 1K
instead.</p></li>
<li><p>Conditional <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">if</span> <span class="pre">cond</span> <span class="pre">else</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">and</span> <span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">or</span> <span class="pre">b</span></code> expressions
of which the result value is are now transformed into conditional
statements allowing to apply further optimizations to the right and
left side expressions as well.</p></li>
<li><p>Replace unused function creations with side effects from their
default values with just those, removing more unused code.</p></li>
<li><p>Put all statement related code and declarations for it in a dedicated
C block, making things slightly more easy for the C compiler to
re-use the stack space.</p></li>
<li><p>Avoid linking against <code class="docutils literal notranslate"><span class="pre">libpython</span></code> in module mode on everything but
Windows where it is really needed. No longer check for static Python,
not needed anymore.</p></li>
<li><p>More compact function, generator, and asyncgen creation code for the
normal cases, avoid qualname if identical to name for all of them.</p></li>
<li><p>Python2 class dictionaries are now indeed directly optimized, giving
more compact code.</p></li>
<li><p>Module exception exits and thus its frames have become optional
allowing to avoid some code for some special modules.</p></li>
<li><p>Uncompiled generator integration was backported to 3.4 as well,
improving compatibility and speed there as well.</p></li>
</ul>
</section>
<section id="id138">
<h3>Cleanups<a class="headerlink" href="#id138" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Frame object and their cache declarations are now handled by the way
of allocated variable descriptions, avoid special handling for them.</p></li>
<li><p>The interface to forget a temporary variable has been replaced with
a new method that skips a number for it. This is done to keep
expression use the same indexes for all their child expressions, but
this is more explicit.</p></li>
<li><p>Instead of passing around C variables names for temporary values, we
now have full descriptions, with C type, code name, storage location,
and the init value to use. This makes the information more
immediately available where it is needed.</p></li>
<li><p>Variable declarations are now created when needed and stored in
dedicated variable storage objects, which then in can generate the
code as necessary.</p></li>
<li><p>Module code generation has been enhanced to be closer to the pattern
used by functions, generators, etc.</p></li>
<li><p>There is now only one spot that creates variable declaration, instead
of previous code duplications.</p></li>
<li><p>Code objects are now attached to functions, generators, coroutines,
and asyncgen bodies, and not anymore to the creation of these
objects. This allows for simpler code generation.</p></li>
<li><p>Removed fiber implementations, no more needed.</p></li>
</ul>
</section>
<section id="id139">
<h3>Tests<a class="headerlink" href="#id139" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Finally the asyncgen tests can be enabled in the CPython 3.6 test
suite as the corrupting crash has been identified.</p></li>
<li><p>Cover ever more cases of spurious permission problems on Windows.</p></li>
<li><p>Added the ability to specify specific modules a comparison test
should recurse to, making some CPython tests follow into modules
where actual test code lives.</p></li>
</ul>
</section>
<section id="id140">
<h3>Summary<a class="headerlink" href="#id140" title="Permalink to this headline"></a></h3>
<p>This release is huge in many ways.</p>
<p>First, finishing goto generators clears an old scalability problem of
Nuitka that needed to be addressed. No more do
generators/coroutines/asyncgen consume too much memory, but instead they
become as lightweight as they ought to be.</p>
<p>Second, the use of variable declarations carying type information all
through the code generation, is an important pre-condition for C types
work to resume and become possible, what will be 0.6.0 and the next
release.</p>
<p>Third, the improved generator performance will be removing a lot of
cases, where Nuitka wasnt as fast, as its current state not using C
types yet, should allow. It is now consistently faster than CPython for
everything related to generators.</p>
<p>Fourth, the fibers were a burden for the debugging and linking of Nuitka
on various platforms, as they provided deprecated interfaces or not. As
they are now gone, Nuitka ought to definitely work on any platform where
Python works.</p>
<p>From here on, C types work can take it, and produce the results we are
waiting for in the next major release cycle that is about to start.</p>
<p>Also the amount of fixes for this release has been incredibly high. Lots
of old bugs esp. for coroutines and asyncgen have been fixed, this is
not only faster, but way more correct. Mainly due to the easier
debugging and interface to the context code, bugs were far easier to
avoid and/or find.</p>
</section>
</section>
<section id="nuitka-release-0-5-32">
<h2>Nuitka Release 0.5.32<a class="headerlink" href="#nuitka-release-0-5-32" title="Permalink to this headline"></a></h2>
<p>This release contains substantial new optimization, bug fixes, and
already the full support for Python 3.7. Among the fixes, the enhanced
coroutine work for compatibility with uncompiled ones is most important.</p>
<section id="id141">
<h3>Bug Fixes<a class="headerlink" href="#id141" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, was optimizing write backs of attribute in-place assignments
falsely.</p></li>
<li><p>Fix, generator stop future was not properly supported. It is now the
default for Python 3.7 which showed some of the flaws.</p></li>
<li><p>Python3.5: The <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> of coroutines and asyncgen was wrong.</p></li>
<li><p>Python3.5: Fix, for dictionary unpackings to calls, check the keys if
they are string values, and raise an exception if not.</p></li>
<li><p>Python3.6: Fix, need to check assignment unpacking for too short
sequences, we were giving <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
for these. Also the error messages need to consider if they should
refer to at least in their wording.</p></li>
<li><p>Fix, outline nodes were cloned more than necessary, which would
corrupt the code generation if they later got removed, leading to a
crash.</p></li>
<li><p>Python3.5: Compiled coroutines awaiting uncompiled coroutines was not
working properly for finishing the uncompiled ones. Also the other
way around was raising a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> when trying to pass an
exception to them when they were already finished. This should
resolve issues with <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> module.</p></li>
<li><p>Fix, side effects of a detected exception raise, when they had an
exception detected inside of them, lead to an infinite loop in
optimization. They are now optimized in-place, avoiding an extra step
later on.</p></li>
</ul>
</section>
<section id="id142">
<h3>New Features<a class="headerlink" href="#id142" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Support for Python 3.7 with only some corner cases not supported yet.</p></li>
</ul>
</section>
<section id="id143">
<h3>Optimization<a class="headerlink" href="#id143" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Delay creation of <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> exception in generator code for
as long as possible. This gives more compact code for generations,
which now pass the return values via compiled generator attribute for
Python 3.3 or higher.</p></li>
<li><p>Python3: More immediate re-formulation of classes with no bases.
Avoids noise during optimization.</p></li>
<li><p>Python2: For class dictionaries that are only assigned from values
without side effects, they are not converted to temporary variable
usages, allowing the normal SSA based optimization to work on them.
This leads to constant values for class dictionaries of simple
classes.</p></li>
<li><p>Explicit cleanup of nodes, variables, and local scopes that become
unused, has been added, allowing for breaking of cyclic dependencies
that prevented memory release.</p></li>
</ul>
</section>
<section id="id144">
<h3>Tests<a class="headerlink" href="#id144" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Adapted 3.5 tests to work with 3.7 coroutine changes.</p></li>
<li><p>Added CPython 3.7 test suite.</p></li>
</ul>
</section>
<section id="id145">
<h3>Cleanups<a class="headerlink" href="#id145" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Removed remaining code that was there for 3.2 support. All uses of
version comparisons with 3.2 have been adapted. For us, Python3 now
means 3.3, and we will not work with 3.2 at all. This removed a fair
bit of complexity for some things, but not all that much.</p></li>
<li><p>Have dedicated file for import released helpers, so they are easier
to find if necessary. Also do not have code for importing a name in
the header file anymore, not performance relevant.</p></li>
<li><p>Disable Python warnings when running scons. These are particularly
given when using a Python debug binary, which is happening when
Nuitka is run with <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> option and the inline copy of
Scons is used.</p></li>
<li><p>Have a factory function for all conditional statement nodes created.
This solved a TODO and handles the creation of statement sequences
for the branches as necessary.</p></li>
<li><p>Split class reformulation into two files, one for Python2 and one for
Python3 variant. They share no code really, and are too confusing in
a single file, for the huge code bodies.</p></li>
<li><p>Locals scopes now have a registry, where functions and classes
register their locals type, and then it is created from that.</p></li>
<li><p>Have a dedicated helper function for single argument calls in static
code that does not require an array of objects as an argument.</p></li>
</ul>
</section>
<section id="id146">
<h3>Organisational<a class="headerlink" href="#id146" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There are now <code class="docutils literal notranslate"><span class="pre">requirements-devel.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>
files aimed at usage with scons and by users, but they are not used
in installation.</p></li>
</ul>
</section>
<section id="id147">
<h3>Summary<a class="headerlink" href="#id147" title="Permalink to this headline"></a></h3>
<p>This releases has this important step to add conversion of locals
dictionary usages to temporary variables. It is not yet done everywhere
it is possible, and the resulting temporary variables are not yet
propagated in the all the cases, where it clearly is possible. Upcoming
releases ought to achieve that most Python2 classes will become to use a
direct dictionary creation.</p>
<p>Adding support for Python 3.7 is of course also a huge step. And also
this happened fairly quickly and soon after its release. The generic
classes it adds were the only real major new feature. It breaking the
internals for exception handling was what was holding back initially,
but past that, it was really easy.</p>
<p>Expect more optimization to come in the next releases, aiming at both
the ability to predict Python3 metaclasses <code class="docutils literal notranslate"><span class="pre">__prepare__</span></code> results, and
at more optimization applied to variables after they became temporary
variables.</p>
</section>
</section>
<section id="nuitka-release-0-5-31">
<h2>Nuitka Release 0.5.31<a class="headerlink" href="#nuitka-release-0-5-31" title="Permalink to this headline"></a></h2>
<p>This release is massive in terms of fixes, but also adds a lot of
refinement to code generation, and more importantly adds experimental
support for Python 3.7, while enhancing support for Pyt5 in standalone
mode by a lot.</p>
<section id="id148">
<h3>Bug Fixes<a class="headerlink" href="#id148" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Standalone: Added missing dependencies for <code class="docutils literal notranslate"><span class="pre">PyQt5.Qt</span></code> module.</p></li>
<li><p>Plugins: Added support for <code class="docutils literal notranslate"><span class="pre">PyQt5.Qt</span></code> module and its <code class="docutils literal notranslate"><span class="pre">qml</span></code>
plugins.</p></li>
<li><p>Plugins: The sensible plugin list for PyQt now includes that
platforms plugins on Windows too, as they are kind of mandatory.</p></li>
<li><p>Python3: Fix, for uninstalled Python versions wheels that linked
against the <code class="docutils literal notranslate"><span class="pre">Python3</span></code> library as opposed to <code class="docutils literal notranslate"><span class="pre">Python3X</span></code>, it was
not found.</p></li>
<li><p>Standalone: Prefer DLLs used by main program binary over ones used by
wheels.</p></li>
<li><p>Standalone: For DLLs added by Nuitka plugins, add the package
directory to the search path for dependencies where they might live.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">vars</span></code> built-in didnt annotate its exception exit.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">complex</span></code> built-ins needs to be
treated as a slot too.</p></li>
<li><p>Fix, consider if <code class="docutils literal notranslate"><span class="pre">del</span></code> variable must be assigned, in which case no
exception exit should be created. This prevented <code class="docutils literal notranslate"><span class="pre">Tkinter</span></code>
compilation.</p></li>
<li><p>Python3.6: Added support for the following language construct:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;metaclass&quot;</span><span class="p">:</span> <span class="n">M</span><span class="p">}</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p>Python3.5: Added support for cyclic imports. Now a <code class="docutils literal notranslate"><span class="pre">from</span></code> import
with a name can really cause an import to happen, not just a module
attribute lookup.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> was never raising exceptions.</p></li>
<li><p>Fix, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> constant values were considered to be
non-iterable.</p></li>
<li><p>Python3.6: Fix, now it is possible to <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">__annotations__</span></code> in a
class and behave compatible. Previously in this case we were falling
back to the module variable for annotations used after that which is
wrong.</p></li>
<li><p>Fix, some built-in type conversions are allowed to return derived
types, but Nuitka assumed the exact type, this affected <code class="docutils literal notranslate"><span class="pre">bytes</span></code>,
<code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">unicode</span></code>.</p></li>
<li><p>Standalone: Fix, the <code class="docutils literal notranslate"><span class="pre">_socket</span></code> module was insisted on to be found,
but can be compiled in.</p></li>
</ul>
</section>
<section id="id149">
<h3>New Features<a class="headerlink" href="#id149" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python 3.7, more work will be needed
though for full support. Basic tests are working, but there are are
at least more coroutine changes to follow.</p></li>
<li><p>Added support for building extension modules against statically
linked Python. This aims at supporting manylinux containers, which
are supposed to be used for creating widely usable binary wheels for
Linux. Programs wont work with statically linked Python though.</p></li>
<li><p>Added options to allow ignoring the Windows cache for DLL
dependencies or force an update.</p></li>
<li><p>Allow passing options from distutils to Nuitka compilation via setup
options.</p></li>
<li><p>Added option to disable the DLL dependency cache on Windows as it may
become wrong after installing new software.</p></li>
<li><p>Added experimental ability to provide extra options for Nuitka to
setuptools.</p></li>
<li><p>Python3: Remove frame preservation and restoration of exceptions.
This is not needed, but leaked over from Python2 code.</p></li>
</ul>
</section>
<section id="id150">
<h3>Optimization<a class="headerlink" href="#id150" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Apply value tracing to local dict variables too, enhancing the
optimization for class bodies and function with <code class="docutils literal notranslate"><span class="pre">exec</span></code> statements
by a lot.</p></li>
<li><p>Better optimization for must not have value, wasnt considering
merge traces of uninitialized values, for which this is also the
case.</p></li>
<li><p>Use 10% less memory at compile time due to specialized base classes
for statements with a single child only allowing <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> usage
by not having multiple inheritance for those.</p></li>
<li><p>More immediately optimize branches with known truth values, so that
merges are avoided and do not prevent trace based optimization before
the pass after the next one. In some cases, optimization based on
traces could fail to be done if there was no next pass caused by
other things.</p></li>
<li><p>Much faster handling for functions with a lot of <code class="docutils literal notranslate"><span class="pre">eval</span></code> and
<code class="docutils literal notranslate"><span class="pre">exec</span></code> calls.</p></li>
<li><p>Static optimization of <code class="docutils literal notranslate"><span class="pre">type</span></code> with known type shapes, the value is
predicted at compile time.</p></li>
<li><p>Optimize containers for all compile time constants into constant
nodes. This also enables further compile time checks using them, e.g.
with <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> or <code class="docutils literal notranslate"><span class="pre">in</span></code> checks.</p></li>
<li><p>Standalone: Using threads when determining DLL dependencies. This
will speed up the un-cached case on Windows by a fair bit.</p></li>
<li><p>Also remove unused assignments for mutable constant values.</p></li>
<li><p>Python3: Also optimize calls to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> built-in, this was so far
not done.</p></li>
<li><p>Statically optimize iteration over constant values that are not
iterable into errors.</p></li>
<li><p>Removed Fortran, Java, LaTex, PDF, etc. stuff from the inline copies
of Scons for faster startup and leaner code. Also updated to 3.0.1
which is no important difference over 3.0.0 for Nuitka however.</p></li>
<li><p>Make sure to always release temporary objects before checking for
error exits. When done the other way around, more C code than
necessary will be created, releasing them in both normal case and
error case after the check.</p></li>
<li><p>Also remove unused assignments in case the value is a mutable
constant.</p></li>
</ul>
</section>
<section id="id151">
<h3>Cleanups<a class="headerlink" href="#id151" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Dont store version numbers of variable traces for code generation,
instead directly use the references to the value traces instead,
avoiding later lookups.</p></li>
<li><p>Added dedicated module for <code class="docutils literal notranslate"><span class="pre">complex</span></code> built-in nodes.</p></li>
<li><p>Moved C helpers for integer and complex types to dedicated files,
solving the TODOs around them.</p></li>
<li><p>Removed some Python 3.2 only codes.</p></li>
</ul>
</section>
<section id="id152">
<h3>Organisational<a class="headerlink" href="#id152" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>For better bug reports, the <code class="docutils literal notranslate"><span class="pre">--version</span></code> output now contains also
the Python version information and the binary path being used.</p></li>
<li><p>Started using specialized exceptions for some types of errors, which
will output the involved data for better debugging without having to
reproduce anything. This does e.g. output XML dumps of problematic
nodes.</p></li>
<li><p>When encountering a problem (compiler crash) in optimization, output
the source code line that is causing the issue.</p></li>
<li><p>Added support for Fedora 28 RPM builds.</p></li>
<li><p>Remove more instances of mentions of 3.2 as supported or usable.</p></li>
<li><p>Renovated the graphing code and made it more useful.</p></li>
</ul>
</section>
<section id="id153">
<h3>Summary<a class="headerlink" href="#id153" title="Permalink to this headline"></a></h3>
<p>This release marks important progress, as the locals dictionary tracing
is a huge step ahead in terms of correctness and proper optimization.
The actual resulting dictionary is not yet optimized, but that ought to
follow soon now.</p>
<p>The initial support of 3.7 is important. Right now it apparently works
pretty well as a 3.6 replacement already, but definitely a lot more work
will be needed to fully catch up.</p>
<p>For standalone, this accumulated a lot of improvements related to the
plugin side of Nuitka. Thanks to those involved in making this better.
On Windows things ought to be much faster now, due to parallel usage of
dependency walker.</p>
</section>
</section>
<section id="nuitka-release-0-5-30">
<h2>Nuitka Release 0.5.30<a class="headerlink" href="#nuitka-release-0-5-30" title="Permalink to this headline"></a></h2>
<p>This release has improvements in all areas. Many bug fixes are
accompanied with optimization changes towards value tracing.</p>
<section id="id154">
<h3>Bug Fixes<a class="headerlink" href="#id154" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fix, the new setuptools runners were not used by <code class="docutils literal notranslate"><span class="pre">pip</span></code> breaking the
use of Nuitka from PyPI.</p></li>
<li><p>Fix, imports of <code class="docutils literal notranslate"><span class="pre">six.moves</span></code> could crash the compiler for built-in
names. Fixed in 0.5.29.2 already.</p></li>
<li><p>Windows: Make the <code class="docutils literal notranslate"><span class="pre">nuitka-run</span></code> not a symlink as these work really
bad on that platform, instead make it a full copy just like we did
for <code class="docutils literal notranslate"><span class="pre">nuitka3-run</span></code> already. Fixed in 0.5.29.2 already.</p></li>
<li><p>Python3.5: In module mode, <code class="docutils literal notranslate"><span class="pre">types.coroutine</span></code> was monkey patched
into an endless recursion if including more than one module, e.g. for
a package. Fixed in 0.5.29.3 already.</p></li>
<li><p>Python3.5: Dictionary unpackings with both star arguments and non
star arguments could leak memory. Fixed in 0.5.29.3 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">d</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Fix, distutils usage was not working for Python2 anymore, due to
using <code class="docutils literal notranslate"><span class="pre">super</span></code> for what are old style classes on that version.</p></li>
<li><p>Fix, some method calls to C function members could leak references.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="n">for_call</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span>

    <span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">for_call</span><span class="p">()</span>  <span class="c1"># This leaked a reference to the descriptor.</span>
</pre></div>
</div>
</li>
<li><p>Python3.5: The bases classes should be treated as an unpacking too.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="o">*</span><span class="n">D</span><span class="p">):</span>  <span class="c1"># Allowed syntax that was not supported.</span>
    <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p>Windows: Added back batch files to run Nuitka from the command line.
Fixed in 0.5.29.5 already.</p></li>
</ul>
</section>
<section id="id155">
<h3>New Features<a class="headerlink" href="#id155" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--include-package</span></code> to force inclusion of a whole
package with the submodules in a compilation result.</p></li>
<li><p>Added options <code class="docutils literal notranslate"><span class="pre">--include-module</span></code> to force inclusion of a single
module in a compilation result.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> plug-in got adapted to Python 3.4 changes and
will now also work in accelerated mode on Windows.</p></li>
<li><p>It is now possible to specify the Qt plugin directories with e.g.
<code class="docutils literal notranslate"><span class="pre">--enable-plugin-=qt_plugins=imageformats</span></code> and have only those
included. This should avoid dependency creep for shared libraries.</p></li>
<li><p>Plugins can now make the decision about recursing to a module or not.</p></li>
<li><p>Plugins now can get their own options passed.</p></li>
</ul>
</section>
<section id="id156">
<h3>Optimization<a class="headerlink" href="#id156" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The re-raising of exceptions has gotten its own special node type.
This aims at more readability (XML output) and avoiding the overhead
of checking potential attributes during optimization.</p></li>
<li><p>Changed built-in <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, and <code class="docutils literal notranslate"><span class="pre">float</span></code> to using a slot
mechanism that also analyses the type shape and detects and warns
about errors at compile time.</p></li>
<li><p>Changed the variable tracing to value tracing. This meant to cleanup
all the places that were using it to find the variable.</p></li>
<li><p>Enable must have / must not value value optimization for all kinds of
variables including module and closure variables. This often avoids
error exits and leads to smaller and faster generated code.</p></li>
</ul>
</section>
<section id="id157">
<h3>Tests<a class="headerlink" href="#id157" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added burn test with local install of pip distribution to virtualenv
before making any PyPI upload. It seems pip got its specific error
sources too.</p></li>
<li><p>Avoid calling <code class="docutils literal notranslate"><span class="pre">2to3</span></code> and prefer <code class="docutils literal notranslate"><span class="pre">&lt;python&gt;</span> <span class="pre">-m</span> <span class="pre">lib2to3</span></code> instead, as
it seems at least Debian Testing stopped to provide the binary by
default. For Python 2.6 and 3.2 we continue to rely on it, as the
dont support that mode of operation.</p></li>
<li><p>The PyLint checks have been made more robust and even more Python3
portable.</p></li>
<li><p>Added PyLint to Travis builds, so PRs are automatically checked too.</p></li>
<li><p>Added test for distutils usage with Nuitka that should prevent
regressions for this new feature and to document how it can be used.</p></li>
<li><p>Make coverage taking work on Windows and provide the full information
needed, the rendering stage is not there working yet though.</p></li>
<li><p>Expanded the trick assignment test cases to cover more slots to find
bugs introduced with more aggressive optimization of closure
variables.</p></li>
<li><p>New test to cover multiprocessing usage.</p></li>
<li><p>Generating more code tests out of doctests for increased coverage of
Nuitka.</p></li>
</ul>
</section>
<section id="id158">
<h3>Cleanups<a class="headerlink" href="#id158" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Stop using <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> in tests where they still remained.</p></li>
<li><p>Split the forms of <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> into two different nodes,
they share nothing except the name. Create the constants for the zero
arg variant more immediately.</p></li>
<li><p>Split the output comparison part into a dedicated testing module so
it can be re-used, e.g. when doing distutils tests.</p></li>
<li><p>Removed dead code from variable closure taking.</p></li>
<li><p>Have a dedicated module for the metaclass of nodes in the tree, so it
is easier to find, and doesnt clutter the node base classes module
as much.</p></li>
<li><p>Have a dedicated node for reraise statements instead of checking for
all the arguments to be non-present.</p></li>
</ul>
</section>
<section id="id159">
<h3>Organisational<a class="headerlink" href="#id159" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a pull request template for Github when used.</p></li>
<li><p>Deprecating the <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> argument which should be
replaced by using <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">nuitka</span></code> with the correct Python version.
Outputs have been updated to recommend this one instead.</p></li>
<li><p>Make automatic import sorting and autoformat tools properly
executable on Windows without them changing new lines.</p></li>
<li><p>The documentation was updated to prefer the call method with <code class="docutils literal notranslate"><span class="pre">-m</span>
<span class="pre">nuitka</span></code> and manually providing the Python binary to use.</p></li>
</ul>
</section>
<section id="id160">
<h3>Summary<a class="headerlink" href="#id160" title="Permalink to this headline"></a></h3>
<p>This release continued the distutils integration adding first tests, but
more features and documentation will be needed.</p>
<p>Also, for the locals dictionary work, the variable tracing was made
generic, but not yet put to use. If we use this to also trace dictionary
keys, we can expect a lot of improvements for class code again.</p>
<p>The locals dictionary tracing will be the focus before resuming the work
on C types, where the ultimate performance boost lies. However,
currently, not the full compatibility has been achieved even with
currently using dictionaries for classes, and we would like to be able
to statically optimize those better anyway.</p>
</section>
</section>
<section id="nuitka-release-0-5-29">
<h2>Nuitka Release 0.5.29<a class="headerlink" href="#nuitka-release-0-5-29" title="Permalink to this headline"></a></h2>
<p>This release comes with a lot of improvements across the board. A lot of
focus has been givevn to the packaging side of Nuitka, but also there is
a lot of compatibility work.</p>
<section id="id161">
<h3>Bug Fixes<a class="headerlink" href="#id161" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: When using Scons for Python3 and Scons for Python2 on the
same build directory, a warning would be given about the need to
migrate. Make the Scons cache directory use the Python ABI version as
a key too, to avoid these issues. Fixed in 0.5.28.1 already.</p></li>
<li><p>Windows: Fixup for Python3 and Scons no more generating the MinGW64
import library for Python anymore properly. Was only working if
cached from a previous install of Nuitka. Fixed in 0.5.28.1 already.</p></li>
<li><p>Plugins: Made the data files plugin mandatory and added support for
the scrapy package needs.</p></li>
<li><p>Fix, added implicit dependencies for <code class="docutils literal notranslate"><span class="pre">pkg_resources.external</span></code>
package. Fixed in 0.5.28.1 already.</p></li>
<li><p>Fix, an import of <code class="docutils literal notranslate"><span class="pre">x.y</span></code> where this was not a package didnt cause
the package <code class="docutils literal notranslate"><span class="pre">x</span></code> to be included.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">six.moves</span></code> and <code class="docutils literal notranslate"><span class="pre">requests.packages</span></code>
meta imports, these cause hidden implicit imports, that are now
properly handled.</p></li>
<li><p>Standalone: Patch the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> value for technical bytecode
modules loaded during Python library initialization in a more
compatible way.</p></li>
<li><p>Standalone: Extension modules when loaded might actually raise legit
errors, e.g. <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> of another module, dont make those into
<code class="docutils literal notranslate"><span class="pre">SystemError</span></code> anymore.</p></li>
<li><p>Python3.2: The <code class="docutils literal notranslate"><span class="pre">__package__</span></code> of sub-packages was wrong, which could
cause issues when doing relative imports in that sub-package.</p></li>
<li><p>Python3: Contractions in a finally clause could crash the compiler.</p></li>
<li><p>Fix, unused closure variables could lead to a crash in they were
passed to a nested function.</p></li>
<li><p>Linux: Standalone dependency analysis could enter an endless
recursion in case of cyclic dependencies.</p></li>
<li><p>Python3.6: Async generation expressions need to return a <code class="docutils literal notranslate"><span class="pre">None</span></code>
value too.</p></li>
<li><p>Python3.4: Fix, <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> is a package attribute and not a
built-in value.</p></li>
</ul>
</section>
<section id="id162">
<h3>New Features<a class="headerlink" href="#id162" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>It is now possible to run Nuitka with <code class="docutils literal notranslate"><span class="pre">some_python_you_choose</span> <span class="pre">-m</span>
<span class="pre">nuitka</span> <span class="pre">...</span></code> and therefore know exactly which Python installation is
going to be used. It does of course need Nuitka installed for this to
work. This mechanism is going to replace the <code class="docutils literal notranslate"><span class="pre">--python-version</span></code>
mechanism in the future.</p></li>
<li><p>There are dedicated runners for Python3, simply use <code class="docutils literal notranslate"><span class="pre">nuitka3</span></code> or
<code class="docutils literal notranslate"><span class="pre">nuitka3-run</span></code> to execute Nuitka if your code is Python3 code.</p></li>
<li><p>Added warning for implicit exception raises due to mismatch in
unpacking length. These are statically detected, but so far were not
warned about.</p></li>
<li><p>Added cache for <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code> results. This speeds up standalone
mode again as some of these calls were really slow.</p></li>
<li><p>The import tracer is more robust against recursion and works with
Python3 now.</p></li>
<li><p>Added an option to assume yes for downloading questions. The
currently only enables the download of <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code> and is
intended for CI servers.</p></li>
<li><p>There is now a report file for scons, which records the values used
to run things, this could be useful for debugging.</p></li>
<li><p>Nuitka now registers with distutils and can be used with
<code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> directly, but this lacks documentation and tests.
Many improvements in the distutils build.</p></li>
</ul>
</section>
<section id="id163">
<h3>Optimization<a class="headerlink" href="#id163" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Forward propagate compile time constants even if they are only
potential usages. This is actually the case where this makes the most
sense, as it might remove its use entirely from the branches that do
not use it.</p></li>
<li><p>Avoid extra copy of <code class="docutils literal notranslate"><span class="pre">finally</span></code> code. The cloning operation takes
time and memory, and this shaved of 0.3% of Nuitka memory usage, as
these can also become dangling.</p></li>
<li><p>Class dictionaries are now proper dictionarties in optimization,
using some dedicated code for name lookups that are transformed to
dedicated locals dictionary or mapping (Python3) accesses. This
currently does not fully optimize, but will in coming releases, and
saves about 25% of memory compared to the old code.</p></li>
<li><p>Treating module attributes <code class="docutils literal notranslate"><span class="pre">__package__</span></code>, <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>,
<code class="docutils literal notranslate"><span class="pre">__file__</span></code>, and <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> with dedicated nodes, that allow or
forbid optimization dependent on usage.</p></li>
<li><p>Python3.6: Async generator expressions were not working fully, become
more compatible.</p></li>
<li><p>Fix, using <code class="docutils literal notranslate"><span class="pre">super</span></code> inside a contraction could crash the compiler.</p></li>
<li><p>Fix, also accept <code class="docutils literal notranslate"><span class="pre">__new__</span></code> as properly decorated in case its a
<code class="docutils literal notranslate"><span class="pre">classmethod</span></code> too.</p></li>
<li><p>Fix, removed obsolete <code class="docutils literal notranslate"><span class="pre">--nofreeze-stdlib</span></code> which only complicated
using the <code class="docutils literal notranslate"><span class="pre">--recurse-stdlib</span></code> which should be used instead.</p></li>
</ul>
</section>
<section id="id164">
<h3>Organisational<a class="headerlink" href="#id164" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> Python package is now installed into the public
namespace and used from there. There are distinct copies to be
installed for both Python2 and Python3 on platforms where it is
supported.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">twine</span></code> for upload to PyPI now as recommended on their site.</p></li>
<li><p>Running <code class="docutils literal notranslate"><span class="pre">pylint</span></code> on Windows became practical again.</p></li>
<li><p>Added RPM packages for Fedora 26 and 27, these used to fail due to
packaging issues.</p></li>
<li><p>Added RPM packages for openSUSE Leap 42.2, 42.3 and 15.0 which were
simply missing.</p></li>
<li><p>Added RPM packages for SLE 15.</p></li>
<li><p>Added support for PyLint 1.8 and its new warnings.</p></li>
<li><p>The RPM packages no longer contain <code class="docutils literal notranslate"><span class="pre">nuitka-run3</span></code>, it will be
replaced by the new <code class="docutils literal notranslate"><span class="pre">nuitka3-run</span></code> which is in all packages.</p></li>
<li><p>The runners used for installation are now easy install created, but
patched to avoid overhead at run time.</p></li>
<li><p>Added repository for Ubuntu Artful (17.10) for download, removed
support for Ubuntu Yakkety, Vivid and Zesty (no more supported by
them).</p></li>
<li><p>Removed support for Debian Wheezy and Ubuntu Precise (they are too
old for modern packaging used).</p></li>
<li><p>There is now a issue template for Github when used.</p></li>
</ul>
</section>
<section id="id165">
<h3>Tests<a class="headerlink" href="#id165" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Standalone tests were referencing an old path to
<code class="docutils literal notranslate"><span class="pre">depends.exe</span></code> that wasnt populated on new installs.</p></li>
<li><p>Refinements for CPython test suites to become more stable in results.
Some tests occasionally fail to clean up, or might do indeterministic
outputs, or are not relevant at all.</p></li>
<li><p>The tests dont use the runners, but more often do <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">nuitka</span></code> to
become executable without having to find the proper runner. This
improves usage during the RPM builds and generally.</p></li>
<li><p>Travis: Do not test development versions of CPython, even for stable
release, they break too often.</p></li>
</ul>
</section>
<section id="id166">
<h3>Summary<a class="headerlink" href="#id166" title="Permalink to this headline"></a></h3>
<p>This release consolidates a lot of what we already had, adding hopeful
stuff for distutils integration. This will need tests and documentation
though, but should make Nuitka really easy to use. A few features are
still missing to make it generally reliable in that mode, but they are
going to come.</p>
<p>Also the locals dictionary work is kind of incomplete without a proper
generic tracing of not only local variables, but also dictionary keys.
With that work in place, a lot of improvements will happen.</p>
</section>
</section>
<section id="nuitka-release-0-5-28">
<h2>Nuitka Release 0.5.28<a class="headerlink" href="#nuitka-release-0-5-28" title="Permalink to this headline"></a></h2>
<p>This release has a focus on compatibility work and contains bug fixes
and work to enhance the usability of Nuitka by integrating with
distutils. The major improvement is that contractions no longer use
pseudo functions to achieve their own local scope, but that there is now
a dedicated structure for that representing an in-lined function.</p>
<section id="id167">
<h3>Bug Fixes<a class="headerlink" href="#id167" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.6: Fix, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> was not yet implemented for async
generators.</p></li>
<li><p>Fix, functions with keyword arguments where the value was determined
to be a static raise could crash the compiler.</p></li>
<li><p>Detect using MinGW64 32 bits C compiler being used with 64 bits
Python with better error message.</p></li>
<li><p>Fix, when extracting side effects of a static raise, extract them
more recursively to catch expressions that themselves have no code
generation being used. This fixes at least static raises in keyword
arguments of a function call.</p></li>
<li><p>Compatibility: Added support for proper operation of
<code class="docutils literal notranslate"><span class="pre">pkgutil.get_data</span></code> by implementing <code class="docutils literal notranslate"><span class="pre">get_data</span></code> in our meta path
based loader.</p></li>
<li><p>Compatibility: Added <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> module attribute was previously
missing, present on Python3.4 and higher.</p></li>
<li><p>Compatibility: Made <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> module attribute set when the
module is loading already.</p></li>
<li><p>Standalone: Resolve the <code class="docutils literal notranslate"><span class="pre">&#64;rpath</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;loader_path</span></code> from
<code class="docutils literal notranslate"><span class="pre">otool</span></code> on macOS manually to actual paths, which adds support for
libraries compiled with that.</p></li>
<li><p>Fix, nested functions calling <code class="docutils literal notranslate"><span class="pre">super</span></code> could crash the compiler.</p></li>
<li><p>Fix, could not use <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> with arguments that had a
trailing slash.</p></li>
<li><p>Fix, using <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> on packages that are not in the
search crashed the compiler.</p></li>
<li><p>Compatibility: Python2 <code class="docutils literal notranslate"><span class="pre">set</span></code> and <code class="docutils literal notranslate"><span class="pre">dict</span></code> contractions were using
extra frames like Python3 does, but those are not needed.</p></li>
<li><p>Standalone: Fix, the way <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> was set on Windows had no
effect, which allowed the compiled binary to access the original
installation still.</p></li>
<li><p>Standalone: Added some newly discovered missing hidden dependencies
of extension modules.</p></li>
<li><p>Compatibility: The name mangling of private names (e.g. <code class="docutils literal notranslate"><span class="pre">__var</span></code>) in
classes was applied to variable names, and function declarations, but
not to classes yet.</p></li>
<li><p>Python3.6: Fix, added support for list contractions with <code class="docutils literal notranslate"><span class="pre">await</span></code>
expressions in async generators.</p></li>
<li><p>Python3.6: Fix, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> was not working in async generators
yet.</p></li>
<li><p>Fix, for module tracebacks, we output the module name <code class="docutils literal notranslate"><span class="pre">&lt;module</span>
<span class="pre">name</span></code>&gt; instead of merely <code class="docutils literal notranslate"><span class="pre">&lt;module&gt;</span></code>, but if the module was in a
package, that was not indicated. Now it is <code class="docutils literal notranslate"><span class="pre">&lt;module</span> <span class="pre">package.name&gt;</span></code>.</p></li>
<li><p>Windows: The cache directory could be unicode which then failed to
pass as an argument to scons. We now encode such names as UTF-8 and
decode in Scons afterwards, solving the problem in a generic way.</p></li>
<li><p>Standalone: Need to recursively resolve shared libraries with
<code class="docutils literal notranslate"><span class="pre">ldd</span></code>, otherwise not all could be included.</p></li>
<li><p>Standalone: Make sure <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> has no references to CPython
compile time paths, or else things may work on the compiling machine,
but not on another.</p></li>
<li><p>Standalone: Added various missing dependencies.</p></li>
<li><p>Standalone: Wasnt considering the DLLs directory for standard
library extensions for freezing, which would leave out these.</p></li>
<li><p>Compatibility: For <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> function
was called more than once.</p></li>
</ul>
</section>
<section id="id168">
<h3>Optimization<a class="headerlink" href="#id168" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Contractions are now all properly inlined and allow for optimization
as if they were fully local. This should give better code in some
cases.</p></li>
<li><p>Classes are now all building their locals dictionary inline to the
using scope, allowing for more compact code.</p></li>
<li><p>The dictionary API was not used in module template code, although it
helps to generate more compact code.</p></li>
</ul>
</section>
<section id="id169">
<h3>New Features<a class="headerlink" href="#id169" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Experimental support for building platform dependent wheel
distribution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py --command-packages<span class="o">=</span>nuitka.distutils clean -a bdist_nuitka
</pre></div>
</div>
<p>Use with caution, this is incomplete work.</p>
</li>
<li><p>Experimental support for running tests against compiled installation
with <code class="docutils literal notranslate"><span class="pre">nose</span></code> and <code class="docutils literal notranslate"><span class="pre">py.test</span></code>.</p></li>
<li><p>When specifying what to recurse to, now patterns can be used, e.g.
like this <code class="docutils literal notranslate"><span class="pre">--recurse-not-to=*.tests</span></code> which will skip all tests in
submodules from compilation.</p></li>
<li><p>By setting <code class="docutils literal notranslate"><span class="pre">NUITKA_PACKAGE_packagename=/some/path</span></code> the <code class="docutils literal notranslate"><span class="pre">__path__</span></code>
of packages can be extended automatically in order to allow and load
uncompiled sources from another location. This can be e.g. a
<code class="docutils literal notranslate"><span class="pre">tests</span></code> sub-package or other plugins.</p></li>
<li><p>By default when creating a module, now also a <code class="docutils literal notranslate"><span class="pre">module.pyi</span></code> file is
created that contains all imported modules. This should be deployed
alongside the extension module, so that standalone mode creation can
benefit from knowing the dependencies of compiled code.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--plugin-list</span></code> that was mentioned in the help output,
but still missing so far.</p></li>
<li><p>The import tracing of the <code class="docutils literal notranslate"><span class="pre">hints</span></code> module has achieved experimental
status and can be used to test compatibility with regards to import
behavior.</p></li>
</ul>
</section>
<section id="id170">
<h3>Cleanups<a class="headerlink" href="#id170" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Rename tree and codegen <code class="docutils literal notranslate"><span class="pre">Helper</span></code> modules to unique names, making
them easier to work with.</p></li>
<li><p>Share the code that decides to not warn for standard library paths
with more warnings.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">bool</span></code> enum definition of Python2 which is more elegant
than ours.</p></li>
<li><p>Move quality tools, autoformat, isort, etc. to the
<code class="docutils literal notranslate"><span class="pre">nuitka.tools.quality</span></code> namespace.</p></li>
<li><p>Move output comparison tool to the <code class="docutils literal notranslate"><span class="pre">nuitka.tools.testing</span></code>
namespace.</p></li>
<li><p>Made frame code generation capable of using nested frames, allowing
the real inline of classes and contraction bodies, instead of
direct calls to pseudo functions being used.</p></li>
<li><p>Proper base classes for functions that are entry points, and
functions that are merely a local expression using return statements.</p></li>
</ul>
</section>
<section id="id171">
<h3>Tests<a class="headerlink" href="#id171" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The search mode with pattern, was not working anymore.</p></li>
<li><p>Resume hash values now consider the Python version too.</p></li>
<li><p>Added test that covers using test runners like <code class="docutils literal notranslate"><span class="pre">nose</span></code> and
<code class="docutils literal notranslate"><span class="pre">py.test</span></code> with Nuitka compiled extension modules.</p></li>
</ul>
</section>
<section id="id172">
<h3>Organisational<a class="headerlink" href="#id172" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Scons 3.0 and running Scons with Python3.5 or
higher. The option to specify the Python to use for scons has been
renamed to reflect that it may also be a Python3 now. Only for
Python3.2 to Python3.4 we now need another Python installation.</p></li>
<li><p>Made recursion the default for <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> with packages.
Before you also had to tell it to recurse into that package or else
it would only include the top level package, but nothing below.</p></li>
<li><p>Updated the man pages, correct mentions of its C++ to C and dont use
now deprecated options.</p></li>
<li><p>Updated the help output which still said that standalone mode implies
recursion into standard library, which is no longer true and even not
recommended.</p></li>
<li><p>Added option to disable the output of <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> file when creating an
extension module.</p></li>
<li><p>Removed Ubuntu Wily package download, no longer supported by Ubuntu.</p></li>
</ul>
</section>
<section id="id173">
<h3>Summary<a class="headerlink" href="#id173" title="Permalink to this headline"></a></h3>
<p>This release was done to get the fixes and new features out for testing.
There is work started that should make generators use an explicit extra
stack via pointer, and restore instruction state via goto dispatchers at
function entry, but that is not complete.</p>
<p>This feature, dubbed goto generators will remove the need for fibers
(which is itself a lot of code), reduce the memory footprint at run time
for anything that uses a lot of generators, or coroutines.</p>
<p>Integrating with <code class="docutils literal notranslate"><span class="pre">distutils</span></code> is also a new thing, and once completed
will make use of Nuitka for existing projects automatic and trivial to
do. There is a lot missing for that goal, but we will get there.</p>
<p>Also, documenting how to run tests against compiled code, if that test
code lives inside of that package, will make a huge difference, as that
will make it easier for people to torture Nuitka with their own test
cases.</p>
<p>And then of course, nested frames now mean that every function could be
inlined, which was previously not possible due to collisions of frames.
This will pave the route for better optimization in those cases in
future releases.</p>
<p>The experimental features will require more work, but should make it
easier to use Nuitka for existing projects. Future releases will make
integrating Nuitka dead simple, or that is the hope.</p>
<p>And last but not least, now that Scons works with Python3, chances are
that Nuitka will more often work out the of the box. The older Python3
versions that still retain the issue are not very widespread.</p>
</section>
</section>
<section id="nuitka-release-0-5-27">
<h2>Nuitka Release 0.5.27<a class="headerlink" href="#nuitka-release-0-5-27" title="Permalink to this headline"></a></h2>
<p>This release comes a lot of bug fixes and improvements.</p>
<section id="id174">
<h3>Bug Fixes<a class="headerlink" href="#id174" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, need to add recursed modules immediately to the working set, or
else they might first be processed in second pass, where global names
that are locally assigned, are optimized to the built-in names
although that should not happen. Fixed in 0.5.26.1 already.</p></li>
<li><p>Fix, the accelerated call of methods could crash for some special
types. This had been a regress of 0.5.25, but only happens with
custom extension types. Fixed in 0.5.26.1 already.</p></li>
<li><p>Python3.5: For <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> functions parameter variables could fail
to properly work with in-place assignments to them. Fixed in 0.5.26.4
already.</p></li>
<li><p>Compatibility: Decorators that overload type checks didnt pass the
checks for compiled types. Now <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> and as a result
<code class="docutils literal notranslate"><span class="pre">inspect</span></code> module work fine for them.</p></li>
<li><p>Compatibility: Fix, imports from <code class="docutils literal notranslate"><span class="pre">__init__</span></code> were crashing the
compiler. You are not supposed to do them, because they duplicate the
package code, but they work.</p></li>
<li><p>Compatibility: Fix, the <code class="docutils literal notranslate"><span class="pre">super</span></code> built-in on module level was
crashing the compiler.</p></li>
<li><p>Standalone: For Linux, BSD and macOS extension modules and shared
libraries using their own <code class="docutils literal notranslate"><span class="pre">$ORIGIN</span></code> to find loaded DLLs resulted in
those not being included in the distribution.</p></li>
<li><p>Standalone: Added more missing implicit dependencies.</p></li>
<li><p>Standalone: Fix, implicit imports now also can be optional, as e.g.
<code class="docutils literal notranslate"><span class="pre">_tkinter</span></code> if not installed. Only include those if available.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--recompile-c-only</span></code> was only working with C compiler as a
backend, but not in the C++ compatibility fallback, where files get
renamed. This prevented that edit and test debug approach with at
least MSVC.</p></li>
<li><p>Plugins: The PyLint plug-in didnt consider the symbolic name
<code class="docutils literal notranslate"><span class="pre">import-error</span></code> but only the code <code class="docutils literal notranslate"><span class="pre">F0401</span></code>.</p></li>
<li><p>Implicit exception raises in conditional expressions would crash the
compiler.</p></li>
</ul>
</section>
<section id="id175">
<h3>New Features<a class="headerlink" href="#id175" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Visual Studio 2017.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--python2-for-scons</span></code> to specify the Python2 execute
to use for calling Scons. This should allow using Anaconda Python for
that task.</p></li>
</ul>
</section>
<section id="id176">
<h3>Optimization<a class="headerlink" href="#id176" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>References to known unassigned variables are now statically optimized
to exception raises and warned about if the according option is
enabled.</p></li>
<li><p>Unhashable keys in dictionaries are now statically optimized to
exception raises and warned about if the according option is enabled.</p></li>
<li><p>Enable forward propagation for classes too, resulting in some classes
to create only static dictionaries. Currently this never happens for
Python3, but it will, once we can statically optimize <code class="docutils literal notranslate"><span class="pre">__prepare__</span></code>
too.</p></li>
<li><p>Enable inlining of class dictionary creations if they are mere return
statements of the created dictionary. Currently this never happens
for Python3, see above for why.</p></li>
<li><p>Python2: Selecting the metaclass is now visible in the tree and can
be statically optimized.</p></li>
<li><p>For executables, we now also use a freelist for traceback objects,
which also makes exception cases slightly faster.</p></li>
<li><p>Generator expressions no longer require the use of a function call
with a <code class="docutils literal notranslate"><span class="pre">.0</span></code> argument value to carry the iterator value, instead
their creation is directly inlined.</p></li>
<li><p>Remove pass through frames for Python2 list contractions, they are
no longer needed. Minimal gain for generated code, but more
lightweight at compile time.</p></li>
<li><p>When compiling Windows x64 with MinGW64 a link library needs to be
created for linking against the Python DLL. This one is now cached
and re-used if already done.</p></li>
<li><p>Use common code for <code class="docutils literal notranslate"><span class="pre">NameError</span></code> and <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> exception
code raises. In some cases it was creating the full string at compile
time, in others at run time. Since the later is more efficient in
terms of code size, we now use that everywhere, saving a bit of
binary size.</p></li>
<li><p>Make sure to release unused functions from a module. This saves
memory and can be decided after a full pass.</p></li>
<li><p>Avoid using <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> in a couple of places, where they are not
needed, but can be replaced with a later sorting, e.g. temporary
variables by name, to achieve deterministic output. This saves memory
at compile time.</p></li>
<li><p>Add specialized return nodes for the most frequent constant values,
which are <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, and <code class="docutils literal notranslate"><span class="pre">False</span></code>. Also a general one, for
constant value return, which avoids the constant references. This
saves quite a bit of memory and makes traversal of the tree a lot
faster, due to not having any child nodes for the new forms of return
statements.</p></li>
<li><p>Previously the empty dictionary constant reference was specialized to
save memory. Now we also specialize empty set, list, and tuple
constants to the same end. Also the hack to make <code class="docutils literal notranslate"><span class="pre">is</span></code> not say that
<code class="docutils literal notranslate"><span class="pre">{}</span> <span class="pre">is</span> <span class="pre">{}</span></code> was made more general, mutable constant references and
now known to never alias.</p></li>
<li><p>The source references can be marked internal, which means that they
should never be visible to the user, but that was tracked as a flag
to each of the many source references attached to each node in the
tree. Making a special class for internal references avoids storing
this in the object, but instead its now a class property.</p></li>
<li><p>The nodes for named variable reference, assignment, and deletion got
split into separate nodes, one to be used before the actual variable
can be determined during tree building, and one for use later on.
This makes their API clearer and saves a tiny bit of memory at
compile time.</p></li>
<li><p>Also eliminated target variable references, which were pseudo
children of assignments and deletion nodes for variable names, that
didnt really do much, but consume processing time and memory.</p></li>
<li><p>Added optimization for calls to <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> and <code class="docutils literal notranslate"><span class="pre">classmethod</span></code>
built-in methods along with type shapes.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">open</span></code> built-in on Python3, also adding the
type shape <code class="docutils literal notranslate"><span class="pre">file</span></code> for the result.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> built-in and constant values.
These mutable constants can now be compile time computed as well.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">frozenset</span></code> built-in and constant values.
These mutable constants can now be compile time computed as well.</p></li>
<li><p>Added optimization for <code class="docutils literal notranslate"><span class="pre">divmod</span></code> built-in.</p></li>
<li><p>Treat all built-in constant types, e.g. <code class="docutils literal notranslate"><span class="pre">type</span></code> itself as a
constant. So far we did this only for constant values types, but of
course this applies to all types, giving slightly more compact code
for their uses.</p></li>
<li><p>Detect static raises if iterating over non-iterables and warn about
them if the option is enabled.</p></li>
<li><p>Split of <code class="docutils literal notranslate"><span class="pre">locals</span></code> node into different types, one which needs the
updated value, and one which just makes a copy. Properly track if a
functions needs an updated locals dict, and if it doesnt, dont use
that. This gives more efficient code for Python2 classes, and
<code class="docutils literal notranslate"><span class="pre">exec</span></code> using functions in Python2.</p></li>
<li><p>Build all constant values without use of the <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module which
has a lot more overhead than <code class="docutils literal notranslate"><span class="pre">marshal</span></code>, instead use that for too
large <code class="docutils literal notranslate"><span class="pre">long</span></code> values, non-UTF8 <code class="docutils literal notranslate"><span class="pre">unicode</span></code> values, <code class="docutils literal notranslate"><span class="pre">nan</span></code> float,
etc.</p></li>
<li><p>Detect the linker arch for all Linux platforms using <code class="docutils literal notranslate"><span class="pre">objdump</span></code>
instead of only a hand few hard coded ones.</p></li>
</ul>
</section>
<section id="id177">
<h3>Cleanups<a class="headerlink" href="#id177" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got fully eliminated.</p></li>
<li><p>Use functions not vulenerable for buffer overflow. This is generally
good and avoids warnings given on OpenBSD during linking.</p></li>
<li><p>Variable closure for classes is different from all functions, dont
handle the difference in the base class, but for class nodes only.</p></li>
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">mayBeNone</span></code> doesnt return <code class="docutils literal notranslate"><span class="pre">None</span></code> which means normally
unclear, but <code class="docutils literal notranslate"><span class="pre">False</span></code> instead, since its always clear for those
cases.</p></li>
<li><p>Comparison nodes were using the general comparison node as a base
class, but now a proper base class was added instead, allowing for
cleaner code.</p></li>
<li><p>Valgrind test runners got changed to using proper tool namespace for
their code and share it.</p></li>
<li><p>Made construct case generation code common testing code for re-use in
the speedcenter web site. The code also has minor beauty bugs which
will then become fixable.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> package to determine place to store the downloaded
copy of <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code>.</p></li>
<li><p>The code still mentioned C++ in a lot of places, in comments or
identifiers, which might be confusing readers of the code.</p></li>
<li><p>Code objects now carry all information necessary for their creation,
and no longer need to access their parent to determine flag values.
That parent is subject to change in the future.</p></li>
<li><p>Our import sorting wrapper automatically detects imports that could
be local and makes them so, removing a few existing ones and
preventing further ones on the future.</p></li>
<li><p>Cleanups and annotations to become Python3 PyLint clean as well. This
found e.g. that source code references only had <code class="docutils literal notranslate"><span class="pre">__cmp__</span></code> and need
rich comparison to be fully portable.</p></li>
</ul>
</section>
<section id="id178">
<h3>Tests<a class="headerlink" href="#id178" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The test runner for construct tests got cleaned up and the constructs
now avoid using <code class="docutils literal notranslate"><span class="pre">xrange</span></code> so as to not need conversion for Python3
execution as much.</p></li>
<li><p>The main test runner got cleaned up and uses common code making it
more versatile and robust.</p></li>
<li><p>Do not run test in debugger if CPython also segfaulted executing the
test, then its not a Nuitka issue, so we can ignore that.</p></li>
<li><p>Improve the way the Python to test with is found in the main test
runner, prefer the running interpreter, then <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and registry on
Windows, this will find the interesting version more often.</p></li>
<li><p>Added support for Landscape.io to ignore the inline copies of code,
they are not under our control.</p></li>
<li><p>The test runner for Valgrind got merged with the usage for constructs
and uses common code now.</p></li>
<li><p>Construct generation is now common code, intended for sharing it with
the Speedcenter web site generation.</p></li>
<li><p>Rebased Python 3.6 test suite to 3.6.1 as that is the Python
generally used now.</p></li>
</ul>
</section>
<section id="id179">
<h3>Organisational<a class="headerlink" href="#id179" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added inline copy of <code class="docutils literal notranslate"><span class="pre">appdirs</span></code> package from PyPI.</p></li>
<li><p>Added credits for RedBaron and isort.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--experimental</span></code> flag is now creating a list of indications and
more than one can be used that way.</p></li>
<li><p>The PyLint runner can also work with Python3 pylint.</p></li>
<li><p>The Nuitka Speedcenter got more fine tuning and produces more tags to
more easily identify trends in results. This needs to become more
visible though.</p></li>
<li><p>The MSI files are also built on AppVeyor, where their building will
not depend on me booting Windows. Getting these artifacts as
downloads will be the next step.</p></li>
</ul>
</section>
<section id="id180">
<h3>Summary<a class="headerlink" href="#id180" title="Permalink to this headline"></a></h3>
<p>This release improves many areas. The variable closure taking is now
fully transparent due to different node types, the memory usage dropped
again, a few obvious missing static optimizations were added, and many
built-ins were completed.</p>
<p>This release again improves the scalability of Nuitka, which again uses
less memory than before, although not an as big jump as before.</p>
<p>This does not extend or use special C code generation for <code class="docutils literal notranslate"><span class="pre">bool</span></code> or
any type yet, which still needs design decisions to proceed and will
come in a later release.</p>
</section>
</section>
<section id="nuitka-release-0-5-26">
<h2>Nuitka Release 0.5.26<a class="headerlink" href="#nuitka-release-0-5-26" title="Permalink to this headline"></a></h2>
<p>This release comes after a long time and contains large amounts of
changes in all areas. The driving goal was to prepare generating C
specific code, which is still not the case, but this is very likely
going to change soon. However this release improves all aspects.</p>
<section id="id181">
<h3>Bug Fixes<a class="headerlink" href="#id181" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compatibility: Fix, for star imports didnt check the values from the
<code class="docutils literal notranslate"><span class="pre">__all__</span></code> iterable, if they were string values which could cause
problems at run time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Module level</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>

<span class="c1"># ...</span>
<span class="c1"># other module:</span>
<span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</li>
<li><p>Fix, for star imports, also didnt check for values from <code class="docutils literal notranslate"><span class="pre">__all__</span></code>
if they actually exist in the original values.</p></li>
<li><p>Corner cases of imports should work a lot more precise, as the level
of compatibility for calls to <code class="docutils literal notranslate"><span class="pre">__import__</span></code> went from absurd to
insane.</p></li>
<li><p>Windows: Fixed detection of uninstalled Python versions (not for all
users and DLL is not in system directory). This of course only
affected the accelerated mode, not standalone mode.</p></li>
<li><p>Windows: Scan directories for <code class="docutils literal notranslate"><span class="pre">.pyd</span></code> files for used DLLs as well.
This should make the PyQt5 wheel work.</p></li>
<li><p>Python3.5: Fix, coroutines could have different code objects for the
object and the frame using by it.</p></li>
<li><p>Fix, slices with built-in names crashed the compiler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">something</span><span class="p">[</span><span class="nb">id</span><span class="p">:</span><span class="nb">len</span><span class="p">:</span><span class="nb">range</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Fix, the C11 via C++ compatibility uses symlinks tp C++ filenames
where possible instead of making a copy from the C source. However,
even on Linux that may not be allowed, e.g. on a DOS file system.
Added fallback to using full copy in that case.</p></li>
<li><p>Python3.5: Fix coroutines to close the yield from where an
exception is thrown into them.</p></li>
<li><p>Python3: Fix, list contractions should have their own frame too.</p></li>
<li><p>Linux: Copy the rpath of compiling Python binary to the created
binary. This will make compiled binaries using uninstalled Python
versions transparently find the Python shared library.</p></li>
<li><p>Standalone: Add the rpath of the compiling Python binary to the
search path when checking for DLL dependencies on Linux. This fixes
standalone support for Travis and Anaconda on Linux.</p></li>
<li><p>Scons: When calling scons, also try to locate a Python2 binary to
overcome a potential Python3 virtualenv in which Nuitka is running.</p></li>
<li><p>Standalone: Ignore more Windows only encodings on non-Windows.</p></li>
</ul>
</section>
<section id="id182">
<h3>New Features<a class="headerlink" href="#id182" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Support for Python 3.6 with only few corner cases not supported yet.</p></li>
<li><p>Added options <code class="docutils literal notranslate"><span class="pre">--python-arch</span></code> to pick 32 or 64 bits Python target
of the <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> argument.</p></li>
<li><p>Added support for more kinds of virtualenv configurations.</p></li>
<li><p>Uninstalled Python versions such as Anaconda will work fine in
accelerated mode, except on Windows.</p></li>
</ul>
</section>
<section id="id183">
<h3>Optimization<a class="headerlink" href="#id183" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The node tree children are no longer stored in a separate dictionary,
but in the instance dictionary as attributes, making the tree more
lightweight and in principle faster to access. This also saved about
6% of the memory usage.</p></li>
<li><p>The memory usage of Nuitka for the Python part has fallen by roughly
40% due to the use of new style classes, and slots where that is
possible (some classes use multiple inheritance, where they dont
work), and generally by reducing useless members e.g. in source code
references. This of course also will make things compiled faster (the
C compilation of course is not affected by this.)</p></li>
<li><p>The code generation for frames was creating the dictionary for the
raised exception by making a dictionary and then adding all
variables, each tested to be set. This was a lot of code for each
frame specific, and has been replaced by a generic attach mechanism
which merely stores the values, and only takes a reference. When
asked for frame locals, it only then builds the dictionary. So this
is now only done, when that is absolutely necessary, which it
normally never is. This of course makes the C code much less verbose,
and actual handling of exceptions much more efficient.</p></li>
<li><p>For imports, we now detect for built-in modules, that their import
cannot fail, and if name lookups can fail. This leads to less code
generated for error handling of these. The following code now e.g.
fully detects that no <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> or <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> will
occur.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">__builtin__</span> <span class="kn">import</span> <span class="nb">len</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="nb">len</span>
</pre></div>
</div>
</li>
<li><p>Added more type shapes for built-in type calls. These will improve
type tracing.</p></li>
<li><p>Compiled frames now have a free list mechanism that should speed up
frames that recurse and frames that exit with exceptions. In case of
an exception, the frame ownership is immediately transferred to the
exception making it easier to deal with.</p></li>
<li><p>The free list implementations have been merged into a new common one
that can be used via macro expansion. It is now type agnostic and be
slightly more efficient too.</p></li>
<li><p>Also optimize true division and floor division, not only the
default division of Python2.</p></li>
<li><p>Removed the need for statement context during code generation making
it less memory intensive and faster.</p></li>
</ul>
</section>
<section id="id184">
<h3>Cleanups<a class="headerlink" href="#id184" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Now always uses the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> built-in node for all kinds of
imports and directly optimizes and recursion into other modules based
on that kind of node, instead of a static variant. This removes
duplication and some incompatibility regarding defaults usage when
doing the actual imports at run time.</p></li>
<li><p>Split the expression node bases and mixin classes to a dedicated
module, moving methods that only belong to expressions outside of the
node base, making for a cleaner class hierarchy.</p></li>
<li><p>Cleaned up the class structure of nodes, added base classes for
typical compositions, e.g. expression with and without children,
computation based on built-in, etc. while also checking proper
ordering of base classes in the metaclass.</p></li>
<li><p>Moved directory and file operations to dedicated module, making also
sure it is more generally used. This makes it easier to make more
error resilient deletions of directories on e.g. Windows, where locks
tend to live for short times beyond program ends, requiring second
attempts.</p></li>
<li><p>Code generation for existing supported types, <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">**</span></code>, and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Nuitka_CellObject</span> <span class="pre">*</span></code> is now done via a
C type class hierarchy instead of <code class="docutils literal notranslate"><span class="pre">elif</span></code> sequences.</p></li>
<li><p>Closure taking is now always done immediately correctly and
references are take for closure variables still needed, making sure
the tree is correct and needs no finalization.</p></li>
<li><p>When doing variable traces, initialize more traces immediately so it
can be more reliable.</p></li>
<li><p>Code to setup a function for local variables and clean it up has been
made common code instead of many similar copies.</p></li>
<li><p>The code was treating the <code class="docutils literal notranslate"><span class="pre">f_executing</span></code> frame member as if it were
a counter with increases and decreases. Turn it into a mere boolean
value and hide its usage behind helper functions.</p></li>
<li><p>The maybe local variables are no more. They were replaced by a new
locals dict access node with a fallback to a module or closure
variable should the dictionary not contain the name. This avoids many
ugly checks to not do certain things for that kind of variable.</p></li>
<li><p>We now detect exec and unqualified exec as well as star import
ahead of time as flags of the function to be created. We no longer
need to mark functions as we go.</p></li>
<li><p>Handle true, floor and normal division properly by applying
future flags to decide which one to use.</p></li>
<li><p>We now use symbolic identifiers in all PyLint annotations.</p></li>
<li><p>The release scripts started to move into <code class="docutils literal notranslate"><span class="pre">nuitka.tools.release</span></code> so
they get PyLint checks, autoformat and proper code re-use.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT_X</span></code> was removed, it got replaced with
proper <code class="docutils literal notranslate"><span class="pre">Py_XINCREF</span></code> usages.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got reduced further, e.g. no
generated code uses it anymore, and only a few compiled types do. The
function was once required before C-ish lifted the need to do
everything in one single function call.</p></li>
</ul>
</section>
<section id="id185">
<h3>Tests<a class="headerlink" href="#id185" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>More robust deletion of directories, temporary stages used by CPython
test suites, and standalone directories during test execution.</p></li>
<li><p>Moved tests common code into <code class="docutils literal notranslate"><span class="pre">nuitka.tools.testing</span></code> namespace and
use it from there. The code now is allowed to use <code class="docutils literal notranslate"><span class="pre">nuitka.utils</span></code>
and therefore often better implementations.</p></li>
<li><p>Made standalone binaries robust against GTK theme access, checking
the Python binary (some site.py files do that),</p></li>
</ul>
</section>
<section id="id186">
<h3>Organisational<a class="headerlink" href="#id186" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added repository for Ubuntu Zesty (17.04) for download.</p></li>
<li><p>Added support for testing with Travis to complement the internal
Buildbot based infrastructure and have pull requests on Github
automatically tested before merge.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">factory</span></code> branch is now also on Github.</p></li>
<li><p>Removed MSI for Python3.4 32 bits. It seems impossible to co-install
this one with the 64 bits variant. All other versions are provided
for both bit sizes still.</p></li>
</ul>
</section>
<section id="id187">
<h3>Summary<a class="headerlink" href="#id187" title="Permalink to this headline"></a></h3>
<p>This release marks huge progress. The node tree is now absolutely clean,
the variable closure taking is fully represented, and code generation is
prepared to add another type, e.g. for <code class="docutils literal notranslate"><span class="pre">bool</span></code> for which work has
already started.</p>
<p>On a practical level, the scalability of the release will have increased
very much, as this uses so much less memory, generates simpler C code,
while at the same time getting faster for the exception cases.</p>
<p>Coming releases will expand on the work of this release.</p>
<p>Frame objects should be allowed to be nested inside a function for
better re-formulations of classes and contractions of all kinds, as well
as real inline of functions, even if they could raise.</p>
<p>The memory savings could be even larger, if we stopped doing multiple
inheritance for more node types. The <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> were and the child
API change could potentially make things not only more compact, but
faster to use too.</p>
<p>And also once special C code generation for <code class="docutils literal notranslate"><span class="pre">bool</span></code> is done, it will
set the stage for more types to follow (<code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, etc). Only
this will finally start to give the C type speed we are looking for.</p>
<p>Until then, this release marks a huge cleanup and progress to what we
already had, as well as preparing the big jump in speed.</p>
</section>
</section>
<section id="nuitka-release-0-5-25">
<h2>Nuitka Release 0.5.25<a class="headerlink" href="#nuitka-release-0-5-25" title="Permalink to this headline"></a></h2>
<p>This release contains a huge amount of bug fixes, lots of optimization
gains, and many new features. It also presents many organisational
improvements, and many cleanups.</p>
<section id="id188">
<h3>Bug Fixes<a class="headerlink" href="#id188" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Python3.5: Coroutine methods using <code class="docutils literal notranslate"><span class="pre">super</span></code> were crashing the
compiler. Fixed in 0.5.24.2 already.</p></li>
<li><p>Python3.3: Generator return values were not properly transmitted in
case of <code class="docutils literal notranslate"><span class="pre">tuple</span></code> or <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> values.</p></li>
<li><p>Python3.5: Better interoperability between compiled coroutines and
uncompiled generator coroutines.</p></li>
<li><p>Python3.5: Added support to compile in Python debug mode under
Windows too.</p></li>
<li><p>Generators with arguments were using two code objects, one with, and
one without the <code class="docutils literal notranslate"><span class="pre">CO_NOFREE</span></code> flag, one for the generator object
creating function, and one for the generator object.</p></li>
<li><p>Python3.5: The duplicate code objects for generators with arguments
lead to interoperability issues with between such compiled generator
coroutines and compiled coroutines. Fixed in 0.5.24.2 already.</p></li>
<li><p>Standalone: On some Linux variants, e.g. Debian Stretch and Gentoo,
the linker needs more flags to really compile to a binary with
<code class="docutils literal notranslate"><span class="pre">RPATH</span></code>.</p></li>
<li><p>Compatibility: For set literal values, insertion order is wrong on
some versions of Python, we now detect the bug and emulate it if
necessary, previous Nuitka was always correct, but incompatible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># the only element of the set should be 1</span>
</pre></div>
</div>
</li>
<li><p>Windows: Make the batch files detect where they live at run time,
instead of during <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, making it possible to use them for
all cases.</p></li>
<li><p>Standalone: Added package paths to DLL scan for <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code>, as
with wheels there now sometimes live important DLLs too.</p></li>
<li><p>Fix, the clang mode was regressed and didnt work anymore, breaking
the macOS support entirely.</p></li>
<li><p>Compatibility: For imports, we were passing for <code class="docutils literal notranslate"><span class="pre">locals</span></code> argument a
real dictionary with actual values. That is not what CPython does, so
stopped doing it.</p></li>
<li><p>Fix, for raised exceptions not passing the validity tests, they could
be used after free, causing crashes.</p></li>
<li><p>Fix, the environment <code class="docutils literal notranslate"><span class="pre">CC</span></code> wasnt working unless also specifying
<code class="docutils literal notranslate"><span class="pre">CXX</span></code>.</p></li>
<li><p>Windows: The value of <code class="docutils literal notranslate"><span class="pre">__file__</span></code> in module mode was wrong, and
didnt point to the compiled module.</p></li>
<li><p>Windows: Better support for <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> for installations that
have both variants, it is now possible to switch to the right
variant.</p></li>
</ul>
</section>
<section id="id189">
<h3>New Features<a class="headerlink" href="#id189" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added parsing for shebang to Nuitka. When compiling an executable,
now Nuitka will check of the <code class="docutils literal notranslate"><span class="pre">#!</span></code> portion indicates a different
Python version and ask the user to clarify with <code class="docutils literal notranslate"><span class="pre">--python-version</span></code>
in case of a mismatch.</p></li>
<li><p>Added support for Python flag <code class="docutils literal notranslate"><span class="pre">--python-flag=-O</span></code>, which allows to
disable assertions and remove doc strings.</p></li>
</ul>
</section>
<section id="id190">
<h3>Optimization<a class="headerlink" href="#id190" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Faster method calls, combining attribute lookup and method call into
one, where order of evaluation with arguments doesnt matter. This
gives really huge relative speedups for method calls with no
arguments.</p></li>
<li><p>Faster attribute lookup in general for <code class="docutils literal notranslate"><span class="pre">object</span></code> descendants, which
is all new style classes, and all built-in types.</p></li>
<li><p>Added dedicated <code class="docutils literal notranslate"><span class="pre">xrange</span></code> built-in implementation for Python2 and
<code class="docutils literal notranslate"><span class="pre">range</span></code> for Python3. This makes those faster while also solving
ordering problems when creating constants of these types.</p></li>
<li><p>Faster <code class="docutils literal notranslate"><span class="pre">sum</span></code> again, using quick iteration interface and specialized
quick iteration code for typical standard type containers, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>
and <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p></li>
<li><p>Compiled generators were making sure <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> was set after
their iteration, although most users were only going to clear it. Now
only the <code class="docutils literal notranslate"><span class="pre">send</span></code> method, which really needs that does it. This speed
up the closing of generators quite a bit.</p></li>
<li><p>Compiled generators were preparing a <code class="docutils literal notranslate"><span class="pre">throw</span></code> into non-started
compilers, to be checked for immediately after their start. This is
now handled in a generic way for all generators, saving code and
execution time in the normal case.</p></li>
<li><p>Compiled generators were applying checks only useful for manual
<code class="docutils literal notranslate"><span class="pre">send</span></code> calls even during iteration, slowing them down.</p></li>
<li><p>Compiled generators could duplicate code objects due to handling a
flag for closure variables differently.</p></li>
<li><p>For compiled frames, the <code class="docutils literal notranslate"><span class="pre">f_trace</span></code> is not writable, but was taking
and releasing references to what must be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which is not
useful.</p></li>
<li><p>Not passing <code class="docutils literal notranslate"><span class="pre">locals</span></code> to import calls make it less code and faster
too.</p></li>
</ul>
</section>
<section id="id191">
<h3>Organisational<a class="headerlink" href="#id191" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>This release also prepares Python 3.6 support, it includes full
language support on the level of CPython 3.6.0 with the sole
exception of the new generator coroutines.</p></li>
<li><p>The improved mode is now the default, and full compatibility is now
the option, used by test suites. For syntax errors, improved mode is
always used, and for test suites, now only the error message is
compared, but not call stack or caret positioning anymore.</p></li>
<li><p>Removed long deprecated option no-optimization. Code generation
too frequently depends on not seeing unoptimized code. This has been
hidden and broken long enough to finally remove it.</p></li>
<li><p>Added support for Python3.5 numbers to Speedcenter. There are now
also tags for speedcenter, indicating how well develop branch fares
in comparison to the stable branch.</p></li>
<li><p>With a new tool, source code and Developer Manual contents can be
kept in sync, so that descriptions can be quoted there. Eventually a
full Sphinx documentation might become available, but for now this
makes it workable.</p></li>
<li><p>Added repository for Ubuntu Yakkety (16.10) for download.</p></li>
<li><p>Added repository for Fedora 25 for download.</p></li>
</ul>
</section>
<section id="id192">
<h3>Cleanups<a class="headerlink" href="#id192" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved the tools to compare CPython output, to sort import statements
(isort) to autoformat the source code (Redbaron usage), and to check
with PyLint to a common new <code class="docutils literal notranslate"><span class="pre">nuitka.tools</span></code> package, runnable with
<code class="docutils literal notranslate"><span class="pre">__main__</span></code> modules and dedicated runners in <code class="docutils literal notranslate"><span class="pre">bin</span></code> directory.</p></li>
<li><p>The tools now share code to find source files, or have it for the
first time, and other things, e.g. finding needed binaries on Windows
installations.</p></li>
<li><p>No longer patch traceback objects dealloc function. Should not be
needed anymore, and most probably was only bug hiding.</p></li>
<li><p>Moved handling of ast nodes related to import handling to the proper
reformulation module.</p></li>
<li><p>Moved statement generation code to helpers module, making it
accessible without cyclic dependencies that require local imports.</p></li>
<li><p>Removed deprecated method for getting constant code objects in favor
of the new way of doing it. Both methods were still used, making it
harder to analyse.</p></li>
<li><p>Removed useless temporary variable initializations from complex call
helper internal functions. They worked around code generation issues
that have long been solved.</p></li>
<li><p>The ABI flags are no longer passed to Scons together with the
version.</p></li>
</ul>
</section>
<section id="id193">
<h3>Tests<a class="headerlink" href="#id193" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Added support to detect and to switch debug Python where
available to also be able to execute reference counting tests.</p></li>
<li><p>Added the CPython 3.3 test suite, after cleaning up the worst bits of
it, and added the brandnew 3.6 test suite with a minimal set of
changes.</p></li>
<li><p>Use the original 3.4 test suite instead of the one that comes from
Debian as it has patched quite a few issues that never made it
upstream, and might cause crashes.</p></li>
<li><p>More construct tests, making a difference between old style classes,
which have instances and new style classes, with their objects.</p></li>
<li><p>It is now possible to run a test program with Python3 and Valgrind.</p></li>
</ul>
</section>
<section id="id194">
<h3>Summary<a class="headerlink" href="#id194" title="Permalink to this headline"></a></h3>
<p>The quick iteration is a precursor to generally faster iteration over
unknown object iterables. Expanding this to general code generation, and
not just the <code class="docutils literal notranslate"><span class="pre">sum</span></code> built-in, might yield significant gains for normal
code in the future, once we do code generation based on type inference.</p>
<p>The faster method calls complete work that was already prepared in this
domain and also will be expanded to more types than compiled functions.
More work will be needed to round this up.</p>
<p>Adding support for 3.6.0 in the early stages of its release, made sure
we pretty much have support for it ready right after release. This is
always a huge amount of work, and its good to catch up.</p>
<p>This release is again a significant improvement in performance, and is
very important to clean up open ends. Now the focus of coming releases
will now be on both structural optimization, e.g. taking advantage of
the iterator tracing, and specialized code generation, e.g. for those
iterations really necessary to use quick iteration code.</p>
</section>
</section>
<section id="nuitka-release-0-5-24">
<h2>Nuitka Release 0.5.24<a class="headerlink" href="#nuitka-release-0-5-24" title="Permalink to this headline"></a></h2>
<p>This release is again focusing on optimization, this time very heavily
on the generator performance, which was found to be much slower than
CPython for some cases. Also there is the usual compatibility work and
improvements for Pure C support.</p>
<section id="id195">
<h3>Bug Fixes<a class="headerlink" href="#id195" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: The 3.5.2 coroutine new protocol implementation was using
the wrapper from CPython, but its not part of the ABI on Windows.
Have our own instead. Fixed in 0.5.23.1 already.</p></li>
<li><p>Windows: Fixed second compilation with MSVC failing. The files
renamed to be C++ files already existed, crashing the compilation.
Fixed in 0.5.23.1 already.</p></li>
<li><p>Mac OS: Fixed creating extension modules with <code class="docutils literal notranslate"><span class="pre">.so</span></code> suffix. This is
now properly determined by looking at the importer details, leading
to correct suffix on all platforms. Fixed in 0.5.23.1 already.</p></li>
<li><p>Debian: Dont depend on a C++ compiler primarily anymore, the C
compiler from GNU or clang will do too. Fixed in 0.5.23.1 already.</p></li>
<li><p>Pure C: Adapted scons compiler detecting to properly consider C11
compilers from the environment, and more gracefully report things.</p></li>
</ul>
</section>
<section id="id196">
<h3>Optimization<a class="headerlink" href="#id196" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python2: Generators were saving and restoring exceptions, updating
the variables <code class="docutils literal notranslate"><span class="pre">sys.exc_type</span></code> for every context switch, making it
really slow, as these are 3 dictionary updates, normally not needed.
Now its only doing it if it means a change.</p></li>
<li><p>Sped up creating generators, coroutines and coroutines by attaching
the closure variable storage directly to the object, using one
variable size allocation, instead of two, once of which was a
standard <code class="docutils literal notranslate"><span class="pre">malloc</span></code>. This makes creating them easier and avoids
maintaining the closure pointer entirely.</p></li>
<li><p>Using dedicated compiled cell implementation similar to
<code class="docutils literal notranslate"><span class="pre">PyCellObject</span></code> but fully under our control. This allowed for
smaller code generated, while still giving a slight performance
improvement.</p></li>
<li><p>Added free list implementation to cache generator, coroutines, and
function objects, avoiding the need to create and delete this kind of
objects in a loop.</p></li>
<li><p>Added support for the built-in <code class="docutils literal notranslate"><span class="pre">sum</span></code>, making slight optimizations
to be much faster when iterating over lists and tuples, as well as
fast <code class="docutils literal notranslate"><span class="pre">long</span></code> sum for Python2, and much faster <code class="docutils literal notranslate"><span class="pre">bool</span></code> sums too.
This is using a prototype version of a qiter concept.</p></li>
<li><p>Provide type shape for <code class="docutils literal notranslate"><span class="pre">xrange</span></code> calls that are not constant too,
allowing for better optimization related to those.</p></li>
</ul>
</section>
<section id="id197">
<h3>Tests<a class="headerlink" href="#id197" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added workarounds for locks being held by Virus Scanners on Windows
to our test runner.</p></li>
<li><p>Enhanced constructs that test generator expressions to more clearly
show the actual construct cost.</p></li>
<li><p>Added construct tests for the <code class="docutils literal notranslate"><span class="pre">sum</span></code> built-in on various types of
<code class="docutils literal notranslate"><span class="pre">int</span></code> containers, making sure we can do all of those really fast.</p></li>
</ul>
</section>
<section id="id198">
<h3>Summary<a class="headerlink" href="#id198" title="Permalink to this headline"></a></h3>
<p>This release improves very heavily on generators in Nuitka. The memory
allocator is used more cleverly, and free lists all around save a lot of
interactions with it. More work lies ahead in this field, as these are
not yet as fast as they should be. However, at least Nuitka should be
faster than CPython for these kind of usages now.</p>
<p>Also, proper pure C in the Scons is relatively important to cover more
of the rarer use cases, where the C compiler is too old.</p>
<p>The most important part is actually how <code class="docutils literal notranslate"><span class="pre">sum</span></code> optimization is staging
a new kind of approach for code generation. This could become the
standard code for iterators in loops eventually, making <code class="docutils literal notranslate"><span class="pre">for</span></code> loops
even faster. This will be for future releases to expand.</p>
</section>
</section>
<section id="nuitka-release-0-5-23">
<h2>Nuitka Release 0.5.23<a class="headerlink" href="#nuitka-release-0-5-23" title="Permalink to this headline"></a></h2>
<p>This release is focusing on optimization, the most significant part for
the users being enhanced scalability due to memory usage, but also break
through structural improvements for static analysis of iterators and the
debut of type shapes and value shapes, giving way to shape tracing.</p>
<section id="id199">
<h3>Bug Fixes<a class="headerlink" href="#id199" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fix support Python 3.5.2 coroutine changes. The checks got added for
improved mode for older 3.5.x, the new protocol is only supported
when run with that version or higher.</p></li>
<li><p>Fix, was falsely optimizing away unused iterations for non-iterable
compile time constants.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># needs to raise.</span>
</pre></div>
</div>
</li>
<li><p>Python3: Fix, <code class="docutils literal notranslate"><span class="pre">eval</span></code> must not attempt to <code class="docutils literal notranslate"><span class="pre">strip</span></code> memoryviews. The
was preventing it from working with that type.</p></li>
<li><p>Fix, calling <code class="docutils literal notranslate"><span class="pre">type</span></code> without any arguments was crashing the
compiler. Also the exception raised for anything but 1 or 3 arguments
was claiming that only 3 arguments were allowed, which is not the
compatible thing.</p></li>
<li><p>Python3.5: Fix, follow enhanced error checking for complex call
handling of star arguments.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x</span> <span class="pre">import</span> <span class="pre">x,</span> <span class="pre">y</span></code> re-formulation was doing
two <code class="docutils literal notranslate"><span class="pre">__import__</span></code> calls instead of re-using the module value.</p></li>
</ul>
</section>
<section id="id200">
<h3>Optimization<a class="headerlink" href="#id200" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Uses only about 66% of the memory compared to last release, which is
very important step for scalability independent of re-loading. This
was achieved by making sure to break loop traces and their reference
cycle when they become unused.</p></li>
<li><p>Properly detect the <code class="docutils literal notranslate"><span class="pre">len</span></code> of multiplications at compile time from
newly introduces value shapes, so that this is e.g. statically
optimized.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">10000000000</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Due to newly introduced type shapes, <code class="docutils literal notranslate"><span class="pre">len</span></code> and <code class="docutils literal notranslate"><span class="pre">iter</span></code> now
properly detect more often if values will raise or not, and warn
about detected raises.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">something</span><span class="p">))</span>  <span class="c1"># Will always raise</span>
</pre></div>
</div>
</li>
<li><p>Due to newly introduced iterator tracing, we can now properly
detect if the length of an unpacking matches its source or not. This
allows to remove the check of the generic re-formulations of
unpackings at compile time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>  <span class="c1"># Will never raise due to unpacking</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">c</span>  <span class="c1"># Will always raise, 3 items cannot unpack to 2</span>
</pre></div>
</div>
</li>
<li><p>Added support for optimization of the <code class="docutils literal notranslate"><span class="pre">xrange</span></code> built-in for
Python2.</p></li>
<li><p>Python2: Added support for <code class="docutils literal notranslate"><span class="pre">xrange</span></code> iterable constant values,
pre-building those constants ahead of time.</p></li>
<li><p>Python3: Added support and <code class="docutils literal notranslate"><span class="pre">range</span></code> iterable constant values,
pre-building those constants ahead of time. This brings optimization
support for Python3 ranges to what was available for Python2 already.</p></li>
<li><p>Avoid having a special node variange for <code class="docutils literal notranslate"><span class="pre">range</span></code> with no arguments,
but create the exception raising node directly.</p></li>
<li><p>Specialized constant value nodes are using less generic
implementations to query e.g. their length or iteration capabilities,
which should speed up many checks on them.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">format</span></code> built-in.</p></li>
<li><p>Python3: Added support for the <code class="docutils literal notranslate"><span class="pre">ascii</span></code> built-in.</p></li>
</ul>
</section>
<section id="id201">
<h3>Organisational<a class="headerlink" href="#id201" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The movement to pure C got the final big push. All C++ only idoms of
C++ were removed, and everything works with C11 compilers. A C++03
compiler can be used as a fallback, in case of MSVC or too old gcc
for instance.</p></li>
<li><p>Using pure C, MinGW64 6x is now working properly. The latest version
had problems with <code class="docutils literal notranslate"><span class="pre">hypot</span></code> related changes in the C++ standard
library. Using C11 solves that.</p></li>
<li><p>This release also prepares Python 3.6 support, it includes full
language support on the level of CPython 3.6.0b1.</p></li>
<li><p>The CPython 3.6 test suite was run with Python 3.5 to ensure bug
level compatibility, and had a few findings of incompatibilities.</p></li>
</ul>
</section>
<section id="id202">
<h3>Cleanups<a class="headerlink" href="#id202" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The last holdouts of classes in Nuitka were removed, and many idioms
of C++ were stopped using.</p></li>
<li><p>Moved range related helper functions to a dedicated include file.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">bytes</span></code> to detect Python3 <code class="docutils literal notranslate"><span class="pre">str</span></code> handling or
actual <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type existence.</p></li>
<li><p>Trace collections were using a mix-in that was merged with the base
class that every user of it was having.</p></li>
</ul>
</section>
<section id="id203">
<h3>Tests<a class="headerlink" href="#id203" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added more static optimization tests, a lot more has become feasible
to decide at run time, and is now done. These are to detect
regressions in that domain.</p></li>
<li><p>The CPython 3.6 test suite is now also run with CPython 3.5 which
found some incompatibilities.</p></li>
</ul>
</section>
<section id="id204">
<h3>Summary<a class="headerlink" href="#id204" title="Permalink to this headline"></a></h3>
<p>This release marks a huge step forward. We are having the structure for
type inference now. This will expand in coming releases to cover more
cases, and there are many low hanging fruits for optimization.
Specialized codes for variable versions of certain known shapes seems
feasible now.</p>
<p>Then there is also the move towards pure C. This will make the backend
compilation lighter, but due to using C11, we will not suffer any loss
of convenience compared to C-ish. The plan is to use continue to use
C++ for compilation for compilers not capable of supporting C11.</p>
<p>The amount of static analysis done in Nuitka is now going to quickly
expand, with more and more constructs predicted to raise errors or
simplified. This will be an ongoing activity, as many types of
expressions need to be enhanced, and only one missing will not let it
optimize as well.</p>
<p>Also, it seems about time to add dedicated code for specific types to be
as fast as C code. This opens up vast possibilities for acceleration and
will lead us to zero overhead C bindings eventually. But initially the
drive is towards enhanced <code class="docutils literal notranslate"><span class="pre">import</span></code> analysis, to become able to know
the precide module expected to be imported, and derive type information
from this.</p>
<p>The coming work will attack to start whole program optimization, as well
as enhanced local value shape analysis, as well specialized type code
generation, which will make Nuitka improve speed.</p>
</section>
</section>
<section id="nuitka-release-0-5-22">
<h2>Nuitka Release 0.5.22<a class="headerlink" href="#nuitka-release-0-5-22" title="Permalink to this headline"></a></h2>
<p>This release is mostly an intermediate release on the way to the large
goal of having per module compilation that is cacheable and requires far
less memory for large programs. This is currently in progress, but
required many changes that are in this release, more will be needed.</p>
<p>It also contains a bunch of bug fixes and enhancements that are worth to
be released, and the next changes are going to be more invasive.</p>
<section id="id205">
<h3>Bug Fixes<a class="headerlink" href="#id205" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Compatibility: Classes with decorated <code class="docutils literal notranslate"><span class="pre">__new__</span></code> functions could
miss out on the <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> decorator that is implicit. Its now
applied always, unless of course its already done manually. This
corrects an issue found with Pandas. Fixed in 0.5.22.1 already.</p></li>
<li><p>Standalone: For at least Python 3.4 or higher, it could happen that
the locale needed was not importable. Fixed in 0.5.22.1 already.</p></li>
<li><p>Compatibility: Do not falsely assume that <code class="docutils literal notranslate"><span class="pre">not</span></code> expressions cannot
raise on boolean expressions, since those arguments might raise
during creation. This could lead to wrong optimization. Fixed in
0.5.22.2 already.</p></li>
<li><p>Standalone: Do not include system specific C libraries in the
distribution created. This would lead to problems for some
configurations on Linux in cases the glibc is no longer compatible
with newer or older kernels. Fixed in 0.5.22.2 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> option didnt check with decision
mechanisms for module inclusion, making it impossible to avoid some
things.</p></li>
</ul>
</section>
<section id="id206">
<h3>Optimization<a class="headerlink" href="#id206" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Introduced specialized constant classes for empty dictionaries and
other special constants, e.g. True and False, so that they can
have more hard coded properties and save memory by sharing constant
values.</p></li>
<li><p>The technical sharing of a variable is only consider for variables
that had some sharing going in the first place, speeing things up
quite a bit for that still critical check.</p></li>
<li><p>Memory savings coming from enhanced trace storage are already visible
at about 1%. That is not as much as the reloading will mean, but
still helpful to use less overall.</p></li>
</ul>
</section>
<section id="id207">
<h3>Cleanups<a class="headerlink" href="#id207" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The global variable registry was removed. It was in the way of
unloading and reloading modules easily. Instead variables are now
attached to their owner and referenced by other users. When they are
released, these variables are released.</p></li>
<li><p>Global variable traces were removed. Instead each variable has a list
of the traces attached to it. For non-shared variables, this allows
to sooner tell attributes of those variables, allowing for sooner
optimization of them.</p></li>
<li><p>No longer trace all initial users of a variable, just merely if there
were such and if it constitutes sharing syntactically too. Not only
does this save memory, it avoids useless references of the variable
to functions that stop using it due to optimization.</p></li>
<li><p>Create constant nodes via a factory function to avoid non-special
instances where variants exist that would be faster to use.</p></li>
<li><p>Moved the C string functions to a proper <code class="docutils literal notranslate"><span class="pre">nuitka.utils.CStrings</span></code>
package as we use it for better code names of functions and modules.</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">functions</span></code> and explicit child node of modules, which makes
their use more generic, esp. for re-loading modules.</p></li>
<li><p>Have a dedicated function for building frame nodes, making it easier
to see where they are created.</p></li>
</ul>
</section>
<section id="id208">
<h3>Summary<a class="headerlink" href="#id208" title="Permalink to this headline"></a></h3>
<p>This release is the result of a couple of months work, and somewhat
means that proper re-loading of cached results is becoming in sight. The
reloading of modules still fails for some things, and more changes will
be needed, but with that out of the way, Nuitkas footprint is about to
drop and making it then absolutely scalable. Something considered very
important before starting to trace more information about values.</p>
<p>This next thing big ought to be one thing that structurally holds Nuitka
back from generating C level performance code with say integer
operations.</p>
</section>
</section>
<section id="nuitka-release-0-5-21">
<h2>Nuitka Release 0.5.21<a class="headerlink" href="#nuitka-release-0-5-21" title="Permalink to this headline"></a></h2>
<p>This release focused on scalability work. Making Nuitka more usable in
the common case, and covering more standalone use cases.</p>
<section id="id209">
<h3>Bug Fixes<a class="headerlink" href="#id209" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Support for newer MinGW64 was broken by a workaround for
older MinGW64 versions.</p></li>
<li><p>Compatibility: Added support for the (unofficial) C-Python API
<code class="docutils literal notranslate"><span class="pre">Py_GetArgcArgv</span></code> that was causing <code class="docutils literal notranslate"><span class="pre">prctl</span></code> module to fail loading
on ARM platforms.</p></li>
<li><p>Compatibility: The proper error message template for complex call
arguments is now detected as compile time. There are changes coming,
that are already in some pre-releases of CPython.</p></li>
<li><p>Standalone: Wasnt properly ignoring <code class="docutils literal notranslate"><span class="pre">Tools</span></code> and other directories
in the standard library.</p></li>
</ul>
</section>
<section id="id210">
<h3>New Features<a class="headerlink" href="#id210" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Detect the MinGW compiler arch and compare it to the Python
arch. In case of a mismatch, the compiler is not used. Otherwise
compilation or linking gives hard to understand errors. This also
rules out MinGW32 as a compiler that can be used, as its arch doesnt
match MinGW64 32 bits variant.</p></li>
<li><p>Compile modules in two passes with the option to specify which
modules will be considered for a second pass at all (compiled without
program optimization) or even become bytecode.</p></li>
<li><p>The developer mode installation of Nuitka in <code class="docutils literal notranslate"><span class="pre">develop</span></code> mode with
the command <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">nuitka_git_checkout_dir</span></code> is now
supported too.</p></li>
</ul>
</section>
<section id="id211">
<h3>Optimization<a class="headerlink" href="#id211" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Popular modules known to not be performance relevant are no longer C
compiled, e.g. <code class="docutils literal notranslate"><span class="pre">numpy.distutils</span></code> and many others frequently
imported (from some other module), but mostly not used and definitely
not performance relevant.</p></li>
</ul>
</section>
<section id="id212">
<h3>Cleanups<a class="headerlink" href="#id212" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The progress tracing and the memory tracing and now more clearly
separate and therefore more readable.</p></li>
<li><p>Moved RPM related files to new <code class="docutils literal notranslate"><span class="pre">rpm</span></code> directory.</p></li>
<li><p>Moved documentation related files to <code class="docutils literal notranslate"><span class="pre">doc</span></code> directory.</p></li>
<li><p>Converted import sorting helper script to Python and made it run
fast.</p></li>
</ul>
</section>
<section id="id213">
<h3>Organisational<a class="headerlink" href="#id213" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The Buildbot infrastructure for Nuitka was updated to Buildbot 0.8.12
and is now maintained up to date with Ansible.</p></li>
<li><p>Upgraded the Nuitka bug tracker to Roundup 1.5.1 to which I had
previously contributed security fixes already active.</p></li>
<li><p>Added SSL certificates from Lets Encrypt for the web server.</p></li>
</ul>
</section>
<section id="id214">
<h3>Summary<a class="headerlink" href="#id214" title="Permalink to this headline"></a></h3>
<p>This release advances the scalability of Nuitka somewhat. The two pass
approach does not yet carry all possible fruits. Caching of single pass
compiled modules should follow for it to become consistently fast.</p>
<p>More work will be needed to achieve fast and scalable compilation, and
that is going to remain the focus for some time.</p>
</section>
</section>
<section id="nuitka-release-0-5-20">
<h2>Nuitka Release 0.5.20<a class="headerlink" href="#nuitka-release-0-5-20" title="Permalink to this headline"></a></h2>
<p>This release is mostly about catching up with issues. Most address
standalone problems with special modules, but there are also some
general compatibility corrections, as well as important fixes for
Python3.5 and coroutines and to improve compatibility with special
Python variants like Anaconda under the Windows system.</p>
<section id="id215">
<h3>Bug Fixes<a class="headerlink" href="#id215" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Standalone Python3.5: The <code class="docutils literal notranslate"><span class="pre">_decimal</span></code> module at least is using a
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> that doesnt match the name at load time, causing
programs that use it to crash.</p></li>
<li><p>Compatibility: For Python3.3 the <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> attribute is now set
in all cases, and it needs to have a <code class="docutils literal notranslate"><span class="pre">__module__</span></code> attribute. This
makes inspection as done by e.g. <code class="docutils literal notranslate"><span class="pre">flask</span></code> working.</p></li>
<li><p>Standalone: Added missing hidden dependencies for <code class="docutils literal notranslate"><span class="pre">Tkinter</span></code> module,
adding support for this to work properly.</p></li>
<li><p>Windows: Detecting the Python DLL and EXE used at compile time and
preserving this information use during backend compilation. This
should make sure we use the proper ones, and avoids hacks for
specific Python variants, enhancing the support for Anaconda,
WinPython, and CPython installations.</p></li>
<li><p>Windows: The <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> flag now properly detects if the run
time is supporting things and error exits if its not available. For
a CPython3.5 installation, it will switch between debug and non-debug
Python binaries and DLLs.</p></li>
<li><p>Standalone: Added plug-in for the <code class="docutils literal notranslate"><span class="pre">Pwm</span></code> package to properly combine
it into a single file, suitable for distribution.</p></li>
<li><p>Standalone: Packages from standard library, e.g. <code class="docutils literal notranslate"><span class="pre">xml</span></code> now have
proper <code class="docutils literal notranslate"><span class="pre">__path__</span></code> as a list and not as a string value, which breaks
code of e.g. PyXML.</p></li>
<li><p>Standalone: Added missing dependency of <code class="docutils literal notranslate"><span class="pre">twisted.protocols.tls</span></code>.</p></li>
<li><p>Python3.5: When finalizing coroutines that were not finished, a
corruption of its reference count could happen under some
circumstances.</p></li>
<li><p>Standalone: Added missing DLL dependency of the <code class="docutils literal notranslate"><span class="pre">uuid</span></code> module at
run time, which uses ctypes to load it.</p></li>
</ul>
</section>
<section id="id216">
<h3>New Features<a class="headerlink" href="#id216" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Anaconda Python on this Linux. Both accelerated and
standalone mode work now.</p></li>
<li><p>Added support for standalone mode on FreeBSD.</p></li>
<li><p>The plug-in framework was expanded with new features to allow
addressing some specific issues.</p></li>
</ul>
</section>
<section id="id217">
<h3>Cleanups<a class="headerlink" href="#id217" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved memory related stuff to dedicated utils package
<code class="docutils literal notranslate"><span class="pre">nuitka.utils.MemoryUsage</span></code> as part of an effort to have more
topical modules.</p></li>
<li><p>Plugins how have a dedicated module through which the core accesses
the API, which was partially cleaned up.</p></li>
<li><p>No more early and late import detections for standalone mode. We
now scan everything at the start.</p></li>
</ul>
</section>
<section id="id218">
<h3>Summary<a class="headerlink" href="#id218" title="Permalink to this headline"></a></h3>
<p>This release focused on expanding plugins. These were then used to
enhance the success of standalone compatibility. Eventually this should
lead to a finished and documented plug-in API, which will open up the
Nuitka core to easier hacks and more user contribution for these topics.</p>
</section>
</section>
<section id="nuitka-release-0-5-19">
<h2>Nuitka Release 0.5.19<a class="headerlink" href="#nuitka-release-0-5-19" title="Permalink to this headline"></a></h2>
<p>This release brings optimization improvements for dictionary using code.
This is now lowering subscripts to dictionary accesses where possible
and adds new code generation for known dictionary values. Besides this
there is the usual range of bug fixes.</p>
<section id="id219">
<h3>Bug Fixes<a class="headerlink" href="#id219" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, attribute assignments or deletions where the assigned value or
the attribute source was statically raising crashed the compiler.</p></li>
<li><p>Fix, the order of evaluation during optimization was considered in
the wrong order for attribute assignments source and value.</p></li>
<li><p>Windows: Fix, when <code class="docutils literal notranslate"><span class="pre">g++</span></code> is the path, it was not used
automatically, but now it is.</p></li>
<li><p>Windows: Detect the 32 bits variant of MinGW64 too.</p></li>
<li><p>Python3.4: The finalize of compiled generators could corrupt
reference counts for shared generator objects. Fixed in 0.5.18.1
already.</p></li>
<li><p>Python3.5: The finalize of compiled coroutines could corrupt
reference counts for shared generator objects.</p></li>
</ul>
</section>
<section id="id220">
<h3>Optimization<a class="headerlink" href="#id220" title="Permalink to this headline"></a></h3>
<ul>
<li><p>When a variable is known to have dictionary shape (assigned from a
constant value, result of <code class="docutils literal notranslate"><span class="pre">dict</span></code> built-in, or a general dictionary
creation), or the branch merge thereof, we lower subscripts from
expecting mapping nodes to dictionary specific nodes. These generate
more efficient code, and some are then known to not raise an
exception.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">someFunction</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">b</span><span class="p">}</span>
    <span class="n">value</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
<p>The above function is not yet fully optimized (dictionary key/value
tracing is not yet finished), however it at least knows that no
exception can raise from assigning <code class="docutils literal notranslate"><span class="pre">value[&quot;c&quot;]</span></code> anymore and creates
more efficient code for the typical <code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">{}</span></code> functions.</p>
</li>
<li><p>The use of logical sharing during optimization has been replaced
with checks for actual sharing. So closure variables that were
written to in dead code no longer inhibit optimization of the then no
more shared local variable.</p></li>
<li><p>Global variable traces are now faster to decide definite writes
without need to check traces for this each time.</p></li>
</ul>
</section>
<section id="id221">
<h3>Cleanups<a class="headerlink" href="#id221" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>No more using logical sharing allowed to remove that function
entirely.</p></li>
<li><p>Using technical sharing less often for decisions during
optimization and instead rely more often on proper variable registry.</p></li>
<li><p>Connected variables with their global variable trace statically avoid
the need to check in variable registry for it.</p></li>
<li><p>Removed old and mostly unused assume unclear locals indications, we
use global variable traces for this now.</p></li>
</ul>
</section>
<section id="id222">
<h3>Summary<a class="headerlink" href="#id222" title="Permalink to this headline"></a></h3>
<p>This release aimed at dictionary tracing. As a first step, the value
assign is now traced to have a dictionary shape, and this this then used
to lower the operations which used to be normal subscript operations to
mapping, but now can be more specific.</p>
<p>Making use of the dictionary values knowledge, tracing keys and values
is not yet inside the scope, but expected to follow. We got the first
signs of type inference here, but to really take advantage, more
specific shape tracing will be needed.</p>
</section>
</section>
<section id="nuitka-release-0-5-18">
<h2>Nuitka Release 0.5.18<a class="headerlink" href="#nuitka-release-0-5-18" title="Permalink to this headline"></a></h2>
<p>This release mainly has a scalability focus. While there are few
compatibility improvements, the larger goal has been to make Nuitka
compilation and the final C compilation faster.</p>
<section id="id223">
<h3>Bug Fixes<a class="headerlink" href="#id223" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compatibility: The nested arguments functions can now be called using
their keyword arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">someFunction</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)):</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>


<span class="n">someFunction</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;.1&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)})</span>
</pre></div>
</div>
</li>
<li><p>Compatibility: Generators with Python3.4 or higher now also have a
<code class="docutils literal notranslate"><span class="pre">__del__</span></code> attribute, and therefore properly participate in
finalization. This should improve their interactions with garbage
collection reference cycles, although no issues had been observed so
far.</p></li>
<li><p>Windows: Was outputting command line arguments debug information at
program start. Fixed in 0.5.17.1 already.</p></li>
</ul>
</section>
<section id="id224">
<h3>Optimization<a class="headerlink" href="#id224" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Code generated for parameter parsing is now a <em>lot</em> less verbose.
Python level loops and conditionals to generate code for each
variable has been replaced with C level generic code. This will speed
up the backend compilation by a lot.</p></li>
<li><p>Function calls with constant arguments were speed up specifically, as
their call is now fully prepared, and yet using less code. Variable
arguments are also faster, and all defaulted arguments are also much
faster. Method calls are not affected by these improvements though.</p></li>
<li><p>Nested argument functions now have a quick call entry point as well,
making them faster to call too.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">slice</span></code> built-in, and internal creation of slices (e.g. in
re-formulations of Python3 slices as subscripts) cannot raise.</p></li>
<li><p>Standalone: Avoid inclusion of bytecode of <code class="docutils literal notranslate"><span class="pre">unittest.test</span></code>,
<code class="docutils literal notranslate"><span class="pre">sqlite3.test</span></code>, <code class="docutils literal notranslate"><span class="pre">distutils.test</span></code>, and <code class="docutils literal notranslate"><span class="pre">ensurepip</span></code>. These are
not needed, but simply bloat the amount of bytecode used on e.g.
macOS.</p></li>
<li><p>Speed up compilation with Nuitka itself by avoid to copying and
constructing variable lists as much as possible using an always
accurate variable registry.</p></li>
</ul>
</section>
<section id="id225">
<h3>Cleanups<a class="headerlink" href="#id225" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nested argument functions of Python2 are now re-formulated into a
wrapping function that directly calls the actual function body with
the unpacking of nested arguments done in nodes explicitly. This
allows for better optimization and checks of these steps and
potential in-lining of these functions too.</p></li>
<li><p>Unified slice object creation and built-in <code class="docutils literal notranslate"><span class="pre">slice</span></code> nodes, these
were two distinct nodes before.</p></li>
<li><p>The code generation for all statement kinds is now done via
dispatching from a dictionary instead of long <code class="docutils literal notranslate"><span class="pre">elif</span></code> chains.</p></li>
<li><p>Named nodes more often consistently, e.g. all loop related nodes
start with <code class="docutils literal notranslate"><span class="pre">Loop</span></code> now, making them easier to group.</p></li>
<li><p>Parameter specifications got simplified to work without variables
where it is possible.</p></li>
</ul>
</section>
<section id="id226">
<h3>Organisational<a class="headerlink" href="#id226" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nuitka is now available on the social code platforms gitlab as well.</p></li>
</ul>
</section>
<section id="id227">
<h3>Summary<a class="headerlink" href="#id227" title="Permalink to this headline"></a></h3>
<p>Long standing weaknesses have been addressed in this release, also quite
a few structural cleanups have been performed, e.g. strengthening the
role of the variable registry to always be accurate, is groundlaying to
further improvement of optimization.</p>
<p>However, this release cycle was mostly dedicated to performance of the
actual compilation, and more accurate information was needed to e.g. not
search for information that should be instant.</p>
<p>Upcoming releases will focus on usability issues and further
optimization, it was nice however to see speedups of created code even
from these scalability improvements.</p>
</section>
</section>
<section id="nuitka-release-0-5-17">
<h2>Nuitka Release 0.5.17<a class="headerlink" href="#nuitka-release-0-5-17" title="Permalink to this headline"></a></h2>
<p>This release is a major feature release, as it adds full support for
Python3.5 and its coroutines. In addition, in order to properly support
coroutines, the generator implementation got enhanced. On top of that,
there is the usual range of corrections.</p>
<section id="id228">
<h3>Bug Fixes<a class="headerlink" href="#id228" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: Command line arguments that are unicode strings were not
properly working.</p></li>
<li><p>Compatibility: Fix, only the code object attached to exceptions
contained all variable names, but not the one of the function object.</p></li>
<li><p>Python3: Support for virtualenv on Windows was using non-portable
code and therefore failing.</p></li>
<li><p>The tree displayed with <code class="docutils literal notranslate"><span class="pre">--display-tree</span></code> duplicated all functions
and did not resolve source lines for functions. It also displayed
unused functions, which is not helpful.</p></li>
<li><p>Generators with parameters leaked C level memory for each instance of
them leading to memory bloat for long running programs that use a lot
of generators. Fixed in 0.5.16.1 already.</p></li>
<li><p>Dont drop positional arguments when called with <code class="docutils literal notranslate"><span class="pre">--run</span></code>, also make
it an error if they are present without that option.</p></li>
</ul>
</section>
<section id="id229">
<h3>New Features<a class="headerlink" href="#id229" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added full support for Python3.5, coroutines work now too.</p></li>
</ul>
</section>
<section id="id230">
<h3>Optimization<a class="headerlink" href="#id230" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Optimized frame access of generators to not use both a local frame
variable and the frame object stored in the generator object itself.
This gave about 1% speed up to setting them up.</p></li>
<li><p>Avoid having multiple code objects for functions that can raise and
have local variables. Previously one code object would be used to
create the function (with parameter variable names only) and when
raising an exception, another one would be used (with all local
variable names). Creating them both at start-up was wasteful and also
needed two tuples to be created, thus more constants setup code.</p></li>
<li><p>The entry point for generators is now shared code instead of being
generated for each one over and over. This should make things more
cache local and also results in less generated C code.</p></li>
<li><p>When creating frame codes, avoid working with strings, but use proper
emission for less memory churn during code generation.</p></li>
</ul>
</section>
<section id="id231">
<h3>Organisational<a class="headerlink" href="#id231" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Updated the key for the Debian/Ubuntu repositories to remain valid
for 2 more years.</p></li>
<li><p>Added support for Fedora 23.</p></li>
<li><p>MinGW32 is no more supported, use MinGW64 in the 32 bits variant,
which has less issues.</p></li>
</ul>
</section>
<section id="id232">
<h3>Cleanups<a class="headerlink" href="#id232" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Detecting function type ahead of times, allows to handle generators
different from normal functions immediately.</p></li>
<li><p>Massive removal of code duplication between normal functions and
generator functions. The later are now normal functions creating
generator objects, which makes them much more lightweight.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">return</span></code> statement in generators is now immediately set to the
proper node as opposed to doing this in variable closure phase only.
We can now use the ahead knowledge of the function type.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">nonlocal</span></code> statement is now immediately checked for syntax
errors as opposed to doing that only in variable closure phase.</p></li>
<li><p>The name of contraction making functions is no longer skewed to
empty, but the real thing instead. The code name is solved
differently now.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">local_locals</span></code> mode for function node was removed, it was
always true ever since Python2 list contractions stop using pseudo
functions.</p></li>
<li><p>The outline nodes allowed to provide a body when creating them,
although creating that body required using the outline node already
to create temporary variables. Removed that argument.</p></li>
<li><p>Removed PyLint false positive annotations no more needed for PyLint
1.5 and solved some TODOs.</p></li>
<li><p>Code objects are now mostly created from specs (not yet complete)
which are attached and shared between statement frames and function
creations nodes, in order to have less guess work to do.</p></li>
</ul>
</section>
<section id="id233">
<h3>Tests<a class="headerlink" href="#id233" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added the CPython3.5 test suite.</p></li>
<li><p>Updated generated doctests to fix typos and use common code in all
CPython test suites.</p></li>
</ul>
</section>
<section id="id234">
<h3>Summary<a class="headerlink" href="#id234" title="Permalink to this headline"></a></h3>
<p>This release continues to address technical debt. Adding support for
Python3.5 was the major driving force, while at the same time removing
obstacles to the changes that were needed for coroutine support.</p>
<p>With Python3.5 sorted out, it will be time to focus on general
optimization again, but there is more technical debt related to classes,
so the cleanup has to continue.</p>
</section>
</section>
<section id="nuitka-release-0-5-16">
<h2>Nuitka Release 0.5.16<a class="headerlink" href="#nuitka-release-0-5-16" title="Permalink to this headline"></a></h2>
<p>This is a maintenance release, largely intended to put out improved
support for new platforms and minor corrections. It should improve the
speed for standalone mode, and compilation in general for some use
cases, but this is mostly to clean up open ends.</p>
<section id="id235">
<h3>Bug Fixes<a class="headerlink" href="#id235" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">len</span></code> built-in could give false values for dictionary and
set creations with the same element.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This was falsely optimized to 2 even if &quot;a is b and a == b&quot; was true.</span>
<span class="nb">len</span><span class="p">({</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">})</span>
</pre></div>
</div>
</li>
<li><p>Python: Fix, the <code class="docutils literal notranslate"><span class="pre">gi_running</span></code> attribute of generators is no longer
an <code class="docutils literal notranslate"><span class="pre">int</span></code>, but <code class="docutils literal notranslate"><span class="pre">bool</span></code> instead.</p></li>
<li><p>Python3: Fix, the <code class="docutils literal notranslate"><span class="pre">int</span></code> built-in with two arguments, value and
base, raised <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> for
illegal bytes given as value.</p></li>
<li><p>Python3: Using <code class="docutils literal notranslate"><span class="pre">tokenize.open</span></code> to read source code, instead of
reading manually and decoding from <code class="docutils literal notranslate"><span class="pre">tokenize.detect_encoding</span></code>, this
handles corner cases more compatible.</p></li>
<li><p>Fix, the PyLint warnings plug-in could crash in some cases, make sure
its more robust.</p></li>
<li><p>Windows: Fix, the combination of Anaconda Python, MinGW 64 bits and
mere acceleration was not working.</p></li>
<li><p>Standalone: Preserve not only namespace packages created by <code class="docutils literal notranslate"><span class="pre">.pth</span></code>
files, but also make the imports done by them. This makes it more
compatible with uses of it in Fedora 22.</p></li>
<li><p>Standalone: The extension modules could be duplicated, turned this
into an error and cache finding them during compile time and during
early import resolution to avoid duplication.</p></li>
<li><p>Standalone: Handle not found from <code class="docutils literal notranslate"><span class="pre">ldd</span></code> output, on some systems
not all the libraries wanted are accessible for every library.</p></li>
<li><p>Python3.5: Fixed support for namespace packages, these were not yet
working for that version yet.</p></li>
<li><p>Python3.5: Fixes lack of support for unpacking in normal <code class="docutils literal notranslate"><span class="pre">tuple</span></code>,
<code class="docutils literal notranslate"><span class="pre">list</span></code>, and <code class="docutils literal notranslate"><span class="pre">set</span></code> creations.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">*</span><span class="n">a</span><span class="p">]</span>  <span class="c1"># this has become legal in 3.5 and now works too.</span>
</pre></div>
</div>
<p>Now also gives compatible <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> for earlier versions.
Python2 was good already.</p>
</li>
<li><p>Python3.5: Fix, need to reduce compiled functions to <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code>
value, rather than just <code class="docutils literal notranslate"><span class="pre">__name__</span></code> or else pickling methods doesnt
work.</p></li>
<li><p>Python3.5: Fix, added <code class="docutils literal notranslate"><span class="pre">gi_yieldfrom</span></code> attribute to generator
objects.</p></li>
<li><p>Windows: Fixed harmless warnings for Visual Studio 2015 in
<code class="docutils literal notranslate"><span class="pre">--debug</span></code> mode.</p></li>
</ul>
</section>
<section id="id236">
<h3>Optimization<a class="headerlink" href="#id236" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Re-formulate <code class="docutils literal notranslate"><span class="pre">exec</span></code> and <code class="docutils literal notranslate"><span class="pre">eval</span></code> to default to <code class="docutils literal notranslate"><span class="pre">globals()</span></code> as the
default for the locals dictionary in modules.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code> node was making a description of nodes moved to the
outside when shrinking its scope, which was using a lot of time, just
to not be output, now these can be postponed.</p></li>
<li><p>Refactored how freezing of bytecode works. Uncompiled modules are now
explicit nodes too, and in the registry. We only have one or the
other of it, avoiding to compile both.</p></li>
</ul>
</section>
<section id="id237">
<h3>Tests<a class="headerlink" href="#id237" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">strace</span></code> or <code class="docutils literal notranslate"><span class="pre">dtruss</span></code> are not found, given proper error
message, so people know what to do.</p></li>
<li><p>The doc tests extracted and then generated for CPython3 test suites
were not printing the expressions of the doc test, leading to largely
decreased test coverage here.</p></li>
<li><p>The CPython 3.4 test suite is now also using common runner code, and
avoids ignoring all Nuitka warnings, instead more white listing was
added.</p></li>
<li><p>Started to run CPython 3.5 test suite almost completely, but
coroutines are blocking some parts of that, so these tests that use
this feature are currently skipped.</p></li>
<li><p>Removed more CPython tests that access the network and are generally
useless to testing Nuitka.</p></li>
<li><p>When comparing outputs, normalize typical temporary file names used
on posix systems.</p></li>
<li><p>Coverage tests have made some progress, and some changes were made
due to its results.</p></li>
<li><p>Added test to cover too complex code module of <code class="docutils literal notranslate"><span class="pre">idna</span></code> module.</p></li>
<li><p>Added Python3.5 only test for unpacking variants.</p></li>
</ul>
</section>
<section id="id238">
<h3>Cleanups<a class="headerlink" href="#id238" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Prepare plug-in interface to allow suppression of import warnings to
access the node doing it, making the import node is accessible.</p></li>
<li><p>Have dedicated class function body object, which is a specialization
of the function body node base class. This allowed removing class
specific code from that class.</p></li>
<li><p>The use of win_target as a scons parameter was useless. Make more
consistent use of it as a flag indicator in the scons file.</p></li>
<li><p>Compiled types were mixing uses of <code class="docutils literal notranslate"><span class="pre">compiled_</span></code> prefixes, something
with a space, sometimes with an underscore.</p></li>
</ul>
</section>
<section id="id239">
<h3>Organisational<a class="headerlink" href="#id239" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Improved support for Python3.5 missing compatibility with new
language features.</p></li>
<li><p>Updated the Developer Manual with changes that SSA is now a fact.</p></li>
<li><p>Added Python3.5 Windows MSI downloads.</p></li>
<li><p>Added repository for Ubuntu Wily (15.10) for download. Removed Ubuntu
Utopic package download, no longer supported by Ubuntu.</p></li>
<li><p>Added repository with RPM packages for Fedora 22.</p></li>
</ul>
</section>
<section id="id240">
<h3>Summary<a class="headerlink" href="#id240" title="Permalink to this headline"></a></h3>
<p>So this release is mostly to lower the technical debt incurred that
holds it back from supporting making more interesting changes. Upcoming
releases may have continue that trend for some time.</p>
<p>This release is mostly about catching up with Python3.5, to make sure we
did not miss anything important. The new function body variants will
make it easier to implement coroutines, and help with optimization and
compatibility problems that remain for Python3 classes.</p>
<p>Ultimately it will be nice to require a lot less checks for when
function in-line is going to be acceptable. Also code generation will
need a continued push to use the new structure in preparation for making
type specific code generation a reality.</p>
</section>
</section>
<section id="nuitka-release-0-5-15">
<h2>Nuitka Release 0.5.15<a class="headerlink" href="#nuitka-release-0-5-15" title="Permalink to this headline"></a></h2>
<p>This release enables SSA based optimization, the huge leap, not so much
in terms of actual performance increase, but for now making the things
possible that will allow it.</p>
<p>This has been in the making literally for years. Over and over, there
was just one more thing needed. But now its there.</p>
<p>The release includes much stuff, and there is a perspective on the open
tasks in the summary, but first out to the many details.</p>
<section id="id241">
<h3>Bug Fixes<a class="headerlink" href="#id241" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Standalone: Added implicit import for <code class="docutils literal notranslate"><span class="pre">reportlab</span></code> package
configuration dynamic import. Fixed in 0.5.14.1 already.</p></li>
<li><p>Standalone: Fix, compilation of the <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> module could happen
for some import patterns, and then prevented the distribution to
contain all necessary libraries. Now it is made sure to not include
compiled and frozen form both. Fixed in 0.5.14.1 already.</p></li>
<li><p>Fix, compilation for conditional statements where the boolean check
on the condition cannot raise, could fail compilation. Fixed in
0.5.14.2 already.</p></li>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> built-in was making static optimization
assuming compile time constants to be strings, which in the error
case they are not, which was crashing the compiler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">__import__</span><span class="p">((</span><span class="s2">&quot;some.module&quot;</span><span class="p">,))</span>  <span class="c1"># tuples don&#39;t work</span>
</pre></div>
</div>
<p>This error became only apparent, because now in some cases, Nuitka
forward propagates values.</p>
</li>
<li><p>Windows: Fix, when installing Python2 only for the user, the
detection of it via registry failed as it was only searching system
key. This was <a class="reference external" href="https://github.com/kayhayen/Nuitka/pull/8">a github pull request</a>. Fixed in 0.5.14.3
already.</p></li>
<li><p>Some modules have extremely complex expressions requiring too deep
recursion to work on all platforms. These modules are now included
entirely as bytecode fallback.</p></li>
<li><p>The standard library may contain broken code due to installation
mistakes. We have to ignore their <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.</p></li>
<li><p>Fix, pickling compiled methods was failing with the wrong kind of
error, because they should not implement <code class="docutils literal notranslate"><span class="pre">__reduce__</span></code>, but only
<code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code>.</p></li>
<li><p>Fix, when running under <code class="docutils literal notranslate"><span class="pre">wine</span></code>, the check for scons binary was
fooled by existence of <code class="docutils literal notranslate"><span class="pre">/usr/bin/scons</span></code>.</p></li>
</ul>
</section>
<section id="id242">
<h3>New Features<a class="headerlink" href="#id242" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python3.5, coroutines dont work yet,
but it works perfectly as a 3.4 replacement.</p></li>
<li><p>Added experimental Nuitka plug-in framework, and use it for the
packaging of Qt plugins in standalone mode. The API is not yet stable
nor polished.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">--debugger</span></code> that makes <code class="docutils literal notranslate"><span class="pre">--run</span></code> execute directly in
<code class="docutils literal notranslate"><span class="pre">gdb</span></code> and gives a stack trace on crash.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">--profile</span></code> executes compiled binary and outputs
measured performance with <code class="docutils literal notranslate"><span class="pre">vmprof</span></code>. This is work in progress and
not functional yet.</p></li>
<li><p>Started work on <code class="docutils literal notranslate"><span class="pre">--graph</span></code> to render the SSA state into diagrams.
This is work in progress and not functional yet.</p></li>
<li><p>Plug-in framework added. Not yet ready for users. Working <code class="docutils literal notranslate"><span class="pre">PyQt4</span></code>
and <code class="docutils literal notranslate"><span class="pre">PyQt5</span></code> plug-in support. Experimental Windows
<code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> support. Experimental PyLint warnings disable
support. More to come.</p></li>
<li><p>Added support for Anaconda accelerated mode on macOS by modifying the
rpath to the Python DLL.</p></li>
<li><p>Added experimental support for <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> on Windows, which
needs monkey patching of the module to support compiled methods.</p></li>
</ul>
</section>
<section id="id243">
<h3>Optimization<a class="headerlink" href="#id243" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The SSA analysis is now enabled by default, eliminating variables
that are not shared, and can be forward propagated. This is currently
limited mostly to compile time constants, but things wont remain
that way.</p></li>
<li><p>Code generation for many constructs now takes into account if a
specific operation can raise or not. If e.g. an attribute look-up is
known to not raise, then that is now decided by the node the looked
is done to, and then more often can determine this, or even directly
the value.</p></li>
<li><p>Calls to C-API that we know cannot raise, no longer check, but merely
assert the result.</p></li>
<li><p>For attribute look-up and other operations that might be known to not
raise, we now only assert that it succeeds.</p></li>
<li><p>Built-in loop-ups cannot fail, merely assert that.</p></li>
<li><p>Creation of built-in exceptions never raises, merely assert that too.</p></li>
<li><p>More Python operation slots now have their own computations and some
of these gained overloads for more compile time constant
optimization.</p></li>
<li><p>When taking an iterator cannot raise, this is now detected more
often.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> construct is now represented by duplicating
the final block into all kinds of handlers (<code class="docutils literal notranslate"><span class="pre">break</span></code>, <code class="docutils literal notranslate"><span class="pre">continue</span></code>,
<code class="docutils literal notranslate"><span class="pre">return</span></code>, or <code class="docutils literal notranslate"><span class="pre">except</span></code>) and optimized separately. This allows for
SSA to trace values more correctly.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">hash</span></code> built-in now has dedicated node and code generation too.
This is mostly intended to represent the side effects of dictionary
look-up, but gives more compact and faster code too.</p></li>
<li><p>Type <code class="docutils literal notranslate"><span class="pre">type</span></code> built-in cannot raise and has no side effect.</p></li>
<li><p>Speed improvement for in-place float operations for <code class="docutils literal notranslate"><span class="pre">+=</span></code> and
<code class="docutils literal notranslate"><span class="pre">*=</span></code>, as these will be common cases.</p></li>
</ul>
</section>
<section id="id244">
<h3>Tests<a class="headerlink" href="#id244" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Made the construct based testing executable with Python3.</p></li>
<li><p>Removed warnings using the new PyLint warnings plug-in for the
reflected test. Nuitka now uses the PyLint annotations to not warn.
Also do not go into PyQt for reflected test, not needed. Many Python3
improvements for cases where there are differences to report.</p></li>
<li><p>The optimization tests no longer use 2to3 anymore, made the tests
portable to all versions.</p></li>
<li><p>Checked more in-place operations for speed.</p></li>
</ul>
</section>
<section id="id245">
<h3>Organisational<a class="headerlink" href="#id245" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Many improvements to the coverage taking. We can hope to see public
data from this, some improvements were triggered from this already,
but full runs of the test suite with coverage data collection are yet
to be done.</p></li>
</ul>
</section>
<section id="id246">
<h3>Summary<a class="headerlink" href="#id246" title="Permalink to this headline"></a></h3>
<p>The release includes many important new directions. Coverage analysis
will be important to remain certain of test coverage of Nuitka itself.
This is mostly done, but needs more work to complete.</p>
<p>Then the graphing surely will help us to debug and understand code
examples. So instead of tracing, and reading stuff, we should visualize
things, to more clearly see, how things evolve under optimization
iteration, and where exactly one thing goes wrong. This will be improved
as it proves necessary to do just that. So far, this has been rare.
Expect this to become end user capable with time. If only to allow you
to understand why Nuitka wont optimize code of yours, and what change
of Nuitka it will need to improve.</p>
<p>The comparative performance benchmarking is clearly the most important
thing to have for users. It deserves to be the top priority. Thanks to
the PyPy tool <code class="docutils literal notranslate"><span class="pre">vmprof</span></code>, we may already be there on the data taking
side, but the presenting and correlation part, is still open and a fair
bit of work. It will be most important to empower users to make
competent performance bug reports, now that Nuitka enters the phase,
where these things matter.</p>
<p>As this is a lot of ground to cover. More than ever. We can make this
compiler, but only if you help, it will arrive in your life time.</p>
</section>
</section>
<section id="nuitka-release-0-5-14">
<h2>Nuitka Release 0.5.14<a class="headerlink" href="#nuitka-release-0-5-14" title="Permalink to this headline"></a></h2>
<p>This release is an intermediate step towards value propagation, which is
not considered ready for stable release yet. The major point is the
elimination of the <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> expressions, as they are problems
to SSA. The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> statement change is delayed.</p>
<p>There are also a lot of bug fixes, and enhancements to code generation,
as well as major cleanups of code base.</p>
<section id="id247">
<h3>Bug Fixes<a class="headerlink" href="#id247" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Python3: Added support assignments trailing star assignment.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
</pre></div>
</div>
<p>This raised <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> before.</p>
</li>
<li><p>Python3: Properly detect illegal double star assignments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="n">c</span>
</pre></div>
</div>
</li>
<li><p>Python3: Properly detect the syntax error to star assign from
non-tuple/list.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Python3.4: Fixed a crash of the binary when copying dictionaries with
split tables received as star arguments.</p></li>
<li><p>Python3: Fixed reference loss, when using <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">a</span> <span class="pre">from</span> <span class="pre">b</span></code> where
<code class="docutils literal notranslate"><span class="pre">b</span></code> was an exception instance. Fixed in 0.5.13.8 already.</p></li>
<li><p>Windows: Fix, the flag <code class="docutils literal notranslate"><span class="pre">--disable-windows-console</span></code> was not properly
handled for MinGW32 run time resulting in a crash.</p></li>
<li><p>Python2.7.10: Was not recognizing this as a 2.7.x variant and
therefore not applying minor version compatibility levels properly.</p></li>
<li><p>Fix, when choosing to have frozen source references, code objects
were not use the same value as <code class="docutils literal notranslate"><span class="pre">__file__</span></code> did for its filename.</p></li>
<li><p>Fix, when re-executing itself to drop the <code class="docutils literal notranslate"><span class="pre">site</span></code> module, make sure
we find the same file again, and not according to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
changes coming from it. Fixed in 0.5.13.4 already.</p></li>
<li><p>Enhanced code generation for <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">variable</span></code> statements, where its
clear that the value must be assigned.</p></li>
<li><p>When pressing CTRL-C, the stack traces from both Nuitka and Scons
were given, we now avoid the one from Scons.</p></li>
<li><p>Fix, the dump from <code class="docutils literal notranslate"><span class="pre">--xml</span></code> no longer contains functions that have
become unused during analysis.</p></li>
<li><p>Standalone: Creating or running programs from inside unicode paths
was not working on Windows. Fixed in 0.5.13.7 already.</p></li>
<li><p>Namespace package support was not yet complete, importing the parent
of a package was still failing. Fixed in 0.5.13.7 already.</p></li>
<li><p>Python2.6: Compatibility for exception check messages enhanced with
newest minor releases.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">NameError</span></code> in classes needs to say <code class="docutils literal notranslate"><span class="pre">global</span>
<span class="pre">name</span></code> and not just <code class="docutils literal notranslate"><span class="pre">name</span></code> too.</p></li>
<li><p>Python3: Fixed creation of XML representation, now done without
<code class="docutils literal notranslate"><span class="pre">lxml</span></code> as it doesnt support needed features on that version. Fixed
in 0.5.13.5 already.</p></li>
<li><p>Python2: Fix, when creating code for the largest negative constant to
still fit into <code class="docutils literal notranslate"><span class="pre">int</span></code>, that was only working in the main module.
Fixed in 0.5.13.5 already.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">print</span></code> statement raised an assertion on unicode
objects that could not be encoded with <code class="docutils literal notranslate"><span class="pre">ascii</span></code> codec.</p></li>
</ul>
</section>
<section id="id248">
<h3>New Features<a class="headerlink" href="#id248" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Windows 10.</p></li>
<li><p>Followed changes for Python 3.5 beta 2. Still only usable as a Python
3.4 replacement, no new features.</p></li>
<li><p>Using a self compiled Python running from the source tree is now
supported.</p></li>
<li><p>Added support for Anaconda Python distribution. As it doesnt install
the Python DLL, we copy it along for acceleration mode.</p></li>
<li><p>Added support for Visual Studio 2015. Fixed in 0.5.13.3 already.</p></li>
<li><p>Added support for self compiled Python versions running from build
tree, this is intended to help debug things on Windows.</p></li>
</ul>
</section>
<section id="id249">
<h3>Optimization<a class="headerlink" href="#id249" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Function in-lining is now present in the code, but still disabled,
because it needs more changes in other areas, before we can generally
do it.</p></li>
<li><p>Trivial outlines, result of re-formulations or function in-lining,
are now in-lined, in case they just return an expression.</p></li>
<li><p>The re-formulation for <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> has been giving up,
eliminating the use of a <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> expression, at the cost
of dedicated boolean nodes and code generation for these.</p>
<p>This saves around 8% of compile time memory for Nuitka, and allows
for faster and more complete optimization, and gets rid of a
complicated structure for analysis.</p>
</li>
<li><p>When a frame is used in an exception, its locals are detached. This
was done more often than necessary and even for frames that are not
necessary our own ones. This will speed up some exception cases.</p></li>
<li><p>When the default arguments, or the keyword default arguments
(Python3) or the annotations (Python3) were raising an exception, the
function definition is now replaced with the exception, saving a code
generation. This happens frequently with Python2/Python3 compatible
code guarded by version checks.</p></li>
<li><p>The SSA analysis for loops now properly traces break statement
situations and merges the post-loop situation from all of them. This
significantly allows for and improves optimization of code following
the loop.</p></li>
<li><p>The SSA analysis of <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> statements has been greatly
enhanced. The handler for <code class="docutils literal notranslate"><span class="pre">finally</span></code> is now optimized for exception
raise and no exception raise individually, as well as for <code class="docutils literal notranslate"><span class="pre">break</span></code>,
<code class="docutils literal notranslate"><span class="pre">continue</span></code> and <code class="docutils literal notranslate"><span class="pre">return</span></code> in the tried code. The SSA analysis for
after the statement is now the result of merging these different
cases, should they not abort.</p></li>
<li><p>The code generation for <code class="docutils literal notranslate"><span class="pre">del</span></code> statements is now taking advantage
should there be definite knowledge of previous value. This speed them
up slightly.</p></li>
<li><p>The SSA analysis of <code class="docutils literal notranslate"><span class="pre">del</span></code> statements now properly decided if the
statement can raise or not, allowing for more optimization.</p></li>
<li><p>For list contractions, the re-formulation was enhanced using the new
outline construct instead of a pseudo function, leading to better
analysis and code generation.</p></li>
<li><p>Comparison chains are now re-formulated into outlines too, allowing
for better analysis of them.</p></li>
<li><p>Exceptions raised in function creations, e.g. in default values, are
now propagated, eliminating the functions code. This happens most
often with Python2/Python3 in branches. On the other hand, function
creations that cannot are also annotated now.</p></li>
<li><p>Closure variables that become unreferenced outside of the function
become normal variables leading to better tracing and code generation
for them.</p></li>
<li><p>Function creations cannot raise except their defaults, keyword
defaults or annotations do.</p></li>
<li><p>Built-in references can now be converted to strings at compile time,
e.g. when printed.</p></li>
</ul>
</section>
<section id="id250">
<h3>Organisational<a class="headerlink" href="#id250" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Removed gitorious mirror of the git repository, they shut down.</p></li>
<li><p>Make it more clear in the documentation that Python2 is needed at
compile time to create Python3 executables.</p></li>
</ul>
</section>
<section id="id251">
<h3>Cleanups<a class="headerlink" href="#id251" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Moved more parts of code generation to their own modules, and used
registry for code generation for more expression kinds.</p></li>
<li><p>Unified <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> and <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> into a single
construct that handles both through
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code>/<code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">continue</span></code>/<code class="docutils literal notranslate"><span class="pre">return</span></code> semantics.
Finally is now solved via duplicating the handler into cases
necessary.</p>
<p>No longer are nodes annotated with information if they need to
publish the exception or not, this is now all done with the dedicated
nodes.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> expressions have been replaced with outline
function bodies, that instead of side effect statements, are more
like functions with return values, allowing for easier analysis and
dedicated code generation of much lower complexity.</p></li>
<li><p>No more tolerant flag for release nodes, we now decide this fully
based on SSA information.</p></li>
<li><p>Added helper for assertions that code flow does not reach certain
positions, e.g. a function must return or raise, aborting statements
do not continue and so on.</p></li>
<li><p>To keep cloning of code parts as simple as possible, the limited use
of <code class="docutils literal notranslate"><span class="pre">makeCloneAt</span></code> has been changed to a new <code class="docutils literal notranslate"><span class="pre">makeClone</span></code> which
produces identical copies, which is what we always do. And a generic
cloning based on details has been added, requiring to make
constructor arguments and details complete and consistent.</p></li>
<li><p>The re-formulation code helpers have been improved to be more
convenient at creating nodes.</p></li>
<li><p>The old <code class="docutils literal notranslate"><span class="pre">nuitka.codegen</span></code> module <code class="docutils literal notranslate"><span class="pre">Generator</span></code> was still used for
many things. These now all got moved to appropriate code generation
modules, and their users got updated, also moving some code generator
functions in the process.</p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">nuitka.codegen.CodeTemplates</span></code> got replaces with direct
uses of the proper topic module from <code class="docutils literal notranslate"><span class="pre">nuitka.codegen.templates</span></code>,
with some more added, and their names harmonized to be more easily
recognizable.</p></li>
<li><p>Added more assertions to the generated code, to aid bug finding.</p></li>
<li><p>The autoformat now sorts pylint markups for increased consistency.</p></li>
<li><p>Releases no longer have a <code class="docutils literal notranslate"><span class="pre">tolerant</span></code> flag, this was not needed
anymore as we use SSA.</p></li>
<li><p>Handle CTRL-C in scons code preventing per job messages that are not
helpful and avoid tracebacks from scons, also remove more unused
tools like <code class="docutils literal notranslate"><span class="pre">rpm</span></code> from out in-line copy.</p></li>
</ul>
</section>
<section id="id252">
<h3>Tests<a class="headerlink" href="#id252" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added the CPython3.4 test suite.</p></li>
<li><p>The CPython3.2, CPython3.3, and CPython3.4 test suite now run with
Python2 giving the same errors. Previously there were a few specific
errors, some with line numbers, some with different <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>
be raised, due to different order of checks.</p>
<p>This increases the coverage of the exception raising tests somewhat.</p>
</li>
<li><p>Also the CPython3.x test suites now all pass with debug Python, as
does the CPython 2.6 test suite with 2.6 now.</p></li>
<li><p>Added tests to cover all forms of unpacking assignments supported in
Python3, to be sure there are no other errors unknown to us.</p></li>
<li><p>Started to document the reference count tests, and to make it more
robust against SSA optimization. This will take some time and is work
in progress.</p></li>
<li><p>Made the compile library test robust against modules that raise a
syntax error, checking that Nuitka does the same.</p></li>
<li><p>Refined more tests to be directly executable with Python3, this is an
ongoing effort.</p></li>
</ul>
</section>
<section id="id253">
<h3>Summary<a class="headerlink" href="#id253" title="Permalink to this headline"></a></h3>
<p>This release is clearly major. It represents a huge step forward for
Nuitka as it improves nearly every aspect of code generation and
analysis. Removing the <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> expression nodes proved to be
necessary in order to even have the correct SSA in their cases. Very
important optimization was blocked by it.</p>
<p>Going forward, the <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> statements will be removed and
dead variable elimination will happen, which then will give function
inlining. This is expected to happen in one of the next releases.</p>
<p>This release is a consolidation of 8 hotfix releases, and many
refactorings needed towards the next big step, which might also break
things, and for that reason is going to get its own release cycle.</p>
</section>
</section>
<section id="nuitka-release-0-5-13">
<h2>Nuitka Release 0.5.13<a class="headerlink" href="#nuitka-release-0-5-13" title="Permalink to this headline"></a></h2>
<p>This release contains the first use of SSA for value propagation and
massive amounts of bug fixes and optimization. Some of the bugs that
were delivered as hotfixes, were only revealed when doing the value
propagation as they still could apply to real code.</p>
<section id="id254">
<h3>Bug Fixes<a class="headerlink" href="#id254" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix, relative imports in packages were not working with absolute
imports enabled via future flags. Fixed in 0.5.12.1 already.</p></li>
<li><p>Loops were not properly degrading knowledge from inside the loop at
loop exit, and therefore this could have lead missing checks and
releases in code generation for cases, for <code class="docutils literal notranslate"><span class="pre">del</span></code> statements in the
loop body. Fixed in 0.5.12.1 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> re-formulation could trigger false assertions,
due to early releases for compatibility. Fixed in 0.5.12.1 already.</p></li>
<li><p>Fix, optimizion of calls of constant objects (always an exception),
crashed the compiler.Fixed in 0.5.12.2 already.</p></li>
<li><p>Standalone: Added support for <code class="docutils literal notranslate"><span class="pre">site.py</span></code> installations with a
leading <code class="docutils literal notranslate"><span class="pre">def</span></code> or <code class="docutils literal notranslate"><span class="pre">class</span></code> statement, which is defeating our
attempt to patch <code class="docutils literal notranslate"><span class="pre">__file__</span></code> for it.</p></li>
<li><p>Compatibility: In full compatibility mode, the tracebacks of <code class="docutils literal notranslate"><span class="pre">or</span></code>
and <code class="docutils literal notranslate"><span class="pre">and</span></code> expressions are now as wrong as they are in CPython. Does
not apply to <code class="docutils literal notranslate"><span class="pre">--improved</span></code> mode.</p></li>
<li><p>Standalone: Added missing dependency on <code class="docutils literal notranslate"><span class="pre">QtGui</span></code> by <code class="docutils literal notranslate"><span class="pre">QtWidgets</span></code>
for PyQt5.</p></li>
<li><p>macOS: Improved parsing of <code class="docutils literal notranslate"><span class="pre">otool</span></code> output to avoid duplicate
entries, which can also be entirely wrong in the case of Qt plugins
at least.</p></li>
<li><p>Avoid relative paths for main program with file reference mode
<code class="docutils literal notranslate"><span class="pre">original</span></code>, as it otherwise changes as the file moves.</p></li>
<li><p>MinGW: The created modules depended on MinGW to be in <code class="docutils literal notranslate"><span class="pre">PATH</span></code> for
their usage. This is no longer necessary, as we now link these
libraries statically for modules too.</p></li>
<li><p>Windows: For modules, the option <code class="docutils literal notranslate"><span class="pre">--run</span></code> to immediately load the
modules had been broken for a while.</p></li>
<li><p>Standalone: Ignore Windows DLLs that were attempted to be loaded, but
then failed to load. This happens e.g. when both PySide and PyQt are
installed, and could cause the dreaded conflicting DLLs message. The
DLL loaded in error is now ignored, which avoids this.</p></li>
<li><p>MinGW: The resource file used might be empty, in which case it
doesnt get created, avoiding an error due to that.</p></li>
<li><p>MinGW: Modules can now be created again. The run time relative code
uses an API that is WinXP only, and MinGW failed to find it without
guidance.</p></li>
</ul>
</section>
<section id="id255">
<h3>Optimization<a class="headerlink" href="#id255" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Make direct calls out of called function creations. Initially this
applies to lambda functions only, but its expected to become common
place in coming releases. This is now 20x faster than CPython.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Nuitka avoids creating a function object, parsing function arguments:</span>
<span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)(</span><span class="n">something</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Propagate assignments from non-mutable constants forward based on SSA
information. This is the first step of using SSA for real compile
time optimization.</p></li>
<li><p>Specialized the creation of call nodes at creation, avoiding to have
all kinds be the most flexible form (keyword and plain arguments),
but instead only what kind of call they really are. This saves lots
of memory, and makes the tree faster to visit.</p></li>
<li><p>Added support for optimizing the <code class="docutils literal notranslate"><span class="pre">slice</span></code> built-in with compile time
constant arguments to constants. The re-formulation for slices in
Python3 uses these a lot. And the lack of this optimization prevented
a bunch of optimization in this area. For Python2 the built-in is
optimized too, but not as important probably.</p></li>
<li><p>Added support for optimizing <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> calls with compile time
constant arguments. This avoids static exception raises in the
<code class="docutils literal notranslate"><span class="pre">exec</span></code> re-formulation which tests for <code class="docutils literal notranslate"><span class="pre">file</span></code> type, and then
optimization couldnt tell that a <code class="docutils literal notranslate"><span class="pre">str</span></code> is not a <code class="docutils literal notranslate"><span class="pre">file</span></code> instance.
Now it can.</p></li>
<li><p>Lower in-place operations on immutable types to normal operations.
This will allow to compile time compute these more accurately.</p></li>
<li><p>The re-formulation of loops puts the loop condition as a conditional
statement with break. The <code class="docutils literal notranslate"><span class="pre">not</span></code> that needs to apply was only added
in later optimization, leading to unnecessary compile time efforts.</p></li>
<li><p>Removed per variable trace visit from optimization, removing useless
code and compile time overhead. We are going to optimize things by
making decision in assignment and reference nodes based on forward
looking statements using the last trace collection.</p></li>
</ul>
</section>
<section id="id256">
<h3>New Features<a class="headerlink" href="#id256" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python 3.5, which seems to be passing
the test suites just fine. The new <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> matrix multiplicator
operators are not yet supported though.</p></li>
<li><p>Added support for patching source on the fly. This is used to work
around a (now fixed) issue with <code class="docutils literal notranslate"><span class="pre">numexpr.cpuinfo</span></code> making type
checks with the <code class="docutils literal notranslate"><span class="pre">is</span></code> operation, about the only thing we cannot
detect.</p></li>
</ul>
</section>
<section id="id257">
<h3>Organisational<a class="headerlink" href="#id257" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added repository for Ubuntu Vivid (15.04) for download. Removed
Ubuntu Saucy and Ubuntu Raring package downloads, these are no longer
supported by Ubuntu.</p></li>
<li><p>Added repository for Debian Stretch, after Jessie release.</p></li>
<li><p>Make it more clear in the documentation that in order to compile
Python3, a Python2 is needed to execute Scons, but that the end
result is a Python3 binary.</p></li>
<li><p>The PyLint checker tool now can operate on directories given on the
command line, and whitelists an error that is Windows only.</p></li>
</ul>
</section>
<section id="id258">
<h3>Cleanups<a class="headerlink" href="#id258" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Split up standalone code further, moving <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code> handling to
a separate module.</p></li>
<li><p>Reduced code complexity of scons interface.</p></li>
<li><p>Cleaned up where trace collection is being done. It was partially
still done inside the collection itself instead in the owner.</p></li>
<li><p>In case of conflicting DLLs for standalone mode, these are now output
with nicer formatting, that makes it easy to recognize what is going
on.</p></li>
<li><p>Moved code to fetch <code class="docutils literal notranslate"><span class="pre">depends.exe</span></code> to dedicated module, so its not
as much in the way of standalone code.</p></li>
</ul>
</section>
<section id="id259">
<h3>Tests<a class="headerlink" href="#id259" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Made <code class="docutils literal notranslate"><span class="pre">BuiltinsTest</span></code> directly executable with Python3.</p></li>
<li><p>Added construct test to demonstrate the speed up of direct lambda
calls.</p></li>
<li><p>The deletion of <code class="docutils literal notranslate"><span class="pre">&#64;test</span></code> for the CPython test suite is more robust
now, esp. on Windows, the symbolic links are now handled.</p></li>
<li><p>Added test to cover <code class="docutils literal notranslate"><span class="pre">or</span></code> usage with in-place assignment.</p></li>
<li><p>Cover local relative <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">from</span> <span class="pre">.</span></code> with <code class="docutils literal notranslate"><span class="pre">absolute_import</span></code>
future flag enabled.</p></li>
<li><p>Again, more basic tests are now directly executable with Python3.</p></li>
</ul>
</section>
<section id="id260">
<h3>Summary<a class="headerlink" href="#id260" title="Permalink to this headline"></a></h3>
<p>This release is major due to amount of ground covered. The reduction in
memory usage of Nuitka itself (the C++ compiler will still use much
memory) is very massive and an important aspect of scalability too.</p>
<p>Then the SSA changes are truly the first sign of major improvements to
come. In their current form, without eliminating dead assignments, the
full advantage is not taken yet, but the next releases will do this, and
thats a major milestone to Nuitka.</p>
<p>The other optimization mostly stem from looking at things closer, and
trying to work towards function in-lining, for which we are making a lot
of progress now.</p>
</section>
</section>
<section id="nuitka-release-0-5-12">
<h2>Nuitka Release 0.5.12<a class="headerlink" href="#nuitka-release-0-5-12" title="Permalink to this headline"></a></h2>
<p>This release contains massive amounts of corrections for long standing
issues in the import recursion mechanism, as well as for standalone
issues now visible after the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> and <code class="docutils literal notranslate"><span class="pre">__path__</span></code> values have
changed to become runtime dependent values.</p>
<section id="id261">
<h3>Bug Fixes<a class="headerlink" href="#id261" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fix, the <code class="docutils literal notranslate"><span class="pre">__path__</span></code> attribute for packages was still the original
filenames directory, even in file reference mode was <code class="docutils literal notranslate"><span class="pre">runtime</span></code>.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">runtime</span></code> as default file reference mode for
executables, even if not in standalone mode, was making acceleration
harder than necessary. Changed to <code class="docutils literal notranslate"><span class="pre">original</span></code> for that case. Fixed
in 0.5.11.1 already.</p></li>
<li><p>The constant value for the smallest <code class="docutils literal notranslate"><span class="pre">int</span></code> that is not yet a
<code class="docutils literal notranslate"><span class="pre">long</span></code> is created using <code class="docutils literal notranslate"><span class="pre">1</span></code> due to C compiler limitations, but
<code class="docutils literal notranslate"><span class="pre">1</span></code> was not yet initialized properly, if this was a global
constant, i.e. used in multiple modules. Fixed in 0.5.11.2 already.</p></li>
<li><p>Standalone: Recent fixes around <code class="docutils literal notranslate"><span class="pre">__path__</span></code> revealed issues with
PyWin32, where modules from <code class="docutils literal notranslate"><span class="pre">win32com.shell</span></code> were not properly
recursed to. Fixed in 0.5.11.2 already.</p></li>
<li><p>The importing of modules with the same name as a built-in module
inside a package falsely assumed these were the built-ins which need
not exist, and then didnt recurse into them. This affected
standalone mode the most, as the module was then missing entirely.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inside &quot;x.y&quot; module:</span>
<span class="kn">import</span> <span class="nn">x.y.exceptions</span>
</pre></div>
</div>
</li>
<li><p>Similarly, the importing of modules with the same name as standard
library modules could go wrong.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inside &quot;x.y&quot; module:</span>
<span class="kn">import</span> <span class="nn">x.y.types</span>
</pre></div>
</div>
</li>
<li><p>Importing modules on Windows and macOS was not properly checking the
checking the case, making it associate wrong modules from files with
mismatching case.</p></li>
<li><p>Standalone: Importing with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">absolute_import</span></code>
would prefer relative imports still.</p></li>
<li><p>Python3: Code generation for <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">expr</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code>
could loose exceptions when <code class="docutils literal notranslate"><span class="pre">expr</span></code> raised an exception, leading to
a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> for <code class="docutils literal notranslate"><span class="pre">NULL</span></code> return value. The real exception was
lost.</p></li>
<li><p>Lambda expressions that were directly called with star arguments
caused the compiler to crash.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">args</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># was crashing Nuitka</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id262">
<h3>Optimization<a class="headerlink" href="#id262" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Focusing on compile time memory usage, cyclic dependencies of trace
merges that prevented them from being released, even when replaced
were removed.</p></li>
<li><p>More memory efficient updating of global SSA traces, reducing memory
usage during optimization by ca. 50%.</p></li>
<li><p>Code paths that cannot and therefore must not happen are now more
clearly indicated to the backend compiler, allowing for slightly
better code to be generated by it, as it can tell that certain code
flows need not be merged.</p></li>
</ul>
</section>
<section id="id263">
<h3>New Features<a class="headerlink" href="#id263" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Standalone: On systems, where <code class="docutils literal notranslate"><span class="pre">.pth</span></code> files inject Python packages
at launch, these are now detected, and taking into account.
Previously Nuitka did not recognize them, due to lack of
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files. These are mostly pip installations of e.g.
<code class="docutils literal notranslate"><span class="pre">zope.interface</span></code>.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--explain-imports</span></code> to debug the import resolution
code of Nuitka.</p></li>
<li><p>Added options <code class="docutils literal notranslate"><span class="pre">--show-memory</span></code> to display the amount of memory used
in total and how its spread across the different node types during
compilation.</p></li>
<li><p>The option <code class="docutils literal notranslate"><span class="pre">--trace-execution</span></code> now also covers early program
initialisation before any Python code runs, to ease finding bugs in
this domain as well.</p></li>
</ul>
</section>
<section id="id264">
<h3>Organisational<a class="headerlink" href="#id264" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed default for file reference mode to <code class="docutils literal notranslate"><span class="pre">original</span></code> unless
standalone or module mode are used. For mere acceleration, breaking
the reading of data files from <code class="docutils literal notranslate"><span class="pre">__file__</span></code> is useless.</p></li>
<li><p>Added check that the in-line copy of scons is not run with Python3,
which is not supported. Nuitka works fine with Python3, but a Python2
is required to execute scons.</p></li>
<li><p>Discover more kinds of Python2 installations on Linux/macOS
installations.</p></li>
<li><p>Added instructions for macOS to the download page.</p></li>
</ul>
</section>
<section id="id265">
<h3>Cleanups<a class="headerlink" href="#id265" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">oset</span></code> and <code class="docutils literal notranslate"><span class="pre">odict</span></code> modules which provide ordered sets and
dictionaries into a new package <code class="docutils literal notranslate"><span class="pre">nuitka.container</span></code> to clean up the
top level scope.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">SyntaxErrors</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka.tree</span></code> package, where it is used
to format error messages.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">nuitka.Utils</span></code> package to <code class="docutils literal notranslate"><span class="pre">nuitka.utils.Utils</span></code> creating a
whole package for utils, so as to better structure them for their
purpose.</p></li>
</ul>
</section>
<section id="id266">
<h3>Summary<a class="headerlink" href="#id266" title="Permalink to this headline"></a></h3>
<p>This release is a major maintenance release. Support for namespace
modules injected by <code class="docutils literal notranslate"><span class="pre">*.pth</span></code> is a major step for new compatibility. The
import logic improvements expand the ability of standalone mode widely.
Many more use cases will now work out of the box, and less errors will
be found on case insensitive systems.</p>
<p>There is aside of memory issues, no new optimization though as many of
these improvements could not be delivered as hotfixes (too invasive code
changes), and should be out to the users as a stable release. Real
optimization changes have been postponed to be next release.</p>
</section>
</section>
<section id="nuitka-release-0-5-11">
<h2>Nuitka Release 0.5.11<a class="headerlink" href="#nuitka-release-0-5-11" title="Permalink to this headline"></a></h2>
<p>The last release represented a significant change and introduced a few
regressions, which got addressed with hot fix releases. But it also had
a focus on cleaning up open optimization issues that were postponed in
the last release.</p>
<section id="id267">
<h3>New Features<a class="headerlink" href="#id267" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The filenames of source files as found in the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute
are now made relative for all modes, not just standalone mode.</p>
<p>This makes it possible to put data files along side compiled modules
in a deployment.</p>
</li>
</ul>
</section>
<section id="id268">
<h3>Bug Fixes<a class="headerlink" href="#id268" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Local functions that reference themselves were not released. They now
are.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">someFunction</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
        <span class="n">f</span><span class="p">()</span>  <span class="c1"># referencing &#39;f&#39; in &#39;f&#39; caused the garbage collection to fail.</span>
</pre></div>
</div>
<p>Recent changes to code generation attached closure variable values to
the function object, so now they can be properly visited. Fixed in
0.5.10.1 already.</p>
</li>
<li><p>Python2.6: The complex constants with real or imaginary parts
<code class="docutils literal notranslate"><span class="pre">-0.0</span></code> were collapsed with constants of value <code class="docutils literal notranslate"><span class="pre">0.0</span></code>. This became
more evident after we started to optimize the <code class="docutils literal notranslate"><span class="pre">complex</span></code> built-in.
Fixed in 0.5.10.1 already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">complex</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="nb">complex</span><span class="p">(</span><span class="o">-</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0</span><span class="p">)</span>  <span class="c1"># Could be confused with the above.</span>
</pre></div>
</div>
</li>
<li><p>Complex call helpers could leak references to their arguments. This
was a regression. Fixed in 0.5.10.1 already.</p></li>
<li><p>Parameter variables offered as closure variables were not properly
released, only the cell object was, but not the value. This was a
regression. Fixed in 0.5.10.1 already.</p></li>
<li><p>Compatibility: The exception type given when accessing local variable
values not initialized in a closure taking function, needs to be
<code class="docutils literal notranslate"><span class="pre">NameError</span></code> and <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> for accesses in the providing
function. Fixed in 0.5.10.1 already.</p></li>
<li><p>Fix support for venv on systems, where the system Python uses
symbolic links too. This is the case on at least on Mageia Linux.
Fixed in 0.5.10.2 already.</p></li>
<li><p>Python3.4: On systems where <code class="docutils literal notranslate"><span class="pre">long</span></code> and <code class="docutils literal notranslate"><span class="pre">Py_ssize_t</span></code> are different
(e.g. Win64) iterators could be corrupted if used by uncompiled
Python code. Fixed in 0.5.10.2 already.</p></li>
<li><p>Fix, generator objects didnt release weak references to them
properly. Fixed in 0.5.10.2 already.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">__closure__</span></code> attributes of functions was so far
not supported, and rarely missing. Recent changes made it easy to
expose, so now it was added.</p></li>
<li><p>macOS: A linker warning about deprecated linker option <code class="docutils literal notranslate"><span class="pre">-s</span></code> was
solved by removing the option.</p></li>
<li><p>Compatibility: Nuitka was enforcing that the <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> attribute to
be a string object, and gave a misleading error message. This check
must not be done though, <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> can be any type in Python.</p></li>
</ul>
</section>
<section id="id269">
<h3>Optimization<a class="headerlink" href="#id269" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Variables that need not be shared, because the uses in closure taking
functions were eliminated, no longer use cell objects.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> and <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> statements now both
have actual merging for SSA, allowing for better optimization of code
behind it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">something</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="c1"># Since the above exception handling cannot continue the code flow,</span>
    <span class="c1"># we do not have to invalidate the trace of &quot;a&quot;, and e.g. do not have</span>
    <span class="c1"># to generate code to check if it&#39;s assigned.</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> is used in almost all re-formulations of
complex Python constructs this is improving SSA application widely.
The uses of <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> in user code will no longer degrade
optimization and code generation efficiency as much as they did.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> statement now reduces the scope of tried block
if possible. When no statement raised, already the handling was
removed, but leading and trailing statements that cannot raise, were
not considered.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">something</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span>
</pre></div>
</div>
<p>This is now optimized to.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>

    <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">something</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span>
    <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The impact may on execution speed may be marginal, but it is
definitely going to improve the branch merging to be added later.
Note that <code class="docutils literal notranslate"><span class="pre">c</span></code> can only be optimized, because the exception handler
is aborting, otherwise it would change behaviour.</p>
</li>
<li><p>The creation of code objects for standalone mode and now all code
objects was creating a distinct filename object for every function in
a module, despite them being same content. This was wasteful for
module loading. Now its done only once.</p>
<p>Also, when having multiple modules, the code to build the run time
filename used for code objects, was calling import logic, and doing
lookups to find <code class="docutils literal notranslate"><span class="pre">os.path.join</span></code> again and again. These are now
cached, speeding up the use of many modules as well.</p>
</li>
</ul>
</section>
<section id="id270">
<h3>Cleanups<a class="headerlink" href="#id270" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Nuitka used to have variable usage profiles and still used them to
decide if a global variable is written to, in which case, it stays
away from doing optimization of it to built-in lookups, and later
calls.</p>
<p>The have been replaced by global variable traces, which collect the
traces to a variable across all modules and functions. While this is
now only a replacement, and getting rid of old code, and basing on
SSA, later it will also allow to become more correct and more
optimized.</p>
</li>
<li><p>The standalone now queries its hidden dependencies from a plugin
framework, which will become an interface to Nuitka internals in the
future.</p></li>
</ul>
</section>
<section id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of deep hashing of constants allows us to check if constants
become mutated during the run-time of a program. This allows to
discover corruption should we encounter it.</p></li>
<li><p>The tests of CPython are now also run with Python in debug mode, but
only on Linux, enhancing reference leak coverage.</p></li>
<li><p>The CPython test parts which had been disabled due to reference
cycles involving compiled functions, or usage of <code class="docutils literal notranslate"><span class="pre">__closure__</span></code>
attribute, were reactivated.</p></li>
</ul>
</section>
<section id="id271">
<h3>Organisational<a class="headerlink" href="#id271" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Since Google Code has shutdown, it has been removed from the Nuitka
git mirrors.</p></li>
</ul>
</section>
<section id="id272">
<h3>Summary<a class="headerlink" href="#id272" title="Permalink to this headline"></a></h3>
<p>This release brings exciting new optimization with the focus on the
<code class="docutils literal notranslate"><span class="pre">try</span></code> constructs, now being done more optimal. It is also a
maintenance release, bringing out compatibility improvements, and
important bug fixes, and important usability features for the deployment
of modules and packages, that further expand the use cases of Nuitka.</p>
<p>The git flow had to be applied this time to get out fixes for regression
bug fixes, that the big change of the last release brought, so this is
also to consolidate these and the other corrections into a full release
before making more invasive changes.</p>
<p>The cleanups are leading the way to expanded SSA applied to global
variable and shared variable values as well. Already the built-in detect
is now based on global SSA information, which was an important step
ahead.</p>
</section>
</section>
<section id="nuitka-release-0-5-10">
<h2>Nuitka Release 0.5.10<a class="headerlink" href="#nuitka-release-0-5-10" title="Permalink to this headline"></a></h2>
<p>This release has a focus on code generation optimization. Doing major
changes away from C++-ish code to C-ish code, many constructs are
now faster or got looked at and optimized.</p>
<section id="id273">
<h3>Bug Fixes<a class="headerlink" href="#id273" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Compatibility: The variable name in locals for the iterator provided
to the generator expression should be <code class="docutils literal notranslate"><span class="pre">.0</span></code>, now it is.</p></li>
<li><p>Generators could leak frames until program exit, these are now
properly freed immediately.</p></li>
</ul>
</section>
<section id="id274">
<h3>Optimization<a class="headerlink" href="#id274" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Faster exception save and restore functions that might be in-lined by
the backend C compiler.</p></li>
<li><p>Faster error checks for many operations, where these errors are
expected, e.g. instance attribute lookups.</p></li>
<li><p>Do not create traceback and locals dictionary for frame when
<code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> or <code class="docutils literal notranslate"><span class="pre">GeneratorExit</span></code> are raised. These tracebacks
were wasted, as they were immediately released afterwards.</p></li>
<li><p>Closure variables to functions and parameters of generator functions
are now attached to the function and generator objects.</p></li>
<li><p>The creation of functions with closure taking was accelerated.</p></li>
<li><p>The creation and destruction of generator objects was accelerated.</p></li>
<li><p>The re-formulation for in-place assignments got simplified and got
faster doing so.</p></li>
<li><p>In-place operations of <code class="docutils literal notranslate"><span class="pre">str</span></code> were always copying the string, even
if was not necessary.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">+=</span> <span class="n">b</span>  <span class="c1"># Was not re-using the storage of &quot;a&quot; in case of strings</span>
</pre></div>
</div>
</li>
<li><p>Python2: Additions of <code class="docutils literal notranslate"><span class="pre">int</span></code> for Python2 are now even faster.</p></li>
<li><p>Access to local variable values got slightly accelerated at the
expense of closure variables.</p></li>
<li><p>Added support for optimizing the <code class="docutils literal notranslate"><span class="pre">complex</span></code> built-in.</p></li>
<li><p>Removing unused temporary and local variables as a result of
optimization, these previously still allocated storage.</p></li>
</ul>
</section>
<section id="cleanup">
<h3>Cleanup<a class="headerlink" href="#cleanup" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of C++ classes for variable objects was removed. Closure
variables are now attached as <code class="docutils literal notranslate"><span class="pre">PyCellObject</span></code> to the function
objects owning them.</p></li>
<li><p>The use of C++ context classes for closure taking and generator
parameters has been replaced with attaching values directly to
functions and generator objects.</p></li>
<li><p>The indentation of code template instantiations spanning multiple was
not in all cases proper. We were using emission objects that handle
it new lines in code and mere <code class="docutils literal notranslate"><span class="pre">list</span></code> objects, that dont handle
them in mixed forms. Now only the emission objects are used.</p></li>
<li><p>Some templates with C++ helper functions that had no variables got
changed to be properly formatted templates.</p></li>
<li><p>The internal API for handling of exceptions is now more consistent
and used more efficiently.</p></li>
<li><p>The printing helpers got cleaned up and moved to static code,
removing any need for forward declaration.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT_X</span></code> was removed, it got replaced with
proper <code class="docutils literal notranslate"><span class="pre">Py_XINCREF</span></code> usages. The function was once required before
C-ish lifted the need to do everything in one function call.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got reduced. See above for why that
is any good. The idea is that <code class="docutils literal notranslate"><span class="pre">Py_INCREF</span></code> must be good enough, and
that we want to avoid the C function it was, even if in-lined.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">assertObject</span></code> function that checks if an object is not
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> and has positive reference count, i.e. is sane, got turned
into a preprocessor macro.</p></li>
<li><p>Deep hashes of constant values created in <code class="docutils literal notranslate"><span class="pre">--debug</span></code> mode, which
cover also mutable values, and attempt to depend on actual content.
These are checked at program exit for corruption. This may help
uncover bugs.</p></li>
</ul>
</section>
<section id="id275">
<h3>Organisational<a class="headerlink" href="#id275" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Speedcenter has been enhanced with better graphing and has more
benchmarks now. More work will be needed to make it useful.</p></li>
<li><p>Updates to the Developer Manual, reflecting the current near finished
state of C-ish code generation.</p></li>
</ul>
</section>
<section id="id276">
<h3>Tests<a class="headerlink" href="#id276" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New reference count tests to cover generator expressions and their
usage got added.</p></li>
<li><p>Many new construct based tests got added, these will be used for
performance graphing, and serve as micro benchmarks now.</p></li>
<li><p>Again, more basic tests are directly executable with Python3.</p></li>
</ul>
</section>
<section id="id277">
<h3>Summary<a class="headerlink" href="#id277" title="Permalink to this headline"></a></h3>
<p>This is the next evolution of C-ish coming to pass. The use of C++ has
for all practical purposes vanished. It will remain an ongoing activity
to clear that up and become real C. The C++ classes were a huge road
block to many things, that now will become simpler. One example of these
were in-place operations, which now can be dealt with easily.</p>
<p>Also, lots of polishing and tweaking was done while adding construct
benchmarks that were made to check the impact of these changes. Here,
generators probably stand out the most, as some of the missed
optimization got revealed and then addressed.</p>
<p>Their speed increases will be visible to some programs that depend a lot
on generators.</p>
<p>This release is clearly major in that the most important issues got
addressed, future releases will provide more tuning and completeness,
but structurally the C-ish migration has succeeded, and now we can
reap the benefits in the coming releases. More work will be needed for
all in-place operations to be accelerated.</p>
<p>More work will be needed to complete this, but its good that this is
coming to an end, so we can focus on SSA based optimization for the
major gains to be had.</p>
</section>
</section>
<section id="nuitka-release-0-5-9">
<h2>Nuitka Release 0.5.9<a class="headerlink" href="#nuitka-release-0-5-9" title="Permalink to this headline"></a></h2>
<p>This release is mostly a maintenance release, bringing out minor
compatibility improvements, and some standalone improvements. Also new
options to control the recursion into modules are added.</p>
<section id="id278">
<h3>Bug Fixes<a class="headerlink" href="#id278" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compatibility: Checks for iterators were using <code class="docutils literal notranslate"><span class="pre">PyIter_Check</span></code> which
is buggy when running outside of Python core, because its comparing
pointers we dont see. Replaced with <code class="docutils literal notranslate"><span class="pre">HAS_ITERNEXT</span></code> helper which
compares against the pointer as extracting for a real non-iterator
object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Iterable</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">consumed</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Iterable</span><span class="p">()</span>


<span class="nb">iter</span><span class="p">(</span><span class="n">Iterable</span><span class="p">())</span>  <span class="c1"># This is suppose to raise, but didn&#39;t with Nuitka</span>
</pre></div>
</div>
</li>
<li><p>Python3: Errors when creating class dictionaries raised by the
<code class="docutils literal notranslate"><span class="pre">__prepare__</span></code> dictionary (e.g. <code class="docutils literal notranslate"><span class="pre">enum</span></code> classes with wrong
identifiers) were not immediately raised, but only by the <code class="docutils literal notranslate"><span class="pre">type</span></code>
call.</p>
<p>This was not observable, but might have caused issues potentially.</p>
</li>
<li><p>Standalone macOS: Shared libraries and extension modules didnt have
their DLL load paths updated, but only the main binary. This is not
sufficient for more complex programs.</p></li>
<li><p>Standalone Linux: Shared libraries copied into the <code class="docutils literal notranslate"><span class="pre">.dist</span></code> folder
were read-only and executing <code class="docutils literal notranslate"><span class="pre">chrpath</span></code> could potentially then fail.
This has not been observed, but is a conclusion of macOS fix.</p></li>
<li><p>Standalone: When freezing standard library, the path of Nuitka and
the current directory remained in the search path, which could lead
to looking at the wrong files.</p></li>
</ul>
</section>
<section id="id279">
<h3>Organisational<a class="headerlink" href="#id279" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">getattr</span></code> built-in is now optimized for compile time constants
if possible, even in the presence of a <code class="docutils literal notranslate"><span class="pre">default</span></code> argument. This is
more a cleanup than actually useful yet.</p></li>
<li><p>The calling of <code class="docutils literal notranslate"><span class="pre">PyCFunction</span></code> from normal Python extension modules
got accelerated, especially for the no or single argument cases where
Nuitka now avoids building the tuple.</p></li>
</ul>
</section>
<section id="id280">
<h3>New Features<a class="headerlink" href="#id280" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added the option <code class="docutils literal notranslate"><span class="pre">--recurse-pattern</span></code> to include modules per
filename, which for Python3 is the only way to not have them in a
package automatically.</p></li>
<li><p>Added the option <code class="docutils literal notranslate"><span class="pre">--generate-c++-only</span></code> to only generate the C++
source code without starting the compiler.</p>
<p>Mostly used for debugging and testing coverage. In the later case we
do not want the C++ compiler to create any binary, but only to
measure what would have been used.</p>
</li>
</ul>
</section>
<section id="id281">
<h3>Organisational<a class="headerlink" href="#id281" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Renamed the debug option <code class="docutils literal notranslate"><span class="pre">--c++-only</span></code> to <code class="docutils literal notranslate"><span class="pre">--recompile-c++-only</span></code>
to make its purpose more clear and there now is
<code class="docutils literal notranslate"><span class="pre">--generate-c++-only</span></code> too.</p></li>
</ul>
</section>
<section id="id282">
<h3>Tests<a class="headerlink" href="#id282" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for taking coverage of Nuitka in a test run on a given
input file.</p></li>
<li><p>Added support for taking coverage for all Nuitka test runners,
migrating them all to common code for searching.</p></li>
<li><p>Added uniform way of reporting skipped tests, not generally used yet.</p></li>
</ul>
</section>
<section id="id283">
<h3>Summary<a class="headerlink" href="#id283" title="Permalink to this headline"></a></h3>
<p>This release marks progress towards having coverage testing. Recent
releases had made it clear that not all code of Nuitka is actually used
at least once in our release tests. We aim at identifying these.</p>
<p>Another direction was to catch cases, where Nuitka leaks exceptions or
is subject to leaked exceptions, which revealed previously unnoticed
errors.</p>
<p>Important changes have been delayed, e.g. the closure variables will not
yet use C++ objects to share storage, but proper <code class="docutils literal notranslate"><span class="pre">PyCellObject</span></code> for
improved compatibility, and to approach a more C-ish status. These is
unfinished code that does this. And the forward propagation of values is
not enabled yet again either.</p>
<p>So this is an interim step to get the bug fixes and improvements
accumulated out. Expect more actual changes in the next releases.</p>
</section>
</section>
<section id="nuitka-release-0-5-8">
<h2>Nuitka Release 0.5.8<a class="headerlink" href="#nuitka-release-0-5-8" title="Permalink to this headline"></a></h2>
<p>This release has mainly a focus on cleanups and compatibility
improvements. It also advances standalone support, and a few
optimization improvements, but it mostly is a maintenance release,
attacking long standing issues.</p>
<section id="id284">
<h3>Bug Fixes<a class="headerlink" href="#id284" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compatibility Windows macOS: Fix importing on case insensitive
systems.</p>
<p>It was not always working properly, if there was both a package
<code class="docutils literal notranslate"><span class="pre">Something</span></code> and <code class="docutils literal notranslate"><span class="pre">something</span></code>, by merit of having files
<code class="docutils literal notranslate"><span class="pre">Something/__init__.py</span></code> and <code class="docutils literal notranslate"><span class="pre">something.py</span></code>.</p>
</li>
<li><p>Standalone: The search path was preferring system directories and
therefore could have conflicting DLLs.</p></li>
<li><p>Fix, the optimization of <code class="docutils literal notranslate"><span class="pre">getattr</span></code> with predictable result was
crashing the compilation. This was a regression, fixed in 0.5.7.1
already.</p></li>
<li><p>Compatibility: The name mangling inside classes also needs to be
applied to global variables.</p></li>
<li><p>Fix, proving <code class="docutils literal notranslate"><span class="pre">clang++</span></code> for <code class="docutils literal notranslate"><span class="pre">CXX</span></code> was mistakingly thinking of it
as a <code class="docutils literal notranslate"><span class="pre">g++</span></code> and making version checks on it.</p></li>
<li><p>Python3: Declaring <code class="docutils literal notranslate"><span class="pre">__class__</span></code> global is now a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>
before Python3.4.</p></li>
<li><p>Standalone Python3: Making use of module state in extension modules
was not working properly.</p></li>
</ul>
</section>
<section id="id285">
<h3>New Features<a class="headerlink" href="#id285" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The filenames of source files as found in the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute
are now made relative in standalone mode.</p>
<p>This should make it more apparent if things outside of the
distribution folder are used, at the cost of tracebacks. Expect the
default ability to copy the source code along in an upcoming release.</p>
</li>
<li><p>Added experimental standalone mode support for PyQt5. At least
headless mode should be working, plugins (needed for anything
graphical) are not yet copied and will need more work.</p></li>
</ul>
</section>
<section id="id286">
<h3>Cleanup<a class="headerlink" href="#id286" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>No longer using <code class="docutils literal notranslate"><span class="pre">imp.find_module</span></code> anymore. To solve the casing
issues we needed to make our own module finding implementation
finally.</p></li>
<li><p>The name mangling was handled during code generation only. Moved to
tree building instead.</p></li>
<li><p>More code generation cleanups. The compatible line numbers are now
attached during tree building and therefore better preserved, as well
as that code no longer polluting code generation as much.</p></li>
</ul>
</section>
<section id="id287">
<h3>Organisational<a class="headerlink" href="#id287" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>No more packages for openSUSE 12.1/12.2/12.3 and Fedora 17/18/19 as
requested by the openSUSE Build Service.</p></li>
<li><p>Added RPM packages for Fedora 21 and CentOS 7 on openSUSE Build
Service.</p></li>
</ul>
</section>
<section id="id288">
<h3>Tests<a class="headerlink" href="#id288" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Lots of test refinements for the CPython test suites to be run
continuously in Buildbot for both Windows and Linux.</p></li>
</ul>
</section>
<section id="id289">
<h3>Summary<a class="headerlink" href="#id289" title="Permalink to this headline"></a></h3>
<p>This release brings about two major changes, each with the risk to break
things.</p>
<p>One is that we finally started to have our own import logic, which has
the risk to cause breakage, but apparently currently rather improved
compatibility. The case issues were not fixable with standard library
code.</p>
<p>The second one is that the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attributes for standalone mode
is now no longer pointing to the original install and therefore will
expose missing stuff sooner. This will have to be followed up with code
to scan for missing data files later on.</p>
<p>For SSA based optimization, there are cleanups in here, esp. the one
removing the name mangling, allowing to remove special code for class
variables. This makes the SSA tree more reliable. Hope is that the big
step (forward propagation through variables) can be made in one of the
next releases.</p>
</section>
</section>
<section id="nuitka-release-0-5-7">
<h2>Nuitka Release 0.5.7<a class="headerlink" href="#nuitka-release-0-5-7" title="Permalink to this headline"></a></h2>
<p>This release is brings a newly supported platform, bug fixes, and again
lots of cleanups.</p>
<section id="id290">
<h3>Bug Fixes<a class="headerlink" href="#id290" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fix, creation of dictionary and set literals with non-hashable
indexes did not raise an exception.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{[]:</span> <span class="kc">None</span><span class="p">}</span>  <span class="c1"># This is now a TypeError</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id291">
<h3>Optimization<a class="headerlink" href="#id291" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Calls to the <code class="docutils literal notranslate"><span class="pre">dict</span></code> built-in with only keyword arguments are now
optimized to mere dictionary creations. This is new for the case of
non-constant arguments only of course.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># equivalent to</span>
<span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Slice <code class="docutils literal notranslate"><span class="pre">del</span></code> with indexable arguments are now using optimized code
that avoids Python objects too. This was already done for slice
look-ups.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> built-in.</p></li>
</ul>
</section>
<section id="id292">
<h3>Organisational<a class="headerlink" href="#id292" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for OpenBSD with fiber implementation from library, as
it has no context support.</p></li>
</ul>
</section>
<section id="id293">
<h3>Cleanups<a class="headerlink" href="#id293" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved slicing solutions for Python3 to the re-formulation stage. So
far the slice nodes were used, but only at code generation time,
there was made a distinction between Python2 and Python3 for them.
Now these nodes are purely Python2 and slice objects are used
universally for Python3.</p></li>
</ul>
</section>
<section id="id294">
<h3>Tests<a class="headerlink" href="#id294" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The test runners now have common code to scan for the first file to
compile, an implementation of the <code class="docutils literal notranslate"><span class="pre">search</span></code> mode. This will allow to
introduce the ability to search for pattern matches, etc.</p></li>
<li><p>More tests are directly executable with Python3.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">recurse_none</span></code> mode to test comparison, making using extra
options for that purpose unnecessary.</p></li>
</ul>
</section>
<section id="id295">
<h3>Summary<a class="headerlink" href="#id295" title="Permalink to this headline"></a></h3>
<p>This solves long standing issues with slicing and subscript not being
properly distinguished in the Nuitka code. It also contains major bug
fixes that really problematic. Due to the involved nature of these fixes
they are made in this new release.</p>
</section>
</section>
<section id="nuitka-release-0-5-6">
<h2>Nuitka Release 0.5.6<a class="headerlink" href="#nuitka-release-0-5-6" title="Permalink to this headline"></a></h2>
<p>This release brings bug fixes, important new optimization, newly
supported platforms, and important compatibility improvements. Progress
on all fronts.</p>
<section id="id296">
<h3>Bug Fixes<a class="headerlink" href="#id296" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Closure taking of global variables in member functions of classes
that had a class variable of the same name was binding to the class
variable as opposed to the module variable.</p></li>
<li><p>Overwriting compiled functions <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> attribute more than once
could corrupt the old value, leading to crashes. Fixed in 0.5.5.2
already.</p></li>
<li><p>Compatibility Python2: The <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement <code class="docutils literal notranslate"><span class="pre">execfile</span></code> were
changing <code class="docutils literal notranslate"><span class="pre">locals()</span></code> was given as an argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">function</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">exec</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span>  <span class="c1"># Cannot change local &quot;a&quot;.</span>
    <span class="n">exec</span> <span class="n">code</span> <span class="ow">in</span> <span class="kc">None</span>  <span class="c1"># Can change local &quot;a&quot;</span>
    <span class="n">exec</span> <span class="n">code</span>
</pre></div>
</div>
<p>Previously Nuitka treated all 3 variants the same.</p>
</li>
<li><p>Compatibility: Empty branches with a condition were reduced to only
the condition, but they need in fact to also check the truth value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">condition</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="c1"># must be treated as</span>
<span class="nb">bool</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
<span class="c1"># and not (bug)</span>
<span class="n">condition</span>
</pre></div>
</div>
</li>
<li><p>Detection of Windows virtualenv was not working properly. Fixed in
0.5.5.2 already.</p></li>
<li><p>Large enough constants structures are now unstreamed via <code class="docutils literal notranslate"><span class="pre">marshal</span></code>
module, avoiding large codes being generated with no point. Fixed in
0.5.5.2 already.</p></li>
<li><p>Windows: Pressing CTRL-C gave two stack traces, one from the
re-execution of Nuitka which was rather pointless. Fixed in 0.5.5.1
already.</p></li>
<li><p>Windows: Searching for virtualenv environments didnt terminate in
all cases. Fixed in 0.5.5.1 already.</p></li>
<li><p>During installation from PyPI with Python3 versions, there were
errors given for the Python2 only scons files. Fixed in 0.5.5.3
already.</p></li>
<li><p>Fix, the arguments of <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> expressions could be leaked.</p></li>
<li><p>Fix, closure taking of a class variable could have in a sub class
where the module variable was meant.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="n">var</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">class</span> <span class="nc">D</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
            <span class="c1"># was C.var, now correctly addressed top level var</span>
            <span class="k">return</span> <span class="n">var</span>
</pre></div>
</div>
</li>
<li><p>Fix, setting <code class="docutils literal notranslate"><span class="pre">CXX</span></code> environment variable because the installed gcc
has too low version, wasnt affecting the version check at all.</p></li>
<li><p>Fix, on Debian/Ubuntu with <code class="docutils literal notranslate"><span class="pre">hardening-wrapper</span></code> installed the
version check was always failing, because these report a shortened
version number to Scons.</p></li>
</ul>
</section>
<section id="id297">
<h3>Optimization<a class="headerlink" href="#id297" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Local variables that must be assigned also have no side effects,
making use of SSA. This allows for a host of optimization to be
applied to them as well, often yielding simpler access/assign code,
and discovering in more cases that frames are not necessary.</p></li>
<li><p>Micro optimization to <code class="docutils literal notranslate"><span class="pre">dict</span></code> built-in for simpler code generation.</p></li>
</ul>
</section>
<section id="id298">
<h3>Organisational<a class="headerlink" href="#id298" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for ARM hard float architecture.</p></li>
<li><p>Added package for Ubuntu 14.10 for download.</p></li>
<li><p>Added package for openSUSE 13.2 for download.</p></li>
<li><p>Donations were used to buy a Cubox-i4 Pro. It got Debian Jessie
installed on it, and will be used to run an even larger amount of
tests.</p></li>
<li><p>Made it more clear in the user documentation that the <code class="docutils literal notranslate"><span class="pre">.exe</span></code> suffix
is used for all platforms, and why.</p></li>
<li><p>Generally updated information in User Manual and Developer Manual
about the optimization status.</p></li>
<li><p>Using Nikola 7.1 with external filters instead of our own, outdated
branch for the web site.</p></li>
</ul>
</section>
<section id="id299">
<h3>Cleanups<a class="headerlink" href="#id299" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>PyLint clean for the first time ever. We now have a Buildbot driven
test that this stays that way.</p></li>
<li><p>Massive indentation cleanup of keyword argument calls. We have a rule
to align the keywords, but as this was done manually, it could easily
get out of touch. Now with a autoformat tool based on RedBaron,
its correct. Also, spacing around arguments is now automatically
corrected. More to come.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">exec</span></code> statements, the coping back to local variables is now an
explicit node in the tree, leader to cleaner code generation, as it
now uses normal variable assignment code generation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">MaybeLocalVariables</span></code> became explicit about which variable they
might be, and contribute to its SSA trace as well, which was
incomplete before.</p></li>
<li><p>Removed some cases of code duplication that were marked as TODO
items. This often resulted in cleanups.</p></li>
<li><p>Do not use <code class="docutils literal notranslate"><span class="pre">replaceWith</span></code> on child nodes, that potentially were
re-used during their computation.</p></li>
</ul>
</section>
<section id="id300">
<h3>Summary<a class="headerlink" href="#id300" title="Permalink to this headline"></a></h3>
<p>The release is mainly the result of consolidation work. While the
previous release contained many important enhancements, this is another
important step towards full SSA, closing one loop whole (class variables
and <code class="docutils literal notranslate"><span class="pre">exec</span></code> functions), as well as applying it to local variables,
largely extending its use.</p>
<p>The amount of cleanups is tremendous, in huge part due to infrastructure
problems that prevented release repeatedly. This reduces the
technological debt very much.</p>
<p>More importantly, it would appear that now eliminating local and
temporary variables that are not necessary is only a small step away.
But as usual, while this may be easy to implement now, it will uncover
more bugs in existing code, that we need to address before we continue.</p>
</section>
</section>
<section id="nuitka-release-0-5-5">
<h2>Nuitka Release 0.5.5<a class="headerlink" href="#nuitka-release-0-5-5" title="Permalink to this headline"></a></h2>
<p>This release is finally making full use of SSA analysis knowledge for
code generation, leading to many enhancements over previous releases.</p>
<p>It also adds support for Python3.4, which has been longer in the making,
due to many rather subtle issues. In fact, even more work will be needed
to fully solve remaining minor issues, but these should affect no real
code.</p>
<p>And then there is much improved support for using standalone mode
together with virtualenv. This combination was not previously supported,
but should work now.</p>
<section id="id301">
<h3>New Features<a class="headerlink" href="#id301" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added support for Python3.4</p>
<p>This means support for <code class="docutils literal notranslate"><span class="pre">clear</span></code> method of frames to close
generators, dynamic <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code>, affected by <code class="docutils literal notranslate"><span class="pre">global</span></code>
statements, tuples as <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> arguments, improved error
messages, additional checks, and many more detail changes.</p>
</li>
</ul>
</section>
<section id="id302">
<h3>Optimization<a class="headerlink" href="#id302" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Using SSA knowledge, local variable assignments now no longer need to
check if they need to release previous values, they know definitely
for the most cases.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># This used to check if old value of &quot;a&quot; needs a release</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Using SSA knowledge, local variable references now no longer need to
check for raising exceptions, let alone produce exceptions for cases,
where that cannot be.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span>  <span class="c1"># This used to check if &quot;a&quot; is assigned</span>
</pre></div>
</div>
</li>
<li><p>Using SSA knowledge, local variable references now are known if they
can raise the <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> exception or not. This allows to
eliminate frame usages for many cases. Including the above example.</p></li>
<li><p>Using less memory for keeping variable information.</p></li>
<li><p>Also using less memory for constant nodes.</p></li>
</ul>
</section>
<section id="id303">
<h3>Bug Fixes<a class="headerlink" href="#id303" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The standalone freezing code was reading Python source as UTF-8 and
not using the code that handles the Python encoding properly. On some
platforms there are files in standard library that are not encoded
like that.</p></li>
<li><p>The fiber implementation for Linux amd64 was not working with glibc
from RHEL 5. Fixed to use now multiple <code class="docutils literal notranslate"><span class="pre">int</span></code> to pass pointers as
necessary. Also use <code class="docutils literal notranslate"><span class="pre">uintptr_t</span></code> instead of <code class="docutils literal notranslate"><span class="pre">intprt_t</span></code> to
transport pointers, which may be more optimal.</p></li>
<li><p>Line numbers for exceptions were corrupted by <code class="docutils literal notranslate"><span class="pre">with</span></code> statements due
to setting line numbers even for statements marked as internal.</p></li>
<li><p>Partial support for <code class="docutils literal notranslate"><span class="pre">win32com</span></code> by adding support for its hidden
<code class="docutils literal notranslate"><span class="pre">__path__</span></code> change.</p></li>
<li><p>Python3: Finally figured out proper chaining of exceptions, given
proper context messages for exception raised during the handling of
exceptions.</p></li>
<li><p>Corrected C++ memory leak for each closure variable taken, each time
a function object was created.</p></li>
<li><p>Python3: Raising exceptions with tracebacks already attached, wasnt
using always them, but producing new ones instead.</p></li>
<li><p>Some constants could cause errors, as they cannot be handled with the
<code class="docutils literal notranslate"><span class="pre">marshal</span></code> module as expected, e.g. <code class="docutils literal notranslate"><span class="pre">(int,)</span></code>.</p></li>
<li><p>Standalone: Make sure to propagate <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> to the Python
instance used to check for standard library import dependencies. This
is important for virtualenv environments, which need <code class="docutils literal notranslate"><span class="pre">site.py</span></code> to
set the path, which is not executed in that mode.</p></li>
<li><p>Windows: Added support for different path layout there, so using
virtualenv should work there too.</p></li>
<li><p>The code object flag optimized (fast locals as opposed to locals
dictionary) for functions was set wrongly to value for the parent,
but for frames inside it, one with the correct value. This lead to
more code objects than necessary and false <code class="docutils literal notranslate"><span class="pre">co_flags</span></code> values
attached to the function.</p></li>
<li><p>Options passed to <code class="docutils literal notranslate"><span class="pre">nuitka-python</span></code> could get lost.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nuitka-python program.py argument1 argument2 ...
</pre></div>
</div>
<p>The above is supposed to compile program.py, execute it immediately
and pass the arguments to it. But when Nuitka decides to restart
itself, it would forget these options. It does so to e.g. disable
hash randomization as it would affect code generation.</p>
</li>
<li><p>Raising tuples exception as exceptions was not compatible (Python2)
or reference leaking (Python3).</p></li>
</ul>
</section>
<section id="id304">
<h3>Tests<a class="headerlink" href="#id304" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Running <code class="docutils literal notranslate"><span class="pre">2to3</span></code> is now avoided for tests that are already running on
both Python2 and Python3.</p></li>
<li><p>Made XML based optimization tests work with Python3 too. Previously
these were only working on Python2.</p></li>
<li><p>Added support for ignoring messages that come from linking against
self compiled Pythons.</p></li>
<li><p>Added test case for threaded generators that tortures the fiber layer
a bit and exposed issues on RHEL 5.</p></li>
<li><p>Made reference count test of compiled functions generic. No more code
duplication, and automatic detection of shared stuff. Also a more
clear interface for disabling test cases.</p></li>
<li><p>Added Python2 specific reference counting tests, so the other cases
can be executed with Python3 directly, making debugging them less
tedious.</p></li>
</ul>
</section>
<section id="id305">
<h3>Cleanups<a class="headerlink" href="#id305" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Really important removal of variable references. They didnt solve
any problem anymore, but their complexity was not helpful either.
This allowed to make SSA usable finally, and removed a lot of code.</p></li>
<li><p>Removed special code generation for parameter variables, and their
dedicated classes, no more needed, as every variable access code is
now optimized like this.</p></li>
<li><p>Stop using C++ class methods at all. Now only the destructor of local
variables is actually supposed to do anything, and their are no
methods anymore. The unused <code class="docutils literal notranslate"><span class="pre">var_name</span></code> got removed,
<code class="docutils literal notranslate"><span class="pre">setVariableValue</span></code> is now done manually.</p></li>
<li><p>Moved assertions for the fiber layer to a common place in the header,
so they are executed on all platforms in debug mode.</p></li>
<li><p>As usual, also a bunch of cleanups for PyLint were applied.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">locals</span></code> built-in code now uses code generation for accessing
local variable values instead having its own stuff.</p></li>
</ul>
</section>
<section id="id306">
<h3>Organisational<a class="headerlink" href="#id306" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The Python version 3.4 is now officially supported. There are a few
problems open, that will be addressed in future releases, none of
which will affect normal people though.</p></li>
<li><p>Major cleanup of Nuitka options.</p>
<ul>
<li><p>Windows specific stuff is now in a dedicated option group. This
includes options for icon, disabling console, etc.</p></li>
<li><p>There is now a dedicated group for controlling backend compiler
choices and options.</p></li>
</ul>
</li>
<li><p>Also pickup <code class="docutils literal notranslate"><span class="pre">g++44</span></code> automatically, which makes using Nuitka on
CentOS5 more automatic.</p></li>
</ul>
</section>
<section id="id307">
<h3>Summary<a class="headerlink" href="#id307" title="Permalink to this headline"></a></h3>
<p>This release represents a very important step ahead. Using SSA for real
stuff will allow us to build the trust necessary to take the next steps.
Using the SSA information, we could start implementing more
optimizations.</p>
</section>
</section>
<section id="nuitka-release-0-5-4">
<h2>Nuitka Release 0.5.4<a class="headerlink" href="#nuitka-release-0-5-4" title="Permalink to this headline"></a></h2>
<p>This release is aiming at preparatory changes to enable optimization
based on SSA analysis, introducing a variable registry, so that
variables no longer trace their references to themselves.</p>
<p>Otherwise, MinGW64 support has been added, and lots of bug fixes were
made to improve the compatibility.</p>
<section id="id308">
<h3>Optimization<a class="headerlink" href="#id308" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Using new variable registry, now properly detecting actual need for
sharing variables. Optimization may discover that it is unnecessary
to share a variable, and then it no longer is. This also allows
<code class="docutils literal notranslate"><span class="pre">--debug</span></code> without it reporting unused variable warnings on Python3.</p></li>
<li><p>Scons startup has been accelerated, removing scans for unused tools,
and avoiding making more than one gcc version check.</p></li>
</ul>
</section>
<section id="id309">
<h3>Bug Fixes<a class="headerlink" href="#id309" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Compatibility: In case of unknown encodings, Nuitka was not giving
the name of the problematic encoding in the error message. Fixed in
0.5.3.3 already.</p></li>
<li><p>Submodules with the same name as built-in modules were wrongly
shadowed. Fixed in 0.5.3.2 already.</p></li>
<li><p>Python3: Added implementations of <code class="docutils literal notranslate"><span class="pre">is_package</span></code> to the meta path
based loader.</p></li>
<li><p>Python3.4: Added <code class="docutils literal notranslate"><span class="pre">find_spec</span></code> implementation to the meta path based
loader for increased compatibility.</p></li>
<li><p>Python3: Corrections for <code class="docutils literal notranslate"><span class="pre">--debug</span></code> to work with Python3 and MSVC
compiler more often.</p></li>
<li><p>Fixed crash with <code class="docutils literal notranslate"><span class="pre">--show-scons</span></code> when no compiler was found. Fixed
in 0.5.3.5 already.</p></li>
<li><p>Standalone: Need to blacklist <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code> from standard library as
well. Fixed in 0.5.3.4 already.</p></li>
<li><p>Python3: Adapted to changes in <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> on newer Python
releases, there is now a <code class="docutils literal notranslate"><span class="pre">msg</span></code> that can override <code class="docutils literal notranslate"><span class="pre">reason</span></code>.</p></li>
<li><p>Standalone Windows: Preserve <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> as it might be used
to fork binaries.</p></li>
<li><p>Windows: The caching of Scons was not arch specific, and files could
be used again, even if changing the arch from <code class="docutils literal notranslate"><span class="pre">x86</span></code> to <code class="docutils literal notranslate"><span class="pre">x86_64</span></code>
or back.</p></li>
<li><p>Windows: On 32 bit Python it can happen that with large number of
generators running concurrently (&gt;1500), one cannot be started
anymore. Raising an <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code> now.</p></li>
</ul>
</section>
<section id="id310">
<h3>Organisational<a class="headerlink" href="#id310" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for MinGW64. Currently needs to be run with <code class="docutils literal notranslate"><span class="pre">PATH</span></code>
environment properly set up.</p></li>
<li><p>Updated internal version of Scons to 2.3.2, which breaks support for
VS 2008, but adds support for VS 2013 and VS 2012. The VS 2013 is now
the recommended compiler.</p></li>
<li><p>Added RPM package and repository for RHEL 7.</p></li>
<li><p>The output of <code class="docutils literal notranslate"><span class="pre">--show-scons</span></code> now includes the used compiler,
including the MSVC version.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--msvc</span></code> to select the MSVC compiler version to use,
which overrides automatic selection of the latest.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">-python-flag=no_warnings</span></code> to disable user and
deprecation warnings at run time.</p></li>
<li><p>Repository for Ubuntu Raring was removed, no more supported by
Ubuntu.</p></li>
</ul>
</section>
<section id="id311">
<h3>Cleanups<a class="headerlink" href="#id311" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Made technical and logical sharing decisions separate functions and
implement them in a dedicated variable registry.</p></li>
<li><p>The Scons file has seen a major cleanup.</p></li>
</ul>
</section>
<section id="id312">
<h3>Summary<a class="headerlink" href="#id312" title="Permalink to this headline"></a></h3>
<p>This release is mostly a maintenance release. The Scons integrations has
been heavily visited, as has been Python3 and esp. Python3.4
compatibility, and results from the now possible debug test runs.</p>
<p>Standalone should be even more practical now, and MinGW64 is an option
for those cases, where MSVC is too slow.</p>
</section>
</section>
<section id="nuitka-release-0-5-3">
<h2>Nuitka Release 0.5.3<a class="headerlink" href="#nuitka-release-0-5-3" title="Permalink to this headline"></a></h2>
<p>This release is mostly a follow up, resolving points that have become
possible to resolve after completing the C-ish evolution of Nuitka. So
this is more of a service release.</p>
<section id="id313">
<h3>New Features<a class="headerlink" href="#id313" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Improved mode <code class="docutils literal notranslate"><span class="pre">--improved</span></code> now sets error lines more properly than
CPython does in many cases.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-python-flag=-S</span></code> mode now preserves <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> and
therefore became usable with virtualenv.</p></li>
</ul>
</section>
<section id="id314">
<h3>Optimization<a class="headerlink" href="#id314" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Line numbers of frames no longer get set unless an exception occurs,
speeding up the normal path of execution.</p></li>
<li><p>For standalone mode, using <code class="docutils literal notranslate"><span class="pre">--python-flag-S</span></code> is now always possible
and yields less module usage, resulting in smaller binaries and
faster compilation.</p></li>
</ul>
</section>
<section id="id315">
<h3>Bug Fixes<a class="headerlink" href="#id315" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Corrected an issue for frames being optimized away where in fact they
are still necessary. Fixed in 0.5.2.1 already.</p></li>
<li><p>Fixed handling of exception tests as side effects. These could be
remainders of optimization, but didnt have code generation. Fixed in
0.5.2.1 already.</p></li>
<li><p>Previously Nuitka only ever used the statement line as the line
number for all the expression, even if it spawned multiple lines.
Usually nothing important, and often even more correct, but sometimes
not. Now the line number is most often the same as CPython in full
compatibility mode, or better, see above.</p></li>
<li><p>Python3.4: Standalone mode for Windows is working now.</p></li>
<li><p>Standalone: Undo changes to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> or <code class="docutils literal notranslate"><span class="pre">PYTHONHOME</span></code> allowing
potentially forked CPython programs to run properly.</p></li>
<li><p>Standalone: Fixed import error when using PyQt and Python3.</p></li>
</ul>
</section>
<section id="new-tests">
<h3>New Tests<a class="headerlink" href="#new-tests" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>For our testing approach, the improved line number handling means we
can undo lots of changes that are no more necessary.</p></li>
<li><p>The compile library test has been extended to cover a third potential
location where modules may live, covering the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> module
as a result.</p></li>
</ul>
</section>
<section id="id316">
<h3>Cleanups<a class="headerlink" href="#id316" title="Permalink to this headline"></a></h3>
<ul>
<li><p>In Python2, the list contractions used to be re-formulated to be
function calls that have no frame stack entry of their own right.
This required some special handling, in e.g. closure taking, and
determining variable sharing across functions.</p>
<p>This now got cleaned up to be properly in-lined in a
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> expression.</p>
</li>
<li><p>The line number handling got simplified by pushing it into error
exits only, removing the need to micro manage a line number stack
which got removed.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">intptr_t</span></code> over <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code> to store fiber code pointers,
increasing portability.</p></li>
</ul>
</section>
<section id="id317">
<h3>Organisational<a class="headerlink" href="#id317" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Providing own Debian/Ubuntu repositories for all relevant
distributions.</p></li>
<li><p>Windows MSI files for Python 3.4 were added.</p></li>
<li><p>Hosting of the web site was moved to metal server with more RAM and
performance.</p></li>
</ul>
</section>
<section id="id318">
<h3>Summary<a class="headerlink" href="#id318" title="Permalink to this headline"></a></h3>
<p>This release brings about structural simplification that is both a
follow-up to C-ish, as well as results from a failed attempt to remove
static variable references and be fully SSA based. It incorporates
changes aimed at making this next step in Nuitka evolution smaller.</p>
</section>
</section>
<section id="nuitka-release-0-5-2">
<h2>Nuitka Release 0.5.2<a class="headerlink" href="#nuitka-release-0-5-2" title="Permalink to this headline"></a></h2>
<p>This is a major release, with huge changes to code generation that
improve performance in a significant way. It is a the result of a long
development period, and therefore contains a huge jump ahead.</p>
<section id="id319">
<h3>New Features<a class="headerlink" href="#id319" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added experimental support for Python 3.4, which is still work in
progress.</p></li>
<li><p>Added support for virtualenv on macOS.</p></li>
<li><p>Added support for virtualenv on Windows.</p></li>
<li><p>Added support for macOS X standalone mode.</p></li>
<li><p>The code generation uses no header files anymore, therefore adding a
module doesnt invalidate all compiled object files from caches
anymore.</p></li>
<li><p>Constants code creation is now distributed, and constants referenced
in a module are declared locally. This means that changing a module
doesnt affect the validity of other modules object files from caches
anymore.</p></li>
</ul>
</section>
<section id="id320">
<h3>Optimization<a class="headerlink" href="#id320" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>C-ish code generation uses less C++ classes and generates more C-like
code. Explicit temporary objects are now used for statement temporary
variables.</p></li>
<li><p>The constants creation code is no more in a single file, but
distributed across all modules, with only shared values created in a
single file. This means improved scalability. There are remaining bad
modules, but more often, standalone mode is now fast.</p></li>
<li><p>Exception handling no longer uses C++ exception, therefore has become
much faster.</p></li>
<li><p>Loops that only break are eliminated.</p></li>
<li><p>Dead code after loops that do not break is now removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> and <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> constructs are now
eliminated, where that is possible.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> part of the re-formulation for <code class="docutils literal notranslate"><span class="pre">print</span></code>
statements is now only done when printing to a file, avoiding useless
node tree bloat.</p></li>
<li><p>Tuples and lists are now generated with faster code.</p></li>
<li><p>Locals and global variables are now access with more direct code.</p></li>
<li><p>Added support for the anonymous <code class="docutils literal notranslate"><span class="pre">code</span></code> type built-in.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">compile</span></code> built-in.</p></li>
<li><p>Generators that statically return immediately, e.g. due to
optimization results, are no longer using frame objects.</p></li>
<li><p>The complex call helpers use no pseudo frames anymore. Previous code
generation required to have them, but with C-ish code generation that
is no more necessary, speeding up those kind of calls.</p></li>
<li><p>Modules with only code that cannot raise, need not have a frame
created for them. This avoids useless code size bloat because of
them. Previously the frame stack entry was mandatory.</p></li>
</ul>
</section>
<section id="id321">
<h3>Bug Fixes<a class="headerlink" href="#id321" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Windows: The resource files were cached by Scons and re-used, even if
the input changed. The could lead to corrupted incremental builds.
Fixed in 0.5.1.1 already.</p></li>
<li><p>Windows: For functions with too many local variables, the MSVC failed
with an error C1026: parser stack overflow, program too complex.
The rewritten code generation doesnt burden the compiler as much.</p></li>
<li><p>Compatibility: The timing deletion of nested call arguments was
different from C++. This shortcoming has been addressed in the
rewritten code generation.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">__future__</span></code> flags and <code class="docutils literal notranslate"><span class="pre">CO_FREECELL</span></code> were not
present in frame flags. These were then not always properly inherited
to <code class="docutils literal notranslate"><span class="pre">eval</span></code> and <code class="docutils literal notranslate"><span class="pre">exec</span></code> in all cases.</p></li>
<li><p>Compatibility: Compiled frames for Python3 had <code class="docutils literal notranslate"><span class="pre">f_restricted</span></code>
attribute, which is Python2 only. Removed it.</p></li>
<li><p>Compatibility: The <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> of having a <code class="docutils literal notranslate"><span class="pre">continue</span></code> in a
finally clause is now properly raised.</p></li>
<li><p>Python2: The <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement with no locals argument provided, was
preventing list contractions to take closure variables.</p></li>
<li><p>Python2: Having the ASCII encoding declared in a module wasnt
working.</p></li>
<li><p>Standalone: Included the <code class="docutils literal notranslate"><span class="pre">idna</span></code> encoding as well.</p></li>
<li><p>Standalone: For virtualenv, the file <code class="docutils literal notranslate"><span class="pre">orig-prefix.txt</span></code> needs to be
present, now its copied into the dist directory as well. Fixed in
0.5.1.1 already.</p></li>
<li><p>Windows: Handle cases, where Python and user program are installed on
different volumes.</p></li>
<li><p>Compatibility: Can now finally use <code class="docutils literal notranslate"><span class="pre">execfile</span></code> as an expression. One
of our oldest issues, no 5, is finally fixed after all this time
thanks to C-ish code generation.</p></li>
<li><p>Compatibility: The order or call arguments deletion is now finally
compatible. This too is thanks to C-ish code generation.</p></li>
<li><p>Compatibility: Code object flags are now more compatible for Python3.</p></li>
<li><p>Standalone: Removing rpath settings of shared libraries and
extension modules included. This makes standalone binaries more
robust on Fedora 20.</p></li>
<li><p>Python2: Wasnt falsely rejecting <code class="docutils literal notranslate"><span class="pre">unicode</span></code> strings as values for
<code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> variants with base argument provided.</p></li>
<li><p>Windows: For Python3.2 and 64 bits, global variable accesses could
give false <code class="docutils literal notranslate"><span class="pre">NameError</span></code> exceptions. Fixed in 0.5.1.6 already.</p></li>
<li><p>Compatibility: Many <code class="docutils literal notranslate"><span class="pre">exec</span></code> and <code class="docutils literal notranslate"><span class="pre">eval</span></code> details have become more
correctly, the argument handling is more compatible, and e.g. future
flags are now passed along properly.</p></li>
<li><p>Compatibility: Using <code class="docutils literal notranslate"><span class="pre">open</span></code> with no arguments is now giving the
same error.</p></li>
</ul>
</section>
<section id="id322">
<h3>Organisational<a class="headerlink" href="#id322" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Replying to email from the issue tracker works now.</p></li>
<li><p>Added option name alias <code class="docutils literal notranslate"><span class="pre">--xml</span></code> for <code class="docutils literal notranslate"><span class="pre">--dump-xml</span></code>.</p></li>
<li><p>Added option name alias <code class="docutils literal notranslate"><span class="pre">--python-dbg</span></code> for <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code>,
which actually might make it a bit more clear that it is about using
the CPython debug run time.</p></li>
<li><p>Remove option <code class="docutils literal notranslate"><span class="pre">--dump-tree</span></code>, it had been broken for a long time and
unused in favor of XML dumps.</p></li>
<li><p>New digital art folder with 3D version of Nuitka logo. Thanks to Juan
Carlos for creating it.</p></li>
<li><p>Using README.rst instead of README.txt to make it look better on
web pages.</p></li>
<li><p>More complete whitelisting of missing imports in standard library.
These should give no warnings anymore.</p></li>
<li><p>Updated the Nuitka GUI to the latest version, with enhanced features.</p></li>
<li><p>The builds of releases and update of the <a class="reference external" href="https://nuitka.net/doc/download.html">downloads page</a> is now driven by Buildbot.
Page will be automatically updated as updated binaries arrive.</p></li>
</ul>
</section>
<section id="id323">
<h3>Cleanups<a class="headerlink" href="#id323" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Temporary keeper variables and the nodes to handle them are now
unified with normal temporary variables, greatly simplifying variable
handling on that level.</p></li>
<li><p>Less code is coming from templates, more is actually derived from the
node tree instead.</p></li>
<li><p>Releasing the references to temporary variables is now always
explicit in the node tree.</p></li>
<li><p>The publishing and preservation of exceptions in frames was turned
into explicit nodes.</p></li>
<li><p>Exception handling is now done with a single handle that checks with
branches on the exception. This eliminates exception handler nodes.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">dir</span></code> built-in with no arguments is now re-formulated to
<code class="docutils literal notranslate"><span class="pre">locals</span></code> or <code class="docutils literal notranslate"><span class="pre">globals</span></code> with their <code class="docutils literal notranslate"><span class="pre">.keys()</span></code> attribute taken.</p></li>
<li><p>Dramatic amounts of cleanups to code generation specialities, that
got done right for the new C-ish code generation.</p></li>
</ul>
</section>
<section id="id324">
<h3>New Tests<a class="headerlink" href="#id324" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Warnings from MSVC are now error exits for <code class="docutils literal notranslate"><span class="pre">--debug</span></code> mode too,
expanding the coverage of these tests.</p></li>
<li><p>The outputs with <code class="docutils literal notranslate"><span class="pre">python-dbg</span></code> can now also be compared, allowing to
expand test coverage for reference counts.</p></li>
<li><p>Many of the basic tests are now executable with Python3 directly.
This allows for easier debug.</p></li>
<li><p>The library compilation test is now also executed with Python3.</p></li>
</ul>
</section>
<section id="id325">
<h3>Summary<a class="headerlink" href="#id325" title="Permalink to this headline"></a></h3>
<p>This release would deserve more than a minor number increase. The C-ish
code generation, is a huge body of work. In many ways, it lays ground to
taking benefit of SSA results, that previously would not have been
possible. In other ways, its incomplete in not yet taking full
advantage yet.</p>
<p>The release contains so many improvements, that are not yet fully
realized, but as a compiler, it also reflects a stable and improved
state.</p>
<p>The important changes are about making SSA even more viable. Many of the
problematic cases, e.g. exception handlers, have been stream lined. A
whole class of variables, temporary keepers, has been eliminated. This
is big news in this domain.</p>
<p>For the standalone users, there are lots of refinements. There is esp. a
lot of work to create code that doesnt show scalability issues. While
some remain, the most important problems have been dealt with. Others
are still in the pipeline.</p>
<p>More work will be needed to take full advantage. This has been explained
in a <a class="reference external" href="https://nuitka.net/posts/state-of-nuitka.html">separate post</a>
in greater detail.</p>
</section>
</section>
<section id="nuitka-release-0-5-1">
<h2>Nuitka Release 0.5.1<a class="headerlink" href="#nuitka-release-0-5-1" title="Permalink to this headline"></a></h2>
<p>This release brings corrections and major improvements to how standalone
mode performs. Much of it was contributed via patches and bug reports.</p>
<section id="id326">
<h3>Bug Fixes<a class="headerlink" href="#id326" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There was a crash when using <code class="docutils literal notranslate"><span class="pre">next</span></code> on a non-iterable. Fixed in
0.5.0.1 already.</p></li>
<li><p>Module names with special characters not allowed in C identifiers
were not fully supported. Fixed in 0.5.0.1 already.</p></li>
<li><p>Name mangling for classes with leading underscores was not removing
them from resulting attribute names. This broke at <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> with
private attributes for such classes. Fixed in 0.5.0.1 already.</p></li>
<li><p>Standalone on Windows might need cp430 encoding. Fixed in 0.5.0.2
already.</p></li>
<li><p>Standalone mode didnt work with <code class="docutils literal notranslate"><span class="pre">lxml.etree</span></code> due to lack of hard
coded dependencies. When a shared library imports things, Nuitka
cannot detect it easily.</p></li>
<li><p>Wasnt working on macOS 64 bits due to using Linux 64 bits specific
code. Fixed in 0.5.0.2 already.</p></li>
<li><p>On MinGW the constants blob was not properly linked on some
installations, this is now done differently (see below).</p></li>
</ul>
</section>
<section id="id327">
<h3>New Features<a class="headerlink" href="#id327" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Memory usages are now traced with <code class="docutils literal notranslate"><span class="pre">--show-progress</span></code> allowing us to
trace where things go wrong.</p></li>
</ul>
</section>
<section id="id328">
<h3>Optimization<a class="headerlink" href="#id328" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Standalone mode now includes standard library as bytecode by default.
This is workaround scalability issues with many constants from many
modules. Future releases are going to undo it.</p></li>
<li><p>On Windows the constants blob is now stored as a resource, avoiding
compilation via C code for MSVC as well. MinGW was changed to use the
same code.</p></li>
</ul>
</section>
<section id="id329">
<h3>New Tests<a class="headerlink" href="#id329" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Expanded test coverage for standalone mode demonstrating usage of
hex encoding, PySide, and PyGtk packages.</p></li>
</ul>
</section>
<section id="id330">
<h3>Summary<a class="headerlink" href="#id330" title="Permalink to this headline"></a></h3>
<p>This release is mostly an interim maintenance release for standalone.
Major changes that provide optimization beyond that, termed C-ish code
generation are delayed for future releases.</p>
<p>This release makes standalone practical which is an important point.
Instead of hour long compilation, even for small programs, we are down
to less than a minute.</p>
<p>The solution of the scalability issues with many constants from many
modules will be top priority going forward. Since they are about how
even single use constants are created all in one place, this will be
easy, but as large changes are happening in C-ish code generation, we
are waiting for these to complete.</p>
</section>
</section>
<section id="nuitka-release-0-5-0">
<h2>Nuitka Release 0.5.0<a class="headerlink" href="#nuitka-release-0-5-0" title="Permalink to this headline"></a></h2>
<p>This release breaks interface compatibility, therefore the major version
number change. Also standalone mode has seen significant improvements
on both Windows, and Linux. Should work much better now.</p>
<p>But consider that this part of Nuitka is still in its infancy. As it is
not the top priority of mine for Nuitka, which primarily is intended as
an super compatible accelerator of Python, it will continue to evolve
nearby.</p>
<p>There is also many new optimization based on structural improvements in
the direction of actual SSA.</p>
<section id="id331">
<h3>Bug Fixes<a class="headerlink" href="#id331" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The standalone mode was not working on all Redhat, Fedora, and
openSUSE platforms and gave warnings with older compilers. Fixed in
0.4.7.1 already.</p></li>
<li><p>The standalone mode was not including all useful encodings. Fixed
in 0.4.7.2 already.</p></li>
<li><p>The standalone mode was defaulting to <code class="docutils literal notranslate"><span class="pre">--python-flag=-S</span></code> which
disables the parsing of site module. That unfortunately made it
necessary to reach some modules without modifying <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
which conflicts with the out-of-the-box experience.</p></li>
<li><p>The standalone mode is now handling packages properly and generally
working on Windows as well.</p></li>
<li><p>The syntax error of having an all catching except clause and then a
more specific one wasnt causing a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> with Nuitka.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">something</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">somehandling</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
    <span class="n">notallowed</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>A corruption bug was identified, when re-raising exceptions, the top
entry of the traceback was modified after usage. Depending on
<code class="docutils literal notranslate"><span class="pre">malloc</span></code> this was potentially causing an endless loop when using it
for output.</p></li>
</ul>
</section>
<section id="id332">
<h3>New Features<a class="headerlink" href="#id332" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Windows: The standalone mode now properly detects used DLLs using
<a class="reference external" href="http://www.dependencywalker.com/">Dependency Walker</a> which it
offers to download and extra for you.</p>
<p>It is used as a replacement to <code class="docutils literal notranslate"><span class="pre">ldd</span></code> on Linux when building the
binary, and as a replacement of <code class="docutils literal notranslate"><span class="pre">strace</span></code> on Linux when running the
tests to check that nothing is loaded from the outside.</p>
</li>
</ul>
</section>
<section id="id333">
<h3>Optimization<a class="headerlink" href="#id333" title="Permalink to this headline"></a></h3>
<ul>
<li><p>When iterating over <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>, this is now automatically
lowered to <code class="docutils literal notranslate"><span class="pre">tuples</span></code> avoiding the mutable container types.</p>
<p>So the following code is now equivalent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]:</span>
    <span class="o">...</span>

<span class="c1"># same as</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>For constants, this is even more effective, because for mutable
constants, no more is it necessary to make a copy.</p>
</li>
<li><p>Python2: The iteration of large <code class="docutils literal notranslate"><span class="pre">range</span></code> is now automatically
lowered to <code class="docutils literal notranslate"><span class="pre">xrange</span></code> which is faster to loop over, and more memory
efficient.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">xrange</span></code> built-in.</p></li>
<li><p>The statement only expression optimization got generalized and now is
capable of removing useless parts of operations, not only the whole
thing when it has not side effects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="c1"># same as</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>
</div>
<p>This works for all container types.</p>
<p>Another example is <code class="docutils literal notranslate"><span class="pre">type</span></code> built-in operation with single argument.
When the result is not used, it need not be called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># same as</span>
<span class="n">a</span>
</pre></div>
</div>
<p>And another example <code class="docutils literal notranslate"><span class="pre">is</span></code> and <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code> have no effect of their own
as well, therefore:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>

<span class="c1"># same as</span>
<span class="n">a</span>
<span class="n">b</span>
</pre></div>
</div>
</li>
<li><p>Added proper handling of conditional expression branches in SSA based
optimization. So far these branches were ignored, which only
acceptable for temporary variables as created by tree building, but
not other variable types. This is preparatory for introducing SSA for
local variables.</p></li>
</ul>
</section>
<section id="id334">
<h3>Organisational<a class="headerlink" href="#id334" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The option <code class="docutils literal notranslate"><span class="pre">--exe</span></code> is now ignored and creating an executable is the
default behavior of <code class="docutils literal notranslate"><span class="pre">nuitka</span></code>, a new option <code class="docutils literal notranslate"><span class="pre">--module</span></code> allows to
produce extension modules.</p></li>
<li><p>The binary <code class="docutils literal notranslate"><span class="pre">nuitka-python</span></code> was removed, and is replaced by
<code class="docutils literal notranslate"><span class="pre">nuitka-run</span></code> with now only implies <code class="docutils literal notranslate"><span class="pre">--execute</span></code> on top of what
<code class="docutils literal notranslate"><span class="pre">nuitka</span></code> is.</p></li>
<li><p>Using dedicated <a class="reference external" href="http://buildbot.net">Buildbot</a> for continuous
integration testing and release creation as well.</p></li>
<li><p>The <a class="reference external" href="https://nuitka.net/doc/download.html">Downloads</a> now offers
MSI files for Win64 as well.</p></li>
<li><p>Discontinued the support for cross compilation to Win32. That was too
limited and the design choice is to have a running CPython instance
of matching architecture at Nuitka compile time.</p></li>
</ul>
</section>
<section id="id335">
<h3>New Tests<a class="headerlink" href="#id335" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Expanded test coverage for standalone mode demonstrating usage of
hex encoding, and PySide package.</p></li>
</ul>
</section>
<section id="id336">
<h3>Summary<a class="headerlink" href="#id336" title="Permalink to this headline"></a></h3>
<p>The executable by default interface change improves on the already
high ease of use. The new optimization do not give all that much in
terms of numbers, but are all signs of structural improvements, and it
is steadily approaching the point, where the really interesting stuff
will happen.</p>
<p>The progress for standalone mode is of course significant. It is still
not quite there yet, but it is making quick progress now. This will
attract a lot of attention hopefully.</p>
<p>As for optimization, the focus for it has shifted to making exception
handlers work optimal by default (publish the exception to
<code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> and create traceback only when necessary) and be
based on standard branches. Removing special handling of exception
handlers, will be the next big step. This release includes some
correctness fixes stemming from that work already.</p>
</section>
</section>
<section id="nuitka-release-0-4-7">
<h2>Nuitka Release 0.4.7<a class="headerlink" href="#nuitka-release-0-4-7" title="Permalink to this headline"></a></h2>
<p>This release includes important new features, lots of polishing
cleanups, and some important performance improvements as well.</p>
<section id="id337">
<h3>Bug Fixes<a class="headerlink" href="#id337" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The RPM packages didnt build due to missing in-line copy of Scons.
Fixed in 0.4.6.1 already.</p></li>
<li><p>The recursion into modules and unfreezing them was not working for
packages and modules anymore. Fixed in 0.4.6.2 already.</p></li>
<li><p>The Windows installer was not including Scons. Fixed in 0.4.6.3
already.</p></li>
<li><p>Windows: The immediate execution as performed by <code class="docutils literal notranslate"><span class="pre">nuitka</span> <span class="pre">--execute</span></code>
was not preserving the exit code.</p></li>
<li><p>Python3.3: Packages without <code class="docutils literal notranslate"><span class="pre">__init.py__</span></code> were not properly
embedding the name-space package as well.</p></li>
<li><p>Python3: Fix, modules and packages didnt add themselves to
<code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> which they should, happened only for programs.</p></li>
<li><p>Python3.3: Packages should set <code class="docutils literal notranslate"><span class="pre">__package</span></code> to their own name, not
the one of their parents.</p></li>
<li><p>Python3.3: The <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> of nested classes was corrected.</p></li>
<li><p>For modules that recursed to other modules, an infinite loop could be
triggered when comparing types with rich comparisons.</p></li>
</ul>
</section>
<section id="id338">
<h3>New Features<a class="headerlink" href="#id338" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The standalone mode allows to compile standalone binaries for
programs and run them without Python installation. The DLLs loaded by
extension modules on Windows need to be added manually, on Linux
these are determined automatically already.</p>
<p>To achieve running without Python installation, Nuitka learned to
freeze bytecode as an alternative to compiling modules, as some
modules need to be present when the CPython library is initialized.</p>
</li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">--python-flag</span></code> allows to specify flags to the compiler
that the python binary normally would. So far <code class="docutils literal notranslate"><span class="pre">-S</span></code> and <code class="docutils literal notranslate"><span class="pre">-v</span></code> are
supported, with sane aliases <code class="docutils literal notranslate"><span class="pre">no_site</span></code> and <code class="docutils literal notranslate"><span class="pre">trace_imports</span></code>.</p>
<p>The recommended use of <code class="docutils literal notranslate"><span class="pre">--python-flag=-S</span></code> is to avoid dependency
creep in standalone mode compilations, because the <code class="docutils literal notranslate"><span class="pre">site</span></code> module
often imports many useless things that often dont apply to target
systems.</p>
</li>
</ul>
</section>
<section id="id339">
<h3>Optimization<a class="headerlink" href="#id339" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Faster frame stack handling for functions without <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code>
(or <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> in Python3). This gives a speed boost to
PyStone of ca. 2.5% overall.</p></li>
<li><p>Python2: Faster attribute getting and setting, handling special cases
at compile time. This gives a minor speed boost to PyStone of ca.
0.5% overall.</p></li>
<li><p>Python2: Much quicker calls of <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code> as
this is now using the quicker call method avoiding temporary tuples.</p></li>
<li><p>Dont treat variables usages used in functions called directly by
their owner as shared. This leads to more efficient code generation
for contractions and class bodies.</p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">unicode</span></code> constants directly from their UTF-8 string
representation for Python2 as well instead of un-streaming. So far
this was only done for Python3. Affects only program start-up.</p></li>
<li><p>Directly create <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> constants outside of <code class="docutils literal notranslate"><span class="pre">2**31</span></code>
and <code class="docutils literal notranslate"><span class="pre">2**32-1</span></code>, but only limited according to actual platform
values. Affects only program start-up.</p></li>
<li><p>When creating <code class="docutils literal notranslate"><span class="pre">set</span></code> values, no longer use a temporary <code class="docutils literal notranslate"><span class="pre">tuple</span></code>
value, but use a properly generated helper functions instead. This
makes creating sets much faster.</p></li>
<li><p>Directly create <code class="docutils literal notranslate"><span class="pre">set</span></code> constants instead of un-streaming them.
Affects only program start-up.</p></li>
<li><p>For correct line numbers in traceback, the current frame line number
must be updated during execution. This was done more often than
necessary, e.g. loops set the line number before loop entry, and at
first statement.</p></li>
<li><p>Module variables are now accessed even faster, the gain for PyStone
is only 0.1% and mostly the result of leaner code.</p></li>
</ul>
</section>
<section id="id340">
<h3>Organisational<a class="headerlink" href="#id340" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The standalone mode code (formerly known as portable mode has
been redone and activated. This is a feature that a lot of people
expect from a compiler naturally. And although the overall goal for
Nuitka is of course acceleration, this kind of packaging is one of
the areas where CPython needs improvement.</p></li>
<li><p>Added package for Ubuntu 13.10 for download, removed packages for
Ubuntu 11.04 and 11.10, no more supported.</p></li>
<li><p>Added package for openSUSE 13.1 for download.</p></li>
<li><p>Nuitka is now part of Arch and can be installed with <code class="docutils literal notranslate"><span class="pre">pacman</span> <span class="pre">-S</span>
<span class="pre">nuitka</span></code>.</p></li>
<li><p>Using dedicated <a class="reference external" href="http://buildbot.net">Buildbot</a> for continuous
integration testing. Not yet public.</p></li>
<li><p>Windows: In order to speed up repeated compilation on a platform
without <code class="docutils literal notranslate"><span class="pre">ccache</span></code>, added Scons level caching in the build directory.</p></li>
<li><p>Disabled hash randomization for inside Nuitka (but not in ultimately
created binaries) for a more stable output, because dictionary
constants will not change around. This makes the build results
possible to cache for <code class="docutils literal notranslate"><span class="pre">ccache</span></code> and Scons as well.</p></li>
</ul>
</section>
<section id="id341">
<h3>Tests<a class="headerlink" href="#id341" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">programs</span></code> tests cases now fail if module or directory
recursion is not working, being executed in another directory.</p></li>
<li><p>Added test runner for packages, with initial test case for package
with recursion and sub-packages.</p></li>
<li><p>Made some test cases more strict by reducing <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
provision.</p></li>
<li><p>Detect use of extra flags in tests that dont get consumed avoiding
ineffective flags.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--execute</span></code> on Windows as well, the issue that prevented it has
been solved after all.</p></li>
</ul>
</section>
<section id="id342">
<h3>Cleanups<a class="headerlink" href="#id342" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The generated code uses <code class="docutils literal notranslate"><span class="pre">const_</span></code>, <code class="docutils literal notranslate"><span class="pre">var_</span></code>, <code class="docutils literal notranslate"><span class="pre">par_</span></code> prefixes in
the generated code and centralized the decision about these into
single place.</p></li>
<li><p>Module variables no longer use C++ classes for their access, but
instead accessor functions, leading to much less code generated per
module variable and removing the need to trace their usage during
code generation.</p></li>
<li><p>The test runners now share common code in a dedicated module,
previously they replicated it all, but that turned out to be too
tedious.</p></li>
<li><p>Massive general cleanups, many of which came from new contributor
Juan Carlos Paco.</p></li>
<li><p>Moved standalone and freezer related codes to dedicated package
<code class="docutils literal notranslate"><span class="pre">nuitka.freezer</span></code> to not pollute the <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> package name space.</p></li>
<li><p>The code generation use variable identifiers and their accesses was
cleaned up.</p></li>
<li><p>Removed several not-so-special case identifier classes because they
now behave more identical and all work the same way, so a parameters
can be used to distinguish them.</p></li>
<li><p>Moved main program, function object, set related code generation to
dedicated modules.</p></li>
</ul>
</section>
<section id="id343">
<h3>Summary<a class="headerlink" href="#id343" title="Permalink to this headline"></a></h3>
<p>This release marks major technological progress with the introduction of
the much sought standalone mode and performance improvements from
improved code generation.</p>
<p>The major break through for SSA optimization was not yet achieved, but
this is again making progress in the direction of it. Harmonizing
variables of different kinds was an important step ahead.</p>
<p>Also very nice is the packaging progress, Nuitka was accepted into Arch
after being in Debian Testing for a while already. Hope is to see more
of this kind of integration in the future.</p>
</section>
</section>
<section id="nuitka-release-0-4-6">
<h2>Nuitka Release 0.4.6<a class="headerlink" href="#nuitka-release-0-4-6" title="Permalink to this headline"></a></h2>
<p>This release includes progress on all fronts. The primary focus was to
advance SSA optimization over older optimization code that was already
in place. In this domain, there are mostly cleanups.</p>
<p>Another focus has been to enhance Scons with MSVC on Windows. Nuitka now
finds an installed MSVC compiler automatically, properly handles
architecture of Python and Windows. This improves usability a lot.</p>
<p>Then this is also very much about bug fixes. There have been several hot
fixes for the last release, but a complicated and major issue forced a
new release, and many other small issues.</p>
<p>And then there is performance. As can be seen in the <a class="reference external" href="https://nuitka.net/pages/performance.html">performance graph</a>, this release is the
fastest so far. This came mainly from examining the need for comparison
slots for compiled types.</p>
<p>And last, but not least, this also expands the base of supported
platforms, adding Gentoo, and self compiled Python to the mix.</p>
<section id="id344">
<h3>Bug Fixes<a class="headerlink" href="#id344" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Support Nuitka being installed to a path that contains spaces and
handle main programs with spaces in their paths. Fixed in 0.4.5.1
already.</p></li>
<li><p>Support Python being installed to a path that contains spaces. Fixed
in 0.4.5.2 already.</p></li>
<li><p>Windows: User provided constants larger than 65k didnt work with
MSVC. Fixed in 0.4.5.3 already.</p></li>
<li><p>Windows: The option <code class="docutils literal notranslate"><span class="pre">--windows-disable-console</span></code> was not effective
with MSVC. Fixed in 0.4.5.3 already.</p></li>
<li><p>Windows: For some users, Scons was detecting their MSVC installation
properly already from registry, but it didnt honor the target
architecture. Fixed in 0.4.5.3 already.</p></li>
<li><p>When creating Python modules, these were marked as executable (x
bit), which they are of course not. Fixed in 0.4.5.3 already.</p></li>
<li><p>Python3.3: On architectures where <code class="docutils literal notranslate"><span class="pre">Py_ssize_t</span></code> is not the same as
<code class="docutils literal notranslate"><span class="pre">long</span></code> this could lead to errors. Fixed in 0.4.5.3 already.</p></li>
<li><p>Code that was using nested mutable constants and changed the nested
ones was not executing correctly.</p></li>
<li><p>Python2: Due to list contractions being re-formulated as functions,
<code class="docutils literal notranslate"><span class="pre">del</span></code> was rejected for the variables assigned in the contraction.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">expr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">()]</span>

<span class="k">del</span> <span class="n">x</span>  <span class="c1"># Should work, was gave an unjustified SyntaxError.</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id345">
<h3>New Features<a class="headerlink" href="#id345" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compiled types when used in Python comparison now work. Code like
this will work:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionType</span>
</pre></div>
</div>
<p>This of course also works for <code class="docutils literal notranslate"><span class="pre">in</span></code> operator, and is another step
ahead in compatibility, and surprising too. And best of all, this
works even if the checking code is not compiled with Nuitka.</p>
</li>
<li><p>Windows: Detecting MSVC installation from registry, if no compiler is
already present in PATH.</p></li>
<li><p>Windows: New options <code class="docutils literal notranslate"><span class="pre">--mingw64</span></code> to force compilation with MinGW.</p></li>
</ul>
</section>
<section id="id346">
<h3>Optimization<a class="headerlink" href="#id346" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Rich comparisons (<code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, and the like) are now faster than
ever before due to a full implementation of its own in Nuitka that
eliminates a bit of the overhead. In the future, we will aim at
giving it type hints to make it even faster. This gives a minor speed
boost to PyStone of ca. 0.7% overall.</p></li>
<li><p>Integer comparisons are now treated preferably, as they are in
CPython, which gives 1.3% speed boost to CPython.</p></li>
<li><p>The SSA based analysis is now used to provide variable scopes for
temporary variables as well as reference count needs.</p></li>
</ul>
</section>
<section id="id347">
<h3>Cleanups<a class="headerlink" href="#id347" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Replaced value friend based optimization code with SSA based
optimization, which allowed to remove complicated and old code that
was still used mainly in optimization of <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code>
expressions.</p></li>
<li><p>Delayed declaration of temp variables and their reference type is now
performed based on information from SSA, which may given more
accurate results. Not using variable usage profiles for this
anymore.</p></li>
<li><p>The Scons interface and related code got a massive overhaul, making
it more consistent and better documented. Also updated the internal
copy to 2.3.0 for the platforms that use it, mostly Windows.</p></li>
<li><p>Stop using <code class="docutils literal notranslate"><span class="pre">os.system</span></code> and <code class="docutils literal notranslate"><span class="pre">subprocess.call(...,</span> <span class="pre">shell</span> <span class="pre">=</span> <span class="pre">True)</span></code>
as it is not really portable at all, use <code class="docutils literal notranslate"><span class="pre">subprocess.call(...,</span> <span class="pre">shell</span>
<span class="pre">=</span> <span class="pre">False)</span></code> instead.</p></li>
<li><p>As usual lots of cleanups related to line length issues and PyLint.</p></li>
</ul>
</section>
<section id="id348">
<h3>Organisational<a class="headerlink" href="#id348" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for Gentoo Linux.</p></li>
<li><p>Added support for self compiled Python versions with and without
debug enabled.</p></li>
<li><p>Added use of Nuitka fonts for headers in manuals.</p></li>
<li><p>Does not install in-line copy of Scons only on systems where it is
not going to be used, that is mostly non-Windows, and Linux where it
is not already present. This makes for cleaner RPM packages.</p></li>
</ul>
</section>
<section id="id349">
<h3>Summary<a class="headerlink" href="#id349" title="Permalink to this headline"></a></h3>
<p>While the SSA stuff is not yet bearing performance fruits, it starts to
carry weight. Taking over the temporary variable handling now also means
we can apply the same stuff to local variables later.</p>
<p>To make up for the delay in SSA driven performance improvements, there
is more traditional code acceleration for rich comparisons, making it
significant, and the bug fixes make Nuitka more compatible than ever.</p>
<p>So give this a roll, its worth it. And feel free to join the mailing
list (since closed) or <a class="reference external" href="https://nuitka.net/pages/donations.html">make a donation</a> to support Nuitka.</p>
</section>
</section>
<section id="nuitka-release-0-4-5">
<h2>Nuitka Release 0.4.5<a class="headerlink" href="#nuitka-release-0-4-5" title="Permalink to this headline"></a></h2>
<p>This release incorporates very many bug fixes, most of which were
already part of hot fixes, usability improvements, documentation
improvements, new logo, simpler Python3 on Windows, warnings for
recursion options, and so on. So its mostly a consolidation release.</p>
<section id="id350">
<h3>Bug Fixes<a class="headerlink" href="#id350" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>When targeting Python 3.x, Nuitka was using python to run Scons to
run it under Python 2.x, which is not good enough on systems, where
that is already Python3. Improved to only do the guessing where
necessary (i.e. when using the in-line copy of Scons) and then to
prefer python2. Fixed in 0.4.4.1 already.</p></li>
<li><p>When using Nuitka created binaries inside a virtualenv, created
programs would instantly crash. The attempt to load and patch
<code class="docutils literal notranslate"><span class="pre">inspect</span></code> module was not making sure that <code class="docutils literal notranslate"><span class="pre">site</span></code> module was
already imported, but inside the virtualenv, it cannot be found
unless. Fixed in 0.4.4.1 already.</p></li>
<li><p>The option <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> to include plugin directories was
broken. Fixed in 0.4.4.2 already.</p></li>
<li><p>Python3: Files with BOM marker causes the compiler to crash. Fixed
in 0.4.4.2 already.</p></li>
<li><p>Windows: The generated code for <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">return</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> was
working with gcc (and therefore MinGW), but not with MSVC, causing
crashes. Fixed in 0.4.4.2 already.</p></li>
<li><p>The option <code class="docutils literal notranslate"><span class="pre">--recurse-all</span></code> did not recurse to package
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files in case <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x.y</span> <span class="pre">import</span> <span class="pre">z</span></code> syntax was used.
Fixed in 0.4.4.2 already.</p></li>
<li><p>Python3 on macOS: Corrected link time error. Fixed in 0.4.4.2
already.</p></li>
<li><p>Python3.3 on Windows: Fixed crash with too many arguments to a kwonly
argument using function. Fixed in 0.4.4.2 already.</p></li>
<li><p>Python3.3 on Windows: Using yield from resulted in a link time
error. Fixed in 0.4.4.2 already.</p></li>
<li><p>Windows: Added back XML manifest, found a case where it is needed to
prevent clashes with binary modules.</p></li>
<li><p>Windows: Generators only worked in the main Python threads. Some
unusual threading modules therefore failed.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code> to find the Python installation instead of hard
coded paths.</p></li>
</ul>
</section>
<section id="id351">
<h3>New Features<a class="headerlink" href="#id351" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Windows: Python3 finds Python2 installation to run Scons
automatically now.</p>
<p>Nuitka itself runs under Python3 just fine, but in order to build the
generated C++ code into binaries, it uses Scons which still needs
Python2.</p>
<p>Nuitka will now find the Python2 installation searching Windows
registry instead of requiring hard coded paths.</p>
</li>
<li><p>Windows: Python2 and Python3 find their headers now even if Python is
not installed to specific paths.</p>
<p>The installation path now is passed on to Scons which then uses it.</p>
</li>
<li><p>Better error checking for <code class="docutils literal notranslate"><span class="pre">--recurse-to</span></code> and <code class="docutils literal notranslate"><span class="pre">--recurse-not-to</span></code>
arguments, tell the user not to use directory paths.</p></li>
<li><p>Added a warning for <code class="docutils literal notranslate"><span class="pre">--recurse-to</span></code> arguments that end up having no
effect to the final result.</p></li>
</ul>
</section>
<section id="id352">
<h3>Cleanups<a class="headerlink" href="#id352" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Import mechanism got cleaned up, stopped using
PyImport_ExtendInittab. It does not handle packages, and the
<code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> based importer is now well proven.</p></li>
<li><p>Moved some of the constraint collection code mess into proper places.
It still remains a mess.</p></li>
</ul>
</section>
<section id="id353">
<h3>Organisational<a class="headerlink" href="#id353" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">LICENSE.txt</span></code> file with Apache License 2.0 text to make it
more immediately obvious which license Nuitka is under.</p></li>
<li><p>Added section about Nuitka license to the <a class="reference external" href="https://nuitka.net/doc/user-manual.html#license">User Manual</a>.</p></li>
<li><p>Added <a class="reference external" href="https://github.com/Nuitka/Nuitka/blob/develop/doc/Logo/Nuitka-Logo-Symbol.svg">Nuitka Logo</a>
to the distribution.</p></li>
<li><p>Use Nuitka Logo as the bitmap in the Windows installer.</p></li>
<li><p>Use Nuitka Logo in the documentation (<a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> and <a class="reference external" href="https://nuitka.net/doc/developer-manual.html">Developer Manual</a>).</p></li>
<li><p>Enhanced documentation to number page numbers starting after table of
contents, removed header/footer from cover pages.</p></li>
</ul>
</section>
<section id="id354">
<h3>Summary<a class="headerlink" href="#id354" title="Permalink to this headline"></a></h3>
<p>This release is mostly the result of improvements made based on the
surge of users after Europython 2013. Some people went to extents and
reported their experience very detailed, and so I could aim at making
e.g. their misconceptions about how recursion options work, more obvious
through warnings and errors.</p>
<p>This release is not addressing performance improvements. The next
release will be able to focus on that. I am taking my claim of full
compatibility very serious, so any time its broken, its the highest
priority to restore it.</p>
</section>
</section>
<section id="nuitka-release-0-4-4">
<h2>Nuitka Release 0.4.4<a class="headerlink" href="#nuitka-release-0-4-4" title="Permalink to this headline"></a></h2>
<p>This release marks the point, where Nuitka for the first time supports
all major current Python versions and all major features. It adds Python
3.3 support and it adds support for threading. And then there is a
massive amount of fixes that improve compatibility even further.</p>
<p>Aside of that, there is major performance work. One side is the
optimization of call performance (to CPython non-compiled functions) and
to compiled functions, both. This gave a serious improvement to
performance.</p>
<p>Then of course, we are making other, long term performance progress, as
in experimental mode, the SSA code starts to optimize unused code
away. That code is not yet ready for prime time yet, but the trace
structure will hold.</p>
<section id="id355">
<h3>New Features<a class="headerlink" href="#id355" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Python3.3 support.</p>
<p>The test suite of CPython3.3 passes now too. The <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> is
now supported, but the improved argument parsing error messages are
not implemented yet.</p>
</li>
<li><p>Tracing user provided constants, now Nuitka warns about too large
constants produced during optimization.</p></li>
<li><p>Line numbers of expressions are now updates as evaluation progresses.
This almost corrects.</p>
<p>Now only expression parts that cannot raise, do not update, which can
still cause difference, but much less often, and then definitely
useless.</p>
</li>
<li><p>Experimental support for threads.</p>
<p>Threading appears to work just fine in the most cases. Its not as
optimal as I wanted it to be, but thats going to change with time.</p>
</li>
</ul>
</section>
<section id="id356">
<h3>Optimization<a class="headerlink" href="#id356" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Previous corrections for <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, caused a
performance regression for these operations in case of handling
identical objects.</p>
<p>For built-in objects of sane types (not <code class="docutils literal notranslate"><span class="pre">float</span></code>), these operations
are now accelerated again. The overreaching acceleration of <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>
was still there (bug, see below) and has been adapted too.</p>
</li>
<li><p>Calling non-compiled Python functions from compiled functions was
slower than in CPython. It is now just as fast.</p></li>
<li><p>Calling compiled functions without keyword arguments has been
accelerated with a dedicated entry point that may call the
implementation directly and avoid parameter parsing almost entirely.</p></li>
<li><p>Making calls to compiled and non-compiled Python functions no longer
requires to build a temporary tuple and therefore is much faster.</p></li>
<li><p>Parameter parsing code is now more compact, and re-uses error raises,
or creates them on the fly, instead of hard coding it. Saves binary
size and should be more cache friendly.</p></li>
</ul>
</section>
<section id="id357">
<h3>Bug Fixes<a class="headerlink" href="#id357" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Corrected false optimization of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&gt;=</span> <span class="pre">a</span></code> on C++ level.</p>
<p>When its not done during Nuitka compile time optimization, the rich
comparison helper still contained short cuts for <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>. This is now
the same for all the comparison operators.</p>
</li>
<li><p>Calling a function with default values, not providing it, and not
providing a value for a value without default, was not properly
detecting the error, and instead causing a run time crash.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">f</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This now properly raises the <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> exception.</p>
</li>
<li><p>Constants created with <code class="docutils literal notranslate"><span class="pre">+</span></code> could become larger than the normally
enforced limits. Not as likely to become huge, but still potentially
an issue.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">vars</span></code> built-in, when used on something without <code class="docutils literal notranslate"><span class="pre">__dict__</span></code>
attribute, was giving <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p></li>
<li><p>When re-cursing to modules at compile time, script directory and
current directory were used last, while at run time, it was the other
way around, which caused overloaded standard library modules to not
be embedded.</p>
<p>Thanks for the patch to James Michael DuPont.</p>
</li>
<li><p>Super without arguments was not raising the correct <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>
exception in functions that cannot be methods, but
<code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="nb">super</span><span class="p">()</span>  <span class="c1"># Error, cannot refer to first argument of f</span>
</pre></div>
</div>
</li>
<li><p>Generators no longer use <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopIteration</span></code> for return
statements, because that one is not properly handled in
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> clauses, where its not supposed to trigger, while
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> should be honored.</p></li>
<li><p>Exception error message when throwing non-exceptions into generators
was not compatible.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">return</span></code> with value in generators is a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>
before Python3.3, but that was not raised.</p></li>
<li><p>Variable names of the __var style need to be mangled. This was only
done for classes, but not for functions contained in classes, there
they are now mangled too.</p></li>
<li><p>Python3: Exceptions raised with causes were not properly chaining.</p></li>
<li><p>Python3: Specifying the file encoding corrupted line numbers, making
them all of by one.</p></li>
</ul>
</section>
<section id="id358">
<h3>Cleanups<a class="headerlink" href="#id358" title="Permalink to this headline"></a></h3>
<ul>
<li><p>For containers (<code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>) defined on
the source code level, Nuitka immediately created constant references
from them.</p>
<p>For function calls, class creations, slice objects, this code is now
re-used, and its dictionaries and tuples, may now become constants
immediately, reducing noise in optimization steps.</p>
</li>
<li><p>The parameter parsing code got cleaned up. There were a lot of relics
from previously explored paths. And error raises were part of the
templates, but now are external code.</p></li>
<li><p>Global variable management moved to module objects and out of
Variables module.</p></li>
<li><p>Make sure, nodes in the tree are not shared by accident.</p>
<p>This helped to find a case of duplicate use in the complex call
helpers functions. Code generation will now notice this kind of
duplication in debug mode.</p>
</li>
<li><p>The complex call helper functions were manually taking variable
closure, which made these functions inconsistent to other functions,
e.g. no variable version was allocated to assignments.</p>
<p>Removing the manual setting of variables allowed a huge reduction of
code volume, as it became more generic code.</p>
</li>
<li><p>Converting user provided constants to create containers into
constants immediately, to avoid noise from doing this in
optimization.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">site</span></code> module is now imported explicitly in the <code class="docutils literal notranslate"><span class="pre">__main__</span></code>
module, so it can be handled by the recursion code as well. This will
help portable mode.</p></li>
<li><p>Many line length 80 changes, improved comments.</p></li>
</ul>
</section>
<section id="id359">
<h3>New Tests<a class="headerlink" href="#id359" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The CPython3.3 test suite was added, and run with both Python3.2 and
Python3.3, finding new bugs.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">doctest</span></code> to code generation didnt successfully handle all
tests, most notably, test_generators.py was giving a
<code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> and therefore not actually active. Correcting that
improved the coverage of generator testing.</p></li>
</ul>
</section>
<section id="id360">
<h3>Organisational<a class="headerlink" href="#id360" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The portable code is still delayed.</p>
<p>Support for Python3.3 was a higher priority, but the intention is to
get it into shape for Europython still.</p>
<p>Added notes about it being disabled it in the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> documentation.</p>
</li>
</ul>
</section>
<section id="id361">
<h3>Summary<a class="headerlink" href="#id361" title="Permalink to this headline"></a></h3>
<p>This release is in preparation for Europython 2013. Wanted to get this
much out, as it changes the status slides quite a bit, and all of that
was mostly done in my Cyprus holiday a while ago.</p>
<p>The portable code has not seen progress. The idea here is to get this
into a development version later.</p>
</section>
</section>
<section id="nuitka-release-0-4-3">
<h2>Nuitka Release 0.4.3<a class="headerlink" href="#nuitka-release-0-4-3" title="Permalink to this headline"></a></h2>
<p>This release expands the reach of Nuitka substantially, as new platforms
and compilers are now supported. A lot of polish has been applied. Under
the hood there is the continued and in-progress effort to implement SSA
form in Nuitka.</p>
<section id="id362">
<h3>New Features<a class="headerlink" href="#id362" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Support for new compiler: Microsoft Visual C++.</p>
<p>You can now use Visual Studio 2008 or Visual Studio 2010 for
compiling under Windows.</p>
</li>
<li><p>Support for NetBSD.</p>
<p>Nuitka works for at least NetBSD 6.0, older versions may or may not
work. This required fixing bugs in the generic fibers
implementation.</p>
</li>
<li><p>Support for Python3 under Windows too.</p>
<p>Nuitka uses Scons to build the generated C++ files. Unfortunately it
requires Python2 to execute, which is not readily available to call
from Python3. It now guesses the default installation paths of
CPython 2.7 or CPython 2.6 and it will use it for running Scons
instead. You have to install it to <code class="docutils literal notranslate"><span class="pre">C:\Python26</span></code> or <code class="docutils literal notranslate"><span class="pre">C:\Python27</span></code>
for Nuitka to be able to find it.</p>
</li>
<li><p>Enhanced Python 3.3 compatibility.</p>
<p>The support the newest version of Python has been extended, improving
compatibility for many minor corner cases.</p>
</li>
<li><p>Added warning when a user compiles a module and executes it
immediately when that references <code class="docutils literal notranslate"><span class="pre">__name__</span></code>.</p>
<p>Because very likely the intention was to create an executable. And
esp. if there is code like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>In module mode, Nuitka will optimize it away, and nothing will happen
on execution. This is because the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nuitka --execute module
</pre></div>
</div>
<p>is behavioral more like</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -c <span class="s2">&quot;import module&quot;</span>
</pre></div>
</div>
<p>and that was a trap for new users.</p>
</li>
<li><p>All Linux architectures are now supported. Due to changes in how
evaluation order is enforced, we dont have to implement for specific
architectures anymore.</p></li>
</ul>
</section>
<section id="id363">
<h3>Bug Fixes<a class="headerlink" href="#id363" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Dictionary creation was not fully compatible.</p>
<p>As revealed by using Nuitka with CPython3.3, the order in which
dictionaries are to be populated needs to be reversed, i.e. CPython
adds the last item first. We didnt observe this before, and its
likely the new dictionary implementation that finds it.</p>
<p>Given that hash randomization makes dictionaries item order
undetermined anyway, this is more an issue of testing.</p>
</li>
<li><p>Evaluation order for arguments of calls was not effectively enforced.
It is now done in a standards compliant and therefore fully portable
way. The compilers and platforms so far supported were not affected,
but the newly supported Visual Studio C++ compiler was.</p></li>
<li><p>Using a <code class="docutils literal notranslate"><span class="pre">__future__</span></code> import inside a function was giving an
assertion, instead of the proper syntax error.</p></li>
<li><p>Python3: Do not set the attributes <code class="docutils literal notranslate"><span class="pre">sys.exc_type</span></code>,
<code class="docutils literal notranslate"><span class="pre">sys.exc_value</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.exc_traceback</span></code>.</p></li>
<li><p>Python3: Annotations of function worked only as long as their
definition was not referring to local variables.</p></li>
</ul>
</section>
<section id="id364">
<h3>Optimization<a class="headerlink" href="#id364" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Calls with no positional arguments are now using the faster call
methods.</p>
<p>The generated C++ code was using the <code class="docutils literal notranslate"><span class="pre">()</span></code> constant at call site,
when doing calls that use no positional arguments, which is of course
useless.</p>
</li>
<li><p>For Windows now uses OS Fibers for Nuitka Fibers.</p>
<p>Using threads for fibers was causing only overhead and with this API,
MSVC had less issues too.</p>
</li>
</ul>
</section>
<section id="id365">
<h3>Organisational<a class="headerlink" href="#id365" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Accepting <a class="reference external" href="https://nuitka.net/pages/donations.html">Donations</a> via
Paypal, please support funding travels, website, etc.</p></li>
<li><p>The <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> has
been updated with new content. We now do support Visual Studio,
documented the required LLVM version for clang, Win64 and modules may
include modules too, etc. Lots of information was no longer accurate
and has been updated.</p></li>
<li><p>The Changelog has been improved for consistency, wordings, and
styles.</p></li>
<li><p>Nuitka is now available on the social code platforms as well</p>
<ul>
<li><p>Bitbucket (since removed)</p></li>
<li><p><a class="reference external" href="https://github.com/kayhayen/Nuitka">Github</a></p></li>
<li><p>Gitorious (since discontinued)</p></li>
<li><p>Google Code (since discontinued)</p></li>
</ul>
</li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">clean-up.sh</span></code>, which is practically useless, as tests now
clean up after themselves reasonably, and with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clean</span> <span class="pre">-dfx</span></code>
working better.</p></li>
<li><p>Removed create-environment.sh script, which was only setting the
<code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable, which is not necessary.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">check-with-pylint</span> <span class="pre">--emacs</span></code> option to make output its work
with Emacs compilation mode, to allow easier fixing of warnings from
PyLint.</p></li>
<li><p>Documentation is formatted for 80 columns now, source code will
gradually aim at it too. So far 90 columns were used, and up to 100
tolerated.</p></li>
</ul>
</section>
<section id="id366">
<h3>Cleanups<a class="headerlink" href="#id366" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Removed useless manifest and resource file creation under Windows.</p>
<p>Turns out this is no longer needed at all. Either CPython, MinGW, or
Windows improved to no longer need it.</p>
</li>
<li><p>PyLint massive cleanups and annotations bringing down the number of
warnings by a lot.</p></li>
<li><p>Avoid use of strings and built-ins as run time pre-computed constants
that are not needed for specific Python versions, or Nuitka modes.</p></li>
<li><p>Do not track needed tuple, list, and dict creation code variants in
context, but e.g. in <code class="docutils literal notranslate"><span class="pre">nuitka.codegen.TupleCodes</span></code> module instead.</p></li>
<li><p>Introduced an internal module to host the complex call helper
functions, instead of just adding it to any module that first uses
it.</p></li>
</ul>
</section>
<section id="id367">
<h3>New Tests<a class="headerlink" href="#id367" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added basic tests for order evaluation, where there currently were
None.</p></li>
<li><p>Added support for 2to3 execution under Windows too, so we can run
tests for Python3 installations too.</p></li>
</ul>
</section>
<section id="id368">
<h3>Summary<a class="headerlink" href="#id368" title="Permalink to this headline"></a></h3>
<p>The release is clearly major step ahead. The new platform support
triggered a whole range of improvements, and means this is truly
complete now.</p>
<p>Also there is very much polish in this release, reducing the number of
warnings, updated documentation, the only thing really missing is
visible progress with optimization.</p>
</section>
</section>
<section id="nuitka-release-0-4-2">
<h2>Nuitka Release 0.4.2<a class="headerlink" href="#nuitka-release-0-4-2" title="Permalink to this headline"></a></h2>
<p>This release comes with many bug fixes, some of which are severe. It
also contains new features, like basic Python 3.3 support. And the
<a class="reference external" href="https://nuitka.net/pages/performance.html">performance diagrams</a> got
expanded.</p>
<section id="id369">
<h3>New Features<a class="headerlink" href="#id369" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Support for FreeBSD.</p>
<p>Nuitka works for at least FreeBSD 9.1, older versions may or may not
work. This required only fixing some Linuxisms in the build
process.</p>
</li>
<li><p>New option for warning about compile time detected exception raises.</p>
<p>Nuitka can now warn about exceptions that will be raised at run time.</p>
</li>
<li><p>Basic Python3.3 support.</p>
<p>The test suite of CPython3.2 passes and fails in a compatible way.
New feature <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> is not yet supported, and the improved
argument parsing error messages are not implemented yet.</p>
</li>
</ul>
</section>
<section id="id370">
<h3>Bug Fixes<a class="headerlink" href="#id370" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Nuitka already supported compilation of main directories, i.e.
directories with a __main__.py file inside. The resulting binary
name was __main__.exe though, but now it is directory.exe</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ls directory</span>
__main__.py

<span class="c1"># nuitka --exe directory</span>
<span class="c1"># ls</span>
directory directory.exe
</pre></div>
</div>
<p>This makes this usage more obvious, and fixes an older issue for this
feature.</p>
</li>
<li><p>Evaluation order of binary operators was not enforced.</p>
<p>Nuitka already enforces evaluation order for just about everything.
But not for binary operators it seems.</p>
</li>
<li><p>Providing an <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">coding:</span> <span class="pre">no-exist</span></code> was crashing under Python2, and
ignored under Python3, now it does the compatible thing for both.</p></li>
<li><p>Global statements on the compiler level are legal in Python, and were
not handled by Nuitka, they now are.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">global</span> <span class="n">a</span>  <span class="c1"># Not in a function, but on module level. Pointless but legal!</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Effectively these statements can be ignored.</p>
</li>
<li><p>Future imports are only legal when they are at the start of the file.</p>
<p>This was not enforced by Nuitka, making it accept code, which CPython
would reject. It now properly raises a syntax error.</p>
</li>
<li><p>Raising exceptions from context was leaking references.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span> <span class="kn">from</span> <span class="bp">None</span>
</pre></div>
</div>
<p>Under CPython3.2 the above is not allowed (it is acceptable starting
CPython3.3), and was also leaking references to its arguments.</p>
</li>
<li><p>Importing the module that became <code class="docutils literal notranslate"><span class="pre">__main__</span></code> through the module
name, didnt recurse to it.</p>
<p>This also gives a warning. PyBench does it, and then stumbles over
the non-found pybench module. Of course, programmers should use
<code class="docutils literal notranslate"><span class="pre">sys.modules[</span> <span class="pre">&quot;__main__&quot;</span> <span class="pre">]</span></code> to access main module code. Not only
because the duplicated modules dont share data.</p>
</li>
<li><p>Compiled method <code class="docutils literal notranslate"><span class="pre">repr</span></code> leaked references when printed.</p>
<p>When printing them, they would not be freed, and subsequently hold
references to the object (and class) they belong to. This could
trigger bugs for code that expects <code class="docutils literal notranslate"><span class="pre">__del__</span></code> to run at some point.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">super</span></code> built-in leaked references to given object.</p>
<p>This was added, because Python3 needs it. It supplies the arguments
to <code class="docutils literal notranslate"><span class="pre">super</span></code> automatically, whereas for Python2 the programmer had to
do it. And now it turns out that the object lost a reference, causing
similar issues as above, preventing <code class="docutils literal notranslate"><span class="pre">__del__</span></code> to run.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">raise</span></code> statement didnt enforce type of third argument.</p>
<p>This Python2-only form of exception raising now checks the type of
the third argument before using it. Plus, when its None (which is
also legal), no reference to None is leaked.</p>
</li>
<li><p>Python3 built-in exceptions were strings instead of exceptions.</p>
<p>A gross mistake that went uncaught by test suites. I wonder how. Them
being strings doesnt help their usage of course, fixed.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-nan</span></code> and <code class="docutils literal notranslate"><span class="pre">nan</span></code> both exist and make a difference.</p>
<p>A older story continued. There is a sign to <code class="docutils literal notranslate"><span class="pre">nan</span></code>, which can be
copied away and should be present. This is now also supported by
Nuitka.</p>
</li>
<li><p>Wrong optimization of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">!=</span> <span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">a</span></code> on C++
level.</p>
<p>While its not done during Nuitka optimization, the rich comparison
helpers still contained short cuts for <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> for <code class="docutils literal notranslate"><span class="pre">nuitka-python</span> <span class="pre">--python-version</span> <span class="pre">3.2</span></code> was
still <code class="docutils literal notranslate"><span class="pre">python</span></code>.</p>
<p>When determining the value for <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> the CPython library
code looks at the name <code class="docutils literal notranslate"><span class="pre">exec</span></code> had received. It was <code class="docutils literal notranslate"><span class="pre">python</span></code> in
all cases, but now it depends on the running version, so it
propagates.</p>
</li>
<li><p>Keyword only functions with default values were losing references to
defaults.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">X</span><span class="p">()):</span>
    <span class="k">pass</span>


<span class="n">f</span><span class="p">()</span>
<span class="n">f</span><span class="p">()</span>  <span class="c1"># Can crash, X() should already be released.</span>
</pre></div>
</div>
<p>This is now corrected. Of course, a Python3 only issue.</p>
</li>
<li><p>Pressing CTRL-C didnt generate <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> in compiled
code.</p>
<p>Nuitka never executes pending calls. It now does, with the upside,
that the solution used, appears to be suitable for threading in
Nuitka too. Expect more to come out of this.</p>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">with</span></code> statements with <code class="docutils literal notranslate"><span class="pre">return</span></code>, <code class="docutils literal notranslate"><span class="pre">break</span></code>, or <code class="docutils literal notranslate"><span class="pre">continue</span></code>
to leave their body, the <code class="docutils literal notranslate"><span class="pre">__exit__</span></code> was not called.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">a</span><span class="p">:</span>  <span class="c1"># This called a.__enter__().</span>
    <span class="k">return</span> <span class="mi">2</span>  <span class="c1"># This didn&#39;t call a.__exit__(None, None, None).</span>
</pre></div>
</div>
<p>This is of course quite huge, and unfortunately wasnt covered by any
test suite so far. Turns out, the re-formulation of <code class="docutils literal notranslate"><span class="pre">with</span></code>
statements, was wrongly using <code class="docutils literal notranslate"><span class="pre">try/except/else</span></code>, but these ignore
the problematic statements. Only <code class="docutils literal notranslate"><span class="pre">try/finally</span></code> does. The enhanced
re-formulation now does the correct thing.</p>
</li>
<li><p>Starting with Python3, absolute imports are now the default.</p>
<p>This was already present for Python3.3, and it turns out that all of
Python3 does it.</p>
</li>
</ul>
</section>
<section id="id371">
<h3>Optimization<a class="headerlink" href="#id371" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Constants are now much less often created with <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module, but
created directly.</p>
<p>This esp. applies for nested constants, now more values become <code class="docutils literal notranslate"><span class="pre">is</span></code>
identical instead of only <code class="docutils literal notranslate"><span class="pre">==</span></code> identical, which indicates a reduced
memory usage.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;something_special&quot;</span><span class="p">,)</span>
<span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;something_special&quot;</span>

<span class="k">assert</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">b</span>  <span class="c1"># Now true</span>
</pre></div>
</div>
<p>This is not only about memory efficiency, but also about performance.
Less memory usage is more cache friendly, and the == operator will
be able to shortcut dramatically in cases of identical objects.</p>
<p>Constants now created without <code class="docutils literal notranslate"><span class="pre">pickle</span></code> usage, cover <code class="docutils literal notranslate"><span class="pre">float</span></code>,
<code class="docutils literal notranslate"><span class="pre">list</span></code>, and <code class="docutils literal notranslate"><span class="pre">dict</span></code>, which is enough for PyStone to not use it at
all, which has been added support for as well.</p>
</li>
<li><p>Continue statements might be optimized away.</p>
<p>A terminal <code class="docutils literal notranslate"><span class="pre">continue</span></code> in a loop, was not optimized away:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">something</span>
    <span class="k">continue</span>  <span class="c1"># Now optimized away</span>
</pre></div>
</div>
<p>The trailing <code class="docutils literal notranslate"><span class="pre">continue</span></code> has no effect and can therefore be removed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">something</span>
</pre></div>
</div>
</li>
<li><p>Loops with only break statements are optimized away.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">break</span>
</pre></div>
</div>
<p>A loop immediately broken has of course no effect. Loop conditions
are re-formulated to immediate if  : break checks. Effectively
this means that loops with conditions detected to be always false to
see the loop entirely removed.</p>
</li>
</ul>
</section>
<section id="id372">
<h3>New Tests<a class="headerlink" href="#id372" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added tests for the found issues.</p></li>
<li><p>Running the programs test suite (i.e. recursion) for Python3.2 and
Python3.2 as well, after making adaptation so that the absolute
import changes are now covered.</p></li>
<li><p>Running the CPython3.2 test suite with Python3.3 based Nuitka works
and found a few minor issues.</p></li>
</ul>
</section>
<section id="id373">
<h3>Organisational<a class="headerlink" href="#id373" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The <a class="reference external" href="https://nuitka.net/doc/download.html">Downloads</a> page now
offers RPMs for RHEL6, CentOS6, F17, F18, and openSUSE 12.1, 12.2,
12.3. This large coverage is thanks to openSUSE build service and
ownssh for contributing an RPM spec file.</p>
<p>The page got improved with logos for the distributions.</p>
</li>
<li><p>Added ownssh as contributor.</p></li>
<li><p>Revamped the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> in terms of layout,
structure, and content.</p></li>
</ul>
</section>
<section id="id374">
<h3>Summary<a class="headerlink" href="#id374" title="Permalink to this headline"></a></h3>
<p>This release is the result of much validation work. The amount of fixes
the largest of any release so far. New platforms, basic Python3.3
support, consolidation all around.</p>
</section>
</section>
<section id="nuitka-release-0-4-1">
<h2>Nuitka Release 0.4.1<a class="headerlink" href="#nuitka-release-0-4-1" title="Permalink to this headline"></a></h2>
<p>This release is the first follow-up with a focus on optimization. The
major highlight is progress towards SSA form in the node tree.</p>
<p>Also a lot of cleanups have been performed, for both the tree building,
which is now considered mostly finished, and will be only reviewed. And
for the optimization part there have been large amounts of changes.</p>
<section id="id375">
<h3>New Features<a class="headerlink" href="#id375" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Python 3.3 experimental support</p>
<ul class="simple">
<li><p>Now compiles many basic tests. Ported the dictionary quick access
and update code to a more generic and useful interface.</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> to classes and functions.</p></li>
<li><p>Small compatibility changes. Some exceptions changed, absolute
imports are now default, etc.</p></li>
<li><p>For comparison tests, the hash randomization is disabled.</p></li>
</ul>
</li>
<li><p>Python 3.2 support has been expanded.</p>
<p>The Python 3.2 on Ubuntu is not providing a helper function that was
used by Nuitka, replaced it with out own code.</p>
</li>
</ul>
</section>
<section id="id376">
<h3>Bug fixes<a class="headerlink" href="#id376" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Default values were not is identical.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">defaultKeepsIdentity</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="s2">&quot;str_value&quot;</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">arg</span> <span class="ow">is</span> <span class="s2">&quot;str_value&quot;</span>


<span class="n">defaultKeepsIdentity</span><span class="p">()</span>
</pre></div>
</div>
<p>This now prints True as it does with CPython. The solution is
actually a general code optimization, see below.</p>
</li>
<li><p>Usage of <code class="docutils literal notranslate"><span class="pre">unicode</span></code> built-in with more than one argument could
corrupt the encoding argument string.</p>
<p>An implementation error of the <code class="docutils literal notranslate"><span class="pre">unicode</span></code> was releasing references
to arguments converted to default encoding, which could corrupt it.</p>
</li>
<li><p>Assigning Python3 function annotations could cause a segmentation
fault.</p></li>
</ul>
</section>
<section id="id377">
<h3>Optimization<a class="headerlink" href="#id377" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Improved propagation of exception raise statements, eliminating more
code. They are now also propagated from all kinds of expressions.
Previously this was more limited. An assertion added will make sure
that all raises are propagated. Also finally, raise expressions are
converted into raise statements, but without any normalization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now optimizing:</span>
<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
<span class="c1"># into (minus normalization):</span>
<span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="s2">&quot;integer division or modulo by zero&quot;</span>

<span class="c1"># Now optimizing:</span>
<span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">something</span>
<span class="c1"># into (minus normalization):</span>
<span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="s2">&quot;integer division or modulo by zero&quot;</span>

<span class="c1"># Now optimizing:</span>
<span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">something</span>
<span class="c1"># into (minus normalization), notice the side effects of first checking</span>
<span class="c1"># function and a as names to be defined, these may be removed only if</span>
<span class="c1"># they can be demonstrated to have no effect.</span>
<span class="n">function</span>
<span class="n">a</span>
<span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="s2">&quot;integer division or modulo by zero&quot;</span>
</pre></div>
</div>
<p>There is more examples, where the raise propagation is new, but you
get the idea.</p>
</li>
<li><p>Conditional expression nodes are now optimized according to the truth
value of the condition, and not only for compile time constants. This
covers e.g. container creations, and other things.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This was already optimized, as it&#39;s a compile time constant.</span>
<span class="n">a</span> <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,)</span> <span class="k">else</span> <span class="n">b</span>
<span class="n">a</span> <span class="k">if</span> <span class="kc">True</span> <span class="k">else</span> <span class="n">b</span>

<span class="c1"># These are now optimized, as their truth value is known.</span>
<span class="n">a</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span><span class="p">,)</span> <span class="k">else</span> <span class="n">b</span>
<span class="n">a</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">c</span><span class="p">,)</span> <span class="k">else</span> <span class="n">b</span>
</pre></div>
</div>
<p>This is simply taking advantage of infrastructure that now exists.
Each node kind can overload getTruthValue and benefit from it. Help
would be welcome to review which ones can be added.</p>
</li>
<li><p>Function creations only have side effects, when their defaults or
annotations (Python3) do. This allows to remove them entirely, should
they be found to be unused.</p></li>
<li><p>Code generation for constants now shares element values used in
tuples.</p>
<p>The general case is currently too complex to solve, but we now make
sure constant tuples (as e.g. used in the default value for the
compiled function), and string constants share the value. This should
reduce memory usage and speed up program start-up.</p>
</li>
</ul>
</section>
<section id="id378">
<h3>Cleanups<a class="headerlink" href="#id378" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Optimization was initially designed around visitors that each did one
thing, and did it well. It turns out though, that this approach is
unnecessary, and constraint collection, allows for the most
consistent results. All remaining optimization has been merged into
constraint collection.</p></li>
<li><p>The names of modules containing node classes were harmonized to
always be plural. In the beginning, this was used to convey the
information that only a single node kind would be contained, but that
has long changed, and is unimportant information.</p></li>
<li><p>The class names of nodes were stripped from the CPython prefix.
Originally the intent was to express strict correlation to CPython,
but with increasing amounts of re-formulations, this was not used at
all, and its also not important enough to dominate the class name.</p></li>
<li><p>The re-formulations performed in tree building have moved out of the
Building module, into names ReformulationClasses e.g., so they
are easier to locate and review. Helpers for node building are now in
a separate module, and generally its much easier to find the content
of interest now.</p></li>
<li><p>Added new re-formulation of <code class="docutils literal notranslate"><span class="pre">print</span></code> statements. The conversion to
strings is now made explicit in the node tree.</p></li>
</ul>
</section>
<section id="id379">
<h3>New Tests<a class="headerlink" href="#id379" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added test to cover default value identity.</p></li>
</ul>
</section>
<section id="id380">
<h3>Organisational<a class="headerlink" href="#id380" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The upload of <a class="reference external" href="http://pypi.python.org/pypi/Nuitka/">Nuitka to PyPI</a> has been repaired and now
properly displays project information again.</p></li>
</ul>
</section>
<section id="id381">
<h3>Summary<a class="headerlink" href="#id381" title="Permalink to this headline"></a></h3>
<p>The quicker release is mostly a consolidation effort, without much
actual performance progress. The progress towards SSA form matter a lot
on the outlook front. Once this is finished, standard compiler
algorithms can be added to Nuitka which go beyond the current peephole
optimization.</p>
</section>
</section>
<section id="nuitka-release-0-4-0">
<h2>Nuitka Release 0.4.0<a class="headerlink" href="#nuitka-release-0-4-0" title="Permalink to this headline"></a></h2>
<p>This release brings massive progress on all fronts. The big highlight is
of course: Full Python3.2 support. With this release, the test suite of
CPython3.2 is considered passing when compiled with Nuitka.</p>
<p>Then lots of work on optimization and infrastructure. The major goal of
this release was to get in shape for actual optimization. This is also
why for the first time, it is tested that some things are indeed compile
time optimized to spot regressions easier. And we are having performance
diagrams, <a class="reference external" href="https://nuitka.net/pages/performance.html">even if weak ones</a>:</p>
<section id="id382">
<h3>New Features<a class="headerlink" href="#id382" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Python3.2 is now fully supported.</p></li>
<li><p>Fully correct <code class="docutils literal notranslate"><span class="pre">metaclass</span> <span class="pre">=</span></code> semantics now correctly supported. It
had been working somewhat previously, but now all the corner cases
are covered too.</p>
<ul>
<li><p>Keyword only parameters.</p></li>
<li><p>Annotations of functions return value and their arguments.</p></li>
<li><p>Exception causes, chaining, automatic deletion of exception
handlers <code class="docutils literal notranslate"><span class="pre">as</span></code> values.</p></li>
<li><p>Added support for starred assigns.</p></li>
<li><p>Unicode variable names are also supported, although its of course
ugly, to find a way to translate these to C++ ones.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id383">
<h3>Bug fixes<a class="headerlink" href="#id383" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Checking compiled code with <code class="docutils literal notranslate"><span class="pre">instance(some_function,</span>
<span class="pre">types.FunctionType)</span></code> as zope.interfaces does, was causing
compatibility problems. Now this kind of check passes for compiled
functions too.</p></li>
<li><p>The frame of modules had an empty locals dictionary, which is not
compatible to CPython which puts the globals dictionary there too.</p></li>
<li><p>For nested exceptions and interactions with generator objects, the
exceptions in <code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> were not always fully compatible.
They now are.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">range</span></code> builtin was not raising exceptions if given arguments
appeared to not have side effects, but were still illegal, e.g.
<code class="docutils literal notranslate"><span class="pre">range([],</span> <span class="pre">1,</span> <span class="pre">-1)</span></code> was optimized away if the value was not used.</p></li>
<li><p>Dont crash on imported modules with syntax errors. Instead, the
attempted recursion is simply not done.</p></li>
<li><p>Doing a <code class="docutils literal notranslate"><span class="pre">del</span></code> on <code class="docutils literal notranslate"><span class="pre">__defaults</span></code> and <code class="docutils literal notranslate"><span class="pre">__module__</span></code> of compiled
functions was crashing. This was noticed by a Python3 test for
<code class="docutils literal notranslate"><span class="pre">__kwdefaults__</span></code> that exposed this compiled functions weakness.</p></li>
<li><p>Wasnt detecting duplicate arguments, if one of them was not a plain
arguments. Star arguments could collide with normal ones.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> of classes is now only set, where it was in fact
specified. Otherwise it only polluted the name space of <code class="docutils literal notranslate"><span class="pre">locals()</span></code>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">return</span></code> from the tried statements of a <code class="docutils literal notranslate"><span class="pre">try/finally</span></code> block,
was overridden, by the final block, a reference was leaked. Example
code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">1</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p>Raising exception instances with value, was leaking references, and
not raising the <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> error it is supposed to do.</p></li>
<li><p>When raising with multiple arguments, the evaluation order of them
was not enforced, it now is. This fixes a reference leak when raising
exceptions, where building the exception was raising an exception.</p></li>
</ul>
</section>
<section id="id384">
<h3>Optimization<a class="headerlink" href="#id384" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Optimizing attribute access to compile time constants for the first
time. The old registry had no actual user yet.</p></li>
<li><p>Optimizing subscript and slices for all compile time constants beyond
constant values, made easy by using inheritance.</p></li>
<li><p>Built-in references now convert to strings directly, e.g. when used
in a print statement. Needed for the testing approach compiled file
contains only prints with constant value.</p></li>
<li><p>Optimizing calls to constant nodes directly into exceptions.</p></li>
<li><p>Optimizing built-in <code class="docutils literal notranslate"><span class="pre">bool</span></code> for arguments with known truth value.
This would be creations of tuples, lists, and dictionaries.</p></li>
<li><p>Optimizing <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">b</span></code> based on aliasing interface,
which at this time effectively is limited to telling that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">a</span></code>
is true and <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span></code> is false, but this will expand.</p></li>
<li><p>Added support for optimizing <code class="docutils literal notranslate"><span class="pre">hasattr</span></code>, <code class="docutils literal notranslate"><span class="pre">getattr</span></code>, and
<code class="docutils literal notranslate"><span class="pre">setattr</span></code> built-ins as well. The <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> was needed for the
<code class="docutils literal notranslate"><span class="pre">class</span></code> re-formulation of Python3 anyway.</p></li>
<li><p>Optimizing <code class="docutils literal notranslate"><span class="pre">getattr</span></code> with string argument and no default to simple
attribute access.</p></li>
<li><p>Added support for optimizing <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> built-in.</p></li>
<li><p>Was handling BreakException and ContinueException in all loops
that used <code class="docutils literal notranslate"><span class="pre">break</span></code> or <code class="docutils literal notranslate"><span class="pre">continue</span></code> instead of only where necessary.</p></li>
<li><p>When catching ReturnValueException, was raising an exception where
a normal return was sufficient. Raising them now only where needed,
which also means, function need not catch them ever.</p></li>
</ul>
</section>
<section id="id385">
<h3>Cleanups<a class="headerlink" href="#id385" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The handling of classes for Python2 and Python3 have been
re-formulated in Python more completely.</p>
<ul>
<li><p>The calling of the determined metaclass is now in the node tree,
so this call may possible to in-line in the future. This
eliminated some static C++ code.</p></li>
<li><p>Passing of values into dictionary creation function is no longer
using hard coded special parameters, but temporary variables can
now have closure references, making this normal and visible to the
optimization.</p></li>
<li><p>Class dictionary creation functions are therefore no longer as
special as they used to be.</p></li>
<li><p>There is no class creation node anymore, its merely a call to
<code class="docutils literal notranslate"><span class="pre">type</span></code> or the metaclass detected.</p></li>
</ul>
</li>
<li><p>Re-formulated complex calls through helper functions that process the
star list and dict arguments and do merges, checks, etc.</p>
<ul>
<li><p>Moves much C++ code into the node tree visibility.</p></li>
<li><p>Will allow optimization to eliminate checks and to compile time
merge, once in-line functions and loop unrolling are supported.</p></li>
</ul>
</li>
<li><p>Added return None to function bodies without a an aborting
statement at the end, and removed the hard coded fallback from
function templates. Makes it explicit in the node tree and available
for optimization.</p></li>
<li><p>Merged C++ classes for frame exception keeper with frame guards.</p>
<ul>
<li><p>The exception is now saved in the compiled frame object, making it
potentially more compatible to start with.</p></li>
<li><p>Aligned module and function frame guard usage, now using the same
class.</p></li>
<li><p>There is now a clear difference in the frame guard classes. One is
for generators and one is for functions, allowing to implement
their different exception behavior there.</p></li>
</ul>
</li>
<li><p>The optimization registries for calls, subscripts, slices, and
attributes have been replaced with attaching them to nodes.</p>
<ul>
<li><p>The ensuing circular dependency has been resolved by more local
imports for created nodes.</p></li>
<li><p>The package nuitka.transform.optimization.registries is no more.</p></li>
<li><p>New per node methods computeNodeCall, computeNodeSubscript,
etc. dispatch the optimization process to the nodes directly.</p></li>
</ul>
</li>
<li><p>Use the standard frame guard code generation for modules too.</p>
<ul>
<li><p>Added a variant once, that avoids caching of frames entirely.</p></li>
</ul>
</li>
<li><p>The variable closure taking has been cleaned up.</p>
<ul>
<li><p>Stages are now properly numbered.</p></li>
<li><p>Python3 only stage is not executed for Python2 anymore.</p></li>
<li><p>Added comments explaining things a bit better.</p></li>
<li><p>Now an early step done directly after building a tree.</p></li>
</ul>
</li>
<li><p>The special code generation used for unpacking from iterators and
catching StopIteration was cleaned up.</p>
<ul>
<li><p>Now uses template, Generator functions, and proper identifiers.</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">return</span></code> statements in generators are now re-formulated into
<code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopIteration</span></code> for generators, because thats what they
really are. Allowed to remove special handling of <code class="docutils literal notranslate"><span class="pre">return</span></code> nodes in
generators.</p></li>
<li><p>The specialty of CPython2.6 yielding non-None values of lambda
generators, was so far implemented in code generation. This was moved
to tree building as a re-formulation, making it subject to normal
optimization.</p></li>
<li><p>Mangling of attribute names in functions contained in classes, has
been moved into the early tree building. So far it was done during
code generation, making it invisible to the optimization stages.</p></li>
<li><p>Removed tags attribute from node classes. This was once intended to
make up for non-inheritance of similar node kinds, but since we have
function references, the structure got so clean, its no more needed.</p></li>
<li><p>Introduced new package <code class="docutils literal notranslate"><span class="pre">nuitka.tree</span></code>, where the building of node
trees, and operations on them live, as well as recursion and variable
closure.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">nuitka.transform</span></code> and move its former children
<code class="docutils literal notranslate"><span class="pre">nuitka.optimization</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka.finalization</span></code> one level up. The
deeply nested structure turned out to have no advantage.</p></li>
<li><p>Checks for Python version was sometimes &gt; 300, where of course &gt;=
300 is the only thing that makes sense.</p></li>
<li><p>Split out helper code for exception raising from the handling of
exception objects.</p></li>
</ul>
</section>
<section id="id386">
<h3>New Tests<a class="headerlink" href="#id386" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The complete CPython3.2 test suite was adapted (no <code class="docutils literal notranslate"><span class="pre">__code__</span></code>, no
<code class="docutils literal notranslate"><span class="pre">__closure__</span></code>, etc.) and is now passing, but only without
debug, because otherwise some of the generated C++ triggers
(harmless) warnings.</p></li>
<li><p>Added new test suite designed to prove that expressions that are
known to be compile time constant are indeed so. This works using the
XML output done with <code class="docutils literal notranslate"><span class="pre">--dump-xml</span></code> and then searching it to only
have print statements with constant values.</p></li>
<li><p>Added new basic CPython3.2 test Functions32 and ParameterErrors32
to cover keyword only parameter handling.</p></li>
<li><p>Added tests to cover generator object and exception interactions.</p></li>
<li><p>Added tests to cover <code class="docutils literal notranslate"><span class="pre">try/finally</span></code> and <code class="docutils literal notranslate"><span class="pre">return</span></code> in one or both
branches correctly handling the references.</p></li>
<li><p>Added tests to cover evaluation order of arguments when raising
exceptions.</p></li>
</ul>
</section>
<section id="id387">
<h3>Organisational<a class="headerlink" href="#id387" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed my email from GMX over to Gmail, the old one will still
continue to work. Updated the copyright notices accordingly.</p></li>
<li><p>Uploaded <a class="reference external" href="http://pypi.python.org/pypi/Nuitka/">Nuitka to PyPI</a> as
well.</p></li>
</ul>
</section>
<section id="id388">
<h3>Summary<a class="headerlink" href="#id388" title="Permalink to this headline"></a></h3>
<p>This release marks a milestone. The support of Python3 is here. The
re-formulation of complex calls, and the code generation improvements
are quite huge. More re-formulation could be done for argument parsing,
but generally this is now mostly complete.</p>
<p>The 0.3.x series had a lot releases. Many of which brought progress with
re-formulations that aimed at making optimization easier or possible.
Sometimes small things like making return None explicit. Sometimes
bigger things, like making class creations normal functions, or getting
rid of <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code>. All of this was important ground work, to
make sure, that optimization doesnt deal with complex stuff.</p>
<p>So, the 0.4.x series begins with this. The focus from now on can be
almost purely optimization. This release contains already some of it,
with frames being optimized away, with the assignment keepers from the
<code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> re-formulation being optimized away. This will be
about achieving goals from the ctypes plan as discussed in the
Developer Manual.</p>
<p>Also the performance page will be expanded with more benchmarks and
diagrams as I go forward. I have finally given up on codespeed, and do
my own diagrams.</p>
</section>
</section>
<section id="nuitka-release-0-3-25">
<h2>Nuitka Release 0.3.25<a class="headerlink" href="#nuitka-release-0-3-25" title="Permalink to this headline"></a></h2>
<p>This release brings about changes on all fronts, bug fixes, new
features. Also very importantly Nuitka no longer uses C++11 for its
code, but mere C++03. There is new re-formulation work, and re-factoring
of functions.</p>
<p>But the most important part is this: Mercurial unit tests are working.
Nearly. With the usual disclaimer of me being wrong, all remaining
errors are errors of the test, or minor things. Hope is that these unit
tests can be added as release tests to Nuitka. And once that is done,
the next big Python application can come.</p>
<section id="id389">
<h3>Bug fixes<a class="headerlink" href="#id389" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Local variables were released when an exception was raised that
escaped the local function. They should only be released, after
another exception was raised somewhere.</p></li>
<li><p>Identifiers of nested tuples and lists could collide.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="p">,),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Both tuples had the same name previously, not the end of the tuple is
marked too. Fixed in 0.3.24.1 already.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__name__</span></code> when used read-only in modules in packages was
optimized to a string value that didnt contain the package name.</p></li>
<li><p>Exceptions set when entering compiled functions were unset at
function exit.</p></li>
</ul>
</section>
<section id="id390">
<h3>New Features<a class="headerlink" href="#id390" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Compiled frames support. Before, Nuitka was creating frames with the
standard CPython C/API functions, and tried its best to cache them.
This involved some difficulties, but as it turns out, it is actually
possible to instead provide a compatible type of our own, that we
have full control over.</p>
<p>This will become the base of enhanced compatibility. Keeping
references to local variables attached to exception tracebacks is
something we may be able to solve now.</p>
</li>
<li><p>Enhanced Python3 support, added support for <code class="docutils literal notranslate"><span class="pre">nonlocal</span></code> declarations
and many small corrections for it.</p></li>
<li><p>Writable <code class="docutils literal notranslate"><span class="pre">__defaults__</span></code> attribute for compiled functions, actually
changes the default value used at call time. Not supported is
changing the amount of default parameters.</p></li>
</ul>
</section>
<section id="id391">
<h3>Cleanups<a class="headerlink" href="#id391" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Keep the functions along with the module and added FunctionRef node
kind to point to them.</p></li>
<li><p>Reformulated <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> operators with the conditional
expression construct which makes the short-circuit branch.</p></li>
<li><p>Access <code class="docutils literal notranslate"><span class="pre">self</span></code> in methods from the compiled function object instead
of pointer to context object, making it possible to access the
function object.</p></li>
<li><p>Removed OverflowCheck module and its usage, avoids one useless scan
per function to determine the need for locals dictionary.</p></li>
<li><p>Make compileTree of MainControl module to only do what the name
says and moved the rest out, making the top level control clearer.</p></li>
<li><p>Dont export module entry points when building executable and not
modules. These exports cause MinGW and MSVC compilers to create
export libraries.</p></li>
</ul>
</section>
<section id="id392">
<h3>Optimization<a class="headerlink" href="#id392" title="Permalink to this headline"></a></h3>
<ul>
<li><p>More efficient code for conditional expressions in conditions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">a</span> <span class="k">if</span> <span class="n">b</span> <span class="k">else</span> <span class="n">c</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>See above, this code is now the typical pattern for each <code class="docutils literal notranslate"><span class="pre">or</span></code> and
<code class="docutils literal notranslate"><span class="pre">and</span></code>, so this was much needed now.</p>
</li>
</ul>
</section>
<section id="id393">
<h3>Organisational<a class="headerlink" href="#id393" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The remaining uses of C++11 have been removed. Code generated with
Nuitka and complementary C++ code now compile with standard C++03
compilers. This lowers the Nuitka requirements and enables at least
g++ 4.4 to work with Nuitka.</p></li>
<li><p>The usages of the GNU extension operation <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">?:</span> <span class="pre">b</span></code> have replaced
with standard C++ constructs. This is needed to support MSVC which
doesnt have this.</p></li>
<li><p>Added examples for the typical use cases to the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a>.</p></li>
<li><p>The compare_with_cpython script has gained an option to immediately
remove the Nuitka outputs (build directory and binary) if successful.
Also the temporary files are now put under /var/tmp if available.</p></li>
<li><p>Debian package improvements, registering with <code class="docutils literal notranslate"><span class="pre">doc-base</span></code> the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User
Manual</a> so it is easier
to discover. Also suggest <code class="docutils literal notranslate"><span class="pre">mingw32</span></code> package which provides the
cross compiler to Windows.</p></li>
<li><p>Partial support for MSVC (Visual Studio 2008 to be exact, the version
that works with CPython2.6 and CPython2.7).</p>
<p>All basic tests that do not use generators are working now, but those
will currently cause crashes.</p>
</li>
<li><p>Renamed the <code class="docutils literal notranslate"><span class="pre">--g++-only</span></code> option to <code class="docutils literal notranslate"><span class="pre">--c++-only</span></code>.</p>
<p>The old name is no longer correct after clang and MSVC have gained
support, and it could be misunderstood to influence compiler
selection, rather than causing the C++ source code to not be updated,
so manual changes will the used.</p>
</li>
<li><p>Catch exceptions for <code class="docutils literal notranslate"><span class="pre">continue</span></code>, <code class="docutils literal notranslate"><span class="pre">break</span></code>, and <code class="docutils literal notranslate"><span class="pre">return</span></code> only
where needed for <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> and loop constructs.</p></li>
</ul>
</section>
<section id="id394">
<h3>New Tests<a class="headerlink" href="#id394" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added CPython3.2 test suite as tests/CPython32 from 3.2.3 and run
it with CPython2.7 to check that Nuitka gives compatible error
messages. It is not expected to pass yet on Python3.2, but work will
be done towards this goal.</p></li>
<li><p>Make CPython2.7 test suite runner also execute the generated
doctest modules.</p></li>
<li><p>Enabled tests for default parameters and their reference counts.</p></li>
</ul>
</section>
<section id="id395">
<h3>Summary<a class="headerlink" href="#id395" title="Permalink to this headline"></a></h3>
<p>This release marks an important point. The compiled frames are exciting
new technology, that will allow even better integration with CPython,
while improving speed. Lowering the requirements to C++03 means, we will
become usable on Android and with MSVC, which will make adoption of
Nuitka on Windows easier for many.</p>
<p>Structurally the outstanding part is the function as references cleanup.
This was a blocker for value propagation, because now functions
references can be copied, whereas previously this was duplicating the
whole function body, which didnt work, and wasnt acceptable. Now, work
can resume in this domain.</p>
<p>Also very exciting when it comes to optimization is the remove of
special code for <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> operators, as these are now only
mere conditional expressions. Again, this will make value propagation
easier with two special cases less.</p>
<p>And then of course, with Mercurial unit tests running compiled with
Nuitka, an important milestone has been hit.</p>
<p>For a while now, the focus will be on completing Python3 support, XML
based optimization regression tests, benchmarks, and other open ends.
Once that is done, and more certainty about Mercurial tests support, I
may call it a 0.4 and start with local type inference for actual speed
gains.</p>
</section>
</section>
<section id="nuitka-release-0-3-24">
<h2>Nuitka Release 0.3.24<a class="headerlink" href="#nuitka-release-0-3-24" title="Permalink to this headline"></a></h2>
<p>This release contains progress on many fronts, except performance.</p>
<p>The extended coverage from running the CPython 2.7 and CPython 3.2
(partially) test suites shows in a couple of bug fixes and general
improvements in compatibility.</p>
<p>Then there is a promised new feature that allows to compile whole
packages.</p>
<p>Also there is more Python3 compatibility, the CPython 3.2 test suite now
succeeds up to test_builtin.py, where it finds that <code class="docutils literal notranslate"><span class="pre">str</span></code> doesnt
support the new parameters it has gained, future releases will improve
on this.</p>
<p>And then of course, more re-formulation work, in this case, class
definitions are now mere simple functions. This and later function
references, is the important and only progress towards type inference.</p>
<section id="id396">
<h3>Bug fixes<a class="headerlink" href="#id396" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The compiled method type can now be used with <code class="docutils literal notranslate"><span class="pre">copy</span></code> module. That
means, instances with methods can now be copied too. Fixed in
0.3.23.1 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement as of Python2.7 creates the
<code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> object from a given value immediately, instead of
delayed as it was with Python2.6. This makes a difference for the
form with 2 arguments, and if the value is a tuple. Fixed in 0.3.23.1
already.</p></li>
<li><p>Sets written like this didnt work unless they were predicted at
compile time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">value</span><span class="p">}</span>
</pre></div>
</div>
<p>This apparently rarely used Python2.7 syntax didnt have code
generation yet and crashed the compiler. Fixed in 0.3.23.1 already.</p>
</li>
<li><p>For Python2, the default encoding for source files is <code class="docutils literal notranslate"><span class="pre">ascii</span></code>, and
it is now enforced by Nuitka as well, with the same <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.</p></li>
<li><p>Corner cases of <code class="docutils literal notranslate"><span class="pre">exec</span></code> statements with nested functions now give
proper <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> exceptions under Python2.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement with a tuple of length 1 as argument, now also
gives a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> exception under Python2.</p></li>
<li><p>For Python2, the <code class="docutils literal notranslate"><span class="pre">del</span></code> of a closure variable is a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>.</p></li>
</ul>
</section>
<section id="id397">
<h3>New Features<a class="headerlink" href="#id397" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support creating compiled packages. If you give Nuitka a
directory with an __init__.py file, it will compile that package
into a .so file. Adding the package contents with <code class="docutils literal notranslate"><span class="pre">--recurse-dir</span></code>
allows to compile complete packages now. Later there will be a
cleaner interface likely, where the later is automatic.</p></li>
<li><p>Added support for providing directories as main programs. Its OK if
they contain a __main__.py file, then its used instead, otherwise
give compatible error message.</p></li>
<li><p>Added support for optimizing the <code class="docutils literal notranslate"><span class="pre">super</span></code> built-in. It was already
working correctly, but not optimized on CPython2. But for CPython3,
the variant without any arguments required dedicated code.</p></li>
<li><p>Added support for optimizing the <code class="docutils literal notranslate"><span class="pre">unicode</span></code> built-in under Python2.
It was already working, but will become the basis for the <code class="docutils literal notranslate"><span class="pre">str</span></code>
built-in of Python3 in future releases.</p></li>
<li><p>For Python3, lots of compatibility work has been done. The Unicode
issues appear to be ironed out now. The <code class="docutils literal notranslate"><span class="pre">del</span></code> of closure variables
is allowed and supported now. Built-ins like <code class="docutils literal notranslate"><span class="pre">ord</span></code> and <code class="docutils literal notranslate"><span class="pre">chr</span></code> work
more correctly and attributes are now interned strings, so that
monkey patching classes works.</p></li>
</ul>
</section>
<section id="id398">
<h3>Organisational<a class="headerlink" href="#id398" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Migrated bin/benchmark.sh to Python as misc/run-valgrind.py and
made it a bit more portable that way. Prefers /var/tmp if it exists
and creates temporary files in a secure manner. Triggered by the
Debian insecure temp file bug.</p></li>
<li><p>Migrated bin/make-dependency-graph.sh to Python as
misc/make-dependency-graph.py and made a more portable and powerful
that way.</p>
<p>The filtering is done a more robust way. Also it creates temporary
files in a secure manner, also triggered by the Debian insecure temp
file bug.</p>
<p>And it creates SVG files and no longer PostScript as the first one is
more easily rendered these days.</p>
</li>
<li><p>Removed the misc/gist git sub-module, which was previously used by
misc/make-doc.py to generate HTML from <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> and <a class="reference external" href="https://nuitka.net/doc/developer-manual.html">Developer Manual</a>.</p>
<p>These are now done with Nikola, which is much better at it and it
integrates with the web site.</p>
</li>
<li><p>Lots of formatting improvements to the change log, and manuals:</p>
<ul class="simple">
<li><p>Marking identifiers with better suited ReStructured Text markup.</p></li>
<li><p>Added links to the bug tracker all Issues.</p></li>
<li><p>Unified wordings, quotation, across the documents.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id399">
<h3>Cleanups<a class="headerlink" href="#id399" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The creation of the class dictionaries is now done with normal
function bodies, that only needed to learn how to throw an exception
when directly called, instead of returning <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<p>Also the assignment of <code class="docutils literal notranslate"><span class="pre">__module__</span></code> and <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> in these has
become visible in the node tree, allowing their proper optimization.</p>
<p>These re-formulation changes allowed to remove all sorts of special
treatment of <code class="docutils literal notranslate"><span class="pre">class</span></code> code in the code generation phase, making
things a lot simpler.</p>
</li>
<li><p>There was still a declaration of <code class="docutils literal notranslate"><span class="pre">PRINT_ITEMS</span></code> and uses of it, but
no definition of it.</p></li>
<li><p>Code generation for main module and other modules are now merged,
and no longer special.</p></li>
<li><p>The use of raw strings was found unnecessary and potentially still
buggy and has been removed. The dependence on C++11 is getting less
and less.</p></li>
</ul>
</section>
<section id="id400">
<h3>New Tests<a class="headerlink" href="#id400" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Updated CPython2.6 test suite tests/CPython26 to 2.6.8, adding
tests for recent bug fixes in CPython. No changes to Nuitka were
needed in order to pass, which is always good news.</p></li>
<li><p>Added CPython2.7 test suite as tests/CPython27 from 2.7.3, making
it public for the first time. Previously a private copy of some age,
with many no longer needed changes had been used by me. Now it is up
to par with what was done before for tests/CPython26, so this
pending action is finally done.</p></li>
<li><p>Added test to cover Python2 syntax error of having a function with
closure variables nested inside a function that is an overflow
function.</p></li>
<li><p>Added test BuiltinSuper to cover <code class="docutils literal notranslate"><span class="pre">super</span></code> usage details.</p></li>
<li><p>Added test to cover <code class="docutils literal notranslate"><span class="pre">del</span></code> on nested scope as syntax error.</p></li>
<li><p>Added test to cover <code class="docutils literal notranslate"><span class="pre">exec</span></code> with a tuple argument of length 1.</p></li>
<li><p>Added test to cover <code class="docutils literal notranslate"><span class="pre">barry_as_FLUFL</span></code> future import to work.</p></li>
<li><p>Removed Unicode from known error cases for CPython3.2, its now
working.</p></li>
</ul>
</section>
<section id="id401">
<h3>Summary<a class="headerlink" href="#id401" title="Permalink to this headline"></a></h3>
<p>This release brought forward the most important remaining re-formulation
changes needed for Nuitka. Removing class bodies, makes optimization yet
again simpler. Still, making function references, so they can be copied,
is missing for value propagation to progress.</p>
<p>Generally, as usual, a focus has been laid on correctness. This is also
the first time, I am release with a known bug though, one which I
believe now, may be the root cause of the mercurial tests not yet
passing.</p>
<p>The solution will be involved and take a bit of time. It will be about
compiled frames and be a (invasive) solution. It likely will make
Nuitka faster too. But this release includes lots of tiny improvements,
for Python3 and also for Python2. So I wanted to get this out now.</p>
<p>As usual, please check it out, and let me know how you fare.</p>
</section>
</section>
<section id="nuitka-release-0-3-23">
<h2>Nuitka Release 0.3.23<a class="headerlink" href="#nuitka-release-0-3-23" title="Permalink to this headline"></a></h2>
<p>This release is the one that completes the Nuitka sun rise phase.</p>
<p>All of Nuitka is now released under <a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a> which is a very liberal
license, and compatible with basically all Free Software licenses there
are. Its only asking to allow integration, of what you send back, and
patent grants for the code.</p>
<p>In the first phase of Nuitka development, I wanted to keep control over
Nuitka, so it wouldnt repeat mistakes of other projects. This is no
longer a concern for me, its not going to happen anymore.</p>
<p>I would like to thank Debian Legal team, for originally bringing to my
attention, that this license will be better suited, than any copyright
assignment could be.</p>
<section id="id402">
<h3>Bug fixes<a class="headerlink" href="#id402" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The compiled functions could not be used with <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> or
<code class="docutils literal notranslate"><span class="pre">copy.copy</span></code>. Fixed in 0.3.22.1 already.</p></li>
<li><p>In-place operations for slices with not both bounds specified crashed
the compiler. Fixed in 0.3.22.1 already.</p></li>
<li><p>Cyclic imports could trigger an endless loop, because module import
expressions became the parent of the imported module object. Fixed in
0.3.22.2 already.</p></li>
<li><p>Modules named <code class="docutils literal notranslate"><span class="pre">proc</span></code> or <code class="docutils literal notranslate"><span class="pre">func</span></code> could not be compiled to modules
or embedded due to a collision with identifiers of CPython2.7
includes. Fixed in 0.3.22.2 already.</p></li>
</ul>
</section>
<section id="id403">
<h3>New Features<a class="headerlink" href="#id403" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The function copying fix also makes pickling of compiled functions
available. As it is the case for non-compiled functions in CPython,
no code objects are stored, only names of module level variables.</p></li>
</ul>
</section>
<section id="id404">
<h3>Organisational<a class="headerlink" href="#id404" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Using the Apache License 2.0 for all of Nuitka now.</p></li>
<li><p>Speedcenter has been re-activated, but is not yet having a lot of
benchmarks yet, subject to change.</p>
<div class="admonition-update admonition">
<p class="admonition-title">Update</p>
<p>We have given up on this version of speedcenter meanwhile, and
generate static pages with graphs instead. We can this still
speedcenter.</p>
</div>
</li>
</ul>
</section>
<section id="id405">
<h3>New Tests<a class="headerlink" href="#id405" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed the CPython26 tests to no longer disable the parts that
relied on copying of functions to work as that is now supported.</p></li>
<li><p>Extended in-place assignment tests to cover error cases of we had
issues with.</p></li>
<li><p>Extended compile library test to also try and compile the path where
<code class="docutils literal notranslate"><span class="pre">numpy</span></code> lives. This is apparently another path, where Debian
installs some modules, and compiling this would have revealed issues
sooner.</p></li>
</ul>
</section>
<section id="id406">
<h3>Summary<a class="headerlink" href="#id406" title="Permalink to this headline"></a></h3>
<p>The release contains bug fixes, and the huge step of changing <a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">the
license</a>. It is made in
preparation to <a class="reference external" href="https://ep2012.europython.eu">PyCON EU</a>.</p>
</section>
</section>
<section id="nuitka-release-0-3-22">
<h2>Nuitka Release 0.3.22<a class="headerlink" href="#nuitka-release-0-3-22" title="Permalink to this headline"></a></h2>
<p>This release is a continuation of the trend of previous releases, and
added more re-formulations of Python that lower the burden on code
generation and optimization.</p>
<p>It also improves Python3 support substantially. In fact this is the
first release to not only run itself under Python3, but for Nuitka to
<em>compile itself</em> with Nuitka under Python3, which previously only worked
for Python2. For the common language subset, its quite fine now.</p>
<section id="id407">
<h3>Bug fixes<a class="headerlink" href="#id407" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>List contractions produced extra entries on the call stack, after
they became functions, these are no more existent. That was made
possible my making frame stack entries an optional element in the
node tree, left out for list contractions.</p></li>
<li><p>Calling a compiled function in an exception handler cleared the
exception on return, it no longer does that.</p></li>
<li><p>Reference counter handling with generator <code class="docutils literal notranslate"><span class="pre">throw</span></code> method is now
correct.</p></li>
<li><p>A module builtins conflicted with the handling of the Python
<code class="docutils literal notranslate"><span class="pre">builtins</span></code> module. Those now use different identifiers.</p></li>
</ul>
</section>
<section id="id408">
<h3>New Features<a class="headerlink" href="#id408" title="Permalink to this headline"></a></h3>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">metaclass</span></code> syntax for the <code class="docutils literal notranslate"><span class="pre">class</span></code> statement works, and the
old <code class="docutils literal notranslate"><span class="pre">__metaclass__</span></code> attribute is properly ignored.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Metaclass syntax in Python3, illegal in Python2</span>
<span class="k">class</span> <span class="nc">X</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">Y</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Metaclass syntax in Python2, no effect in Python3</span>
<span class="k">class</span> <span class="nc">X</span><span class="p">:</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">Y</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The way to make a use of a metaclass in a portable way, is to
create a based class that has it and then inherit from it. Sad,
isn it. Surely, the support for <code class="docutils literal notranslate"><span class="pre">__metaclass__</span></code> could still
live.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For Python2/3 compatible source, we create a base class that has the</span>
<span class="c1"># metaclass used and doesn&#39;t require making a choice.</span>

<span class="n">CPythonNodeMetaClassBase</span> <span class="o">=</span> <span class="n">NodeCheckMetaClass</span><span class="p">(</span><span class="s2">&quot;CPythonNodeMetaClassBase&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">object</span><span class="p">,),</span> <span class="p">{})</span>
</pre></div>
</div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--dump-xml</span></code> option works with Nuitka running under Python3.
This was not previously supported.</p></li>
<li><p>Python3 now also has compatible parameter errors and compatible
exception error messages.</p></li>
<li><p>Python3 has changed scope rules for list contractions (assignments
dont affect outside values) and this is now respected as well.</p></li>
<li><p>Python3 has gained support for recursive programs and stand alone
extension modules, these are now both possible as well.</p></li>
</ul>
</section>
<section id="id409">
<h3>Optimization<a class="headerlink" href="#id409" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Avoid frame stack entries for functions that cannot raise exceptions,
i.e. where they would not be used.</p>
<p>This avoids overhead for the very simple functions. And example of
this can be seen here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">simple</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">7</span>
</pre></div>
</div>
</li>
<li><p>Optimize <code class="docutils literal notranslate"><span class="pre">len</span></code> built-in for non-constant, but known length values.</p>
<p>An example can be seen here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The range isn&#39;t constructed at compile time, but we still know its</span>
<span class="c1"># length.</span>
<span class="nb">len</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10000000</span><span class="p">))</span>

<span class="c1"># The string isn&#39;t constructed at compile time, but we still know its</span>
<span class="c1"># length.</span>
<span class="nb">len</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># The tuple isn&#39;t constructed, instead it&#39;s known length is used, and</span>
<span class="c1"># side effects are maintained.</span>
<span class="nb">len</span><span class="p">((</span><span class="n">a</span><span class="p">(),</span> <span class="n">b</span><span class="p">()))</span>
</pre></div>
</div>
<p>This new optimization applies to all kinds of container creations and
the <code class="docutils literal notranslate"><span class="pre">range</span></code> built-in initially.</p>
</li>
<li><p>Optimize conditions for non-constant, but known truth values.</p>
<p>At this time, known truth values of non-constants means <code class="docutils literal notranslate"><span class="pre">range</span></code>
built-in calls with know size and container creations.</p>
<p>An example can be seen here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">,):</span>
    <span class="nb">print</span> <span class="s2">&quot;In Branch&quot;</span>
</pre></div>
</div>
<p>Its clear, that the tuple will be true, we just need to maintain the
side effect, which we do.</p>
</li>
<li><p>Optimize <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> operators for known truth values.</p>
<p>See above for what has known truth values currently. This will be
most useful to predict conditions that need not be evaluated at all
due to short circuit nature, and to avoid checking against constant
values. Previously this could not be optimized, but now it can:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The access and call to &quot;something()&quot; cannot possibly happen</span>
<span class="mi">0</span> <span class="ow">and</span> <span class="n">something</span><span class="p">()</span>

<span class="c1"># Can be replaced with &quot;something()&quot;, as &quot;1&quot; is true. If it had a side</span>
<span class="c1"># effect, it would be maintained.</span>
<span class="mi">1</span> <span class="ow">and</span> <span class="n">something</span><span class="p">()</span>

<span class="c1"># The access and call to &quot;something()&quot; cannot possibly happen, the value</span>
<span class="c1"># is already decided, it&#39;s &quot;1&quot;.</span>
<span class="mi">1</span> <span class="ow">or</span> <span class="n">something</span><span class="p">()</span>

<span class="c1"># Can be replaced with &quot;something()&quot;, as &quot;0&quot; is false. If it had a side</span>
<span class="c1"># effect, it would be maintained.</span>
<span class="mi">0</span> <span class="ow">or</span> <span class="n">something</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Optimize print arguments to become strings.</p>
<p>The arguments to <code class="docutils literal notranslate"><span class="pre">print</span></code> statements are now converted to strings at
compile time if possible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="mi">1</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;1&quot;</span>
</pre></div>
</div>
</li>
<li><p>Combine print arguments to single ones.</p>
<p>When multiple strings are printed, these are now combined.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;1+1=&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s2">&quot;1+1= 2&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id410">
<h3>Organisational<a class="headerlink" href="#id410" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Enhanced Python3 support, enabling support for most basic tests.</p></li>
<li><p>Check files with PyLint in deterministic (alphabetical) order.</p></li>
</ul>
</section>
<section id="id411">
<h3>Cleanups<a class="headerlink" href="#id411" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Frame stack entries are now part of the node tree instead of part of
the template for every function, generator, class or module.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> has been re-formulated to use an
indicator variable visible in the node tree, that tells if a handler
has been executed or not.</p></li>
<li><p>Side effects are now a dedicated node, used in several optimization
to maintain the effect of an expression with known value.</p></li>
</ul>
</section>
<section id="id412">
<h3>New Tests<a class="headerlink" href="#id412" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Expanded and adapted basic tests to work for Python3 as well.</p></li>
<li><p>Added reference count tests for generator functions <code class="docutils literal notranslate"><span class="pre">throw</span></code>,
<code class="docutils literal notranslate"><span class="pre">send</span></code>, and <code class="docutils literal notranslate"><span class="pre">close</span></code> methods.</p></li>
<li><p>Cover calling a function with <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> in an exception
handler twice. No test was previously doing that.</p></li>
</ul>
</section>
<section id="id413">
<h3>Summary<a class="headerlink" href="#id413" title="Permalink to this headline"></a></h3>
<p>This release offers enhanced compatibility with Python3, as well as the
solution to many structural problems. Calculating lengths of large
non-constant values at compile time, is technically a break through, as
is avoiding lengthy calculations. The frame guards as nodes is a huge
improvement, making that costly operational possible to be optimized
away.</p>
<p>There still is more work ahead, before value propagation will be safe
enough to enable, but we are seeing the glimpse of it already. Not for
long, and looking at numbers will make sense.</p>
</section>
</section>
<section id="nuitka-release-0-3-21">
<h2>Nuitka Release 0.3.21<a class="headerlink" href="#nuitka-release-0-3-21" title="Permalink to this headline"></a></h2>
<p>This releases contains some really major enhancements, all heading
towards enabling value propagation inside Nuitka. Assignments of all
forms are now all simple and explicit, and as a result, now it will be
easy to start tracking them.</p>
<p>Contractions have become functions internally, with statements use
temporary variables, complex unpacking statement were reduced to more
simple ones, etc.</p>
<p>Also there are the usual few small bug fixes, and a bunch of
organisational improvements, that make the release complete.</p>
<section id="id414">
<h3>Bug fixes<a class="headerlink" href="#id414" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The built-in <code class="docutils literal notranslate"><span class="pre">next</span></code> could causes a program crash when iterating
past the end of an iterator. Fixed in 0.3.20.1 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">set</span></code> constants could cause a compiler error, as that type was
not considered in the mutable check yet. Fixed in 0.3.20.2 already.</p></li>
<li><p>Performance regression. Optimize expression for exception types
caught as well again, this was lost in last release.</p></li>
<li><p>Functions that contain <code class="docutils literal notranslate"><span class="pre">exec</span></code>, are supposed to have a writable
locals. But when removing that <code class="docutils literal notranslate"><span class="pre">exec</span></code> statement as part of
optimization, this property of the function could get lost.</p></li>
<li><p>The so called overflow functions are once again correctly handled.
These once were left behind in some refactoring and had not been
repaired until now. An overflow function is a nested function with an
<code class="docutils literal notranslate"><span class="pre">exec</span></code> or a star import.</p></li>
<li><p>The syntax error for <code class="docutils literal notranslate"><span class="pre">return</span></code> outside of a function, was not given,
instead the code returned at run time. Fixed to raise a
<code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> at compile time.</p></li>
</ul>
</section>
<section id="id415">
<h3>Optimization<a class="headerlink" href="#id415" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Avoid <code class="docutils literal notranslate"><span class="pre">tuple</span></code> objects to be created when catching multiple
exception types, instead call exception match check function multiple
times.</p></li>
<li><p>Removal of dead code following <code class="docutils literal notranslate"><span class="pre">break</span></code>, <code class="docutils literal notranslate"><span class="pre">continue</span></code>, <code class="docutils literal notranslate"><span class="pre">return</span></code>,
and <code class="docutils literal notranslate"><span class="pre">raise</span></code>. Code that follows these statements, or conditional
statements, where all branches end with it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These may not actually occur often in actual code, but future
optimization may produce them more frequently, and their removal
may in turn make other possible optimization.</p>
</div>
</li>
<li><p>Detect module variables as read only after all writes have been
detected to not be executed as removed. Previously the read only
indicator was determined only once and then stayed the same.</p></li>
<li><p>Expanded conditional statement optimization to detect cases, where
condition is a compile time constant, not just a constant value.</p></li>
<li><p>Optimize away assignments from a variable to the same variable, they
have no effect. The potential side effect of accessing the variable
is left intact though, so exceptions will be raised still.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An exception is where <code class="docutils literal notranslate"><span class="pre">len</span> <span class="pre">=</span> <span class="pre">len</span></code> actually does have an impact,
because that variable becomes assignable. The compile itself
test of Nuitka found that to happen with <code class="docutils literal notranslate"><span class="pre">long</span></code> from the
<code class="docutils literal notranslate"><span class="pre">nuitka.__past__</span></code> module.</p>
</div>
</li>
<li><p>Created Python3 variant of quick <code class="docutils literal notranslate"><span class="pre">unicode</span></code> string access, there was
no such thing in the CPython C/API, but we make the distinction in
the source code, so it makes sense to have it.</p></li>
<li><p>Created an optimized implementation for the built-in <code class="docutils literal notranslate"><span class="pre">iter</span></code> with 2
parameters as well. This allows for slightly more efficient code to
be created with regards to reference handling, rather than using the
CPython C/API.</p></li>
<li><p>For all types of variable assigned in the generated code, there are
now methods that accept already taken references or not, and the code
generator picks the optimal variant. This avoids the drop of
references, that e.g. the local variable will insist to take.</p></li>
<li><p>Dont use a context object for generator functions (and generator
expressions) that dont need one. And even if it does to store e.g.
the given parameter values, avoid to have a common context if there
is no closure taken. This avoids useless <code class="docutils literal notranslate"><span class="pre">malloc</span></code> calls and speeds
up repeated generator object creation.</p></li>
</ul>
</section>
<section id="id416">
<h3>Organisational<a class="headerlink" href="#id416" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed the Scons build file database to reside in the build
directory as opposed to the current directory, not polluting it
anymore. Thanks for the patch go to Michael H Kent, very much
appreciated.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--experimental</span></code> option is no longer available outside of
checkouts of git, and even there not on stable branches (<code class="docutils literal notranslate"><span class="pre">master</span></code>,
<code class="docutils literal notranslate"><span class="pre">hotfix/...</span></code>). It only pollutes <code class="docutils literal notranslate"><span class="pre">--help</span></code> output as stable
releases have no experimental code options, not even development
version will make a difference.</p></li>
<li><p>The binary bin/Nuitka.py has been removed from the git repository.
It was deprecated a while ago, not part of the distribution and
served no good use, as it was a symbolic link only anyway.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> option is applied at Nuitka start time to
re-launch Nuitka with the given Python version, to make sure that the
Python run time used for computations and link time Python versions
are the same. The allowed values are now checked (2.6, 2.7 and 3.2)
and the user gets a nice error with wrong values.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--keep-pythonpath</span></code> alias for <code class="docutils literal notranslate"><span class="pre">--execute-with-pythonpath</span></code>
option, probably easier to remember.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">--debug</span></code> with clang, so it can also be used to check the
generated code for all warnings, and perform assertions. Didnt
report anything new.</p></li>
<li><p>The contents environment variable <code class="docutils literal notranslate"><span class="pre">CXX</span></code> determines the default C++
compiler when set, so that checking with <code class="docutils literal notranslate"><span class="pre">CXX=g++-4.7</span> <span class="pre">nuitka-python</span>
<span class="pre">...</span></code> has become supported.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">check-with-pylint</span></code> script now has a real command line option
to control the display of <code class="docutils literal notranslate"><span class="pre">TODO</span></code> items.</p></li>
</ul>
</section>
<section id="id417">
<h3>Cleanups<a class="headerlink" href="#id417" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Changed complex assignments, i.e. assignments with multiple targets
to such using a temporary variable and multiple simple assignments
instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">=</span> <span class="n">c</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">_tmp</span> <span class="o">=</span> <span class="n">c</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">_tmp</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">_tmp</span>
</pre></div>
</div>
<p>In CPython, when one assignment raises an exception, the whole thing
is aborted, so the complexity of having multiple targets is no more
needed, now that we have temporary variables in a block.</p>
<p>All that was really needed, was to evaluate the complete source
expression only once, but that made code generation contain ugly
loops that are no more needed.</p>
</li>
<li><p>Changed unpacking assignments to use temporary variables. Code like
this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">c</span>
</pre></div>
</div>
<p>Is handled more like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">_tmp_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">_tmp1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">_tmp_iter</span><span class="p">)</span>
<span class="n">_tmp2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">_tmp_iter</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">finished</span><span class="p">(</span><span class="n">_tmp_iter</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;too many values to unpack&quot;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">_tmp1</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">_tmp2</span>
</pre></div>
</div>
<p>In reality, not really <code class="docutils literal notranslate"><span class="pre">next</span></code> is used, as it wouldnt raise the
correct exception for unpacking, and the <code class="docutils literal notranslate"><span class="pre">finished</span></code> check is more
condensed into it.</p>
<p>Generally this cleanup allowed that the <code class="docutils literal notranslate"><span class="pre">AssignTargetTuple</span></code> and
associated code generation was removed, and in the future value
propagation may optimize these <code class="docutils literal notranslate"><span class="pre">next</span></code> and <code class="docutils literal notranslate"><span class="pre">iter</span></code> calls away where
possible. At this time, this is not done yet.</p>
</li>
<li><p>Exception handlers assign caught exception value through assignment
statement.</p>
<p>Previously the code generated for assigning from the caught exception
was not considered part of the handler. It now is the first statement
of an exception handler or not present, this way it may be optimized
as well.</p>
</li>
<li><p>Exception handlers now explicitly catch more than one type.</p>
<p>Catching multiple types worked by merits of the created tuple object
working with the Python C/API function called, but that was not
explicit at all. Now every handler has a tuple of exceptions it
catches, which may only be one, or if None, its all.</p>
</li>
<li><p>Contractions are now functions as well.</p>
<p>Contractions (list, dict, and set) are now re-formulated as function
bodies that contain for loops and conditional statements. This
allowed to remove a lot of special code that dealt with them and will
make these easier to understand for optimization and value
propagation.</p>
</li>
<li><p>Global is handled during tree building.</p>
<p>Previously the global statement was its own node, which got removed
during the optimization phase in a dedicated early optimization that
applied its effect, and then removed the node.</p>
<p>It was determined, that there is no reason to not immediately apply
the effect of the global variable and take closure variables and add
them to the provider of that <code class="docutils literal notranslate"><span class="pre">global</span></code> statement, allowing to remove
the node class.</p>
</li>
<li><p>Read only module variable detection integrated to constraint
collection.</p>
<p>The detection of read only module variables was so far done as a
separate step, which is no more necessary as the constraint
collection tracks the usages of module variables anyway, so this
separate and slow step could be removed.</p>
</li>
</ul>
</section>
<section id="id418">
<h3>New Tests<a class="headerlink" href="#id418" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added test to cover order of calls for complex assignments that
unpack, to see that they make a fresh iterator for each part of a
complex assignment.</p></li>
<li><p>Added test that unpacks in an exception catch. It worked, due to the
generic handling of assignment targets by Nuitka, and I didnt even
know it can be done, example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;Unpacking caught exception and unpacked&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
</pre></div>
</div>
<p>Will assign <code class="docutils literal notranslate"><span class="pre">a=1</span></code> and <code class="docutils literal notranslate"><span class="pre">b=2</span></code>.</p>
</li>
<li><p>Added test to cover return statements on module level and class
level, they both must give syntax errors.</p></li>
<li><p>Cover exceptions from accessing unassigned global names.</p></li>
<li><p>Added syntax test to show that star imports do not allow other names
to be imported at the same time as well.</p></li>
<li><p>Python3 is now also running the compile itself test successfully.</p></li>
</ul>
</section>
<section id="id419">
<h3>Summary<a class="headerlink" href="#id419" title="Permalink to this headline"></a></h3>
<p>The progress made towards value propagation and type inference is <em>very</em>
significant, and makes those appears as if they are achievable.</p>
</section>
</section>
<section id="nuitka-release-0-3-20">
<h2>Nuitka Release 0.3.20<a class="headerlink" href="#nuitka-release-0-3-20" title="Permalink to this headline"></a></h2>
<p>This time there are a few bug fixes and some really major cleanups, lots
of new optimization and preparations for more. And then there is a new
compiler clang and a new platform supported. macOS X appears to work
mostly, thanks for the patches from Pete Hunt.</p>
<section id="id420">
<h3>Bug fixes<a class="headerlink" href="#id420" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of a local variable name as an expression was not covered and
lead to a compiler crash. Totally amazing, but true, nothing in the
test suite of CPython covered this. Fixed in release 0.3.19.1
already.</p></li>
<li><p>The use of a closure variable name as an expression was not covered
as well. And in this case corrupted the reference count. Fixed in
release 0.3.19.1 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x</span> <span class="pre">import</span> <span class="pre">*</span></code> attempted to respect <code class="docutils literal notranslate"><span class="pre">__all__</span></code> but failed
to do so. Fixed in release 0.3.19.2 already.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x</span> <span class="pre">import</span> <span class="pre">*</span></code> didnt give a <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> when used on
Python3. Fixed in release 0.3.19.2 already.</p></li>
<li><p>The syntax error messages for global for function argument name and
duplicate function argument name are now identical as well.</p></li>
<li><p>Parameter values of generator function could cause compilation errors
when used in the closure of list contractions. Fixed.</p></li>
</ul>
</section>
<section id="id421">
<h3>New Features<a class="headerlink" href="#id421" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added support for disabling the console for Windows binaries. Thanks
for the patch go to Michael H Kent.</p></li>
<li><p>Enhanced Python3 support for syntax errors, these are now also
compatible.</p></li>
<li><p>Support for macOS X was added.</p></li>
<li><p>Support for using the clang compiler was added, it can be enforced
via <code class="docutils literal notranslate"><span class="pre">--clang</span></code> option. Currently this option is mainly intended to
allow testing the macOS X support as good as possible under Linux.</p></li>
</ul>
</section>
<section id="id422">
<h3>Optimization<a class="headerlink" href="#id422" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Enhanced all optimization that previously worked on constants to
work on compile time constants instead. A compile time constant
can currently also be any form of a built-in name or exception
reference. It is intended to expand this in the future.</p></li>
<li><p>Added support for built-ins <code class="docutils literal notranslate"><span class="pre">bin</span></code>, <code class="docutils literal notranslate"><span class="pre">oct</span></code>, and <code class="docutils literal notranslate"><span class="pre">hex</span></code>, which also
can be computed at compile time, if their arguments are compile time
constant.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">iter</span></code> built-in in both forms, one and two
arguments. These cannot be computed at compile time, but now will
execute faster.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">next</span></code> built-in, also in its both forms, one
and two arguments. These also cannot be computed at compile time, but
now will execute faster as well.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">open</span></code> built-in in all its form. We intend
for future releases to be able to track file opens for including them
into the executable if data files.</p></li>
<li><p>Optimize the <code class="docutils literal notranslate"><span class="pre">__debug__</span></code> built-in constant as well. It cannot be
assigned, yet code can determine a mode of operation from it, and
apparently some code does. When compiling the mode is decided.</p></li>
<li><p>Optimize the <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> built-in constant as well. It falls in the
same category as <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>, i.e. names of
built-in constants that a singletons.</p></li>
<li><p>Added support for anonymous built-in references, i.e. built-ins which
have names that are not normally accessible. An example is
<code class="docutils literal notranslate"><span class="pre">type(None)</span></code> which is not accessible from anywhere. Other examples
of such names are <code class="docutils literal notranslate"><span class="pre">compiled_method_or_function</span></code>.</p>
<p>Having these as represented internally, and flagged as compile time
constants, allows the compiler to make more compile time
optimization and to generate more efficient C++ code for it that
wont e.g. call the <code class="docutils literal notranslate"><span class="pre">type</span></code> built-in with <code class="docutils literal notranslate"><span class="pre">None</span></code> as an argument.</p>
</li>
<li><p>All built-in names used in the program are now converted to built-in
name references in a first step. Unsupported built-ins like e.g.
<code class="docutils literal notranslate"><span class="pre">zip</span></code>, for which Nuitka has no own code or understanding yet,
remained as module variables, which made access to them slow, and
difficult to recognize.</p></li>
<li><p>Added optimization for module attributes <code class="docutils literal notranslate"><span class="pre">__file__</span></code>, <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>
and <code class="docutils literal notranslate"><span class="pre">__package__</span></code> if they are read only. Its the same as was done
for <code class="docutils literal notranslate"><span class="pre">__name__</span></code> so far only.</p></li>
<li><p>Added optimization for slices and subscripts of compile time
constant values. These will play a more important role, once value
propagation makes them more frequent.</p></li>
</ul>
</section>
<section id="id423">
<h3>Organisational<a class="headerlink" href="#id423" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Created a change log from the previous release announcements. Its
as ReStructured Text and converted to PDF for the release as well,
but I chose not to include that in Debian, because its so easy to
generate the PDF on that yourself.</p></li>
<li><p>The posting of release announcements is now prepared by a script that
converts the ReStructured Text to HTML and adds it to Wordpress as a
draft posting or updates it, until its release time. Simple, sweet
and elegant.</p></li>
</ul>
</section>
<section id="id424">
<h3>Cleanups<a class="headerlink" href="#id424" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Split out the <code class="docutils literal notranslate"><span class="pre">nuitka.nodes.Nodes</span></code> module into many topic nodes, so
that there are now <code class="docutils literal notranslate"><span class="pre">nuitka.nodes.BoolNodes</span></code> or
<code class="docutils literal notranslate"><span class="pre">nuitka.nodes.LoopNodes</span></code> to host nodes of similar kinds, so that it
is now cleaner.</p></li>
<li><p>Split <code class="docutils literal notranslate"><span class="pre">del</span></code> statements into their own node kind, and use much
simpler node structures for them. The following blocks are absolutely
the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">a</span>
<span class="k">del</span> <span class="n">b</span><span class="o">.</span><span class="n">c</span>
<span class="k">del</span> <span class="n">d</span>
</pre></div>
</div>
<p>So thats now represented in the node tree. And even more complex
looking cases, like this one, also the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>This one gives a different parse tree, but the same bytecode. And so
Nuitka need no longer concern itself with this at all, and can remove
the tuple from the parse tree immediately. That makes them easy to
handle. As you may have noted already, it also means, there is no way
to enforce that two things are deleted or none at all.</p>
</li>
<li><p>Turned the function and class builder statements into mere assignment
statements, where defaults and base classes are handled by wrapping
expressions.</p>
<p>Previously they are also kind of assignment statements too, which is
not needed. Now they were reduced to only handle the <code class="docutils literal notranslate"><span class="pre">bases</span></code> for
classes and the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> for functions and make optional.</p>
</li>
<li><p>Refactored the decorator handling to the tree building stage,
presenting them as function calls on function body expression or
class body expression.</p>
<p>This allowed to remove the special code for decorators from code
generation and C++ templates, making decorations easy subjects for
future optimization, as they practically are now just function calls.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@some_classdecorator</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Its just a different form of writing things. Nothing requires the
implementation of decorators, its just functions calls with function
bodies before the assignment.</p>
<p>The following is only similar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
        <span class="k">pass</span>

    <span class="n">f</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>


<span class="n">C</span> <span class="o">=</span> <span class="n">some_classdecorator</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
</pre></div>
</div>
<p>Its only similar, because the assignment to an intermediate value of
<code class="docutils literal notranslate"><span class="pre">C</span></code> and <code class="docutils literal notranslate"><span class="pre">f</span></code> is not done, and if an exception was raised by the
decoration, that name could persist. For Nuitka, the function and
class body, before having a name, are an expression, and so can of
course be passed to decorators already.</p>
</li>
<li><p>The in-place assignments statements are now handled using temporary
variable blocks</p>
<p>Adding support for scoped temporary variables and references to them,
it was possible to re-formulate in-place assignments expressions as
normal look-ups, in-place operation call and then assignment
statement. This allowed to remove static templates and will yield
even better generated code in the future.</p>
</li>
<li><p>The for loop used to have has a source expression as child, and the
iterator over it was only taken at the code generation level, so that
step was therefore invisible to optimization. Moved it to tree
building stage instead, where optimization can work on it then.</p></li>
<li><p>Tree building now generally allows statement sequences to be <code class="docutils literal notranslate"><span class="pre">None</span></code>
everywhere, and pass statements are immediately eliminated from them
immediately. Empty statement sequences are now forbidden to exist.</p></li>
<li><p>Moved the optimization for <code class="docutils literal notranslate"><span class="pre">__name__</span></code> to compute node of variable
references, where it doesnt need anything complex to replace with
the constant value if its only read.</p></li>
<li><p>Added new bases classes and mix-in classes dedicated to expressions,
giving a place for some defaults.</p></li>
<li><p>Made the built-in code more reusable.</p></li>
</ul>
</section>
<section id="id425">
<h3>New Tests<a class="headerlink" href="#id425" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added some more diagnostic tests about complex assignment and <code class="docutils literal notranslate"><span class="pre">del</span></code>
statements.</p></li>
<li><p>Added syntax test for star import on function level, that must fail
on Python3.</p></li>
<li><p>Added syntax test for duplicate argument name.</p></li>
<li><p>Added syntax test for global on a function argument name.</p></li>
</ul>
</section>
<section id="id426">
<h3>Summary<a class="headerlink" href="#id426" title="Permalink to this headline"></a></h3>
<p>The decorator and building changes, the assignment changes, and the node
cleanups are all very important progress for the type inference work,
because they remove special casing the that previously would have been
required. Lambdas and functions now really are the same thing right
after tree building. The in-place assignments are now merely done using
standard assignment code, the built functions and classes are now
assigned to names in assignment statements, much <em>more</em> consistency
there.</p>
<p>Yet, even more work will be needed in the same direction. There may e.g.
be work required to cover <code class="docutils literal notranslate"><span class="pre">with</span></code> statements as well. And assignments
will become no more complex than unpacking from a temporary variable.</p>
<p>For this release, there is only minimal progress on the Python3 front,
despite the syntax support, which is only minuscule progress. The
remaining tasks appear all more or less difficult work that I dont want
to touch now.</p>
<p>There are still remaining steps, but we can foresee that a release may
be done that finally actually does type inference and becomes the
effective Python compiler this project is all about.</p>
</section>
</section>
<section id="nuitka-release-0-3-19">
<h2>Nuitka Release 0.3.19<a class="headerlink" href="#nuitka-release-0-3-19" title="Permalink to this headline"></a></h2>
<p>This time there are a few bug fixes, major cleanups, more Python3
support, and even new features. A lot things in this are justifying a
new release.</p>
<section id="id427">
<h3>Bug fixes<a class="headerlink" href="#id427" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The man pages of <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka-python</span></code> had no special
layout for the option groups and broken whitespace for
<code class="docutils literal notranslate"><span class="pre">--recurse-to</span></code> option. Also <code class="docutils literal notranslate"><span class="pre">--g++-only</span></code> was only partially bold.
Released as 0.3.18.1 hot fix already.</p></li>
<li><p>The command line length improvement we made to Scons for Windows was
not portable to Python2.6. Released as 0.3.18.2 hot fix already.</p></li>
<li><p>Code to detect already considered packages detection was not portable
to Windows, for one case, there was still a use of <code class="docutils literal notranslate"><span class="pre">/</span></code> instead of
using a <code class="docutils literal notranslate"><span class="pre">joinpath</span></code> call. Released as 0.3.18.3 already.</p></li>
<li><p>A call to the range built-in with no arguments would crash the
compiler, see Released as 0.3.18.4 already.</p></li>
<li><p>Compatibility Fix: When rich comparison operators returned false
value other <code class="docutils literal notranslate"><span class="pre">False</span></code>, for comparison chains, these would not be
used, but <code class="docutils literal notranslate"><span class="pre">False</span></code> instead, see .</p></li>
<li><p>The support for <code class="docutils literal notranslate"><span class="pre">__import__</span></code> didnt cover keyword arguments, these
were simply ignored. Fixed, but no warning is given yet.</p></li>
</ul>
</section>
<section id="id428">
<h3>New Features<a class="headerlink" href="#id428" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>A new option has been added, one can now specify
<code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> and Nuitka will attempt to embed these
modules even if not obviously imported. This is not yet working
perfect yet, but will receive future improvements.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">exec</span></code> built-in of Python3, this enables us
to run one more basic test, <code class="docutils literal notranslate"><span class="pre">GlobalStatement.py</span></code> with Python3. The
test <code class="docutils literal notranslate"><span class="pre">ExecEval.py</span></code> nearly works now.</p></li>
</ul>
</section>
<section id="id429">
<h3>Optimization<a class="headerlink" href="#id429" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The no arguments <code class="docutils literal notranslate"><span class="pre">range()</span></code> call now optimized into the static
CPython exception it raises.</p></li>
<li><p>Parts of comparison chains with constant arguments are now optimized
away.</p></li>
</ul>
</section>
<section id="id430">
<h3>Cleanups<a class="headerlink" href="#id430" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Simplified the <code class="docutils literal notranslate"><span class="pre">CPythonExpressionComparison</span></code> node, it now always
has only 2 operands.</p>
<p>If there are more, the so called comparison chain, its done via
<code class="docutils literal notranslate"><span class="pre">and</span></code> with assignments to temporary variables, which are expressed
by a new node type <code class="docutils literal notranslate"><span class="pre">CPythonExpressionTempVariableRef</span></code>. This allowed
to remove <code class="docutils literal notranslate"><span class="pre">expression_temps</span></code> from C++ code templates and
generation, reducing the overall complexity.</p>
</li>
<li><p>When executing a module (<code class="docutils literal notranslate"><span class="pre">--execute</span></code> but not <code class="docutils literal notranslate"><span class="pre">--exe</span></code>), no longer
does Nuitka import it into itself, instead a new interpreter is
launched with a fresh environment.</p></li>
<li><p>The calls to the variadic <code class="docutils literal notranslate"><span class="pre">MAKE_TUPLE</span></code> were replaced with calls the
<code class="docutils literal notranslate"><span class="pre">MAKE_TUPLExx</span></code> (where <code class="docutils literal notranslate"><span class="pre">xx</span></code> is the number of arguments), that are
generated on a as-needed basis. This gives more readable code,
because no <code class="docutils literal notranslate"><span class="pre">EVAL_ORDERED_xx</span></code> is needed at call site anymore.</p></li>
<li><p>Many node classes have moved to new modules in <code class="docutils literal notranslate"><span class="pre">nuitka.nodes</span></code> and
grouped by theme. That makes them more accessible.</p></li>
<li><p>The choosing of the debug python has moved from Scons to Nuitka
itself. That way it can respect the <code class="docutils literal notranslate"><span class="pre">sys.abiflags</span></code> and works with
Python3.</p></li>
<li><p>The replacing of <code class="docutils literal notranslate"><span class="pre">.py</span></code> in filenames was made more robust. No longer
is <code class="docutils literal notranslate"><span class="pre">str.replace</span></code> used, but instead proper means to assure that
having <code class="docutils literal notranslate"><span class="pre">.py</span></code> as other parts of the filenames wont be a trouble.</p></li>
<li><p>Module recursion was changed into its own module, instead of being
hidden in the optimization that considers import statements.</p></li>
<li><p>As always, some PyLint work, and some minor <code class="docutils literal notranslate"><span class="pre">TODO</span></code> were solved.</p></li>
</ul>
</section>
<section id="id431">
<h3>Organisational<a class="headerlink" href="#id431" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added more information to the <a class="reference external" href="https://nuitka.net/doc/developer-manual.html">Developer Manual</a>, e.g. documenting
the tree changes for <code class="docutils literal notranslate"><span class="pre">assert</span></code> to become a conditional statement
with a raise statement, etc.</p></li>
<li><p>The Debian package is as of this version verified to be installable
and functional on to Ubuntu Natty, Maverick, Oneiric, and Precise.</p></li>
<li><p>Added support to specify the binary under test with a <code class="docutils literal notranslate"><span class="pre">NUITKA</span></code>
environment, so the test framework can run with installed version of
Nuitka too.</p></li>
<li><p>Made sure the test runners work under Windows as well. Required
making them more portable. And a workaround for <code class="docutils literal notranslate"><span class="pre">os.execl</span></code> not
propagating exit codes under Windows.</p></li>
<li><p>For windows target the MinGW library is now linked statically. That
means there is no requirement for MinGW to be in the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> or even
installed to execute the binary.</p></li>
</ul>
</section>
<section id="id432">
<h3>New Tests<a class="headerlink" href="#id432" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">basic</span></code>, <code class="docutils literal notranslate"><span class="pre">programs</span></code>, <code class="docutils literal notranslate"><span class="pre">syntax</span></code>, and <code class="docutils literal notranslate"><span class="pre">reflected</span></code> were made
executable under Windows. Occasionally this meant to make the test
runners more portable, or to work around limitations.</p></li>
<li><p>Added test to cover return values of rich comparisons in comparison
chains, and order of argument evaluation for comparison chains.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Referencing.py</span></code> test was made portable to Python3.</p></li>
<li><p>Cover no arguments <code class="docutils literal notranslate"><span class="pre">range()</span></code> exception as well.</p></li>
<li><p>Added test to demonstrate that <code class="docutils literal notranslate"><span class="pre">--recurse-directory</span></code> actually
works. This is using an <code class="docutils literal notranslate"><span class="pre">__import__</span></code> that cannot be predicted at
run time (yet).</p></li>
<li><p>The created source package is now tested on pbuilder chroots to be
pass installation and the basic tests, in addition to the full tests
during package build time on these chroots. This will make sure, that
Nuitka works fine on Ubuntu Natty and doesnt break without notice.</p></li>
</ul>
</section>
<section id="id433">
<h3>Summary<a class="headerlink" href="#id433" title="Permalink to this headline"></a></h3>
<p>This releases contains many changes. The temporary variable ref and
assignment expression work is ground breaking. I foresee that it will
lead to even more simplifications of code generation in the future, when
e.g. in-place assignments can be reduced to assignments to temporary
variables and conditional statements.</p>
<p>While there were many improvements related to Windows support and fixing
portability bugs, or the Debian package, the real focus is the
optimization work, which will ultimately end with value propagation
working.</p>
<p>These are the real focus. The old comparison chain handling was a big
wart. Working, but no way understood by any form of analysis in Nuitka.
Now they have a structure which makes their code generation based on
semantics and allows for future optimization to see through them.</p>
<p>Going down this route is an important preparatory step. And there will
be more work like this needed. Consider e.g. handling of in-place
assignments. With an assignment expression to a temporary variable
ref, these become the same as user code using such a variable. There
will be more of these to find.</p>
<p>So, that is where the focus is. The release now was mostly aiming at
getting involved fixes out. The bug fixed by comparison chain reworking,
and the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> related one, were not suitable for hot fix
releases, so that is why the 0.3.19 release had to occur now. But with
plugin support, with this comparison chain cleanup, with improved
Python3 support, and so on, there was plenty of good stuff already, also
worth to get out.</p>
</section>
</section>
<section id="nuitka-release-0-3-18">
<h2>Nuitka Release 0.3.18<a class="headerlink" href="#nuitka-release-0-3-18" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new stable release of Nuitka. This time
there are a few bug fixes, and the important step that triggered the
release: Nuitka has entered Debian Unstable. So you if want, you will
get stable Nuitka releases from now on via <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">nuitka</span></code>.</p>
<p>The release cycle was too short to have much focus. It merely includes
fixes, which were available as hot fixes, and some additional
optimization and node tree cleanups, as well as source cleanups. But not
much else.</p>
<section id="id434">
<h3>Bug fixes<a class="headerlink" href="#id434" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Conditional statements with both branches empty were not optimized
away in all cases, triggering an assertion of code generation.
Released as 0.3.17a hot fix already.</p></li>
<li><p>Nuitka was considering directories to contain packages that had no
__init__.py which could lead to errors when it couldnt find the
package later in the compilation process. Released as 0.3.17a hot fix
already.</p></li>
<li><p>When providing <code class="docutils literal notranslate"><span class="pre">locals()</span></code> to <code class="docutils literal notranslate"><span class="pre">exec</span></code> statements, this was not
making the <code class="docutils literal notranslate"><span class="pre">locals()</span></code> writable. The logic to detect the case that
default value is used (<code class="docutils literal notranslate"><span class="pre">None</span></code>) and be pessimistic about it, didnt
consider the actual value <code class="docutils literal notranslate"><span class="pre">locals()</span></code>. Released as 0.3.17b hot fix
already.</p></li>
<li><p>Compatibility Fix: When no defaults are given, CPython uses <code class="docutils literal notranslate"><span class="pre">None</span></code>
for <code class="docutils literal notranslate"><span class="pre">func.func_defaults</span></code>, but Nuitka had been using <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</section>
<section id="id435">
<h3>Optimization<a class="headerlink" href="#id435" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>If the condition of assert statements can be predicted, these are now
optimized in a static raise or removed.</p></li>
<li><p>For built-in name references, there is now dedicated code to look
them up, that doesnt check the module level at all. Currently these
are used in only a few cases though.</p></li>
<li><p>Cleaner code is generated for the simple case of <code class="docutils literal notranslate"><span class="pre">print</span></code>
statements. This is not only faster code, its also more readable.</p></li>
</ul>
</section>
<section id="id436">
<h3>Cleanups<a class="headerlink" href="#id436" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">CPythonStatementAssert</span></code> node.</p>
<p>Its not needed, instead at tree building, assert statements are
converted to conditional statements with the asserted condition
result inverted and a raise statement with <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> and the
assertion argument.</p>
<p>This allowed to remove code and complexity from the subsequent steps
of Nuitka, and enabled existing optimization to work on assert
statements as well.</p>
</li>
<li><p>Moved built-in exception names and built-in names to a new module
<code class="docutils literal notranslate"><span class="pre">nuitka.Builtins</span></code> instead of having in other places. This was
previously a bit spread-out and misplaced.</p></li>
<li><p>Added cumulative <code class="docutils literal notranslate"><span class="pre">tags</span></code> to node classes for use in checks. Use it
annotate which node kinds to visit in e.g. per scope finalization
steps. That avoids kinds and class checks.</p></li>
<li><p>New node for built-in name lookups</p>
<p>This allowed to remove tricks played with adding module variable
lookups for <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> when adding them for <code class="docutils literal notranslate"><span class="pre">__new__</span></code> or
module variable lookups for <code class="docutils literal notranslate"><span class="pre">str</span></code> when predicting the result of
<code class="docutils literal notranslate"><span class="pre">type('a')</span></code>, which was unlikely to cause a problem, but an
important <code class="docutils literal notranslate"><span class="pre">TODO</span></code> item still.</p>
</li>
</ul>
</section>
<section id="id437">
<h3>Organisational<a class="headerlink" href="#id437" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The <a class="reference external" href="https://nuitka.net/doc/download.html">Download</a> page is now
finally updated for releases automatically.</p>
<p>Up to this release, I had to manually edit that page, but now
mastered the art of upload via XMLRCP and a Python script, so that
dont loose as much time with editing, checking it, etc.</p>
</li>
<li><p>The Debian package is backportable to Ubuntu Natty, Maverick,
Oneiric, I expect to make a separate announcement with links to
packages.</p></li>
<li><p>Made sure the test runners worth with bare <code class="docutils literal notranslate"><span class="pre">python2.6</span></code> as well.</p></li>
</ul>
</section>
<section id="id438">
<h3>New Tests<a class="headerlink" href="#id438" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added some tests intended for type inference development.</p></li>
</ul>
</section>
<section id="id439">
<h3>Summary<a class="headerlink" href="#id439" title="Permalink to this headline"></a></h3>
<p>This releases contains not as much changes as others, mostly because
its the intended base for a Debian upload.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">exec</span></code> fix was detected by continued work on the branch
<code class="docutils literal notranslate"><span class="pre">feature/minimize_CPython26_tests_diff</span></code> branch, but that work is now
complete.</p>
<p>It is being made pretty (many git rebase iterations) with lots of Issues
being added to the bug tracker and referenced for each change. The
intention is to have a clean commits repository with the changed made.</p>
<p>But of course, the real excitement is the type inference work. It will
give a huge boost to Nuitka. With this in place, new benchmarks may make
sense. I am working on getting it off the ground, but also to make us
more efficient.</p>
<p>So when I learn something. e.g. <code class="docutils literal notranslate"><span class="pre">assert</span></code> is not special, I apply it to
the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch immediately, to keep the differences as small as
possible, and to immediately benefit from such improvements.</p>
</section>
</section>
<section id="nuitka-release-0-3-17">
<h2>Nuitka Release 0.3.17<a class="headerlink" href="#nuitka-release-0-3-17" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new stable release of Nuitka. This time
there are a few bug fixes, lots of very important organisational work,
and yet again improved compatibility and cleanups. Also huge is the
advance in making <code class="docutils literal notranslate"><span class="pre">--deep</span></code> go away and making the recursion of Nuitka
controllable, which means a lot for scalability of projects that use a
lot of packages that use other packages, because now you can choose
which ones to embed and which ones one.</p>
<p>The release cycle had a focus on improving the quality of the test
scripts, the packaging, and generally to prepare the work on type
inference in a new feature branch.</p>
<p>I have also continued to work towards CPython3.2 compatibility, and this
version, while not there, supports Python3 with a large subset of the
basic tests programs running fine (of course via <code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion)
without trouble. There is still work to do, exceptions dont seem to
work fully yet, parameter parsing seems to have changed, etc. but it
seems that CPython3.2 is going to work one day.</p>
<p>And there has been a lot of effort, to address the Debian packaging to
be cleaner and more complete, addressing issues that prevented it from
entering the Debian repository.</p>
<section id="id440">
<h3>Bug fixes<a class="headerlink" href="#id440" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fixed the handling of modules and packages of the same name, but with
different casing. Problem showed under Windows only. Released as
0.3.16a hot fix already.</p></li>
<li><p>Fixed an error where the command line length of Windows was exceeded
when many modules were embedded, Christopher Tott provided a fix for
it. Released as 0.3.16a hot fix already.</p></li>
<li><p>Fix, avoid to introduce new variables for where built-in exception
references are sufficient. Released as 0.3.16b hot fix already.</p></li>
<li><p>Fix, add the missing <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> decorator to <code class="docutils literal notranslate"><span class="pre">__new__</span></code>
methods before resolving the scopes of variables, this avoids the use
of that variable before it was assigned a scope. Released as 0.3.16b
hot fix already.</p></li>
</ul>
</section>
<section id="id441">
<h3>New Features<a class="headerlink" href="#id441" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Enhanced compatibility again, provide enough <code class="docutils literal notranslate"><span class="pre">co_varnames</span></code> in the
code objects, so that slicing them up to <code class="docutils literal notranslate"><span class="pre">code_object.co_argcount</span></code>
will work. They are needed by <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module and might be used by
some decorators as well.</p></li>
<li><p>New options to control the recursion:</p>
<p><code class="docutils literal notranslate"><span class="pre">--recurse-none</span></code> (do not warn about not-done recursions)
<code class="docutils literal notranslate"><span class="pre">--recurse-all</span></code> (recurse to all otherwise warned modules)
<code class="docutils literal notranslate"><span class="pre">--recurse-to</span></code> (confirm to recurse to those modules)
<code class="docutils literal notranslate"><span class="pre">--recurse-not-to</span></code> (confirm to not recurse to those modules)</p>
</li>
</ul>
</section>
<section id="id442">
<h3>Optimization<a class="headerlink" href="#id442" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The optimization of constant conditional expressions was not done
yet. Added this missing constant propagation case.</p></li>
<li><p>Eliminate near empty statement sequences (only contain a pass
statement) in more places, giving a cleaner node structure for many
constructs.</p></li>
<li><p>Use the pickle protocol 2 on CPython2 except for <code class="docutils literal notranslate"><span class="pre">unicode</span></code>
strings where it does not work well. It gives a more compressed and
binary representation, that is generally more efficient to un-stream
as well. Also use the cPickle protocol, the use of <code class="docutils literal notranslate"><span class="pre">pickle</span></code> was not
really necessary anymore.</p></li>
</ul>
</section>
<section id="id443">
<h3>Organisational<a class="headerlink" href="#id443" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added a <a class="reference external" href="https://nuitka.net/doc/developer-manual.html">Developer Manual</a> to the release.
Its incomplete, but it details some of the existing stuff, coding
rules, plans for type inference, etc.</p></li>
<li><p>Improved the <code class="docutils literal notranslate"><span class="pre">--help</span></code> output to use <code class="docutils literal notranslate"><span class="pre">metavar</span></code> where applicable.
This makes it more readable for some options.</p></li>
<li><p>Instead of error message, give help output when no module or program
file name was given. This makes Nuitka help out more convenient.</p></li>
<li><p>Consistently use <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">python</span></code> for all scripts, this was
previously only done for some of them.</p></li>
<li><p>Ported the PyLint check script to Python as well, enhancing it on the
way to check the exit code, and to only output changes things, as
well as making the output of warnings for <code class="docutils literal notranslate"><span class="pre">TODO</span></code> items optional.</p></li>
<li><p>All scripts used for testing, PyLint checking, etc. now work with
Python3 as well. Most useful on Arch Linux, where its also already
the default for <code class="docutils literal notranslate"><span class="pre">Python</span></code>.</p></li>
<li><p>The help output of Nuitka was polished a lot more. It is now more
readable and uses option groups to combine related options together.</p></li>
<li><p>Make the tests run without any dependence on <code class="docutils literal notranslate"><span class="pre">PATH</span></code> to contain the
executables of Nuitka. This makes it easier to use.</p></li>
<li><p>Add license texts to 3rd party file that were missing them, apply
<code class="docutils literal notranslate"><span class="pre">licensecheck</span></code> results to cleanup Nuitka. Also removed own
copyright statement from in-line copy of Scons, it had been added by
accident only.</p></li>
<li><p>Release the tests that I own as well as the Debian packaging I
created under Apache License 2.0 which is very liberal, meaning
every project will be able to use it.</p></li>
<li><p>Dont require copyright assignment for contributions anymore, instead
only Apache License 2.0, the future Nuitka license, so that the
code wont be a problem when changing the license of all of Nuitka to
that license.</p></li>
<li><p>Give contributors listed in the <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a> an exception to the GPL
terms until Nuitka is licensed under Apache License 2.0 as well.</p></li>
<li><p>Added an <code class="docutils literal notranslate"><span class="pre">--experimental</span></code> option which can be used to control
experimental features, like the one currently being added on branch
<code class="docutils literal notranslate"><span class="pre">feature/ctypes_annotation</span></code>, where type inference is currently
only activated when that option is given. For this stable release, it
does nothing.</p></li>
<li><p>Check the static C++ files of Nuitka with <code class="docutils literal notranslate"><span class="pre">cppcheck</span></code> as well.
Didnt find anything.</p></li>
<li><p>Arch Linux packages have been contributed, these are linked for
download, but the stable package may lag behind a bit.</p></li>
</ul>
</section>
<section id="id444">
<h3>Cleanups<a class="headerlink" href="#id444" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">not</span></code> boolean operation to become a normal operator.
Changed <code class="docutils literal notranslate"><span class="pre">and</span></code> and <code class="docutils literal notranslate"><span class="pre">or</span></code> boolean operators to a new base class, and
making their interface more similar to that of operations.</p></li>
<li><p>Added cumulative <code class="docutils literal notranslate"><span class="pre">tags</span></code> to node classes for use in checks. Use it
annotate which node kinds to visit in e.g. per scope finalization
steps. That avoids kinds and class checks.</p></li>
<li><p>Enhanced the visitor interface to provide more kinds of callbacks,
enhanced the way each scope visiting is achieved by generalizing is
as child has not tag closure_taker and that for every node that
has tag closure_taker.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">SyntaxHighlighting</span></code> module to <code class="docutils literal notranslate"><span class="pre">nuitka.gui</span></code> package where
it belongs.</p></li>
<li><p>More white listing work for imports. As recursion is now the default,
and leads to warnings for non-existent modules, the CPython tests
gave a lot of good candidates for import errors that were white
listed.</p></li>
<li><p>Consistently use <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> in test scripts, as there isnt a
<code class="docutils literal notranslate"><span class="pre">Nuitka.py</span></code> on all platforms. The later is scheduled for removal.</p></li>
<li><p>Some more PyLint cleanups.</p></li>
</ul>
</section>
<section id="id445">
<h3>New Tests<a class="headerlink" href="#id445" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Make sure the basic tests pass with CPython or else fail the test.
This is to prevent false positives, where a test passes, but only
because it fails in CPython early on and then does so with Nuitka
too. For the syntax tests we make sure they fail.</p></li>
<li><p>The basic tests can now be run with <code class="docutils literal notranslate"><span class="pre">PYTHON=python3.2</span></code> and use
<code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion in that case. Also the currently not passing
tests are not run, so the passing tests continue to do so, with this
run from the release test script <code class="docutils literal notranslate"><span class="pre">check-release</span></code>.</p></li>
<li><p>Include the syntax tests in release tests as well.</p></li>
<li><p>Changed many existing tests so that they can run under CPython3 too.
Of course this is via <code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion.</p></li>
<li><p>Dont fail if the CPython test suites are not there.</p>
<p>Currently they remain largely unpublished, and as such are mostly
only available to me (exception,
<code class="docutils literal notranslate"><span class="pre">feature/minimize_CPython26_tests_diff</span></code> branch references the
CPython2.6 tests repository, but that remains work in progress).</p>
</li>
<li><p>For the compile itself test: Make the presence of the Scons in-line
copy optional, the Debian package doesnt contain it.</p></li>
<li><p>Also make it more portable, so it runs under Windows too, and allow
to choose the Python version to test. Check this test with both
CPython2.6 and CPython2.7 not only the default Python.</p></li>
<li><p>Before releasing, test that the created Debian package builds fine in
a minimal Debian <code class="docutils literal notranslate"><span class="pre">unstable</span></code> chroot, and passes all the tests
included in the package (<code class="docutils literal notranslate"><span class="pre">basics</span></code>, <code class="docutils literal notranslate"><span class="pre">syntax</span></code>, <code class="docutils literal notranslate"><span class="pre">programs</span></code>,
<code class="docutils literal notranslate"><span class="pre">reflected</span></code>). Also many other Debian packaging improvements.</p></li>
</ul>
</section>
<section id="id446">
<h3>Summary<a class="headerlink" href="#id446" title="Permalink to this headline"></a></h3>
<p>The git flow was used again in this release cycle and proved to be
useful not only for hot fix, but also for creating the branch
<code class="docutils literal notranslate"><span class="pre">feature/ctypes_annotation</span></code> and rebasing it often while things are
still flowing.</p>
<p>The few hot fixes didnt require a new release, but the many
organisational improvements and the new features did warrant the new
release, because of e.g. the much better test handling in this release
and the improved recursion control.</p>
<p>The work on Python3 support has slowed down a bit. I mostly only added
some bits for compatibility, but generally it has slowed down. I wanted
to make sure it doesnt regress by accident, so running with CPython3.2
is now part of the normal release tests.</p>
<p>Whats still missing is more hg completeness. Only the <code class="docutils literal notranslate"><span class="pre">co_varnames</span></code>
work for <code class="docutils literal notranslate"><span class="pre">inspect</span></code> was going in that direction, and this has slowed
down. It was more important to make Nuitkas recursion more accessible
with the new options, so that was done first.</p>
<p>And of course, the real excitement is the type inference work. It will
give a huge boost to Nuitka, and I am happy that it seems to go well.
With this in place, new benchmarks may make sense. I am working on
getting it off the ground, so other people can work on it too. My idea
of <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> native calls may become true sooner than expected. To
support that, I would like to add more tools to make sure we discover
changes earlier on, checking the XML representations of tests to
discover improvements and regressions more clearly.</p>
</section>
</section>
<section id="nuitka-release-0-3-16">
<h2>Nuitka Release 0.3.16<a class="headerlink" href="#nuitka-release-0-3-16" title="Permalink to this headline"></a></h2>
<p>This time there are many bug fixes, some important scalability work, and
again improved compatibility and cleanups.</p>
<p>The release cycle had a focus on fixing the bug reports I received. I
have also continued to look at CPython3 compatibility, and this is the
first version to support Python3 somewhat, at least some of the basic
tests programs run (of course via <code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion) without trouble.
I dont know when, but it seems that its going to work one day.</p>
<p>Also there has an effort to make the Debian packaging cleaner,
addressing all kinds of small issues that prevented it from entering the
Debian repository. Its still not there, but its making progress.</p>
<section id="id447">
<h3>Bug fixes<a class="headerlink" href="#id447" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fixed a packaging problem for Linux and x64 platform, the new
<code class="docutils literal notranslate"><span class="pre">swapFiber.S</span></code> file for the fiber management was not included.
Released as 0.3.15a hot fix already.</p></li>
<li><p>Fixed an error where optimization was performed on removed
unreachable code, which lead to an error. Released as 0.3.15b hot fix
already.</p></li>
<li><p>Fixed an issue with <code class="docutils literal notranslate"><span class="pre">__import__</span></code> and recursion not happening in any
case, because when it did, it failed due to not being ported to new
internal APIs. Released as 0.3.15c hot fix already.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">eval()</span></code> and <code class="docutils literal notranslate"><span class="pre">locals()</span></code> to be supported in generator
expressions and contractions too. Released as 0.3.15d hot fix
already.</p></li>
<li><p>Fixed the Windows batch files <code class="docutils literal notranslate"><span class="pre">nuitka.bat</span></code> and
<code class="docutils literal notranslate"><span class="pre">nuitka-python.bat</span></code> to not output the <code class="docutils literal notranslate"><span class="pre">rem</span></code> statements with the
copyright header. Released as 0.3.15d hot fix already.</p></li>
<li><p>Fixed re-raise with <code class="docutils literal notranslate"><span class="pre">raise</span></code>, but without a current exception set.
Released as 0.3.15e hot fix already.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">vars()</span></code> call on the module level, needs to be treated as
<code class="docutils literal notranslate"><span class="pre">globals()</span></code>. Released as 0.3.15e hot fix already.</p></li>
<li><p>Fix handling of broken new lines in source files. Read the source
code in universal line ending mode. Released as 0.3.15f hot fix
already.</p></li>
<li><p>Fixed handling of constant module attribute <code class="docutils literal notranslate"><span class="pre">__name__</span></code> being
replaced. Dont replace local variables of the same name too.
Released as 0.3.15g hot fix already.</p></li>
<li><p>Fixed assigning to <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code>. There was this
old <code class="docutils literal notranslate"><span class="pre">TODO</span></code>, and some code has compatibility craft that does it.
Released as 0.3.15g hot fix already.</p></li>
<li><p>Fix constant dictionaries not always being recognized as shared.
Released as 0.3.15g hot fix already.</p></li>
<li><p>Fix generator function objects to not require a return frame to
exist. In finalize cleanup it may not.</p></li>
<li><p>Fixed non-execution of cleanup codes that e.g. flush <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>,
by adding <code class="docutils literal notranslate"><span class="pre">Py_Finalize()</span></code>.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">throw()</span></code> method of generator expression objects to not check
arguments properly.</p></li>
<li><p>Fix missing fallback to subscript operations for slicing with
non-indexable objects.</p></li>
<li><p>Fix, in-place subscript operations could fail to apply the update, if
the intermediate object was e.g. a list and the handle just not
changed by the operation, but e.g. the length did.</p></li>
<li><p>Fix, the future spec was not properly preserving the future division
flag.</p></li>
</ul>
</section>
<section id="id448">
<h3>Optimization<a class="headerlink" href="#id448" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The optimization scales now much better, because per-module
optimization only require the module to be reconsidered, but not all
modules all the time. With many modules recursed into, this makes a
huge difference in compilation time.</p></li>
<li><p>The creation of dictionaries from constants is now also optimized.</p></li>
</ul>
</section>
<section id="id449">
<h3>New Features<a class="headerlink" href="#id449" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>As a new feature functions now have the <code class="docutils literal notranslate"><span class="pre">func_defaults</span></code> and
<code class="docutils literal notranslate"><span class="pre">__defaults__</span></code> attribute. It works only well for non-nested
parameters and is not yet fully integrated into the parameter
parsing. This improves the compatibility somewhat already though.</p></li>
<li><p>The names <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> and <code class="docutils literal notranslate"><span class="pre">None</span></code> are now converted to
constants only when they are read-only module variables.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> variable is now cleared when immediately executing
a compiled binary unless <code class="docutils literal notranslate"><span class="pre">--execute-with-pythonpath</span></code> is given, in
which case it is preserved. This allows to make sure that a binary is
in fact containing everything required.</p></li>
</ul>
</section>
<section id="id450">
<h3>Organisational<a class="headerlink" href="#id450" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The help output of Nuitka was polished a lot more. It is now more
readable and uses option groups to combine related options together.</p></li>
<li><p>The in-line copy of Scons is not checked with PyLint anymore. We of
course dont care.</p></li>
<li><p>Program tests are no longer executed in the program directory, so
failed module inclusions become immediately obvious.</p></li>
<li><p>The basic tests can now be run with <code class="docutils literal notranslate"><span class="pre">PYTHON=python3.2</span></code> and use
<code class="docutils literal notranslate"><span class="pre">2to3</span></code> conversion in that case.</p></li>
</ul>
</section>
<section id="id451">
<h3>Cleanups<a class="headerlink" href="#id451" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">tags</span></code> to a separate module, make optimization emit only
documented tags, checked against the list of allowed ones.</p></li>
<li><p>The Debian package has seen lots of improvements, to make it lintian
clean, even in pedantic mode. The homepage of Nuitka is listed, a
watch file can check for new releases, the git repository and the
gitweb are referenced, etc.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">os.path.join</span></code> in more of the test code to achieve more Windows
portability for them.</p></li>
<li><p>Some more PyLint cleanups.</p></li>
</ul>
</section>
<section id="id452">
<h3>New Tests<a class="headerlink" href="#id452" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a <code class="docutils literal notranslate"><span class="pre">Crasher</span></code> test, for tests that crashed Nuitka
previously.</p></li>
<li><p>Added a program test where the imported module does a <code class="docutils literal notranslate"><span class="pre">sys.exit()</span></code>
and make sure it really doesnt continue after the <code class="docutils literal notranslate"><span class="pre">SystemExit</span></code>
exception that creates.</p></li>
<li><p>Cover the type of <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> in the main program and in
imported modules in tests too. Its funny and differs between module
and dict in CPython2.</p></li>
<li><p>Cover a final <code class="docutils literal notranslate"><span class="pre">print</span></code> statement without newline in the test. Must
still receive a newline, which only happens when <code class="docutils literal notranslate"><span class="pre">Py_Finalize()</span></code> is
called.</p></li>
<li><p>Added test with functions that makes a <code class="docutils literal notranslate"><span class="pre">raise</span></code> without an exception
set.</p></li>
<li><p>Cover the calling of <code class="docutils literal notranslate"><span class="pre">vars()</span></code> on module level too.</p></li>
<li><p>Cover the use of eval in contractions and generator expressions too.</p></li>
<li><p>Cover <code class="docutils literal notranslate"><span class="pre">func_defaults</span></code> and <code class="docutils literal notranslate"><span class="pre">__default__</span></code> attributes for a function
too.</p></li>
<li><p>Added test function with two <code class="docutils literal notranslate"><span class="pre">raise</span></code> in an exception handler, so
that one becomes dead code and removed without the crash.</p></li>
</ul>
</section>
<section id="id453">
<h3>Summary<a class="headerlink" href="#id453" title="Permalink to this headline"></a></h3>
<p>The git flow was really great in this release cycle. There were many
hot fix releases being made, so that the bugs could be addressed
immediately without requiring the overhead of a full release. I believe
that this makes Nuitka clearly one of the best supported projects.</p>
<p>This quick turn-around also encourages people to report more bugs, which
is only good. And the structure is there to hold it. Of course, the many
bug fixes meant that there is not as much new development, but that is
not the priority, correctness is.</p>
<p>The work on Python3 is a bit strange. I dont need Python3 at all. I
also believe it is that evil project to remove cruft from the Python
core and make developers of all relevant Python software, add
compatibility cruft to their software instead. Yet, I cant really stop
to work on it. It has that appeal of small fixups here and there, and
then something else works too.</p>
<p>Python3 work is like when I was first struggling with Nuitka to pass the
CPython2 unit tests for a first time. Its fun. And then it finds real
actual bugs that apply to CPython2 too. Not doing <code class="docutils literal notranslate"><span class="pre">Py_Finalize</span></code> (but
having to), the slice operations shortcomings, the bug of subscript
in-place, and so on. There is likely more things hidden, and the earlier
Python3 is supported, the more benefit from increased test covered.</p>
<p>Whats missing is more hg completeness. I think only the <code class="docutils literal notranslate"><span class="pre">raise</span></code>
without exception set and the <code class="docutils literal notranslate"><span class="pre">func_defaults</span></code> issue were going into
its direction, but it wont be enough yet.</p>
</section>
</section>
<section id="nuitka-release-0-3-15">
<h2>Nuitka Release 0.3.15<a class="headerlink" href="#nuitka-release-0-3-15" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new stable release of Nuitka. This time
again many organisational improvements, some bug fixes, much improved
compatibility and cleanups.</p>
<p>This release cycle had a focus on packaging Nuitka for easier
consumption, i.e. automatic packaging, making automatic uploads,
improvement documentation, and generally cleaning things up, so that
Nuitka becomes more compatible and ultimately capable to run the hg
test suite. Its not there yet, but this is a huge jump for usability of
Nuitka and its compatibility, again.</p>
<p>Then lots of changes that make Nuitka approach Python3 support, the
generated C++ for at least one large example is compiling with this new
release. It wont link, but there will be later releases.</p>
<p>And there is a lot of cleanup going on, geared towards compatibility
with line numbers in the frame object.</p>
<section id="id454">
<h3>Bug fixes<a class="headerlink" href="#id454" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The main module was using <code class="docutils literal notranslate"><span class="pre">__main__</span></code> in tracebacks, but it must be
<code class="docutils literal notranslate"><span class="pre">&lt;module&gt;</span></code>. Released as 0.3.14a hot fix already.</p></li>
<li><p>Workaround for execfile cannot be used as an expression. It wasnt
possible to use <code class="docutils literal notranslate"><span class="pre">execfile</span></code> in an expression, only as a statement.</p>
<p>But then there is crazy enough code in e.g. mercurial that uses it in
a lambda function, which made the issue more prominent. The fix now
allows it to be an expression, except on the class level, which
wasnt seen yet.</p>
</li>
<li><p>The in-line copy of Scons was not complete enough to work for
Windows or with <code class="docutils literal notranslate"><span class="pre">--windows-target</span></code> for cross compile. Fixed.</p></li>
<li><p>Cached frames didnt release the back frame, therefore holding
variables of these longer than CPython does, which could cause
ordering problems. Fixed for increased compatibility.</p></li>
<li><p>Handle yield outside of function syntax error in compiled source
correctly. This one was giving a Nuitka backtrace, now it gives a
<code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> as it needs to.</p></li>
<li><p>Made syntax/indentation error output absolutely identical to CPython.</p></li>
<li><p>Using the frame objects <code class="docutils literal notranslate"><span class="pre">f_lineno</span></code> may fix endless amounts bugs
related to traceback line numbers.</p></li>
</ul>
</section>
<section id="id455">
<h3>New Features<a class="headerlink" href="#id455" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Guesses the location of the MinGW compiler under Windows to default
install location, so it need not be added to <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment
variable. Removes the need to modify <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment just for
Nuitka to find it.</p></li>
<li><p>Added support for lambda generators. You dont want to know what it
is. Lets just say, it was the last absurd language feature out there,
plus that didnt work. It now works perfect.</p></li>
</ul>
</section>
<section id="id456">
<h3>Organisational<a class="headerlink" href="#id456" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>You can now download a Windows installer and a Debian package that
works on Debian Testing, current Ubuntu and Mint Linux.</p></li>
<li><p>New release scripts give us the ability to have hot fix releases as
download packages immediately. That means the git flow makes even
more beneficial to the users.</p></li>
<li><p>Including the generated README.pdf in the distribution archives, so
it can be read instead of README.txt. The text file is fairly
readable, due to the use of ReStructured Text, but the PDF is even
nicer to read, due to e.g. syntax highlighting of the examples.</p></li>
<li><p>Renamed the main binaries to <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka-python</span></code>, so
that there is no dependency on case sensitive file systems.</p></li>
<li><p>For Windows there are batch files <code class="docutils literal notranslate"><span class="pre">nuitka.bat</span></code> and
<code class="docutils literal notranslate"><span class="pre">nuitka-python.bat</span></code> to make Nuitka directly executable without
finding the <code class="docutils literal notranslate"><span class="pre">Python.exe</span></code>, which the batch files can tell from their
own location.</p></li>
<li><p>There are now man pages of <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> and <code class="docutils literal notranslate"><span class="pre">nuitka-python</span></code> with
examples for the most common use cases. They are of course included
in the Debian package.</p></li>
<li><p>Dont strip the binary when executing it to analyse compiled binary
with <code class="docutils literal notranslate"><span class="pre">valgrind</span></code>. It will give better information that way, without
changing the code.</p></li>
</ul>
</section>
<section id="id457">
<h3>Optimization<a class="headerlink" href="#id457" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Implemented <code class="docutils literal notranslate"><span class="pre">swapcontext</span></code> alike (<code class="docutils literal notranslate"><span class="pre">swapFiber</span></code>) for x64 to achieve
8 times speedup for Generators. It doesnt do useless syscalls to
preserve signal masks. Now Nuitka is faster at frame switching than
CPython on x64, which is already good by design.</p></li>
</ul>
</section>
<section id="id458">
<h3>Cleanups<a class="headerlink" href="#id458" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Using the frame objects to store current line of execution avoids the
need to store it away in helper code at all. It ought to also help a
lot with threading support, and makes Nuitka even more compatible,
because now line numbers will be correct even outside tracebacks, but
for mere stack frame dumps.</p></li>
<li><p>Moved the <code class="docutils literal notranslate"><span class="pre">for_return</span></code> detection from code generation to tree
building where it belongs. Yield statements used as return statements
need slightly different code for Python2.6 difference. That solved an
old <code class="docutils literal notranslate"><span class="pre">TODO</span></code>.</p></li>
<li><p>Much Python3 portability work. Sometimes even improving existing
code, the Python compiler code had picked up a few points, where the
latest Nuitka didnt work with Python3 anymore, when put to actual
compile.</p>
<p>The test covered only syntax, but e.g. meta classes need different
code in CPython3, and thats now supported. Also helper code was made
portable in more places, but not yet fully. This will need more work.</p>
</li>
<li><p>Cleaned up uses of debug defines, so they are now more consistent and
in one place.</p></li>
<li><p>Some more PyLint cleanups.</p></li>
</ul>
</section>
<section id="id459">
<h3>New Tests<a class="headerlink" href="#id459" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The tests are now executed by Python scripts and cover <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
output too. Before we only checked <code class="docutils literal notranslate"><span class="pre">stdout</span></code>. This unveiled a bunch
of issues Nuitka had, but went unnoticed so far, and triggered e.g.
the frame line number improvements.</p></li>
<li><p>Separate syntax tests.</p></li>
<li><p>The scripts to run the tests now are all in pure Python. This means,
no more MinGW shell is needed to execute the tests.</p></li>
</ul>
</section>
<section id="id460">
<h3>Summary<a class="headerlink" href="#id460" title="Permalink to this headline"></a></h3>
<p>The Debian package, Windows installer, etc. are now automatically
updated and uploaded. From here on, there can be such packages for the
hot fix releases too.</p>
<p>The exception tracebacks are now correct by design, and better covered.</p>
<p>The generator performance work showed that the approach taken by Nuitka
is in fact fast. It was fast on ARM already, but its nice to see that
its now also fast on x64. Programs using generators will be affected a
lot by this.</p>
<p>Overall, this release brings Nuitka closer to usability. Better binary
names, man pages, improved documentation, issue tracker, etc. all there
now. I am in fact now looking for a sponsor for the Debian package to
upload it into Debian directly.</p>
<div class="admonition-update admonition">
<p class="admonition-title">Update</p>
<p>The upload to Debian happened for 0.3.18 and was done by Yaroslav
Halchenko.</p>
</div>
<p>Whats missing is more hg completeness. The frame release issue helped
it, but <code class="docutils literal notranslate"><span class="pre">inspect.getargs()</span></code> doesnt work yet, and is a topic for a
future release. Wont be easy, as <code class="docutils literal notranslate"><span class="pre">func_defaults</span></code> will be an invasive
change too.</p>
</section>
</section>
<section id="nuitka-release-0-3-14">
<h2>Nuitka Release 0.3.14<a class="headerlink" href="#nuitka-release-0-3-14" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new stable release of Nuitka. This time
it contains mostly organisational improvements, some bug fixes, improved
compatibility and cleanups.</p>
<p>It is again the result of working towards compilation of a real program
(Mercurial). This time, I have added support for proper handling of
compiled types by the <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module.</p>
<section id="id461">
<h3>Bug fixes<a class="headerlink" href="#id461" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Fix for Missing checks in parameter parsing with star list, star
dict and positional arguments. There was whole in the checks for
argument counts, now the correct error is given. Fixed in 0.3.13a
already.</p></li>
<li><p>The simple slice operations with 2 values, not extended with 3
values, were not applying the correct order for evaluation. Fixed in
0.3.13a already.</p></li>
<li><p>The simple slice operations couldnt handle <code class="docutils literal notranslate"><span class="pre">None</span></code> as the value for
lower or upper index. Fixed in 0.3.11a already.</p></li>
<li><p>The in-place simple slice operations evaluated the slice index
expressions twice, which could cause problems if they had side
effects. Fixed in 0.3.11a already.</p></li>
</ul>
</section>
<section id="id462">
<h3>New Features<a class="headerlink" href="#id462" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Run time patching the <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module so it accepts compiled
functions, compiled methods, and compiled generator objects. The
<code class="docutils literal notranslate"><span class="pre">test_inspect</span></code> test of CPython is nearly working unchanged with
this.</p></li>
<li><p>The generator functions didnt have <code class="docutils literal notranslate"><span class="pre">CO_GENERATOR</span></code> set in their
code object, setting it made compatible with CPython in this regard
too. The inspect module will therefore return correct value for
<code class="docutils literal notranslate"><span class="pre">inspect.isgeneratorfunction()</span></code> too.</p></li>
</ul>
</section>
<section id="id463">
<h3>Optimization<a class="headerlink" href="#id463" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Slice indexes that are <code class="docutils literal notranslate"><span class="pre">None</span></code> are now constant propagated as well.</p></li>
<li><p>Slightly more efficient code generation for dual star arg functions,
removing useless checks.</p></li>
</ul>
</section>
<section id="id464">
<h3>Cleanups<a class="headerlink" href="#id464" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Moved the Scons, static C++ files, and assembler files to new package
<code class="docutils literal notranslate"><span class="pre">nuitka.build</span></code> where also now <code class="docutils literal notranslate"><span class="pre">SconsInterface</span></code> module lives.</p></li>
<li><p>Moved the Qt dialog files to <code class="docutils literal notranslate"><span class="pre">nuitka.gui</span></code></p></li>
<li><p>Moved the unfreezer code to its own static C++ file.</p></li>
<li><p>Some PyLint cleanups.</p></li>
</ul>
</section>
<section id="id465">
<h3>New Tests<a class="headerlink" href="#id465" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New test <code class="docutils literal notranslate"><span class="pre">Recursion</span></code> to cover recursive functions.</p></li>
<li><p>New test <code class="docutils literal notranslate"><span class="pre">Inspection</span></code> to cover the patching of <code class="docutils literal notranslate"><span class="pre">inspect</span></code> module.</p></li>
<li><p>Cover <code class="docutils literal notranslate"><span class="pre">execfile</span></code> on the class level as well in <code class="docutils literal notranslate"><span class="pre">ExecEval</span></code> test.</p></li>
<li><p>Cover evaluation order of simple slices in <code class="docutils literal notranslate"><span class="pre">OrderCheck</span></code> too.</p></li>
</ul>
</section>
<section id="id466">
<h3>Organisational<a class="headerlink" href="#id466" title="Permalink to this headline"></a></h3>
<ul>
<li><p>There is a new issue tracker available (since migrated and removed)</p>
<p>Please register and report issues you encounter with Nuitka. I have
put all the known issues there and started to use it recently. Its
Roundup based like <a class="reference external" href="https://bugs.python.org">https://bugs.python.org</a> is, so people will find it
familiar.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> is now apparently functional. The source releases
for download are made it with, and it appears the binary
distributions work too. We may now build a windows installer. Its
currently in testing, we will make it available when finished.</p></li>
</ul>
</section>
<section id="id467">
<h3>Summary<a class="headerlink" href="#id467" title="Permalink to this headline"></a></h3>
<p>The new source organisation makes packaging Nuitka really easy now. From
here, we can likely provide binary package of Nuitka soon. A windows
installer will be nice.</p>
<p>The patching of <code class="docutils literal notranslate"><span class="pre">inspect</span></code> works wonders for compatibility for those
programs that insist on checking types, instead of doing duck typing.
The function call problem, was an issue found by the Mercurial test
suite.</p>
<p>For the hg.exe to pass all of its test suite, more work may be needed,
this is the overall goal I am currently striving for. Once real world
programs like Mercurial work, we can use these as more meaningful
benchmarks and resume work on optimization.</p>
</section>
</section>
<section id="nuitka-release-0-3-13">
<h2>Nuitka Release 0.3.13<a class="headerlink" href="#nuitka-release-0-3-13" title="Permalink to this headline"></a></h2>
<p>This release is mostly the result of working towards compilation of a
real programs (Mercurial) and to merge and finalize the frame stack
work. Now Nuitka has a correct frame stack at all times, and supports
<code class="docutils literal notranslate"><span class="pre">func_code</span></code> and <code class="docutils literal notranslate"><span class="pre">gi_code</span></code> objects, something previously thought to
be impossible.</p>
<p>Actually now its only the bytecode objects that wont be there. And
not attributes of <code class="docutils literal notranslate"><span class="pre">func_code</span></code> are meaningful yet, but in theory can be
supported.</p>
<p>Due to the use of the git flow for Nuitka, most of the bugs listed
here were already fixed in on the stable release before this release.
This time there were 5 such hot fix releases, sometimes fixing multiple
bugs.</p>
<section id="id468">
<h3>Bug fixes<a class="headerlink" href="#id468" title="Permalink to this headline"></a></h3>
<ul>
<li><p>In case of syntax errors in the main program, an exception stack was
giving that included Nuitka code. Changed to make the same output as
CPython does. Fixed in 0.3.12a already.</p></li>
<li><p>The star import (<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">x</span> <span class="pre">import</span> <span class="pre">*</span></code>) didnt work for submodules.
Providing <code class="docutils literal notranslate"><span class="pre">*</span></code> as the import list to the respective code allowed to
drop the complex lookups we were doing before, and to simply trust
CPython C/API to do it correctly. Fixed in 0.3.12 already.</p></li>
<li><p>The absolute import is <em>not</em> the default of CPython 2.7 it seems. A
local <code class="docutils literal notranslate"><span class="pre">posix</span></code> package shadows the standard library one. Fixed in
0.3.12 already.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode, a module may contain a syntax error. This is e.g.
true of PyQt with <code class="docutils literal notranslate"><span class="pre">port_v3</span></code> included. These files contain Python3
syntax and fail to be imported in Python2, but that is not to be
considered an error. These modules are now skipped with a warning.
Fixed in 0.3.12b already.</p></li>
<li><p>The code to import modules wasnt using the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> built-in,
which prevented <code class="docutils literal notranslate"><span class="pre">__import__</span></code> overriding code to work. Changed
import to use the built-in. Fixed in 0.3.12c already.</p></li>
<li><p>The code generated for the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> built-in with constant
values was doing relative imports only. It needs to attempt relative
and absolute imports. Fixed in 0.3.12c already.</p></li>
<li><p>The code of packages in __init__.py believed it was outside of the
package, giving problems for package local imports. Fixed in 0.3.12d
already.</p></li>
<li><p>It appears that Scons, which Nuitka uses internally and transparent
to you, to execute the compilation and linking tasks, was sometimes
not building the binaries or shared libraries, due to a false
caching. As a workaround, these are now erased before doing the
build. Fixed in 0.3.12d already.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> in comparison chains (e.g. <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span> <span class="pre">&lt;</span>
<span class="pre">c</span></code> is one), wasnt supported yet. The use of these in comparison
chains <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">in</span> <span class="pre">b</span> <span class="pre">in</span> <span class="pre">c</span></code> is very strange.</p>
<p>Only in the <code class="docutils literal notranslate"><span class="pre">test_grammar.py</span></code> it was ever used I believe. Anyway,
its supported now, solving this <code class="docutils literal notranslate"><span class="pre">TODO</span></code> and reducing the
difference. Fixed in 0.3.12e already.</p>
</li>
<li><p>The order of evaluation for <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code> operators wasnt
enforced in a portable way. Now it is correct on ARM too. Fixed in
0.3.12e already.</p></li>
</ul>
</section>
<section id="id469">
<h3>Optimization<a class="headerlink" href="#id469" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The built-ins <code class="docutils literal notranslate"><span class="pre">GeneratorExit</span></code> and <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> are optimized
to their Python C/API names where possible as well.</p></li>
</ul>
</section>
<section id="id470">
<h3>Cleanups<a class="headerlink" href="#id470" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute of modules was the relative filename, but
for absolute filenames these become a horrible mess at least on
Linux.</p></li>
<li><p>Added assertion helpers for sane frame and code objects and use them.</p></li>
<li><p>Make use of <code class="docutils literal notranslate"><span class="pre">assertObject</span></code> in more places.</p></li>
<li><p>Instead of using <code class="docutils literal notranslate"><span class="pre">os.path.sep</span></code> all over, added a helper
<code class="docutils literal notranslate"><span class="pre">Utils.joinpath</span></code> that hides this and using <code class="docutils literal notranslate"><span class="pre">os.path.join</span></code>. This
gives more readable code.</p></li>
<li><p>Added traces to the unfreezer guarded by a define. Helpful in
analyzing import problems.</p></li>
<li><p>Some PyLint cleanups removing dead code, unused variables, useless
pass statement, etc.</p></li>
</ul>
</section>
<section id="id471">
<h3>New Tests<a class="headerlink" href="#id471" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New tests to cover <code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code> and <code class="docutils literal notranslate"><span class="pre">IndentationError</span></code> from
<code class="docutils literal notranslate"><span class="pre">--deep</span></code> imports and in main program.</p></li>
<li><p>New test to cover evaluation order of <code class="docutils literal notranslate"><span class="pre">in</span></code> and <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">in</span></code>
comparisons.</p></li>
<li><p>New test to cover package local imports made by the __init__.py of
the package.</p></li>
</ul>
</section>
<section id="id472">
<h3>Organisational<a class="headerlink" href="#id472" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Drop compile_itself.sh in favor of the new compile_itself.py,
because the later is more portable.</p></li>
<li><p>The logging output is now nicer, and for failed recursions, outputs
the line that is having the problem.</p></li>
</ul>
</section>
<section id="id473">
<h3>Summary<a class="headerlink" href="#id473" title="Permalink to this headline"></a></h3>
<p>The frame stack work and the <code class="docutils literal notranslate"><span class="pre">func_code</span></code> are big for compatibility.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">func_code</span></code> was also needed for hg to work. For Mercurial to
pass all of its test suite, more work will be needed, esp. the
<code class="docutils literal notranslate"><span class="pre">inspect</span></code> module needs to be run-time patched to accept compiled
functions and generators too.</p>
<p>Once real world programs like Mercurial work, we can use these as more
meaningful benchmarks and resume work on optimization.</p>
</section>
</section>
<section id="nuitka-release-0-3-12">
<h2>Nuitka Release 0.3.12<a class="headerlink" href="#nuitka-release-0-3-12" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new release of Nuitka many bug fixes,
and substantial improvements especially in the organisational area.
There is a new <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User Manual</a>
(<a class="reference external" href="https://nuitka.net/doc/user-manual.pdf">PDF</a>), with much improved
content, a <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> based import mechanism for <code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode,
git flow goodness.</p>
<p>This release is generally also the result of working towards compilation
of a real programs (Mercurial) and to get things work more nicely on
Windows by default. Thanks go to Liu Zhenhai for helping me with this
goal.</p>
<p>Due to the use of the git flow, most of the bugs listed here were
already fixed in on the stable release before this release. And there
were many of these.</p>
<section id="id474">
<h3>Bug fixes<a class="headerlink" href="#id474" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The order of evaluation for base classes and class dictionaries was
not enforced.</p>
<p>Apparently nothing in the CPython test suite did that, I only noticed
during debugging that Nuitka gave a different error than CPython did,
for a class that had an undefined base class, because both class body
and base classes were giving an error. Fixed in 0.3.11a already.</p>
</li>
<li><p>Method objects didnt hold a reference to the used class.</p>
<p>The effect was only noticed when <code class="docutils literal notranslate"><span class="pre">--python-debug</span></code> was used, i.e.
the debug version of Python linked, because then the garbage
collector makes searches. Fixed in 0.3.11b already.</p>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> on Linux as well. On Debian it is otherwise
<code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code> which might be a different version of Python
entirely. Fixed in 0.3.11c already.</p></li>
<li><p>Embedded modules inside a package could hide package variables of the
same name. Learned during PyCON DE about this corner case. Fixed in
0.3.11d already.</p></li>
<li><p>Packages could be duplicated internally. This had no effect on
generated code other than appearing twice in the list if frozen
modules. Fixed in 0.3.11d already.</p></li>
<li><p>When embedding modules from outside current directory, the look-up
failed. The embedding only ever worked for the compile itself and
programs test cases, because they are all in the current directory
then. Fixed in 0.3.11e already.</p></li>
<li><p>The check for ARM target broke Windows support in the Scons file.
Fixed in 0.3.11f already.</p></li>
<li><p>The star import from external modules failed with an error in
<code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode. Fixed in 0.3.11g already.</p></li>
<li><p>Modules with a parent package could cause a problem under some
circumstances. Fixed in 0.3.11h already.</p></li>
<li><p>One call variant, with both list and dict star arguments and keyword
arguments, but no positional parameters, didnt have the required C++
helper function implemented. Fixed in 0.3.11h already.</p></li>
<li><p>The detection of the CPU core count was broken on my hexacore at
least. Gave 36 instead of 6, which is a problem for large programs.
Fixed in 0.3.11h already.</p></li>
<li><p>The in-line copy of Scons didnt really work on Windows, which was
sad, because we added it to simplify installation on Windows
precisely because of this.</p></li>
<li><p>Cleaning up the build directory from old sources and object files
wasnt portable to Windows and therefore wasnt effective there.</p></li>
<li><p>From imports where part of the imported were found modules and parts
were not, didnt work. Solved by the feature branch
<code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code> that was merged for this release.</p></li>
<li><p>Newer MinGW gave warnings about the default visibility not being
possible to apply to class members. Fixed by not setting this default
visibility anymore on Windows.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> gave warnings on Windows because of
backslashes in the path. Using a raw string to prevent such problems.</p></li>
<li><p>The standard library path was hard coded. Changed to run time
detection.</p></li>
</ul>
</section>
<section id="id475">
<h3>Cleanups<a class="headerlink" href="#id475" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Version checks on Python runtime now use a new define
<code class="docutils literal notranslate"><span class="pre">PYTHON_VERSION</span></code> that makes it easier. I dont like
<code class="docutils literal notranslate"><span class="pre">PY_VERSION_HEX</span></code>, because it is so unreadable. Makes some of the
checks a lot more safe.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sys.meta_path</span></code> based import from the <code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code>
feature branch allowed the cleanup the way importing is done. Its a
lot less code now.</p></li>
<li><p>Removed some unused code. We will aim at making Nuitka the tool to
detect dead code really.</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">nuitka.Nodes</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka.nodes.Nodes</span></code>, that is what the
package is intended for, the split will come later.</p></li>
</ul>
</section>
<section id="id476">
<h3>New Tests<a class="headerlink" href="#id476" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New tests for import variants that previously didnt work: Mixed
imports. Imports from a package one level up. Modules hidden by a
package variable, etc.</p></li>
<li><p>Added test of function call variant that had no test previously. Only
found it when compiling hg. Amazing how nothing in my tests,
CPython tests, etc. used it.</p></li>
<li><p>Added test to cover the partial success of import statements.</p></li>
<li><p>Added test to cover evaluation order of class definitions.</p></li>
</ul>
</section>
<section id="id477">
<h3>Organisational<a class="headerlink" href="#id477" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Migrated the README.txt from org-mode to ReStructured Text, which
allows for a more readable document, and to generate a nice <a class="reference external" href="https://nuitka.net/doc/user-manual.html">User
Manual</a> in PDF form.</p></li>
<li><p>The amount of information in README.txt was increased, with many
more subjects are now covered, e.g. git flow and how to join Nuitka
development. Its also impressive to see what code blocks and syntax
highlighting can do for readability.</p></li>
<li><p>The Nuitka git repository has seen multiple hot fixes.</p>
<p>These allowed to publish bug fixes immediately after they were made,
and avoided the need for a new release just to get these out. This
really saves me a lot of time too, because I can postpone releasing
the new version until it makes sense because of other things.</p>
</li>
<li><p>Then there was a feature branch <code class="docutils literal notranslate"><span class="pre">meta_path_import</span></code> that lived until
being merged to <code class="docutils literal notranslate"><span class="pre">develop</span></code> to improve the import code, which is now
released as part of the main branch. Getting that feature right took
a while.</p></li>
<li><p>And there is the feature branch <code class="docutils literal notranslate"><span class="pre">minimize_CPython26_tests_diff</span></code>
which has some success already in documenting the required changes to
the CPython26 test suite and in reducing the amount of differences,
while doing it. We have a frame stack working there, albeit in too
ugly code form.</p></li>
<li><p>The release archives are now built using <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. You can now
also download a zip file, which is probably more Windows friendly.
The intention is to work on that to make <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> produce a
Nuitka install that wont rely on any environment variables at all.
Right now <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> wont even allow any other options than
<code class="docutils literal notranslate"><span class="pre">sdist</span></code> to be given.</p></li>
<li><p>Ported compile_itself.sh to compile_itself.py, i.e. ported it to
Python. This way, we can execute it easily on Windows too, where it
currently still fails. Replacing <code class="docutils literal notranslate"><span class="pre">diff</span></code>, <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span></code>, etc. is a
challenge, but it reduces the dependency on MSYS tools on Windows.</p></li>
<li><p>The compilation of standard library is disabled by default, but
<code class="docutils literal notranslate"><span class="pre">site</span></code> or <code class="docutils literal notranslate"><span class="pre">dist</span></code> packages are now embedded. To include even
standard library, there is a <code class="docutils literal notranslate"><span class="pre">--really-deep</span></code> option that has to be
given in addition to <code class="docutils literal notranslate"><span class="pre">--deep</span></code>, which forces this.</p></li>
</ul>
</section>
<section id="id478">
<h3>Summary<a class="headerlink" href="#id478" title="Permalink to this headline"></a></h3>
<p>Again, huge progress. The improved import mechanism is very beautiful.
It appears that little is missing to compile real world programs like
hg with Nuitka. The next release cycle will focus on that and continue
to improve the Windows support which appears to have some issues.</p>
</section>
</section>
<section id="nuitka-release-0-3-11">
<h2>Nuitka Release 0.3.11<a class="headerlink" href="#nuitka-release-0-3-11" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new release of Nuitka with some bug
fixes and portability work.</p>
<p>This release is generally cleaning up things, and makes Nuitka portable
to ARM Linux. I used to host the Nuitka homepage on that machine, but
now that its no longer so, I can run heavy compile jobs on it. To my
surprise, it found many portability problems. So I chose to fix that
first, the result being that Nuitka now works on ARM Linux too.</p>
<section id="id479">
<h3>Bug fixes<a class="headerlink" href="#id479" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The order of slice expressions was not correct on x86 as well, and I
found that with new tests only. So the porting to ARM revealed a bug
category, I previously didnt consider.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">linux2</span></code> in the Scons file is potentially incompatible
with Linux 3.0, although it seems that at least on Debian the
<code class="docutils literal notranslate"><span class="pre">sys.platform</span></code> was changed back to <code class="docutils literal notranslate"><span class="pre">linux2</span></code>. Anyway, its
probably best to allow just anything that starts with <code class="docutils literal notranslate"><span class="pre">linux</span></code> these
days.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">print</span></code> statement worked like a <code class="docutils literal notranslate"><span class="pre">print</span></code> function, i.e. it
first evaluated all printed expressions, and did the output only
then. That is incompatible in case of exceptions, where partial
outputs need to be done, and so that got fixed.</p></li>
</ul>
</section>
<section id="id480">
<h3>Optimization<a class="headerlink" href="#id480" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Function calls now each have a dedicated helper function, avoiding in
some cases unnecessary work. We will may build further on this and
in-line <code class="docutils literal notranslate"><span class="pre">PyObject_Call</span></code> differently for the special cases.</p></li>
</ul>
</section>
<section id="id481">
<h3>Cleanups<a class="headerlink" href="#id481" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Moved many C++ helper declarations and in-line implementations to
dedicated header files for better organisation.</p></li>
<li><p>Some dependencies were removed and consolidated to make the
dependency graph sane.</p></li>
<li><p>Multiple decorators were in reverse order in the node tree. The code
generation reversed it back, so no bug, yet that was a distorted
tree.</p>
<p>Finding this came from the ARM work, because the reversal was in
fact just the argument evaluation order of C++ under x86/x64, but on
ARM that broke. Correcting it highlighted this issue.</p>
</li>
<li><p>The deletion of slices, was not using <code class="docutils literal notranslate"><span class="pre">Py_ssize</span></code> for indexes,
disallowing some kinds of optimization, so that was harmonized.</p></li>
<li><p>The function call code generation got a general overhaul. It is now
more consistent, has more helpers available, and creates more
readable code.</p></li>
<li><p>PyLint is again happier than ever.</p></li>
</ul>
</section>
<section id="id482">
<h3>New Tests<a class="headerlink" href="#id482" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is a new basic test <code class="docutils literal notranslate"><span class="pre">OrderChecks</span></code> that covers the order of
expression evaluation. These problems were otherwise very hard to
detect, and in some cases not previously covered at all.</p></li>
<li><p>Executing Nuitka with Python3 (it wont produce correct Python3 C/API
code) is now part of the release tests, so non-portable code of
Nuitka gets caught.</p></li>
</ul>
</section>
<section id="id483">
<h3>Organisational<a class="headerlink" href="#id483" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Support for ARM Linux. I will make a separate posting on the
challenges of this. Suffice to say now, that C++ leaves way too much
things unspecified.</p></li>
<li><p>The Nuitka git repository now uses git flow. The new git policy
will be detailed in another <a class="reference external" href="https://nuitka.net/posts/nuitka-git-flow.html">separate posting</a>.</p></li>
<li><p>There is an unstable <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch in which the development
occurs. For this release ca. 40 commits were done to this branch,
before merging it. I am also doing more fine grained commits now.</p></li>
<li><p>Unlike previously, there is <code class="docutils literal notranslate"><span class="pre">master</span></code> branch for the stable release.</p></li>
<li><p>There is a script make-dependency-graph.sh (Update: meanwhile it
was renamed to make-dependency-graph.py) to produce a dependency
graphs of Nuitka. I detected a couple of strange things through this.</p></li>
<li><p>The Python3 <code class="docutils literal notranslate"><span class="pre">__pycache__</span></code> directories get removed too by the
cleanup script.</p></li>
</ul>
</section>
<section id="numbers">
<h3>Numbers<a class="headerlink" href="#numbers" title="Permalink to this headline"></a></h3>
<p>We only have PyStone now, and on a new machine, so the numbers cannot
be compared to previous releases:</p>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.48</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">104167</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.11 (driven by python 2.6):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.19</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">263158</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>So this a speedup factor of 258%, last time on another machine it was
240%. Yet it only proves that the generated and compiled are more
efficient than bytecode, but Nuitka doesnt yet do the relevant
optimization. Only once it does, the factor will be significantly
higher.</p>
</section>
<section id="id484">
<h3>Summary<a class="headerlink" href="#id484" title="Permalink to this headline"></a></h3>
<p>Overall, there is quite some progress. Nuitka is a lot cleaner now,
which will help us later only. I wanted to get this out, mostly because
of the bug fixes, and of course just in case somebody attempts to use it
on ARM.</p>
</section>
</section>
<section id="nuitka-release-0-3-10">
<h2>Nuitka Release 0.3.10<a class="headerlink" href="#nuitka-release-0-3-10" title="Permalink to this headline"></a></h2>
<p>This new release is major milestone 2 work, enhancing practically all
areas of Nuitka. The focus was roundup and breaking new grounds with
structural optimization enhancements.</p>
<section id="id485">
<h3>Bug fixes<a class="headerlink" href="#id485" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Exceptions now correctly stack.</p>
<p>When you catch an exception, there always was the exception set, but
calling a new function, and it catching the exception, the values of
<code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> didnt get reset after the function returned.</p>
<p>This was a small difference (of which there are nearly none left now)
but one that might effect existing code, which affects code that
calls functions in exception handling to check something about it.</p>
<p>So its good this is resolved now too. Also because it is difficult
to understand, and now its just like CPython behaves, which means
that we dont have to document anything at all about it.</p>
</li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">exec</span></code> in generator functions got fixed up. I realized that
this wouldnt work while working on other things. Its obscure yes,
but it ought to work.</p></li>
<li><p>Lambda generator functions can now be nested and in generator
functions. There were some problems here with the allocation of
closure variables that got resolved.</p></li>
<li><p>List contractions could not be returned by lambda functions. Also a
closure issue.</p></li>
<li><p>When using a mapping for globals to <code class="docutils literal notranslate"><span class="pre">exec</span></code> or <code class="docutils literal notranslate"><span class="pre">eval</span></code> that had a
side effect on lookup, it was evident that the lookup was made twice.
Correcting this also improves the performance for the normal case.</p></li>
</ul>
</section>
<section id="id486">
<h3>Optimization<a class="headerlink" href="#id486" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Statically raised as well as predicted exceptions are propagated
upwards, leading to code and block removal where possible, while
maintaining the side effects.</p>
<p>This is brand new and doesnt do everything possible yet. Most
notable, the matching of raised exception to handlers is not yet
performed.</p>
</li>
<li><p>Built-in exception name references and creation of instances of them
are now optimized as well, which leads to faster exception
raising/catching for these cases.</p></li>
<li><p>More kinds of calls to built-ins are handled, positional parameters
are checked and more built-ins are covered.</p>
<p>Notable is that now checks are performed if you didnt potentially
overload e.g. the <code class="docutils literal notranslate"><span class="pre">len</span></code> with your own version in the module.
Locally it was always detected already. So its now also safe.</p>
</li>
<li><p>All operations and comparisons are now simulated if possible and
replaced with their result.</p></li>
<li><p>In the case of predictable true or false conditions, not taken
branches are removed.</p></li>
<li><p>Empty branches are now removed from most constructs, leading to
sometimes cleaner code generated.</p></li>
</ul>
</section>
<section id="id487">
<h3>Cleanups<a class="headerlink" href="#id487" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Removed the lambda body node and replaced it with function body. This
is a great win for the split into body and builder. Regular functions
and lambda functions now only differ in how the created body is used.</p></li>
<li><p>Large cleanup of the operation/comparison code. There is now only use
of a simulator function, which exists for every operator and
comparison. This one is then used in a prediction call, shared with
the built-in predictions.</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">Tracing</span></code> module to avoid future imports of
<code class="docutils literal notranslate"><span class="pre">print_function</span></code>, which annoyed me many times by causing syntax
failures for when I quickly added a print statement, not noting it
must have the braces.</p></li>
<li><p>PyLint is happier than ever.</p></li>
</ul>
</section>
<section id="id488">
<h3>New Tests<a class="headerlink" href="#id488" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">OverflowFunctions</span></code> test to cover even deeper nesting of
overflow functions taking closure from each level. While its not yet
working, this makes clearer what will be needed. Even if this code is
obscure, I would like to be that correct here.</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">Operators</span></code> test to cover the `` operator as well.</p></li>
<li><p>Added to <code class="docutils literal notranslate"><span class="pre">ListContractions</span></code> the case where a contraction is
returned by a lambda function, but still needs to leak its loop
variable.</p></li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">GeneratorExpressions</span></code> test to cover lambda generators,
which is really crazy code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">y</span><span class="p">():</span>
    <span class="k">yield</span> <span class="p">((</span><span class="k">yield</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="k">yield</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Added to <code class="docutils literal notranslate"><span class="pre">ExecEval</span></code> a case where the <code class="docutils literal notranslate"><span class="pre">exec</span></code> is inside a
generator, to cover that too.</p></li>
<li><p>Activated the testing of <code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> in <code class="docutils literal notranslate"><span class="pre">ExceptionRaising</span></code>
test.</p>
<p>This was previously commented out, and now I added stuff to
illustrate all of the behavior of CPython there.</p>
</li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">ComparisonChains</span></code> test to demonstrate that the order of
evaluations is done right and that side effects are maintained.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">BuiltinOverload</span></code> test to show that overloaded built-ins are
actually called and not the optimized version. So code like this has
to print 2 lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__builtin__</span> <span class="kn">import</span> <span class="nb">len</span> <span class="k">as</span> <span class="n">_len</span>


<span class="k">def</span> <span class="nf">len</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">x</span>


<span class="k">return</span> <span class="n">_len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id489">
<h3>Organisational<a class="headerlink" href="#id489" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Changed README.txt to no longer say that Scons is a requirement.
Now that its included (patched up to work with <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> on
Windows), we dont have to say that anymore.</p></li>
<li><p>Documented the status of optimization and added some more ideas.</p></li>
<li><p>There is now an option to dump the node tree after optimization as
XML. Not currently use, but is for regression testing, to identify
where new optimization and changes have an impact. This make it more
feasible to be sure that Nuitka is only becoming better.</p></li>
<li><p>Executable with Python3 again, although it wont do anything, the
necessary code changes were done.</p></li>
</ul>
</section>
<section id="id490">
<h3>Summary<a class="headerlink" href="#id490" title="Permalink to this headline"></a></h3>
<p>Its nice to see, that I some long standing issues were resolved, and
that structural optimization has become almost a reality.</p>
<p>The difficult parts of exception propagation are all in place, now its
only details. With that we can eliminate and predict even more of the
stupid code of pybench at compile time, achieving more infinite
speedups.</p>
</section>
</section>
<section id="nuitka-release-0-3-9">
<h2>Nuitka Release 0.3.9<a class="headerlink" href="#nuitka-release-0-3-9" title="Permalink to this headline"></a></h2>
<p>This is about the new release of Nuitka which some bug fixes and offers
a good speed improvement.</p>
<p>This new release is major milestone 2 work, enhancing practically all
areas of Nuitka. The main focus was on faster function calls, faster
class attributes (not instance), faster unpacking, and more built-ins
detected and more thoroughly optimizing them.</p>
<section id="id491">
<h3>Bug fixes<a class="headerlink" href="#id491" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Exceptions raised inside with statements had references to the
exception and traceback leaked.</p></li>
<li><p>On Windows the binaries <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> pointed to the binary
itself instead of the Python interpreter. Changed, because some code
uses <code class="docutils literal notranslate"><span class="pre">sys.executable</span></code> to know how to start Python scripts.</p></li>
<li><p>There is a bug (fixed in their repository) related to C++ raw strings
and C++ trigraphs that affects Nuitka, added a workaround that
makes Nuitka not emit trigraphs at all.</p></li>
<li><p>The check for mutable constants was erroneous for tuples, which could
lead to assuming a tuple with only mutable elements to be not
mutable, which is of course wrong.</p></li>
</ul>
</section>
<section id="id492">
<h3>Optimization<a class="headerlink" href="#id492" title="Permalink to this headline"></a></h3>
<p>This time there are so many new optimization, it makes sense to group
them by the subject.</p>
</section>
<section id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The code to add a traceback is now our own, which made it possible to
use frames that do not contain line numbers and a code object capable
of lookups.</p></li>
<li><p>Raising exceptions or adding to tracebacks has been made way faster
by reusing a cached frame objects for the task.</p></li>
<li><p>The class used for saving exceptions temporarily (e.g. used in
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> code, or with statement) has been improved.</p>
<p>It now doesnt make a copy of the exception with a C++ <code class="docutils literal notranslate"><span class="pre">new</span></code> call,
but it simply stores the exception properties itself and creates the
exception object only on demand, which is more efficient.</p>
</li>
<li><p>When catching exceptions, the addition of tracebacks is now done
without exporting and re-importing the exception to Python, but
directly on the exception objects traceback, this avoids a useless
round trip.</p></li>
</ul>
</section>
<section id="function-calls">
<h3>Function Calls<a class="headerlink" href="#function-calls" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Uses of PyObject_Call provide <code class="docutils literal notranslate"><span class="pre">NULL</span></code> as the dictionary, instead of
an empty dictionary, which is slightly faster for function calls.</p></li>
<li><p>There are now dedicated variants for complex function calls with
<code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">**</span></code> arguments in all forms.</p>
<p>These can take advantage of easier cases. For example, a merge with
star arguments is only needed if there actually were any of these.</p>
</li>
<li><p>The check for non-string values in the <code class="docutils literal notranslate"><span class="pre">**</span></code> arguments can now be
completely short-cut for the case of a dictionary that has never had
a string added. There is now code that detects this case and skips
the check, eliminating it as a performance concern.</p></li>
</ul>
</section>
<section id="parameter-parsing">
<h3>Parameter Parsing<a class="headerlink" href="#parameter-parsing" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Reversed the order in which parameters are checked.</p>
<p>Now the keyword dictionary is iterated first and only then the
positional arguments after that is done. This iteration is not only
much faster (avoiding repeated lookups for each possible parameter),
it also can be more correct, in case the keyword argument is derived
from a dictionary and its keys mutate it when being compared.</p>
</li>
<li><p>Comparing parameter names is now done with a fast path, in which the
pointer values are compare first. This can avoid a call to the
comparison at all, which has become very likely due to the interning
of parameter name strings, see below.</p></li>
<li><p>Added a dedicated call to check for parameter equality with rich
equality comparison, which doesnt raise an exception.</p></li>
<li><p>Unpacking of tuples is now using dedicated variants of the normal
unpacking code instead of rolling out everything themselves.</p></li>
</ul>
</section>
<section id="attribute-access">
<h3>Attribute Access<a class="headerlink" href="#attribute-access" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The class type (in executables, not yet for extension modules) is
changed to a faster variant of our own making that doesnt consider
the restricted mode a possibility. This avoids very expensive calls,
and makes accessing class attributes in compiled code and in
non-compiled code faster.</p></li>
<li><p>Access to attributes (but not of instances) got in-lined and
therefore much faster. Due to other optimization, a specific step to
intern the string used for attribute access is not necessary with
Nuitka at all anymore. This made access to attributes about 50%
faster which is big of course.</p></li>
</ul>
</section>
<section id="constants">
<h3>Constants<a class="headerlink" href="#constants" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The bug for mutable tuples also caused non-mutable tuples to be
considered as mutable, which lead to less efficient code.</p></li>
<li><p>The constant creation with the g++ bug worked around, can now use raw
strings to create string constants, without resorting to un-pickling
them as a work around. This allows us to use
<code class="docutils literal notranslate"><span class="pre">PyString_FromStringAndSize</span></code> to create strings again, which is
obviously faster, and had not been done, because of the confusion
caused by the g++ bug.</p></li>
<li><p>For string constants that are usable as attributes (i.e. match the
identifier regular expression), these are now interned, directly
after creation. With this, the check for identical value of pointers
for parameters has a bigger chance to succeed, and this saves some
memory too.</p></li>
<li><p>For empty containers (set, dict, list, tuple) the constants created
are now are not unstreamed, but created with the dedicated API calls,
saving a bit of code and being less ugly.</p></li>
<li><p>For mutable empty constant access (set, dict, list) the values are no
longer made by copying the constant, but instead with the API
functions to create new ones. This makes code like <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">[]</span></code> a tiny
bit faster.</p></li>
<li><p>For slice indices the code generation now takes advantage of creating
a C++ <code class="docutils literal notranslate"><span class="pre">Py_ssize_t</span></code> from constant value if possible. Before it was
converting the integer constant at run time, which was of course
wasteful even if not (very) slow.</p></li>
</ul>
</section>
<section id="iteration">
<h3>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The creation of iterators got our own code. This avoids a function
call and is otherwise only a small gain for anything but sequence
iterators. These may be much faster to create now, as it avoids
another call and repeated checks.</p></li>
<li><p>The next on iterator got our own code too, which has simpler code
flow, because it avoids the double check in case of NULL returned.</p></li>
<li><p>The unpack check got similar code to the next iterator, it also has
simpler code flow now and avoids double checks.</p></li>
</ul>
</section>
<section id="built-ins">
<h3>Built-ins<a class="headerlink" href="#built-ins" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>,
<code class="docutils literal notranslate"><span class="pre">float</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> built-ins along with optimizing their use with
constant parameter.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">long</span></code> built-ins, based on a new
call spec object, that detects parameter errors at compile time and
raises appropriate exceptions as required, plus it deals with keyword
arguments just as well.</p>
<p>So, to Nuitka it doesnt matter now it you write <code class="docutils literal notranslate"><span class="pre">int(value)</span> <span class="pre">``or</span>
<span class="pre">``int(x</span> <span class="pre">=</span> <span class="pre">value)</span></code> anymore. The <code class="docutils literal notranslate"><span class="pre">base</span></code> parameter of these built-ins
is also supported.</p>
<p>The use of this call spec mechanism will the expanded, currently it
is not applied to the built-ins that take only one parameter. This is
a work in progress as is the whole built-ins business as not all the
built-ins are covered yet.</p>
</li>
</ul>
</section>
<section id="id493">
<h3>Cleanups<a class="headerlink" href="#id493" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>In 0.3.8 per module global classes were introduced, but the
<code class="docutils literal notranslate"><span class="pre">IMPORT_MODULE</span></code> kept using the old universal class, this got
resolved and the old class is now fully gone.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">assertObject</span></code> in more cases, and in more places at all,
catches errors earlier on.</p></li>
<li><p>Moved the addition to tracebacks into the <code class="docutils literal notranslate"><span class="pre">_PythonException</span></code> class,
where it works directly on the contained traceback. This is cleaner
as it no longer requires to export exceptions to Python, just to add
a traceback entry.</p></li>
<li><p>Some <code class="docutils literal notranslate"><span class="pre">PyLint</span></code> cleanups were done, reducing the number of reports a
bit, but there is still a lot to do.</p></li>
<li><p>Added a <code class="docutils literal notranslate"><span class="pre">DefaultValueIdentifier</span></code> class that encapsulates the access
to default values in the parameter parsing more cleanly.</p></li>
<li><p>The module <code class="docutils literal notranslate"><span class="pre">CodeTemplatesListContractions</span></code> was renamed to
<code class="docutils literal notranslate"><span class="pre">CodeTemplatesContractions</span></code> to reflect the fact that it deals with
all kinds of contractions (also set and dict contractions), not just
list contractions.</p></li>
<li><p>Moved the with related template to its own module
<code class="docutils literal notranslate"><span class="pre">CodeTemplatesWith</span></code>, so its easier to find.</p></li>
<li><p>The options handling for g++ based compilers was cleaned up, so that
g++ 4.6 and MinGW are better supported now.</p></li>
<li><p>Documented more aspects of the Scons build file.</p></li>
<li><p>Some more generated code white space fixes.</p></li>
<li><p>Moved some helpers to dedicated files. There is now <code class="docutils literal notranslate"><span class="pre">calling.hpp</span></code>
for function calls, an <code class="docutils literal notranslate"><span class="pre">importing.cpp</span></code> for import related stuff.</p></li>
<li><p>Moved the manifest generation to the scons file, which now produces
ready to use executables.</p></li>
</ul>
</section>
<section id="id494">
<h3>New Tests<a class="headerlink" href="#id494" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added a improved version of pybench that can cope with the 0 ms
execution time that Nuitka has for some if its sub-tests.</p></li>
<li><p>Reference counting test for with statement was added.</p></li>
<li><p>Micro benchmarks to demonstrate try finally performance when an
exception travels through it.</p></li>
<li><p>Micro benchmark for with statement that eats up exceptions raised
inside the block.</p></li>
<li><p>Micro benchmarks for the read and write access to class attributes.</p></li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">Printing</span></code> test to cover the trigraphs constant bug case.
Output is required to make the error detectable.</p></li>
<li><p>Enhanced <code class="docutils literal notranslate"><span class="pre">Constants</span></code> test to cover repeated mutation of mutable
tuple constants, this covers the bug mentioned.</p></li>
</ul>
</section>
<section id="id495">
<h3>Organisational<a class="headerlink" href="#id495" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added a credits section to the README.txt where I give credit to
the people who contributed to Nuitka, and the projects it is using. I
will make it a separate posting to cite these.</p></li>
<li><p>Documented the requirements on the compiler more clearly, document
the fact that we require scons and which version of Python (2.6 or
2.7).</p></li>
<li><p>The is now a codespeed implementation up and running with historical
data for up to Nuitka 0.3.8 runs of PyStone and with pybench. It
will be updated for 0.3.9 once I have the infrastructure in place to
do that automatically.</p></li>
<li><p>The cleanup script now also removes .so files.</p></li>
<li><p>The handling of options for g++ got improved, so its the same for
g++ and MinGW compilers, plus adequate errors messages are given, if
the compiler version is too low.</p></li>
<li><p>There is now a <code class="docutils literal notranslate"><span class="pre">--unstripped</span></code> option that just keeps the debug
information in the file, but doesnt keep the assertions.</p>
<p>This will be helpful when looking at generated assembler code from
Nuitka to not have the distortions that <code class="docutils literal notranslate"><span class="pre">--debug</span></code> causes (reduced
optimization level, assertions, etc.) and instead a clear view.</p>
</li>
</ul>
</section>
</section>
<section id="nuitka-release-0-3-8">
<h2>Nuitka Release 0.3.8<a class="headerlink" href="#nuitka-release-0-3-8" title="Permalink to this headline"></a></h2>
<p>This is to inform you about the new release of Nuitka with some real
news and a slight performance increase. The significant news is added
Windows Support. You can now hope to run Nuitka on Windows too and
have it produce working executables against either the standard Python
distribution or a MinGW compiled Python.</p>
<p>There are still some small things to iron out, and clearly documentation
needs to be created, and esp. the DLL hell problem of <code class="docutils literal notranslate"><span class="pre">msvcr90.dll</span></code>
vs. <code class="docutils literal notranslate"><span class="pre">msvcrt.dll</span></code>, is not yet fully resolved, but appears to be not as
harmful, at least not on native Windows.</p>
<p>I am thanking Khalid Abu Bakr for making this possible. I was surprised
to see this happen. I clearly didnt make it easy. He found a good way
around <code class="docutils literal notranslate"><span class="pre">ucontext</span></code>, identifier clashes, and a very tricky symbol
problems where the CPython library under Windows exports less than under
Linux. Thanks a whole lot.</p>
<p>Currently the Windows support is considered experimental and works with
MinGW 4.5 or higher only.</p>
<p>Otherwise there have been the usual round of performance improvements
and more cleanups. This release is otherwise milestone 2 work only,
which will have to continue for some time more.</p>
<section id="id496">
<h3>Bug fixes<a class="headerlink" href="#id496" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Lambda generators were not fully compatible, their simple form could
yield an extra value. The behavior for Python 2.6 and 2.7 is also
different and Nuitka now mimics both correctly, depending on the used
Python version</p></li>
<li><p>The given parameter count cited in the error message in case of too
many parameters, didnt include the given keyword parameters in the
error message.</p></li>
<li><p>There was an <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">False</span></code> right after warning about not found
modules in the <code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode, which was of course unnecessary.</p></li>
</ul>
</section>
<section id="id497">
<h3>Optimization<a class="headerlink" href="#id497" title="Permalink to this headline"></a></h3>
<ul>
<li><p>When unpacking variables in assignments, the temporary variables are
now held in a new temporary class that is designed for the task
specifically.</p>
<p>This avoids the taking of a reference just because the
<code class="docutils literal notranslate"><span class="pre">PyObjectTemporary</span></code> destructor insisted on releasing one. The new
class <code class="docutils literal notranslate"><span class="pre">PyObjectTempHolder</span></code> hands the existing reference over and
releases only in case of exceptions.</p>
</li>
<li><p>When unpacking variable in for loops, the value from the iterator may
be directly assigned, if its to a variable.</p>
<p>In general this would be possible for every assignment target that
cannot raise, but the infrastructure cannot tell yet, which these
would be. This will improve with more milestone 3 work.</p>
</li>
<li><p>Branches with only <code class="docutils literal notranslate"><span class="pre">pass</span></code> inside are removed, <code class="docutils literal notranslate"><span class="pre">pass</span></code> statements
are removed before the code generation stage. This makes it easier to
achieve and decide empty branches.</p></li>
<li><p>There is now a global variable class per module. It appears that it
is indeed faster to roll out a class per module accessing the
<code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">*</span></code> rather than having one class and use a <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">**</span></code>,
which is quite disappointing from the C++ compiler.</p></li>
<li><p>Also <code class="docutils literal notranslate"><span class="pre">MAKE_LIST</span></code> and <code class="docutils literal notranslate"><span class="pre">MAKE_TUPLE</span></code> have gained special cases for
the 0 arguments case. Even when the size of the variadic template
parameters should be known to the compiler, it seems, it wasnt
eliminating the branch, so this was a speedup measured with valgrind.</p></li>
<li><p>Empty tried branches are now replaced when possible with
<code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> statements, <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> is simplified in
this case. This gives a cleaner tree structure and less verbose C++
code which the compiler threw away, but was strange to have in the
first place.</p></li>
<li><p>In conditions the <code class="docutils literal notranslate"><span class="pre">or</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span></code> were evaluated with Python
objects instead of with C++ bool, which was unnecessary overhead.</p></li>
<li><p>List contractions got more clever in how they assign from the
iterator value.</p>
<p>It now uses a <code class="docutils literal notranslate"><span class="pre">PyObjectTemporary</span></code> if its assigned to multiple
values, a <code class="docutils literal notranslate"><span class="pre">PyObjectTempHolder</span></code> if its only assigned once, to
something that could raise, or a <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> if an exception
cannot be raised. This avoids temporary references completely for the
common case.</p>
</li>
</ul>
</section>
<section id="id498">
<h3>Cleanups<a class="headerlink" href="#id498" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">for</span></code>, and <code class="docutils literal notranslate"><span class="pre">while</span></code> statements had always empty
<code class="docutils literal notranslate"><span class="pre">else</span></code> nodes which were then also in the generated C++ code as
empty branches. No harm to performance, but this got cleaned up.</p></li>
<li><p>Some more generated code white space fixes.</p></li>
</ul>
</section>
<section id="id499">
<h3>New Tests<a class="headerlink" href="#id499" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The CPython 2.7 test suite now also has the <code class="docutils literal notranslate"><span class="pre">doctests</span></code> extracted to
static tests, which improves test coverage for Nuitka again.</p>
<p>This was previously only done for CPython 2.6 test suite, but the
test suites are different enough to make this useful, e.g. to
discover newly changed behavior like with the lambda generators.</p>
</li>
<li><p>Added Shed Skin 0.7.1 examples as benchmarks, so we can start to
compare Nuitka performance in these tests. These will be the focus of
numbers for the 0.4.x release series.</p></li>
<li><p>Added a micro benchmark to check unpacking behavior. Some of these
are needed to prove that a change is an actual improvement, when its
effect can go under in noise of in-line vs. no in-line behavior of
the C++ compiler.</p></li>
<li><p>Added pybench benchmark which reveals that Nuitka is for some
things much faster, but there are still fields to work on. This
version needed changes to stand the speed of Nuitka. These will be
subject of a later posting.</p></li>
</ul>
</section>
<section id="id500">
<h3>Organisational<a class="headerlink" href="#id500" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a tests/benchmarks/micro directory to contain tiny
benchmarks that just look at a single aspect, but have no other
meaning, e.g. the PyStone extracts fall into this category.</p></li>
<li><p>There is now a <code class="docutils literal notranslate"><span class="pre">--windows-target</span></code> option that attempts a
cross-platform build on Linux to Windows executable. This is using
MingGW-cross-env cross compilation tool chain. Its not yet working
fully correctly due to the DLL hell problem with the C runtime. I
hope to get this right in subsequent releases.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--execute</span></code> option uses wine to execute the binary if its a
cross-compile for windows.</p></li>
<li><p>Native windows build is recognized and handled with MinGW 4.5, the
VC++ is not supported yet due to missing C++0x support.</p></li>
<li><p>The basic test suite ran with Windows so far only and some
adaptations were necessary. Windows new lines are now ignored in
difference check, and addresses under Windows are upper case, small
things.</p></li>
</ul>
</section>
<section id="id501">
<h3>Numbers<a class="headerlink" href="#id501" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.8 (driven by python 2.6):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.27</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">185185</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is a 140% speed increase of 0.3.8 compared to CPython, up from 132%
compared to the previous release.</p>
</section>
</section>
<section id="nuitka-release-0-3-7">
<h2>Nuitka Release 0.3.7<a class="headerlink" href="#nuitka-release-0-3-7" title="Permalink to this headline"></a></h2>
<p>This is about the new release with focus on performance and cleanups. It
indicates significant progress with the milestone this release series
really is about as it adds a <code class="docutils literal notranslate"><span class="pre">compiled_method</span></code> type.</p>
<p>So far functions, generator function, generator expressions were
compiled objects, but in the context of classes, functions were wrapped
in CPython <code class="docutils literal notranslate"><span class="pre">instancemethod</span></code> objects. The new <code class="docutils literal notranslate"><span class="pre">compiled_method</span></code> is
specifically designed for wrapping <code class="docutils literal notranslate"><span class="pre">compiled_function</span></code> and therefore
more efficient at it.</p>
<section id="id502">
<h3>Bug fixes<a class="headerlink" href="#id502" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">Python</span></code> or <code class="docutils literal notranslate"><span class="pre">Nuitka.py</span></code> to execute some script, the
exit code in case of file not found was not the same as CPython. It
should be 2, not 1.</p></li>
<li><p>The exit code of the created programs (<code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode) in case of an
uncaught exception was 0, now it an error exit with value 1, like
CPython does it.</p></li>
<li><p>Exception tracebacks created inside <code class="docutils literal notranslate"><span class="pre">with</span></code> statements could contain
duplicate lines, this was corrected.</p></li>
</ul>
</section>
<section id="id503">
<h3>Optimization<a class="headerlink" href="#id503" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Global variable assignments now also use <code class="docutils literal notranslate"><span class="pre">assign0</span></code> where no
reference exists.</p>
<p>The assignment code for module variables is actually faster if it
needs not drop the reference, but clearly the code shouldnt bother
to take it on the outside just for that. This variant existed, but
wasnt used as much so far.</p>
</li>
<li><p>The instance method objects are now Nuitkas own compiled type too.
This should make things slightly faster by itself.</p></li>
<li><p>Our new compiled method objects support dedicated method parsing
code, where <code class="docutils literal notranslate"><span class="pre">self</span></code> is passed directly, allowing to make calls
taking a fast path in parameter parsing.</p>
<p>This avoids allocating/freeing a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> object per method call,
while reduced 3% ticks in PyStone benchmark, so thats significant.</p>
</li>
<li><p>Solved a <code class="docutils literal notranslate"><span class="pre">TODO</span></code> of <code class="docutils literal notranslate"><span class="pre">BUILTIN_RANGE</span></code> to change it to pre-allocating
the list in the final size as we normally do everywhere else. This
was a tick reduction of 0.4% in PyStone benchmark, but the
measurement method normalizes on loop speed, so its not visible in
the numbers output.</p></li>
<li><p>Parameter variables cannot possibly be uninitialized at creation and
most often they are never subject to a <code class="docutils literal notranslate"><span class="pre">del</span></code> statement. Adding
dedicated C++ variable classes gave a big speedup, around 3% of
PyStone benchmark ticks.</p></li>
<li><p>Some abstract object operations were re-implemented, which allows to
avoid function calls e.g. in the <code class="docutils literal notranslate"><span class="pre">ITERATOR_NEXT</span></code> case, this gave a
few percent on PyStone as well.</p></li>
</ul>
</section>
<section id="id504">
<h3>Cleanups<a class="headerlink" href="#id504" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>New package <code class="docutils literal notranslate"><span class="pre">nuitka.codegen</span></code> to contain all code generation related
stuff, moved <code class="docutils literal notranslate"><span class="pre">nuitka.templates</span></code> to <code class="docutils literal notranslate"><span class="pre">nuitka.codegen.templates</span></code> as
part of that.</p></li>
<li><p>Inside the <code class="docutils literal notranslate"><span class="pre">nuitka.codegen</span></code> package the <code class="docutils literal notranslate"><span class="pre">MainControl</span></code> module now
longer reaches into <code class="docutils literal notranslate"><span class="pre">Generator</span></code> for simple things, but goes through
<code class="docutils literal notranslate"><span class="pre">CodeGeneration</span></code> for everything now.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Generator</span></code> module uses almost no tree nodes anymore, but
instead gets information passed in function calls. This allows for a
cleanup of the interface towards <code class="docutils literal notranslate"><span class="pre">CodeGeneration</span></code>. Gives a cleaner
view on the C++ code generation, and generally furthers the goal of
other than C++ language backends.</p></li>
<li><p>More PyLint work, many of the reported warnings have been
addressed, but its not yet happy.</p></li>
<li><p>Defaults for <code class="docutils literal notranslate"><span class="pre">yield</span></code> and <code class="docutils literal notranslate"><span class="pre">return</span></code> are <code class="docutils literal notranslate"><span class="pre">None</span></code> and these values
are now already added (as constants) during tree building so that no
such special cases need to be dealt with in <code class="docutils literal notranslate"><span class="pre">CodeGeneration</span></code> and
future analysis steps.</p></li>
<li><p>Parameter parsing code has been unified even further, now the whole
entry point is generated by one of the function in the new
<code class="docutils literal notranslate"><span class="pre">nuitka.codegen.ParameterParsing</span></code> module.</p></li>
<li><p>Split variable, exception, built-in helper classes into separate
header files.</p></li>
</ul>
</section>
<section id="id505">
<h3>New Tests<a class="headerlink" href="#id505" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The exit codes of CPython execution and Nuitka compiled programs are
now compared as well.</p></li>
<li><p>Errors messages of methods are now covered by the <code class="docutils literal notranslate"><span class="pre">ParameterErrors</span></code>
test as well.</p></li>
</ul>
</section>
<section id="id506">
<h3>Organisational<a class="headerlink" href="#id506" title="Permalink to this headline"></a></h3>
<ul>
<li><p>A new script benchmark.sh (now called run-valgrind.py) script now
starts kcachegrind to display the valgrind result directly.</p>
<p>One can now use it to execute a test and inspect valgrind information
right away, then improve it. Very useful to discover methods for
improvements, test them, then refine some more.</p>
</li>
<li><p>The check-release.sh script needs to unset <code class="docutils literal notranslate"><span class="pre">NUITKA_EXTRA_OPTIONS</span></code>
or else the reflection test will trip over the changed output paths.</p></li>
</ul>
</section>
<section id="id507">
<h3>Numbers<a class="headerlink" href="#id507" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.7 (driven by python 2.6):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.28</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">178571</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is a 132% speed of 0.3.7 compared to CPython, up from 109% compare
to the previous release. This is a another small increase, that can be
fully attributed to milestone 2 measures, i.e. not analysis, but purely
more efficient C++ code generation and the new compiled method type.</p>
<p>One can now safely assume that it is at least twice as fast, but I will
try and get the PyPy or Shedskin test suite to run as benchmarks to
prove it.</p>
<p>No milestone 3 work in this release. I believe its best to finish with
milestone 2 first, because these are quite universal gains that we
should have covered.</p>
</section>
</section>
<section id="nuitka-release-0-3-6">
<h2>Nuitka Release 0.3.6<a class="headerlink" href="#nuitka-release-0-3-6" title="Permalink to this headline"></a></h2>
<p>The major point this for this release is cleanup work, and generally bug
fixes, esp. in the field of importing. This release cleans up many small
open ends of Nuitka, closing quite a bunch of consistency <code class="docutils literal notranslate"><span class="pre">TODO</span></code>
items, and then aims at cleaner structures internally, so optimization
analysis shall become easy. It is a correctness and framework release,
not a performance improvement at all.</p>
<section id="id508">
<h3>Bug fixes<a class="headerlink" href="#id508" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Imports were not respecting the <code class="docutils literal notranslate"><span class="pre">level</span></code> yet. Code like this was not
working, now it is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">something</span>
</pre></div>
</div>
</li>
<li><p>Absolute and relative imports were e.g. both tried all the time, now
if you specify absolute or relative imports, it will be attempted in
the same way than CPython does. This can make a difference with
compatibility.</p></li>
<li><p>Functions with a locals dict (using <code class="docutils literal notranslate"><span class="pre">locals</span></code> built-in or <code class="docutils literal notranslate"><span class="pre">exec</span></code>
statement) were not 100% compatible in the way the locals dictionary
was updated, this got fixed. It seems that directly updating a dict
is not what CPython does at all, instead it only pushes things to the
dictionary, when it believes it has to. Nuitka now does the same
thing, making it faster and more compatible at the same time with
these kind of corner cases.</p></li>
<li><p>Nested packages didnt work, they do now. Nuitka itself is now
successfully using nested packages (e.g.
<code class="docutils literal notranslate"><span class="pre">nuitka.transform.optimizations</span></code>)</p></li>
</ul>
</section>
<section id="id509">
<h3>New Features<a class="headerlink" href="#id509" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">--lto</span></code> option becomes usable. Its not measurably faster
immediately, and it requires g++ 4.6 to be available, but then it at
least creates smaller binaries and may provide more optimization in
the future.</p></li>
</ul>
</section>
<section id="id510">
<h3>Optimization<a class="headerlink" href="#id510" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Exceptions raised by pre-computed built-ins, unpacking, etc. are now
transformed to raising the exception statically.</p></li>
</ul>
</section>
<section id="id511">
<h3>Cleanups<a class="headerlink" href="#id511" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a <code class="docutils literal notranslate"><span class="pre">getVariableForClosure</span></code> that a variable provider can
use. Before that it guessed from <code class="docutils literal notranslate"><span class="pre">getVariableForReference</span></code> or
<code class="docutils literal notranslate"><span class="pre">getVariableForAssignment</span></code> what might be the intention. This makes
some corner cases easier.</p></li>
<li><p>Classes, functions and lambdas now also have separate builder and
body nodes, which enabled to make getSameScopeNodes() really simple.
Either something has children which are all in a new scope or it has
them in the same scope.</p></li>
<li><p>Twisted workarounds like <code class="docutils literal notranslate"><span class="pre">TransitiveProvider</span></code> are no longer needed,
because class builder and class body were separated.</p></li>
<li><p>New packages <code class="docutils literal notranslate"><span class="pre">nuitka.transform.optimizations</span></code> and
<code class="docutils literal notranslate"><span class="pre">nuitka.transform.finalizations</span></code>, where the first was
<code class="docutils literal notranslate"><span class="pre">nuitka.optimizations</span></code> before. There is also code in
<code class="docutils literal notranslate"><span class="pre">nuitka.transform</span></code> that was previously in a dedicated module. This
allowed to move a lot of displaced code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TreeBuilding</span></code> now has fast paths for all 3 forms, things that need
a provider, node, and source_ref; things that need node and
source_ref; things that need nothing at all, e.g. pass.</p></li>
<li><p>Variables now avoid building duplicated instances, but instead share
one. Better for analysis of them.</p></li>
</ul>
</section>
<section id="id512">
<h3>New Tests<a class="headerlink" href="#id512" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The Python 2.7 test suite is no longer run with Python 2.6 as it will
just crash with the same exception all the time, there is no
<code class="docutils literal notranslate"><span class="pre">importlib</span></code> in 2.6, but every test is using that through
test_support.</p></li>
<li><p>Nested packages are now covered with tests too.</p></li>
<li><p>Imports of upper level packages are covered now too.</p></li>
</ul>
</section>
<section id="id513">
<h3>Organisational<a class="headerlink" href="#id513" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Updated the README.txt with the current plan on optimization.</p></li>
</ul>
</section>
<section id="id514">
<h3>Numbers<a class="headerlink" href="#id514" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.6 (driven by python 2.6):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.31</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">161290</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 109% for 0.3.6, but no change from the previous release. No
surprise, because no new effective new optimization means have been
implemented. Stay tuned for future release for actual progress.</p>
</section>
</section>
<section id="nuitka-release-0-3-5">
<h2>Nuitka Release 0.3.5<a class="headerlink" href="#nuitka-release-0-3-5" title="Permalink to this headline"></a></h2>
<p>This new release of Nuitka is an overall improvement on many fronts,
there is no real focus this time, likely due to the long time it was in
the making.</p>
<p>The major points are more optimization work, largely enhanced import
handling and another improvement on the performance side. But there are
also many bug fixes, more test coverage, usability and compatibility.</p>
<p>Something esp. noteworthy to me and valued is that many important
changes were performed or at least triggered by Nicolas Dumazet, who
contributed a lot of high quality commits as you can see from the gitweb
history. He appears to try and compile Mercurial and Nuitka, and this
resulted in important contributions.</p>
<section id="id515">
<h3>Bug fixes<a class="headerlink" href="#id515" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Nicolas found a reference counting bug with nested parameter calls.
Where a function had parameters of the form <code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">(b,c)</span></code> it could
crash. This got fixed and covered with a reference count test.</p></li>
<li><p>Another reference count problem when accessing the locals dictionary
was corrected.</p></li>
<li><p>Values <code class="docutils literal notranslate"><span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">-0.0</span></code> were treated as the same. They are not
though, they have a different sign that should not get lost.</p></li>
<li><p>Nested contractions didnt work correctly, when the contraction was
to iterate over another contraction which needs a closure. The
problem was addressing by splitting the building of a contraction
from the body of the contraction, so that these are now 2 nodes,
making it easy for the closure handling to get things right.</p></li>
<li><p>Global statements in function with local <code class="docutils literal notranslate"><span class="pre">exec()</span></code> would still use
the value from the locals dictionary. Nuitka is now compatible to
CPython with this too.</p></li>
<li><p>Nicolas fixed problems with modules of the same name inside different
packages. We now use the full name including parent package names for
code generation and look-ups.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__module__</span></code> attribute of classes was only set after the class
was created. Now it is already available in the class body.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> attribute of classes was not set at all. Now it is.</p></li>
<li><p>The relative import inside nested packages now works correctly. With
Nicolas moving all of Nuitka to a package, the compile itself exposed
many weaknesses.</p></li>
<li><p>A local re-raise of an exception didnt have the original line
attached but the re-raise statement line.</p></li>
</ul>
</section>
<section id="id516">
<h3>New Features<a class="headerlink" href="#id516" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Modules and packages have been unified. Packages can now also have
code in __init__.py and then it will be executed when the package
is imported.</p></li>
<li><p>Nicolas added the ability to create deep output directory structures
without having to create them beforehand. This makes
<code class="docutils literal notranslate"><span class="pre">--output-dir=some/deep/path</span></code> usable.</p></li>
<li><p>Parallel build by Scons was added as an option and enabled by
default, which enhances scalability for <code class="docutils literal notranslate"><span class="pre">--deep</span></code> compilations a
lot.</p></li>
<li><p>Nicolas enhanced the CPU count detection used for the parallel build.
Turned out that <code class="docutils literal notranslate"><span class="pre">multithreading.cpu_count()</span></code> doesnt give us the
number of available cores, so he contributed code to determine that.</p></li>
<li><p>Support for upcoming g++ 4.6 has been added. The use of the new
option <code class="docutils literal notranslate"><span class="pre">--lto</span></code> has been been prepared, but right now it appears
that the C++ compiler will need more fixes, before we can this
feature with Nuitka.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--display-tree</span></code> feature got an overhaul and now displays the
node tree along with the source code. It puts the cursor on the line
of the node you selected. Unfortunately I cannot get it to work
two-way yet. I will ask for help with this in a separate posting as
we can really use a python-qt expert it seems.</p></li>
<li><p>Added meaningful error messages in the file not found case.
Previously I just didnt care, but we sort of approach end user
usability with this.</p></li>
</ul>
</section>
<section id="id517">
<h3>Optimization<a class="headerlink" href="#id517" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added optimization for the built-in <code class="docutils literal notranslate"><span class="pre">range()</span></code> which otherwise
requires a module and <code class="docutils literal notranslate"><span class="pre">builtin</span></code> module lookup, then parameter
parsing. Now this is much faster with Nuitka and small ranges (less
than 256 values) are converted to constants directly, avoiding run
time overhead entirely.</p></li>
<li><p>Code for re-raise statements now use a simple re-throw of the
exception where possible, and only do the hard work where the
re-throw is not inside an exception handler.</p></li>
<li><p>Constant folding of operations and comparisons is now performed if
the operands are constants.</p></li>
<li><p>Values of some built-ins are pre-computed if the operands are
constants.</p></li>
<li><p>The value of module attribute <code class="docutils literal notranslate"><span class="pre">__name__</span></code> is replaced by a constant
unless it is assigned to. This is the first sign of upcoming constant
propagation, even if only a weak one.</p></li>
<li><p>Conditional statement and/or their branches are eliminated where
constant conditions allow it.</p></li>
</ul>
</section>
<section id="id518">
<h3>Cleanups<a class="headerlink" href="#id518" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Nicolas moved the Nuitka source code to its own <code class="docutils literal notranslate"><span class="pre">nuitka</span></code> package.
That is going to make packaging it a lot easier and allows cleaner
code.</p></li>
<li><p>Nicolas introduced a fast path in the tree building which often
delegates (or should do that) to a function. This reduced a lot of
the dispatching code and highlights more clearly where such is
missing right now.</p></li>
<li><p>Together we worked on the line length issues of Nuitka. We agreed on
a style and very long lines will vanish from Nuitka with time. Thanks
for pushing me there.</p></li>
<li><p>Nicolas also did provide many style fixes and general improvements,
e.g. using <code class="docutils literal notranslate"><span class="pre">PyObjectTemporary</span></code> in more places in the C++ code, or
not using <code class="docutils literal notranslate"><span class="pre">str.find</span></code> where <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">y</span></code> is a better choice.</p></li>
<li><p>The node structure got cleaned up towards the direction that
assignments always have an assignment as a child.</p>
<p>A function definition, or a class definition, are effectively
assignments, and in order to not have to treat this as special cases
everywhere, they need to have assignment targets as child nodes.</p>
<p>Without such changes, optimization will have to take too many things
into account. This is not yet completed.</p>
</li>
<li><p>Nicolas merged some node tree building functions that previously
handled deletion and assigning differently, giving us better code
reuse.</p></li>
<li><p>The constants code generation was moved to a <code class="docutils literal notranslate"><span class="pre">__constants.cpp</span></code>
where it doesnt make __main__.cpp so much harder to read anymore.</p></li>
<li><p>The module declarations have been moved to their own header files.</p></li>
<li><p>Nicolas cleaned up the scripts used to test Nuitka big time, removing
repetitive code and improving the logic. Very much appreciated.</p></li>
<li><p>Nicolas also documented a things in the Nuitka source code or got me
to document things that looked strange, but have reasons behind it.</p></li>
<li><p>Nicolas solved the <code class="docutils literal notranslate"><span class="pre">TODO</span></code> related to built-in module accesses.
These will now be way faster than before.</p></li>
<li><p>Nicolas also solved the <code class="docutils literal notranslate"><span class="pre">TODO</span></code> related to the performance of
locals dict variable accesses.</p></li>
<li><p>Generator.py no longer contains classes. The Contexts objects are
supposed to contain the state, and as such the generator objects
never made much sense.</p></li>
<li><p>Also with the help of Scons community, I figured out how to avoid
having object files inside the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory of Nuitka. That
should also help packaging, now all build products go to the .build
directory as they should.</p></li>
<li><p>The vertical white space of the generated C++ got a few cleanups,
trailing/leading new line is more consistent now, and there were some
assertions added that it doesnt happen.</p></li>
</ul>
</section>
<section id="id519">
<h3>New Tests<a class="headerlink" href="#id519" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The CPython 2.6 tests are now also run by CPython 2.7 and the other
way around and need to report the same test failure reports, which
found a couple of issues.</p></li>
<li><p>Now the test suite is run with and without <code class="docutils literal notranslate"><span class="pre">--debug</span></code> mode.</p></li>
<li><p>Basic tests got extended to cover more topics and catch more issues.</p></li>
<li><p>Program tests got extended to cover code in packages.</p></li>
<li><p>Added more exec scope tests. Currently inlining of exec statements is
disabled though, because it requires entirely different rules to be
done right, it has been pushed back to the next release.</p></li>
</ul>
</section>
<section id="id520">
<h3>Organisational<a class="headerlink" href="#id520" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">g++-nuitka</span></code> script is no more. With the help of the Scons
community, this is now performed inside the scons and only once
instead of each time for every C++ file.</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">--debug</span></code>, the generated C++ is compiled with <code class="docutils literal notranslate"><span class="pre">-Wall</span></code>
and <code class="docutils literal notranslate"><span class="pre">-Werror</span></code> so that some form of bugs in the generated C++ code
will be detected immediately. This found a few issues already.</p></li>
<li><p>There is a new git merge policy in place. Basically it says, that if
you submit me a pull request, that I will deal with it before
publishing anything new, so you can rely on the current git to
provide you a good base to work on. I am doing more frequent
pre-releases already and I would like to merge from your git.</p></li>
<li><p>The README.txt was updated to reflect current optimization status
and plans. There is still a lot to do before constant propagation can
work, but this explains things a bit better now. I hope to expand
this more and more with time.</p></li>
<li><p>There is now a misc/clean-up.sh script that prints the commands to
erase all the temporary files sticking around in the source tree.</p>
<p>That is for you if you like me, have other directories inside,
ignored, that you dont want to delete.</p>
</li>
<li><p>Then there is now a script that prints all source filenames, so you
can more easily open them all in your editor.</p></li>
<li><p>And very important, there is now a check-release.sh script that
performs all the tests I think should be done before making a
release.</p></li>
<li><p>Pylint got more happy with the current Nuitka source. In some places,
I added comments where rules should be granted exceptions.</p></li>
</ul>
</section>
<section id="id521">
<h3>Numbers<a class="headerlink" href="#id521" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.5 (driven by python 2.6):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.31</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">161290</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 109% for 0.3.5, up from 91% before.</p>
<p>Overall this release is primarily an improvement in the domain of
compatibility and contains important bug and feature fixes to the users.
The optimization framework only makes a first showing of with the
framework to organize them. There is still work to do to migrate
optimization previously present</p>
<p>It will take more time before we will see effect from these. I believe
that even more cleanups of <code class="docutils literal notranslate"><span class="pre">TreeBuilding</span></code>, <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> and
<code class="docutils literal notranslate"><span class="pre">CodeGeneration</span></code> will be required, before everything is in place for
the big jump in performance numbers. But still, passing 100% feels good.
Time to rejoice.</p>
</section>
</section>
<section id="nuitka-release-0-3-4">
<h2>Nuitka Release 0.3.4<a class="headerlink" href="#nuitka-release-0-3-4" title="Permalink to this headline"></a></h2>
<p>This new release of Nuitka has a focus on re-organizing the Nuitka
generated source code and a modest improvement on the performance side.</p>
<p>For a long time now, Nuitka has generated a single C++ file and asked
the C++ compiler to translate it to an executable or shared library for
CPython to load. This was done even when embedding many modules into one
(the deep compilation mode, option <code class="docutils literal notranslate"><span class="pre">--deep</span></code>).</p>
<p>This was simple to do and in theory ought to allow the compiler to do
the most optimization. But for large programs, the resulting source code
could have exponential compile time behavior in the C++ compiler. At
least for the GNU g++ this was the case, others probably as well. This
is of course at the end a scalability issue of Nuitka, which now has
been addressed.</p>
<p>So the major advancement of this release is to make the <code class="docutils literal notranslate"><span class="pre">--deep</span></code>
option useful. But also there have been a performance improvements,
which end up giving us another boost for the PyStone benchmark.</p>
<section id="id522">
<h3>Bug fixes<a class="headerlink" href="#id522" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Imports of modules local to packages now work correctly, closing the
small compatibility gap that was there.</p></li>
<li><p>Modules with a - in their name are allowed in CPython through
dynamic imports. This lead to wrong C++ code created. (Thanks to Li
Xuan Ji for reporting and submitting a patch to fix it.)</p></li>
<li><p>There were warnings about wrong format used for <code class="docutils literal notranslate"><span class="pre">Ssize_t</span></code> type of
CPython. (Again, thanks to Li Xuan Ji for reporting and submitting
the patch to fix it.)</p></li>
<li><p>When a wrong exception type is raised, the traceback should still be
the one of the original one.</p></li>
<li><p>Set and dict contractions (Python 2.7 features) declared local
variables for global variables used. This went unnoticed, because
list contractions dont generate code for local variables at all, as
they cannot have such.</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">type()</span></code> built-in to create a new class could attribute
it to the wrong module, this is now corrected.</p></li>
</ul>
</section>
<section id="id523">
<h3>New Features<a class="headerlink" href="#id523" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Uses Scons to execute the actual C++ build, giving some immediate
improvements.</p></li>
<li><p>Now caches build results and Scons will only rebuild as needed.</p></li>
<li><p>The direct use of <code class="docutils literal notranslate"><span class="pre">__import__()</span></code> with a constant module name as
parameter is also followed in deep mode. With time, non-constants
may still become predictable, right now it must be a real CPython
constant string.</p></li>
</ul>
</section>
<section id="id524">
<h3>Optimization<a class="headerlink" href="#id524" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added optimization for the built-ins <code class="docutils literal notranslate"><span class="pre">ord()</span></code> and <code class="docutils literal notranslate"><span class="pre">chr()</span></code>, these
require a module and built-in module lookup, then parameter parsing.
Now these are really quick with Nuitka.</p></li>
<li><p>Added optimization for the <code class="docutils literal notranslate"><span class="pre">type()</span></code> built-in with one parameter. As
above, using from builtin module can be very slow. Now it is
instantaneous.</p></li>
<li><p>Added optimization for the <code class="docutils literal notranslate"><span class="pre">type()</span></code> built-in with three parameters.
Its rarely used, but providing our own variant, allowed to fix the
bug mentioned above.</p></li>
</ul>
</section>
<section id="id525">
<h3>Cleanups<a class="headerlink" href="#id525" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Using scons is a big cleanup for the way how C++ compiler related
options are applied. It also makes it easier to re-build without
Nuitka, e.g. if you were using Nuitka in your packages, you can
easily build in the same way than Nuitka does.</p></li>
<li><p>Static helpers source code has been moved to .hpp and .cpp files,
instead of being in .py files. This makes C++ compiler messages
more readable and allows us to use C++ mode in Emacs etc., making it
easier to write things.</p></li>
<li><p>Generated code for each module ends up in a separate file per module
or package.</p></li>
<li><p>Constants etc. go to their own file (although not named sensible yet,
likely going to change too)</p></li>
<li><p>Module variables are now created by the <code class="docutils literal notranslate"><span class="pre">CPythonModule</span></code> node only
and are unique, this is to make optimization of these feasible. This
is a pre-step to module variable optimization.</p></li>
</ul>
</section>
<section id="id526">
<h3>New Tests<a class="headerlink" href="#id526" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added ExtremeClosure from my Python quiz, it was not covered by
existing tests.</p></li>
<li><p>Added test case for program that imports a module with a dash in its
name.</p></li>
<li><p>Added test case for main program that starts with a dash.</p></li>
<li><p>Extended the built-in tests to cover <code class="docutils literal notranslate"><span class="pre">type()</span></code> as well.</p></li>
</ul>
</section>
<section id="id527">
<h3>Organisational<a class="headerlink" href="#id527" title="Permalink to this headline"></a></h3>
<ul>
<li><p>There is now a new environment variable <code class="docutils literal notranslate"><span class="pre">NUITKA_SCONS</span></code> which should
point to the directory with the <code class="docutils literal notranslate"><span class="pre">SingleExe.scons</span></code> file for Nuitka.
The scons file could be named better, because it is actually one and
the same who builds extension modules and executables.</p></li>
<li><p>There is now a new environment variable <code class="docutils literal notranslate"><span class="pre">NUITKA_CPP</span></code> which should
point to the directory with the C++ helper code of Nuitka.</p></li>
<li><p>The script create-environment.sh can now be sourced (if you are in
the top level directory of Nuitka) or be used with eval. In either
case it also reports what it does.</p>
<div class="admonition-update admonition">
<p class="admonition-title">Update</p>
<p>The script has become obsolete now, as the environment variables
are no longer necessary.</p>
</div>
</li>
<li><p>To cleanup the many Program.build directories, there is now a
clean-up.sh script for your use. Can be handy, but if you use git,
you may prefer its clean command.</p>
<div class="admonition-update admonition">
<p class="admonition-title">Update</p>
<p>The script has become obsolete now, as Nuitka test executions now
by default delete the build results.</p>
</div>
</li>
</ul>
</section>
<section id="id528">
<h3>Numbers<a class="headerlink" href="#id528" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.4:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.34</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">147059</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 91% for 0.3.4, up from 80% before.</p>
</section>
</section>
<section id="nuitka-release-0-3-3">
<h2>Nuitka Release 0.3.3<a class="headerlink" href="#nuitka-release-0-3-3" title="Permalink to this headline"></a></h2>
<p>This release of Nuitka continues the focus on performance. It also
cleans up a few open topics. One is doctests, these are now extracted
from the CPython 2.6 test suite more completely. The other is that the
CPython 2.7 test suite is now passed completely. There is some more work
ahead though, to extract all of the doctests and to do that for both
versions of the tests.</p>
<p>This means an even higher level of compatibility has been achieved, then
there is performance improvements, and ever cleaner structure.</p>
<section id="id529">
<h3>Bug fixes<a class="headerlink" href="#id529" title="Permalink to this headline"></a></h3>
</section>
<section id="generators">
<h3>Generators<a class="headerlink" href="#generators" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Generator functions tracked references to the common and the instance
context independently, now the common context is not released before
the instance contexts are.</p></li>
<li><p>Generator functions didnt check the arguments to <code class="docutils literal notranslate"><span class="pre">throw()</span></code> the way
they are in CPython, now they do.</p></li>
<li><p>Generator functions didnt trace exceptions to stderr if they
occurred while closing unfinished ones in del.</p></li>
<li><p>Generator functions used the slightly different wordings for some
error messages.</p></li>
</ul>
</section>
<section id="id530">
<h3>Function Calls<a class="headerlink" href="#id530" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Extended call syntax with <code class="docutils literal notranslate"><span class="pre">**</span></code> allows that to use a mapping, and it
is now checked if it really is a mapping and if the contents has
string keys.</p></li>
<li><p>Similarly, extended call syntax with <code class="docutils literal notranslate"><span class="pre">*</span></code> allows a sequence, it is
now checked if it really is a sequence.</p></li>
<li><p>Error message for duplicate keyword arguments or too little arguments
now describe the duplicate parameter and the callable the same way
CPython does.</p></li>
<li><p>Now checks to the keyword argument list first before considering the
parameter counts. This is slower in the error case, but more
compatible with CPython.</p></li>
</ul>
</section>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The locals() built-in when used in the class scope (not in a
method) now is correctly writable and writes to it change the
resulting class.</p></li>
<li><p>Name mangling for private identifiers was not always done entirely
correct.</p></li>
</ul>
</section>
<section id="others">
<h3>Others<a class="headerlink" href="#others" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Exceptions didnt always have the correct stack reported.</p></li>
<li><p>The pickling of some tuples showed that cPickle can have
non-reproducible results, using pickle to stream constants now</p></li>
</ul>
</section>
<section id="id531">
<h3>Optimization<a class="headerlink" href="#id531" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Access to instance attributes has become faster by writing specific
code for the case. This is done in JIT way, attempting at run time to
optimize attribute access for instances.</p></li>
<li><p>Assignments now often consider whats cheaper for the other side,
instead of taking a reference to a global variable, just to have to
release it.</p></li>
<li><p>The function call code built argument tuples and dictionaries as
constants, now that is true for every tuple usage.</p></li>
</ul>
</section>
<section id="id532">
<h3>Cleanups<a class="headerlink" href="#id532" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The static helper classes, and the prelude code needed have been
moved to separate C++ files and are now accessed #include. This
makes the code inside C++ files as opposed to a Python string and
therefore easier to read and or change.</p></li>
</ul>
</section>
<section id="id533">
<h3>New Features<a class="headerlink" href="#id533" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The generator functions and generator expressions have the attribute
gi_running now. These indicate if they are currently running.</p></li>
</ul>
</section>
<section id="id534">
<h3>New Tests<a class="headerlink" href="#id534" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The script to extract the doctests from the CPython test suite has
been rewritten entirely and works with more doctests now. Running
these tests created increased the test coverage a lot.</p></li>
<li><p>The Python 2.7 test suite has been added.</p></li>
</ul>
</section>
<section id="id535">
<h3>Organisational<a class="headerlink" href="#id535" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>One can now run multiple compare_with_cpython instances in
parallel, which enables background test runs.</p></li>
<li><p>There is now a new environment variable NUITKA_INCLUDE which needs
to point to the directory Nuitkas C++ includes live in. Of course
the create-environment.sh script generates that for you easily.</p></li>
</ul>
</section>
<section id="id536">
<h3>Numbers<a class="headerlink" href="#id536" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.36</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">138889</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 80% for 0.3.3, up from 66% before.</p>
</section>
</section>
<section id="nuitka-release-0-3-2">
<h2>Nuitka Release 0.3.2<a class="headerlink" href="#nuitka-release-0-3-2" title="Permalink to this headline"></a></h2>
<p>This release of Nuitka continues the focus on performance. But this
release also revisits the topic of feature parity. Before, feature
parity had been reached only with Python 2.6. This is of course a big
thing, but you know there is always more, e.g. Python 2.7.</p>
<p>With the addition of set contractions and dict contractions in this very
release, Nuitka is approaching Python support for 2.7, and then there
are some bug fixes.</p>
<section id="id537">
<h3>Bug fixes<a class="headerlink" href="#id537" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Calling a function with <code class="docutils literal notranslate"><span class="pre">**</span></code> and using a non-dict for it was
leading to wrong behavior.</p>
<p>Now a mapping is good enough as input for the <code class="docutils literal notranslate"><span class="pre">**</span></code> parameter and
its checked.</p>
</li>
<li><p>Deeply nested packages package.subpackage.module were not found and
gave a warning from Nuitka, with the consequence that they were not
embedded in the executable. They now are.</p></li>
<li><p>Some error messages for wrong parameters didnt match literally. For
example function got multiple as opposed to function() got
multiple and alike.</p></li>
<li><p>Files that ended in line with a # but without a new line gave an
error from ast.parse. As a workaround, a new line is added to the
end of the file if its missing.</p></li>
<li><p>More correct exception locations for complex code lines. I noted that
the current line indication should not only be restored when the call
at hand failed, but in any case. Otherwise sometimes the exception
stack would not be correct. It now is - more often. Right now, this
has no systematic test.</p></li>
<li><p>Re-raised exceptions didnt appear on the stack if caught inside the
same function, these are now correct.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">exec</span></code> the globals argument needs to have __builtins__ added,
but the check was performed with the mapping interface.</p>
<p>That is not how CPython does it, and so e.g. the mapping could use a
default value for __builtins__ which could lead to incorrect
behavior. Clearly a corner case, but one that works fully compatible
now.</p>
</li>
</ul>
</section>
<section id="id538">
<h3>Optimization<a class="headerlink" href="#id538" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The local and shared local variable C++ classes have a flag
free_value to indicate if an PY_DECREF needs to be done when
releasing the object. But still the code used Py_XDECREF (which
allows for NULL values to be ignored.) when the releasing of the
object was done. Now the inconsistency of using NULL as object
value with free_value set to true was removed.</p></li>
<li><p>Tuple constants were copied before using them without a point. They
are immutable anyway.</p></li>
</ul>
</section>
<section id="id539">
<h3>Cleanups<a class="headerlink" href="#id539" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Improved more of the indentation of the generated C++ which was not
very good for contractions so far. Now it is. Also assignments should
be better now.</p></li>
<li><p>The generation of code for contractions was made more general and
templates split into multiple parts. This enabled reuse of the code
for list contractions in dictionary and set contractions.</p></li>
<li><p>The with statement has its own template now and got cleaned up
regarding indentation.</p></li>
</ul>
</section>
<section id="id540">
<h3>New Tests<a class="headerlink" href="#id540" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a script to extract the doctests from the CPython test
suite and it generates Python source code from them. This can be
compiled with Nuitka and output compared to CPython. Without this,
the doctest parts of the CPython test suite is mostly useless.
Solving this improved test coverage, leading to many small fixes. I
will dedicate a later posting to the tool, maybe it is useful in
other contexts as well.</p></li>
<li><p>Reference count tests have been expanded to cover assignment to
multiple assignment targets, and to attributes.</p></li>
<li><p>The deep program test case, now also have a module in a sub-package
to cover this case as well.</p></li>
</ul>
</section>
<section id="id541">
<h3>Organisational<a class="headerlink" href="#id541" title="Permalink to this headline"></a></h3>
<ul>
<li><p>The <a class="reference external" href="https://nuitka.net/gitweb">gitweb interface</a> (since disabled)
might be considered an alternative to downloading the source if you
want to provide a pointer, or want to take a quick glance at the
source code. You can already download with git, follow the link below
to the page explaining it.</p></li>
<li><p>The README.txt has documented more of the differences and I
consequently updated the Differences page. There is now a distinction
between generally missing functionality and things that dont work in
<code class="docutils literal notranslate"><span class="pre">--deep</span></code> mode, where Nuitka is supposed to create one executable.</p>
<p>I will make it a priority to remove the (minor) issues of <code class="docutils literal notranslate"><span class="pre">--deep</span></code>
mode in the next release, as this is only relatively little work, and
not a good difference to have. We want these to be empty, right? But
for the time being, I document the known differences there.</p>
</li>
</ul>
</section>
<section id="id542">
<h3>Numbers<a class="headerlink" href="#id542" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.39</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">128205</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 66% for 0.3.2, slightly up from the 58% of 0.3.1 before. The
optimization done were somewhat fruitful, but as you can see, they were
also more cleanups, not the big things.</p>
</section>
</section>
<section id="nuitka-release-0-3-1">
<h2>Nuitka Release 0.3.1<a class="headerlink" href="#nuitka-release-0-3-1" title="Permalink to this headline"></a></h2>
<p>This release of Nuitka continues the focus on performance and contains
only cleanups and optimization. Most go into the direction of more
readable code, some aim at making the basic things faster, with good
results as to performance as you can see below.</p>
<section id="id543">
<h3>Optimization<a class="headerlink" href="#id543" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Constants in conditions of conditional expressions (<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">if</span> <span class="pre">cond</span> <span class="pre">else</span>
<span class="pre">d</span></code>), <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">elif</span></code> or <code class="docutils literal notranslate"><span class="pre">while</span></code> are now evaluated to <code class="docutils literal notranslate"><span class="pre">true</span></code> or
<code class="docutils literal notranslate"><span class="pre">false</span></code> directly. Before there would be temporary python object
created from it which was then checked if it had a truth value.</p>
<p>All of that is obviously overhead only. And it hurts the typically
<code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">1:</span></code> infinite loop case badly.</p>
</li>
<li><p>Do not generate code to catch <code class="docutils literal notranslate"><span class="pre">BreakException</span></code> or
<code class="docutils literal notranslate"><span class="pre">ContinueException</span></code> unless a <code class="docutils literal notranslate"><span class="pre">break</span></code> or <code class="docutils literal notranslate"><span class="pre">continue</span></code> statement
being in a <code class="docutils literal notranslate"><span class="pre">try:</span> <span class="pre">finally:</span></code> block inside that loop actually require
this.</p>
<p>Even while uncaught exceptions are cheap, it is still an improvement
worthwhile and it clearly improves the readability for the normal
case.</p>
</li>
<li><p>The compiler more aggressively prepares tuples, lists and dicts from
the source code as constants if their contents is immutable instead
of building at run time. An example of a mutable tuple would be
<code class="docutils literal notranslate"><span class="pre">({},)</span></code> which is not safe to share, and therefore will still be
built at run time.</p>
<p>For dictionaries and lists, copies will be made, under the assumption
that copying a dictionary will always be faster, than making it from
scratch.</p>
</li>
<li><p>The parameter parsing code was dynamically building the tuple of
argument names to check if an argument name was allowed by checking
the equivalent of <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">argument_names</span></code>. This was of course
wasteful and now a pre-built constant is used for this, so it should
be much faster to call functions with keyword arguments.</p></li>
<li><p>There are new templates files and also actual templates now for the
<code class="docutils literal notranslate"><span class="pre">while</span></code> and <code class="docutils literal notranslate"><span class="pre">for</span></code> loop code generation. And I started work on
having a template for assignments.</p></li>
</ul>
</section>
<section id="id544">
<h3>Cleanups<a class="headerlink" href="#id544" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Do not generate code for the else of <code class="docutils literal notranslate"><span class="pre">while</span></code> and <code class="docutils literal notranslate"><span class="pre">for</span></code> loops if
there is no such branch. This uncluttered the generated code
somewhat.</p></li>
<li><p>The indentation of the generated C++ was not very good and whitespace
was often trailing, or e.g. a real tab was used instead of t. Some
things didnt play well together here.</p>
<p>Now much of the generated C++ code is much more readable and white
space cleaner. For optimization to be done, the humans need to be
able to read the generated code too. Mind you, the aim is not to
produce usable C++, but on the other hand, it must be possible to
understand it.</p>
</li>
<li><p>To the same end of readability, the empty <code class="docutils literal notranslate"><span class="pre">else</span> <span class="pre">{}</span></code> branches are
avoided for <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">while</span></code> and <code class="docutils literal notranslate"><span class="pre">for</span></code> loops. While the C++
compiler can be expected to remove these, they seriously cluttered up
things.</p></li>
<li><p>The constant management code in <code class="docutils literal notranslate"><span class="pre">Context</span></code> was largely simplified.
Now the code is using the <code class="docutils literal notranslate"><span class="pre">Constant</span></code> class to find its way around
the problem that dicts, sets, etc. are not hashable, or that
<code class="docutils literal notranslate"><span class="pre">complex</span></code> is not being ordered; this was necessary to allow deeply
nested constants, but it is also a simpler code now.</p></li>
<li><p>The C++ code generated for functions now has two entry points, one
for Python calls (arguments as a list and dictionary for parsing) and
one where this has happened successfully. In the future this should
allow for faster function calls avoiding the building of argument
tuples and dictionaries all-together.</p></li>
<li><p>For every function there was a traceback adder which was only used
in the C++ exception handling before exit to CPython to add to the
traceback object. This was now in-lined, as it wont be shared ever.</p></li>
</ul>
</section>
<section id="id545">
<h3>Numbers<a class="headerlink" href="#id545" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.41</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mi">121951</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>This is 58% for 0.3.1, up from the 25% before. So its getting
somewhere. As always you will find its latest version here.</p>
</section>
</section>
<section id="nuitka-release-0-3-0">
<h2>Nuitka Release 0.3.0<a class="headerlink" href="#nuitka-release-0-3-0" title="Permalink to this headline"></a></h2>
<p>This release 0.3.0 is the first release to focus on performance. In the
0.2.x series Nuitka achieved feature parity with CPython 2.6 and that
was very important, but now it is time to make it really useful.</p>
<p>Optimization has been one of the main points, although I was also a bit
forward looking to Python 2.7 language constructs. This release is the
first where I really started to measure things and removed the most
important bottlenecks.</p>
<section id="id546">
<h3>New Features<a class="headerlink" href="#id546" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Added option to control <code class="docutils literal notranslate"><span class="pre">--debug</span></code>. With this option the C++ debug
information is present in the file, otherwise it is not. This will
give much smaller .so and .exe files than before.</p></li>
<li><p>Added option <code class="docutils literal notranslate"><span class="pre">--no-optimization</span></code> to disable all optimization.</p>
<p>It enables C++ asserts and compiles with less aggressive C++ compiler
optimization, so it can be used for debugging purposes.</p>
</li>
<li><p>Support for Python 2.7 set literals has been added.</p></li>
</ul>
</section>
<section id="performance-enhancements">
<h3>Performance Enhancements<a class="headerlink" href="#performance-enhancements" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Fast global variables: Reads of global variables were fast already.
This was due to a trick that is now also used to check them and to do
a much quicker update if they are already set.</p></li>
<li><p>Fast <code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">continue</span></code> statements: To make sure these statements
execute the finally handlers if inside a try, these used C++
exceptions that were caught by <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">finally</span></code> in <code class="docutils literal notranslate"><span class="pre">while</span></code> or
<code class="docutils literal notranslate"><span class="pre">for</span></code> loops.</p>
<p>This was very slow and had very bad performance. Now it is checked if
this is at all necessary and then its only done for the rare case
where a <code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">continue</span></code> really is inside the tried block.
Otherwise it is now translated to a C++ <code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">continue</span></code> which
the C++ compiler handles more efficiently.</p>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">unlikely()</span></code> compiler hints to all errors handling cases to
allow the C++ compiler to generate more efficient branch code.</p></li>
<li><p>The for loop code was using an exception handler to make sure the
iterated value was released, using <code class="docutils literal notranslate"><span class="pre">PyObjectTemporary</span></code> for that
instead now, which should lead to better generated code.</p></li>
<li><p>Using constant dictionaries and copy from them instead of building
them at run time even when contents was constant.</p></li>
</ul>
</section>
<section id="id547">
<h3>New Tests<a class="headerlink" href="#id547" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Merged some bits from the CPython 2.7 test suite that do not harm
2.6, but generally its a lot due to some <code class="docutils literal notranslate"><span class="pre">unittest</span></code> module
interface changes.</p></li>
<li><p>Added CPython 2.7 tests <code class="docutils literal notranslate"><span class="pre">test_dictcomps.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">test_dictviews.py</span></code> which both pass when using Python 2.7.</p></li>
<li><p>Added another benchmark extract from PyStone which uses a while
loop with break.</p></li>
</ul>
</section>
<section id="id548">
<h3>Numbers<a class="headerlink" href="#id548" title="Permalink to this headline"></a></h3>
<p>python 2.6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.65</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">76923.1</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Nuitka 0.3.0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pystone</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span> <span class="n">time</span> <span class="k">for</span> <span class="mi">50000</span> <span class="n">passes</span> <span class="o">=</span> <span class="mf">0.52</span>
<span class="n">This</span> <span class="n">machine</span> <span class="n">benchmarks</span> <span class="n">at</span> <span class="mf">96153.8</span> <span class="n">pystones</span><span class="o">/</span><span class="n">second</span>
</pre></div>
</div>
<p>Thats a 25% speedup now and a good start clearly. Its not yet in the
range of where i want it to be, but there is always room for more. And
the <code class="docutils literal notranslate"><span class="pre">break</span></code>/<code class="docutils literal notranslate"><span class="pre">continue</span></code> exception was an important performance
regression fix.</p>
</section>
</section>
<section id="nuitka-release-0-2-4">
<h2>Nuitka Release 0.2.4<a class="headerlink" href="#nuitka-release-0-2-4" title="Permalink to this headline"></a></h2>
<p>This release 0.2.4 is likely the last 0.2.x release, as its the one
that achieved feature parity with CPython 2.6, which was the whole point
of the release series, so time to celebrate. I have stayed away (mostly)
from any optimization, so as to not be premature.</p>
<p>From now on speed optimization is going to be the focus though. Because
right now, frankly, there is not much of a point to use Nuitka yet, with
only a minor run time speed gain in trade for a long compile time. But
hopefully we can change that quickly now.</p>
<section id="id549">
<h3>New Features<a class="headerlink" href="#id549" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The use of exec in a local function now adds local variables to scope
it is in.</p></li>
<li><p>The same applies to <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module_name</span> <span class="pre">import</span> <span class="pre">*</span></code> which is now
compiled correctly and adds variables to the local variables.</p></li>
</ul>
</section>
<section id="id550">
<h3>Bug Fixes<a class="headerlink" href="#id550" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Raises <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> when deleting a local variable with
<code class="docutils literal notranslate"><span class="pre">del</span></code> twice.</p></li>
<li><p>Raises <code class="docutils literal notranslate"><span class="pre">NameError</span></code> when deleting a global variable with <code class="docutils literal notranslate"><span class="pre">del</span></code>
twice.</p></li>
<li><p>Read of to uninitialized closure variables gave <code class="docutils literal notranslate"><span class="pre">NameError</span></code>, but
<code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> is correct and raised now.</p></li>
</ul>
</section>
<section id="id551">
<h3>Cleanups<a class="headerlink" href="#id551" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>There is now a dedicated pass over the node tree right before code
generation starts, so that some analysis can be done as late as that.
Currently this is used for determining which functions should have a
dictionary of locals.</p></li>
<li><p>Checking the exported symbols list, fixed all the cases where a
<code class="docutils literal notranslate"><span class="pre">static</span></code> was missing. This reduces the module.so sizes.</p></li>
<li><p>With gcc the visibility=hidden is used to avoid exporting the
helper classes. Also reduces the module.so sizes, because classes
cannot be made static otherwise.</p></li>
</ul>
</section>
<section id="id552">
<h3>New Tests<a class="headerlink" href="#id552" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Added DoubleDeletions to cover behaviour of <code class="docutils literal notranslate"><span class="pre">del</span></code>. It seems that
this is not part of the CPython test suite.</p></li>
<li><p>The OverflowFunctions (those with dynamic local variables) now has
an interesting test, exec on a local scope, effectively adding a
local variable while a closure variable is still accessible, and a
module variable too. This is also not in the CPython test suite.</p></li>
<li><p>Restored the parts of the CPython test suite that did local star
imports or exec to provide new variables. Previously these have been
removed.</p></li>
<li><p>Also test_with.py which covers PEP 343 has been reactivated, the
with statement works as expected.</p></li>
</ul>
</section>
</section>
<section id="nuitka-release-0-2-3">
<h2>Nuitka Release 0.2.3<a class="headerlink" href="#nuitka-release-0-2-3" title="Permalink to this headline"></a></h2>
<p>This new release is marking a closing in on feature parity to CPython
2.6 which is an important mile stone. Once this is reached, a Nuitka
0.3.x series will strive for performance.</p>
<section id="id553">
<h3>Bug Fixes<a class="headerlink" href="#id553" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Generator functions no longer leak references when started, but not
finished.</p></li>
<li><p>Yield can in fact be used as an expression and returns values that
the generator user <code class="docutils literal notranslate"><span class="pre">send()</span></code> to it.</p></li>
</ul>
</section>
<section id="reduced-differences-new-features">
<h3>Reduced Differences / New Features<a class="headerlink" href="#reduced-differences-new-features" title="Permalink to this headline"></a></h3>
<ul>
<li><p>Generator functions already worked quite fine, but now they have the
<code class="docutils literal notranslate"><span class="pre">throw()</span></code>, <code class="docutils literal notranslate"><span class="pre">send()</span></code> and <code class="docutils literal notranslate"><span class="pre">close()</span></code> methods.</p></li>
<li><p>Yield is now an expression as is ought to be, it returns values put
in by <code class="docutils literal notranslate"><span class="pre">send()</span></code> on the generator user.</p></li>
<li><p>Support for extended slices:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">d</span><span class="p">[:</span><span class="mi">42</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">24</span><span class="p">:,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">d</span><span class="p">[:</span><span class="mi">42</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">24</span><span class="p">:,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Strange&quot;</span>
<span class="k">del</span> <span class="n">d</span><span class="p">[:</span><span class="mi">42</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">24</span><span class="p">:,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="tests-work">
<h3>Tests Work<a class="headerlink" href="#tests-work" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The test_contextlib is now working perfectly due to the generator
functions having a correct <code class="docutils literal notranslate"><span class="pre">throw()</span></code>. Added that test back, so
context managers are now fully covered.</p></li>
<li><p>Added a basic test for overflow functions has been added, these are
the ones which have an unknown number of locals due to the use of
language constructs <code class="docutils literal notranslate"><span class="pre">exec</span></code> or <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">bla</span> <span class="pre">import</span> <span class="pre">*</span></code> on the function
level. This one currently only highlights the failure to support it.</p></li>
<li><p>Reverted removals of extended slice syntax from some parts of the
CPython test suite.</p></li>
</ul>
</section>
<section id="id554">
<h3>Cleanups<a class="headerlink" href="#id554" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The compiled generator types are using the new C++0x type safe enums
feature.</p></li>
<li><p>Resolved a circular dependency between <code class="docutils literal notranslate"><span class="pre">TreeBuilding</span></code> and
<code class="docutils literal notranslate"><span class="pre">TreeTransforming</span></code> modules.</p></li>
</ul>
</section>
</section>
<section id="nuitka-release-0-2-2">
<h2>Nuitka Release 0.2.2<a class="headerlink" href="#nuitka-release-0-2-2" title="Permalink to this headline"></a></h2>
<p>This is some significant progress, a lot of important things were
addressed.</p>
<section id="id555">
<h3>Bug Fixes<a class="headerlink" href="#id555" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Scope analysis is now done during the tree building instead of
sometimes during code generation, this fixed a few issues that didnt
show up in tests previously.</p></li>
<li><p>Reference leaks of generator expressions that were not fishing, but
then deleted are not more.</p></li>
<li><p>Inlining of exec is more correct now.</p></li>
<li><p>More accurate exception lines when iterator creation executes
compiled code, e.g. in a for loop</p></li>
<li><p>The list of base classes of a class was evaluated in the context of
the class, now it is done in the context of the containing scope.</p></li>
<li><p>The first iterated of a generator expression was evaluated in its own
context, now it is done in the context of the containing scope.</p></li>
</ul>
</section>
<section id="reduced-differences">
<h3>Reduced Differences<a class="headerlink" href="#reduced-differences" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>With the enhanced scope analysis, <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code> is now
correctly supported.</p></li>
<li><p>Generator expressions (but not yet functions) have a <code class="docutils literal notranslate"><span class="pre">throw()</span></code>,
<code class="docutils literal notranslate"><span class="pre">send()</span></code> and <code class="docutils literal notranslate"><span class="pre">close()</span></code> method.</p></li>
<li><p>Exec can now write to local function namespace even if <code class="docutils literal notranslate"><span class="pre">None</span></code> is
provided at run time.</p></li>
<li><p>Relative imports inside packages are now correctly resolved at
compile time when using <code class="docutils literal notranslate"><span class="pre">--deep</span></code>.</p></li>
</ul>
</section>
<section id="id556">
<h3>Cleanups<a class="headerlink" href="#id556" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The compiled function type got further enhanced and cleaned up.</p></li>
<li><p>The compiled generator expression function type lead to a massive
cleanup of the code for generator expressions.</p></li>
<li><p>Cleaned up namespaces, was still using old names, or Py* which is
reserved to core CPython.</p></li>
<li><p>Overhaul of the code responsible for <code class="docutils literal notranslate"><span class="pre">eval</span></code> and <code class="docutils literal notranslate"><span class="pre">exec</span></code>, it has
been split, and it pushed the detection defaults to the C++ compiler
which means, we can do it at run time or compile time, depending on
circumstances.</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">PyTemporaryObject</span></code> safer to use, disabling copy constructor
it should be also a relief to the C++ compiler if it doesnt have to
eliminate all its uses.</p></li>
<li><p>The way delayed work is handled in <code class="docutils literal notranslate"><span class="pre">TreeBuilding</span></code> step has been
changed to use closured functions, should be more readable.</p></li>
<li><p>Some more code templates have been created, making the code
generation more readable in some parts. More to come.</p></li>
</ul>
</section>
<section id="id557">
<h3>New Features<a class="headerlink" href="#id557" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>As I start to consider announcing Nuitka, I moved the version logic
so that the version can now be queried with <code class="docutils literal notranslate"><span class="pre">--version</span></code>.</p></li>
</ul>
</section>
<section id="id558">
<h3>Optimization<a class="headerlink" href="#id558" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Name lookups for <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code> and now always
detected as constants, eliminating many useless module variable
lookups.</p></li>
</ul>
</section>
<section id="id559">
<h3>New Tests<a class="headerlink" href="#id559" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>More complete test of generator expressions.</p></li>
<li><p>Added test program for packages with relative imports inside the
package.</p></li>
<li><p>The built-in <code class="docutils literal notranslate"><span class="pre">dir()</span></code> in a function was not having fully
deterministic output list, now it does.</p></li>
</ul>
</section>
<section id="id560">
<h3>Summary<a class="headerlink" href="#id560" title="Permalink to this headline"></a></h3>
<p>Overall, the amount of differences between CPython and Nuitka is heading
towards zero. Also most of the improvements done in this release were
very straightforward cleanups and not much work was required, mostly
things are about cleanups and then it becomes easily right. The new type
for the compiled generator expressions was simple to create, esp. as I
could check what CPython does in its source code.</p>
<p>For optimization purposes, I decided that generator expressions and
generator functions will be separate compiled types, as most of their
behavior will not be shared. I believe optimizing generator expressions
to run well is an important enough goal to warrant that they have their
own implementation. Now that this is done, I will repeat it with
generator functions.</p>
<p>Generator functions already work quite fine, but like generator
expressions did before this release, they can leak references if not
finished , and they dont have the <code class="docutils literal notranslate"><span class="pre">throw()</span></code> method, which seems very
important to the correct operation of <code class="docutils literal notranslate"><span class="pre">contextlib</span></code>. So I will
introduce a decicated type for these too, possibly in the next release.</p>
</section>
</section>
<section id="nuitka-release-0-2-1">
<h2>Nuitka Release 0.2.1<a class="headerlink" href="#nuitka-release-0-2-1" title="Permalink to this headline"></a></h2>
<p>The march goes on, this is another minor release with a bunch of
substantial improvements:</p>
<section id="id561">
<h3>Bug Fixes<a class="headerlink" href="#id561" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Packages now also can be embedded with the <code class="docutils literal notranslate"><span class="pre">--deep</span></code> option too,
before they could not be imported from the executable.</p></li>
<li><p>In-lined exec with their own future statements leaked these to the
surrounding code.</p></li>
</ul>
</section>
<section id="id562">
<h3>Reduced Differences<a class="headerlink" href="#id562" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The future print function import is now supported too.</p></li>
</ul>
</section>
<section id="id563">
<h3>Cleanups<a class="headerlink" href="#id563" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Independence of the compiled function type. When I started it was
merely <code class="docutils literal notranslate"><span class="pre">PyCFunction</span></code> and then a copy of it patched at run time,
using increasingly less code from CPython. Now its nothing at all
anymore.</p></li>
<li><p>This lead to major cleanup of run time compiled function creation
code, no more <code class="docutils literal notranslate"><span class="pre">methoddefs</span></code>, <code class="docutils literal notranslate"><span class="pre">PyCObject</span></code> holding context, etc.</p></li>
<li><p>PyLint was used to find the more important style issues and potential
bugs, also helping to identify some dead code.</p></li>
</ul>
</section>
<section id="id564">
<h3>Summary<a class="headerlink" href="#id564" title="Permalink to this headline"></a></h3>
<p>The major difference now is the lack of a throw method for generator
functions. I will try to address that in a 0.2.2 release if possible.
The plan is that the 0.2.x series will complete these tasks, and 0.3
could aim at some basic optimization finally.</p>
</section>
</section>
<section id="nuitka-release-0-2">
<h2>Nuitka Release 0.2<a class="headerlink" href="#nuitka-release-0-2" title="Permalink to this headline"></a></h2>
<p>Good day, this is a major step ahead, improvements everywhere.</p>
<section id="id565">
<h3>Bug fixes<a class="headerlink" href="#id565" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Migrated the Python parser from the deprecated and problematic
<code class="docutils literal notranslate"><span class="pre">compiler</span></code> module to the <code class="docutils literal notranslate"><span class="pre">ast</span></code> module which fixes the <code class="docutils literal notranslate"><span class="pre">d[a,]</span> <span class="pre">=</span>
<span class="pre">b</span></code> parser problem. A pity it was not available at the time I
started, but the migration was relatively painless now.</p></li>
<li><p>I found and fixed wrong encoding of binary data into C++ literals.
Now Nuitka uses C++0x raw strings, and these problems are gone.</p></li>
<li><p>The decoding of constants was done with the <code class="docutils literal notranslate"><span class="pre">marshal</span></code> module, but
that appears to not deeply care enough about unicode encoding it
seems. Using <code class="docutils literal notranslate"><span class="pre">cPickle</span></code> now, which seems less efficient, but is more
correct.</p></li>
<li><p>Another difference is gone: The <code class="docutils literal notranslate"><span class="pre">continue</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span></code> inside
loops do no longer prevent the execution of finally blocks inside the
loop.</p></li>
</ul>
</section>
<section id="id566">
<h3>Organisational<a class="headerlink" href="#id566" title="Permalink to this headline"></a></h3>
<ul>
<li><p>I now maintain the README.txt in org-mode, and intend to use it as
the issue tracker, but I am still a beginner at that.</p>
<div class="admonition-update admonition">
<p class="admonition-title">Update</p>
<p>Turned out I never mastered it, and used ReStructured Text
instead.</p>
</div>
</li>
<li><p>There is a public git repository for you to track Nuitka releases.
Make your changes and then <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">--rebase</span></code>. If you encounter
conflicts in things you consider useful, please submit the patches
and a pull request. When you make your clones of Nuitka public, use
<code class="docutils literal notranslate"><span class="pre">nuitka-unofficial</span></code> or not the name <code class="docutils literal notranslate"><span class="pre">Nuitka</span></code> at all.</p></li>
<li><p>There is a now a mailing list (since closed).</p></li>
</ul>
</section>
<section id="id567">
<h3>Reduced Differences<a class="headerlink" href="#id567" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Did you know you could write <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">:</span> <span class="pre">(yield</span> <span class="pre">something)</span></code> and it
gives you a lambda that creates a generator that produces that one
value? Well, now Nuitka has support for lambda generator functions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">division</span></code> statement works as expected
now, leading to some newly passing CPython tests.</p></li>
<li><p>Same for <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">unicode_literals</span></code> statement, these
work as expected now, removing many differences in the CPython tests
that use this already.</p></li>
</ul>
</section>
<section id="id568">
<h3>New Features<a class="headerlink" href="#id568" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Python</span></code> binary provided and <code class="docutils literal notranslate"><span class="pre">Nuitka.py</span></code> are now capable of
accepting parameters for the program executed, in order to make it
even more of a drop-in replacement to <code class="docutils literal notranslate"><span class="pre">python</span></code>.</p></li>
<li><p>Inlining of <code class="docutils literal notranslate"><span class="pre">exec</span></code> statements with constant expressions. These are
now compiled at compile time, not at run time anymore. I observed
that an increasing number of CPython tests use exec to do things in
isolation or to avoid warnings, and many more these tests will now be
more effective. I intend to do the same with eval expressions too,
probably in a minor release.</p></li>
</ul>
</section>
<section id="id569">
<h3>Summary<a class="headerlink" href="#id569" title="Permalink to this headline"></a></h3>
<p>So give it a whirl. I consider it to be substantially better than
before, and the list of differences to CPython is getting small enough,
plus there is already a fair bit of polish to it. Just watch out that it
needs gcc-4.5 or higher now.</p>
</section>
</section>
<section id="nuitka-release-0-1-1">
<h2>Nuitka Release 0.1.1<a class="headerlink" href="#nuitka-release-0-1-1" title="Permalink to this headline"></a></h2>
<p>I just have just updated Nuitka to version 0.1.1 which is a bug fix
release to 0.1, which corrects many of the small things:</p>
<ul class="simple">
<li><p>Updated the CPython test suite to 2.6.6rc and minimized much of
existing differences in the course.</p></li>
<li><p>Compiles standalone executable that includes modules (with deep
option), but packages are not yet included successfully.</p></li>
<li><p>Reference leaks with exceptions are no more.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> works now mostly as expected (its not a stack of
exceptions).</p></li>
<li><p>More readable generated code, better organisation of C++ template
code.</p></li>
<li><p>Restored debug option <code class="docutils literal notranslate"><span class="pre">--g++-only</span></code>.</p></li>
</ul>
<p>The biggest thing probably is the progress with exception tracebacks
objects in exception handlers, which were not there before (always
<code class="docutils literal notranslate"><span class="pre">None</span></code>). Having these in place will make it much more compatible. Also
with manually raised exceptions and assertions, tracebacks will now be
more correct to the line.</p>
<p>On a bad news, I discovered that the <code class="docutils literal notranslate"><span class="pre">compiler</span></code> module that I use to
create the AST from Python source code, is not only deprecated, but also
broken. I created the <a class="reference external" href="http://bugs.python.org/issue9656">CPython bug</a>
about it, basically it cannot distinguish some code of the form <code class="docutils literal notranslate"><span class="pre">d[1,]</span>
<span class="pre">=</span> <span class="pre">None</span></code> from <code class="docutils literal notranslate"><span class="pre">d[1]</span> <span class="pre">=</span> <span class="pre">None</span></code>. This will require a migration of the
<code class="docutils literal notranslate"><span class="pre">ast</span></code> module, which should not be too challenging, but will take some
time.</p>
<p>I am aiming at it for a 0.2 release. Generating wrong code (Nuitka sees
<code class="docutils literal notranslate"><span class="pre">d[1]</span> <span class="pre">=</span> <span class="pre">None</span></code> in both cases) is a show blocker and needs a solution.</p>
<p>So, yeah. Its better, its there, but still experimental. You will find
its latest version here. Please try it out and let me know what you
think in the comments section.</p>
</section>
</section>

<div class="section">
   
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  

<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/doc/Changelog.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/doc/Changelog.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/doc/Changelog.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>