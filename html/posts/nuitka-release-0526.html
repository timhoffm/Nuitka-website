<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuitka Release 0.5.26</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" type="text/css" />
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-release-0526.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />   
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo"/>
          </a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 0.6.20 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-19">Nuitka Release 0.6.19</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-6-18">Nuitka Release 0.6.18</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <div class="section" id="nuitka-release-0-5-26">
<h1>Nuitka Release 0.5.26<a class="headerlink" href="#nuitka-release-0-5-26" title="Permalink to this headline"></a></h1>
<p>This is to inform you about the new stable release of <a class="reference external" href="https://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler,
<a class="reference external" href="/doc/download.html">“download now”</a>.</p>
<p>This release comes after a long time and contains large amounts of
changes in all areas. The driving goal was to prepare generating C
specific code, which is still not the case, but this is very likely
going to change soon. However this release improves all aspects.</p>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Compatibility: Fix, for star imports didn’t check the values from the
<code class="docutils literal notranslate"><span class="pre">__all__</span></code> iterable, if they were string values which could cause
problems at run time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Module level</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>

<span class="c1"># ...</span>
<span class="c1"># other module:</span>
<span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</li>
<li><p>Fix, for star imports, also didn’t check for values from <code class="docutils literal notranslate"><span class="pre">__all__</span></code>
if they actually exist in the original values.</p></li>
<li><p>Corner cases of imports should work a lot more precise, as the level
of compatibility for calls to <code class="docutils literal notranslate"><span class="pre">__import__</span></code> went from absurd to
insane.</p></li>
<li><p>Windows: Fixed detection of uninstalled Python versions (not for all
users and DLL is not in system directory). This of course only
affected the accelerated mode, not standalone mode.</p></li>
<li><p>Windows: Scan directories for <code class="docutils literal notranslate"><span class="pre">.pyd</span></code> files for used DLLs as well.
This should make the PyQt5 wheel work.</p></li>
<li><p>Python3.5: Fix, coroutines could have different code objects for the
object and the frame using by it.</p></li>
<li><p>Fix, slices with built-in names crashed the compiler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">something</span><span class="p">[</span><span class="nb">id</span><span class="p">:</span><span class="nb">len</span><span class="p">:</span><span class="nb">range</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Fix, the C11 via C++ compatibility uses symlinks tp C++ filenames
where possible instead of making a copy from the C source. However,
even on Linux that may not be allowed, e.g. on a DOS file system.
Added fallback to using full copy in that case.</p></li>
<li><p>Python3.5: Fix coroutines to close the “yield from” where an
exception is thrown into them.</p></li>
<li><p>Python3: Fix, list contractions should have their own frame too.</p></li>
<li><p>Linux: Copy the “rpath” of compiling Python binary to the created
binary. This will make compiled binaries using uninstalled Python
versions transparently find the Python shared library.</p></li>
<li><p>Standalone: Add the “rpath” of the compiling Python binary to the
search path when checking for DLL dependencies on Linux. This fixes
standalone support for Travis and Anaconda on Linux.</p></li>
<li><p>Scons: When calling scons, also try to locate a Python2 binary to
overcome a potential Python3 virtualenv in which Nuitka is running.</p></li>
<li><p>Standalone: Ignore more Windows only encodings on non-Windows.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Support for Python 3.6 with only few corner cases not supported yet.</p></li>
<li><p>Added options <code class="docutils literal notranslate"><span class="pre">--python-arch</span></code> to pick 32 or 64 bits Python target
of the <code class="docutils literal notranslate"><span class="pre">--python-version</span></code> argument.</p></li>
<li><p>Added support for more kinds of virtualenv configurations.</p></li>
<li><p>Uninstalled Python versions such as Anaconda will work fine in
accelerated mode, except on Windows.</p></li>
</ul>
</div>
<div class="section" id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Permalink to this headline"></a></h2>
<ul>
<li><p>The node tree children are no longer stored in a separate dictionary,
but in the instance dictionary as attributes, making the tree more
lightweight and in principle faster to access. This also saved about
6% of the memory usage.</p></li>
<li><p>The memory usage of Nuitka for the Python part has fallen by roughly
40% due to the use of new style classes, and slots where that is
possible (some classes use multiple inheritance, where they don’t
work), and generally by reducing useless members e.g. in source code
references. This of course also will make things compiled faster (the
C compilation of course is not affected by this.)</p></li>
<li><p>The code generation for frames was creating the dictionary for the
raised exception by making a dictionary and then adding all
variables, each tested to be set. This was a lot of code for each
frame specific, and has been replaced by a generic “attach” mechanism
which merely stores the values, and only takes a reference. When
asked for frame locals, it only then builds the dictionary. So this
is now only done, when that is absolutely necessary, which it
normally never is. This of course makes the C code much less verbose,
and actual handling of exceptions much more efficient.</p></li>
<li><p>For imports, we now detect for built-in modules, that their import
cannot fail, and if name lookups can fail. This leads to less code
generated for error handling of these. The following code now e.g.
fully detects that no <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> or <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> will
occur.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">__builtin__</span> <span class="kn">import</span> <span class="nb">len</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="nb">len</span>
</pre></div>
</div>
</li>
<li><p>Added more type shapes for built-in type calls. These will improve
type tracing.</p></li>
<li><p>Compiled frames now have a free list mechanism that should speed up
frames that recurse and frames that exit with exceptions. In case of
an exception, the frame ownership is immediately transferred to the
exception making it easier to deal with.</p></li>
<li><p>The free list implementations have been merged into a new common one
that can be used via macro expansion. It is now type agnostic and be
slightly more efficient too.</p></li>
<li><p>Also optimize “true” division and “floor division”, not only the
default division of Python2.</p></li>
<li><p>Removed the need for statement context during code generation making
it less memory intensive and faster.</p></li>
</ul>
</div>
<div class="section" id="cleanups">
<h2>Cleanups<a class="headerlink" href="#cleanups" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Now always uses the <code class="docutils literal notranslate"><span class="pre">__import__</span></code> built-in node for all kinds of
imports and directly optimizes and recursion into other modules based
on that kind of node, instead of a static variant. This removes
duplication and some incompatibility regarding defaults usage when
doing the actual imports at run time.</p></li>
<li><p>Split the expression node bases and mixin classes to a dedicated
module, moving methods that only belong to expressions outside of the
node base, making for a cleaner class hierarchy.</p></li>
<li><p>Cleaned up the class structure of nodes, added base classes for
typical compositions, e.g. expression with and without children,
computation based on built-in, etc. while also checking proper
ordering of base classes in the metaclass.</p></li>
<li><p>Moved directory and file operations to dedicated module, making also
sure it is more generally used. This makes it easier to make more
error resilient deletions of directories on e.g. Windows, where locks
tend to live for short times beyond program ends, requiring second
attempts.</p></li>
<li><p>Code generation for existing supported types, <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">**</span></code>, and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Nuitka_CellObject</span> <span class="pre">*</span></code> is now done via a
C type class hierarchy instead of <code class="docutils literal notranslate"><span class="pre">elif</span></code> sequences.</p></li>
<li><p>Closure taking is now always done immediately correctly and
references are take for closure variables still needed, making sure
the tree is correct and needs no finalization.</p></li>
<li><p>When doing variable traces, initialize more traces immediately so it
can be more reliable.</p></li>
<li><p>Code to setup a function for local variables and clean it up has been
made common code instead of many similar copies.</p></li>
<li><p>The code was treating the <code class="docutils literal notranslate"><span class="pre">f_executing</span></code> frame member as if it were
a counter with increases and decreases. Turn it into a mere boolean
value and hide its usage behind helper functions.</p></li>
<li><p>The “maybe local variables” are no more. They were replaced by a new
locals dict access node with a fallback to a module or closure
variable should the dictionary not contain the name. This avoids many
ugly checks to not do certain things for that kind of variable.</p></li>
<li><p>We now detect “exec” and “unqualified exec” as well as “star import”
ahead of time as flags of the function to be created. We no longer
need to mark functions as we go.</p></li>
<li><p>Handle “true”, “floor” and normal division properly by applying
future flags to decide which one to use.</p></li>
<li><p>We now use symbolic identifiers in all PyLint annotations.</p></li>
<li><p>The release scripts started to move into <code class="docutils literal notranslate"><span class="pre">nuitka.tools.release</span></code> so
they get PyLint checks, autoformat and proper code re-use.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT_X</span></code> was removed, it got replaced with
proper <code class="docutils literal notranslate"><span class="pre">Py_XINCREF</span></code> usages.</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">INCREASE_REFCOUNT</span></code> got reduced further, e.g. no
generated code uses it anymore, and only a few compiled types do. The
function was once required before “C-ish” lifted the need to do
everything in one single function call.</p></li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>More robust deletion of directories, temporary stages used by CPython
test suites, and standalone directories during test execution.</p></li>
<li><p>Moved tests common code into <code class="docutils literal notranslate"><span class="pre">nuitka.tools.testing</span></code> namespace and
use it from there. The code now is allowed to use <code class="docutils literal notranslate"><span class="pre">nuitka.utils</span></code>
and therefore often better implementations.</p></li>
<li><p>Made standalone binaries robust against GTK theme access, checking
the Python binary (some site.py files do that),</p></li>
</ul>
</div>
<div class="section" id="organisational">
<h2>Organisational<a class="headerlink" href="#organisational" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Added repository for Ubuntu Zesty (17.04) for download.</p></li>
<li><p>Added support for testing with Travis to complement the internal
Buildbot based infrastructure and have pull requests on Github
automatically tested before merge.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">factory</span></code> branch is now also on Github.</p></li>
<li><p>Removed MSI for Python3.4 32 bits. It seems impossible to co-install
this one with the 64 bits variant. All other versions are provided
for both bit sizes still.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<p>This release marks huge progress. The node tree is now absolutely clean,
the variable closure taking is fully represented, and code generation is
prepared to add another type, e.g. for <code class="docutils literal notranslate"><span class="pre">bool</span></code> for which work has
already started.</p>
<p>On a practical level, the scalability of the release will have increased
very much, as this uses so much less memory, generates simpler C code,
while at the same time getting faster for the exception cases.</p>
<p>Coming releases will expand on the work of this release.</p>
<p>Frame objects should be allowed to be nested inside a function for
better re-formulations of classes and contractions of all kinds, as well
as real inline of functions, even if they could raise.</p>
<p>The memory savings could be even larger, if we stopped doing multiple
inheritance for more node types. The <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> were and the child
API change could potentially make things not only more compact, but
faster to use too.</p>
<p>And also once special C code generation for <code class="docutils literal notranslate"><span class="pre">bool</span></code> is done, it will
set the stage for more types to follow (<code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, etc). Only
this will finally start to give the C type speed we are looking for.</p>
<p>Until then, this release marks a huge cleanup and progress to what we
already had, as well as preparing the big jump in speed.</p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     Previous:
    
    <a href="nuitka-release-0525.html">
       Nuitka Release 0.5.25
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     Next: 
    <a href="nuitka-release-0527.html">
      Nuitka Release 0.5.27 
    </a>
    
  </span>
</div>
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class='share-button-container'>
    <div class="socialbutton-wrapper">
        <a href="https://twitter.com/share?url=https://nuitka.net/posts/nuitka-release-0526.html&hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-twitter.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/posts/nuitka-release-0526.html&hashtag=%23nuitka"  target="_blank">
            <div class="socialbutton facebook" data-share-url="https://nuitka.net">
                <p class="icon">
                    <img src="/_static/icon-facebook.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/posts/nuitka-release-0526.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>