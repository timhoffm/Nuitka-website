
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

    <title>Nuitka this week #9</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/asciinema-player_2.6.1.css" />
    <link rel="stylesheet" type="text/css" href="../_static/asciinema-custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/my_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/asciinema-player_2.6.1.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="canonical" href="https://nuitka.net/posts/nuitka-this-week-9.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_CN">
    

    <!-- Google Analytics -->
     
<link
  rel="alternate"
  type="application/atom+xml"
  href="../posts/atom.xml"
  title="Nuitka Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
          
<h2>
   
  20 October 2018 
</h2>

<ul>
   
<li id="author">
  <span
    >作者:</span
  >
   
  <a href="author/kay-hayen.html">Kay Hayen</a>  
</li>
    
<li id="tags">
  <span
    >标签: </span
  >
   
  <a href="tag/python.html">Python</a>   
  <a href="tag/compiler.html">compiler</a>   
  <a href="tag/nuitka.html">Nuitka</a>   
  <a href="tag/ntw.html">NTW</a>  
</li>
 
</ul>

<h3>
  <a href="../posts.html">最近帖子</a>
</h3>
<ul>
   
  <li>
    <a href="next-nuitka-live-stream-30-01-2022.html"
      >30 January - Next Nuitka Live Stream</a
    >
  </li>
  
  <li>
    <a href="first-nuitka-live-stream.html"
      >14 January - First Nuitka Live Stream</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0619.html"
      >12 January - Nuitka Release 0.6.19</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0618.html"
      >11 December - Nuitka Release 0.6.18</a
    >
  </li>
  
  <li>
    <a href="nuitka-release-0617.html"
      >11 November - Nuitka Release 0.6.17</a
    >
  </li>
  
</ul>

<h3><a href="tag.html">标签</a></h3>
<style type="text/css">
  ul.ablog-cloud {
    list-style: none;
    overflow: auto;
  }
  ul.ablog-cloud li {
    float: left;
    height: 20pt;
    line-height: 18pt;
    margin-right: 5px;
  }
  ul.ablog-cloud a {
    text-decoration: none;
    vertical-align: middle;
  }
  li.ablog-cloud-1 {
    font-size: 80%;
  }
  li.ablog-cloud-2 {
    font-size: 95%;
  }
  li.ablog-cloud-3 {
    font-size: 110%;
  }
  li.ablog-cloud-4 {
    font-size: 125%;
  }
  li.ablog-cloud-5 {
    font-size: 140%;
  }
</style>
<ul class="ablog-cloud">
   
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/android.html">Android</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/debian.html">Debian</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/ntw.html">NTW</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/nikola.html">Nikola</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="tag/nuitka.html">Nuitka</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-5">
    <a href="tag/python.html">Python</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/windows.html">Windows</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/automation.html">automation</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/benchmark.html">benchmark</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-4">
    <a href="tag/compiler.html">compiler</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/conference.html">conference</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/europython.html">europython</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/family.html">family</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/git.html">git</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/gsoc2019.html">gsoc2019</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/physics.html">physics</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/portrait.html">portrait</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/presentation.html">presentation</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/pypi.html">pypi</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/pytest.html">pytest</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/quiz.html">quiz</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/standalone.html">standalone</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/tests.html">tests</a>
  </li>
    
  <li class="ablog-cloud ablog-cloud-1">
    <a href="tag/video.html">video</a>
  </li>
   
</ul>

<h3>
  <a href="archive.html">归档</a>
</h3>
<ul>
   
  <li>
    <a href="2022.html">2022 (3)</a>
  </li>
    
  <li>
    <a href="2021.html">2021 (8)</a>
  </li>
    
  <li>
    <a href="2020.html">2020 (5)</a>
  </li>
    
  <li>
    <a href="2019.html">2019 (14)</a>
  </li>
    
  <li>
    <a href="2018.html">2018 (17)</a>
  </li>
    
  <li>
    <a href="2017.html">2017 (4)</a>
  </li>
    
  <li>
    <a href="2016.html">2016 (8)</a>
  </li>
    
  <li>
    <a href="2015.html">2015 (16)</a>
  </li>
    
  <li>
    <a href="2014.html">2014 (12)</a>
  </li>
    
  <li>
    <a href="2013.html">2013 (24)</a>
  </li>
    
  <li>
    <a href="2012.html">2012 (21)</a>
  </li>
    
  <li>
    <a href="2011.html">2011 (25)</a>
  </li>
    
  <li>
    <a href="2010.html">2010 (19)</a>
  </li>
   
</ul>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">切换导航</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="下载此页面"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/"><button type="button"
                class="btn btn-secondary topbarbtn" title="下载源文件" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="列印成PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="全屏模式"
        title="全屏模式"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> 内容
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#communication-vs-coding">
   Communication vs. Coding
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hotfixes">
   Hotfixes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#google-summer-of-code-for-nuitka">
   Google Summer of Code for Nuitka
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#website-overhaul">
   Website Overhaul
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#performance-work">
   Performance Work
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-specialized-object-operations">
     Adding specialized object operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finding-missing-specialized-object-code-generation">
     Finding missing specialized object code generation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimizing-plain-object-operations-too">
     Optimizing plain object operations too
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lack-of-type-knowledge">
     Lack of type knowledge
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance-regressions-vs-cpython">
     Performance regressions vs. CPython
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-place-unicode-still-being-bad">
     In-place unicode still being bad
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#benchmarks-missing">
     Benchmarks Missing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type-shapes-in-optimization">
     Type shapes in optimization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#control-flow-escape">
     Control flow escape
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overall">
     Overall
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#improved-annotations">
   Improved Annotations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-or-not">
   Release or not
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standalone-improvements">
   Standalone Improvements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#caching-examined">
   Caching Examined
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python3-deprecation-warnings">
   Python3 deprecation warnings
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#twitter">
   Twitter
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#help-wanted">
   Help Wanted
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#donations">
   Donations
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Nuitka this week #9</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> 内容 </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#communication-vs-coding">
   Communication vs. Coding
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hotfixes">
   Hotfixes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#google-summer-of-code-for-nuitka">
   Google Summer of Code for Nuitka
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#website-overhaul">
   Website Overhaul
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#performance-work">
   Performance Work
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-specialized-object-operations">
     Adding specialized object operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finding-missing-specialized-object-code-generation">
     Finding missing specialized object code generation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimizing-plain-object-operations-too">
     Optimizing plain object operations too
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lack-of-type-knowledge">
     Lack of type knowledge
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance-regressions-vs-cpython">
     Performance regressions vs. CPython
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-place-unicode-still-being-bad">
     In-place unicode still being bad
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#benchmarks-missing">
     Benchmarks Missing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type-shapes-in-optimization">
     Type shapes in optimization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#control-flow-escape">
     Control flow escape
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overall">
     Overall
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#improved-annotations">
   Improved Annotations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-or-not">
   Release or not
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standalone-improvements">
   Standalone Improvements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#caching-examined">
   Caching Examined
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python3-deprecation-warnings">
   Python3 deprecation warnings
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#twitter">
   Twitter
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#help-wanted">
   Help Wanted
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#donations">
   Donations
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                 <div class="section" id="nuitka-this-week-9">
<h1><a class="toc-backref" href="#id3">Nuitka this week #9</a><a class="headerlink" href="#nuitka-this-week-9" title="永久链接至标题">¶</a></h1>
<div class="contents topic" id="id1">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#nuitka-this-week-9" id="id3">Nuitka this week #9</a></p>
<ul>
<li><p><a class="reference internal" href="#communication-vs-coding" id="id4">Communication vs. Coding</a></p></li>
<li><p><a class="reference internal" href="#hotfixes" id="id5">Hotfixes</a></p></li>
<li><p><a class="reference internal" href="#google-summer-of-code-for-nuitka" id="id6">Google Summer of Code for Nuitka</a></p></li>
<li><p><a class="reference internal" href="#website-overhaul" id="id7">Website Overhaul</a></p></li>
<li><p><a class="reference internal" href="#performance-work" id="id8">Performance Work</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-specialized-object-operations" id="id9">Adding specialized object operations</a></p></li>
<li><p><a class="reference internal" href="#finding-missing-specialized-object-code-generation" id="id10">Finding missing specialized object code generation</a></p></li>
<li><p><a class="reference internal" href="#optimizing-plain-object-operations-too" id="id11">Optimizing plain object operations too</a></p></li>
<li><p><a class="reference internal" href="#lack-of-type-knowledge" id="id12">Lack of type knowledge</a></p></li>
<li><p><a class="reference internal" href="#performance-regressions-vs-cpython" id="id13">Performance regressions vs. CPython</a></p></li>
<li><p><a class="reference internal" href="#in-place-unicode-still-being-bad" id="id14">In-place unicode still being bad</a></p></li>
<li><p><a class="reference internal" href="#benchmarks-missing" id="id15">Benchmarks Missing</a></p></li>
<li><p><a class="reference internal" href="#type-shapes-in-optimization" id="id16">Type shapes in optimization</a></p></li>
<li><p><a class="reference internal" href="#control-flow-escape" id="id17">Control flow escape</a></p></li>
<li><p><a class="reference internal" href="#overall" id="id18">Overall</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#improved-annotations" id="id19">Improved Annotations</a></p></li>
<li><p><a class="reference internal" href="#release-or-not" id="id20">Release or not</a></p></li>
<li><p><a class="reference internal" href="#standalone-improvements" id="id21">Standalone Improvements</a></p></li>
<li><p><a class="reference internal" href="#caching-examined" id="id22">Caching Examined</a></p></li>
<li><p><a class="reference internal" href="#python3-deprecation-warnings" id="id23">Python3 deprecation warnings</a></p></li>
<li><p><a class="reference internal" href="#twitter" id="id24">Twitter</a></p></li>
<li><p><a class="reference internal" href="#help-wanted" id="id25">Help Wanted</a></p></li>
<li><p><a class="reference internal" href="#donations" id="id26">Donations</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="communication-vs-coding">
<h2><a class="toc-backref" href="#id4">Communication vs. Coding</a><a class="headerlink" href="#communication-vs-coding" title="永久链接至标题">¶</a></h2>
<p>My new communication strategy is a full success, engagement with Nuitka
is on an all time high.</p>
<p>But the recent weeks more than ever highlighted why I have to force
myself to do it. I do not like to talk about unfinished stuff. And right
now, there is really a lot of it, almost only it. Also I was ill, and
otherwise busy, so this is now late by a week.</p>
<p>But I am keeping it up, and will give an update, despite the feeling
that it would be better to just finish a few of those things and then
talk about it, but then it will take forever and leave you in the dark.
And that is not what is supposed to be.</p>
<p>Bear in mind, that this is supposed to be a quick, not too polished, and
straight from top of my head, even if really a lot of content. But I
feel that esp. the optimization parts are worth reading.</p>
</div>
<div class="section" id="hotfixes">
<h2><a class="toc-backref" href="#id5">Hotfixes</a><a class="headerlink" href="#hotfixes" title="永久链接至标题">¶</a></h2>
<p>So the 0.6.0 release was a huge success, but it definitely wasn’t
perfect, and hotfixes were necessary. The latest one 0.6.0.5 was done
just yesterday and actually contains one for an important
mis-optimization being done, and you ought to update to it from any
prior 0.6.0 release.</p>
<p>There are also a few remaining compatibility issues fixed for 3.7 and
generally using the latest hotfix is always a good idea.</p>
<p>Kind of what one has to expect from a <code class="docutils literal notranslate"><span class="pre">0</span></code> release, this one also had
more expose than usual is seems.</p>
</div>
<div class="section" id="google-summer-of-code-for-nuitka">
<h2><a class="toc-backref" href="#id6">Google Summer of Code for Nuitka</a><a class="headerlink" href="#google-summer-of-code-for-nuitka" title="永久链接至标题">¶</a></h2>
<p>I need more people to work on Nuitka. One way of doing this could be to
participate in Google Summer of Code under the Python umbrella. To make
that possible, I need you to volunteer as a mentor. So please, please,
do.</p>
<p>I know you will feel not qualified. But I just need a backup that will
help a student around obstacles in case I go missing. Contact me and I
will be very happy.</p>
</div>
<div class="section" id="website-overhaul">
<h2><a class="toc-backref" href="#id7">Website Overhaul</a><a class="headerlink" href="#website-overhaul" title="永久链接至标题">¶</a></h2>
<p>I updated the website to recent Nikola and dropped the tag cloud that I
was using. Should have cleaner and better looks. Also integrated privacy
aware sharing links, where two clicks are necessary to share a page or
article like this one on Twitter, Facebook, etc.</p>
<p>Also the download page saw some structural updates and polishing. It
should easier to overview now.</p>
</div>
<div class="section" id="performance-work">
<h2><a class="toc-backref" href="#id8">Performance Work</a><a class="headerlink" href="#performance-work" title="永久链接至标题">¶</a></h2>
<div class="section" id="adding-specialized-object-operations">
<h3><a class="toc-backref" href="#id9">Adding specialized object operations</a><a class="headerlink" href="#adding-specialized-object-operations" title="永久链接至标题">¶</a></h3>
<p>The feedback for performance and the work on 0.6.1 are fully ongoing,
and there are many major points that are ongoing. I want to briefly
cover each one of them now, but many of them will only have full effect,
once everything is in place, which each one is very critical.</p>
<p>So, with the type tracing, objects have known types, and short of using
a C type, knowing e.g. that an object is an <cite>int</cite>, and the other one
too, doing <cite>+</cite> for them can take a lot of advantage avoiding unrelated
checks and code paths, even if still using <code class="docutils literal notranslate"><span class="pre">PyObject</span> <span class="pre">*</span></code> at the end of
the day.</p>
<p>And even we are only knowing it’s <em>not</em> an <code class="docutils literal notranslate"><span class="pre">int</span></code>, but say one value is
a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> and the other an unknown, that allows to remove checks for
<code class="docutils literal notranslate"><span class="pre">int</span></code> shortcuts as they can no longer apply. These are tiny
optimizations then, but still worthwhile.</p>
<p>To further this, first the inplace operations for a couple of more or
less randomly selected types, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>,
<code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">unicode</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, and <code class="docutils literal notranslate"><span class="pre">float</span></code>, have been looked at and
have gotten their own special object based helpers if one or both types
are known to be of that kind.</p>
</div>
<div class="section" id="finding-missing-specialized-object-code-generation">
<h3><a class="toc-backref" href="#id10">Finding missing specialized object code generation</a><a class="headerlink" href="#finding-missing-specialized-object-code-generation" title="永久链接至标题">¶</a></h3>
<p>A report has been added, that will tell when such an operation could
have been used, but was not available. This uncovered where typical
stuff goes non optimized, a nice principle to see what is actually
happening.</p>
<p>So adding <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">str</span></code> would now give a warning, although of
course, the optimization phase ought to catch the static raise that is
and never let it get there, so this report also addresses missing
optimization in an earlier phase.</p>
</div>
<div class="section" id="optimizing-plain-object-operations-too">
<h3><a class="toc-backref" href="#id11">Optimizing plain object operations too</a><a class="headerlink" href="#optimizing-plain-object-operations-too" title="永久链接至标题">¶</a></h3>
<p>So the in-place operations were then covered, so this was extended to
mere <code class="docutils literal notranslate"><span class="pre">+</span></code> operations too, the ones that are not in-place. Sometimes,
esp. for immutable types, there was already code for that, e.g. <code class="docutils literal notranslate"><span class="pre">int</span></code>
doesn’t really do it, in other cases, <code class="docutils literal notranslate"><span class="pre">list</span></code> + <code class="docutils literal notranslate"><span class="pre">list</span></code> code for a
quicker concat was added.</p>
<p>And again a report for where it’s missing was added and basic coverage
for most of the types. However, in some instances, the optimization
doesn’t use the full knowledge yet. But where it does, it will shove off
quite a few cycles.</p>
</div>
<div class="section" id="lack-of-type-knowledge">
<h3><a class="toc-backref" href="#id12">Lack of type knowledge</a><a class="headerlink" href="#lack-of-type-knowledge" title="永久链接至标题">¶</a></h3>
<p>To apply these things effectively, optimization and value tracing need
to know types in the first place. I have found two obstacles for that.
One are branch merges. If a branch or both assign to the same type or
original type, well the type is changed. Previously it became “unknown”
which is treated as <code class="docutils literal notranslate"><span class="pre">object</span></code> for code generation, and allows nothing
really. But now that is better on develop now, and was actually a
trivial missing thing.</p>
<p>The other area is loops. Loops put values to unknown when entering loop
body, and again when leaving. Essentially making type tracing not
effective where it is needed the most to achieve actual performance.
Also this was limiting the knowledge for all function to one type to not
happening for these kinds of variables that were assigned inside a loop
at all.</p>
<p>Took me a while, but I figured out how to build type tracing for loops
that works. It currently is still unfinished in my private repo, but
passes all tests, I would just like to make it use dedicated interfaces,
and clean it up.</p>
<p>I will most likely have that for 0.6.1 too and that should expand the
cases where types are known in code generation by a fair amount.</p>
<p>The effect of that will be that more often C code generation will
actually see types. Currently e.g. a boolean variable that is assigned
in a loop, cannot use the C target type in code generation. Once loop
code is merged, it will however take advantage there too. And only then
I think adding “C int” as a C type makes sense at all.</p>
</div>
<div class="section" id="performance-regressions-vs-cpython">
<h3><a class="toc-backref" href="#id13">Performance regressions vs. CPython</a><a class="headerlink" href="#performance-regressions-vs-cpython" title="永久链接至标题">¶</a></h3>
<p>Then another area is performance regressions. So one thing I did early
on in the 0.6.1 cycle was using the “module var C target type” to get
in-place working for those too. Doing string concatenations on module
variables could be slower by an order of magnitude, as could be other
operations.</p>
<p>I still need to do it for closure variables too. Then Nuitka will do at
least as many of them perfectly as CPython does. It also will be better
at it them, because e.g. it doesn’t have to delete from the module
dictionary first, due to it never taking a reference, and same applies
to the cell. Should be faster for that too.</p>
<p>But strings in-place on these if not optimized, it will look very ugly
in terms of worse performance, so 0.6.0 was still pretty bad for some
users. This will however hopefully be addressed in 0.6.1 then.</p>
</div>
<div class="section" id="in-place-unicode-still-being-bad">
<h3><a class="toc-backref" href="#id14">In-place unicode still being bad</a><a class="headerlink" href="#in-place-unicode-still-being-bad" title="永久链接至标题">¶</a></h3>
<p>Another field was in-place string add for the already optimized case, it
was still slower than CPython, and I finally found out what causes this.
And that is the using of <code class="docutils literal notranslate"><span class="pre">libpython</span></code> where <code class="docutils literal notranslate"><span class="pre">PyUnicode_Append</span></code> is far
worse than in the <code class="docutils literal notranslate"><span class="pre">python</span></code> binary that you normally use, I have see
that at least for 3.5 and higher CPython. Analysis showed that e.g.
MiniConda had the issue to a much smaller extent, and was being much
faster anyway, but probably just has better <code class="docutils literal notranslate"><span class="pre">libpython</span></code> compilation
flags.</p>
<p>So what to do. Ultimately that was to be solved by including a clone of
that function, dubbed <code class="docutils literal notranslate"><span class="pre">UNICODE_APPEND</span></code> that behaves the same, and can
even shove off a couple of cycles, by indicating the Python error status
without extra checks, and specializing it for the pure <code class="docutils literal notranslate"><span class="pre">unicode</span> <span class="pre">+=</span>
<span class="pre">unicode</span></code> case that we see most often, same for <code class="docutils literal notranslate"><span class="pre">UNICODE_CONCAT</span></code> for
mere <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p>
<p>Right now the benchmarks to show it do not exist yet. Again something
that typically wants me to delay stuff. But as you can imagine, tracking
down these hard issues, writing that much code to replace the unicode
resizing, is hard enough by itself.</p>
<p>But I hope to convince myself that this will allow to show that for
compiled code, things are going to be faster only now.</p>
</div>
<div class="section" id="benchmarks-missing">
<h3><a class="toc-backref" href="#id15">Benchmarks Missing</a><a class="headerlink" href="#benchmarks-missing" title="永久链接至标题">¶</a></h3>
<p>In fact, speedcenter as a whole is currently broken, mostly due to
Nikola changes that I am trying to work around, but it will take more
time apparently and isn’t finished as I write this.</p>
</div>
<div class="section" id="type-shapes-in-optimization">
<h3><a class="toc-backref" href="#id16">Type shapes in optimization</a><a class="headerlink" href="#type-shapes-in-optimization" title="永久链接至标题">¶</a></h3>
<p>Another optimization end, is the type shapes of the <code class="docutils literal notranslate"><span class="pre">+</span></code> operation
itself. Right now what is being done is that the shape is derived from
the shape of the left argument with the right shape to be considered by
it. These also have reports now, for cases where they are missing. So
saying e.g. that <code class="docutils literal notranslate"><span class="pre">int</span></code> + <code class="docutils literal notranslate"><span class="pre">float</span></code> results in <code class="docutils literal notranslate"><span class="pre">float</span></code> and these
kinds of things, are stuff being encoded there right now.</p>
<p>This is necessary step to e.g. know that <code class="docutils literal notranslate"><span class="pre">int</span></code> + <code class="docutils literal notranslate"><span class="pre">int</span></code> -&gt;
<code class="docutils literal notranslate"><span class="pre">int_or_long</span></code>, to make effective loop variable optimization.</p>
<p>Without these, and again, that is a lot of code to write, there is no
way to hope for wide spread type knowledge in code generation.</p>
</div>
<div class="section" id="control-flow-escape">
<h3><a class="toc-backref" href="#id17">Control flow escape</a><a class="headerlink" href="#control-flow-escape" title="永久链接至标题">¶</a></h3>
<p>Something missing there, is to also make it known that <code class="docutils literal notranslate"><span class="pre">+</span></code> unlike it
currently is now, should not in all cases lead to “control flow escape”
with the consequence of removing all stuff, and expecting an exception
possible, but instead to let the <code class="docutils literal notranslate"><span class="pre">int</span></code> type also make known that <code class="docutils literal notranslate"><span class="pre">+</span>
<span class="pre">int</span></code> ont it not only gives an <code class="docutils literal notranslate"><span class="pre">int_or_long</span></code> result shape, but also
while doing so, that it will never raise an exception (bare
<code class="docutils literal notranslate"><span class="pre">MemoryError</span></code>), and therefore allow more optimization to happen and
less and therefore faster code generated.</p>
<p>Until this is done, what is actually going to happen is that while the
<code class="docutils literal notranslate"><span class="pre">+</span></code> result is known, Nuitka will assume control flow escape.</p>
<p>And speaking of that, I think this puts too many variables to a too
unknown state. You can to distrust all values, but not the types in this
case, so that could be better, but right now it is not. Something else
to look into.</p>
</div>
<div class="section" id="overall">
<h3><a class="toc-backref" href="#id18">Overall</a><a class="headerlink" href="#overall" title="永久链接至标题">¶</a></h3>
<p>So 0.6.1 is in full swing in terms of optimization. All these ends need
a completion, and then I can expect to use advantage of things in a
loop, and ultimately to generate C performance code for one example of
loop. esp. if we add a C <code class="docutils literal notranslate"><span class="pre">int</span></code> target type, which currently isn’t yet
started, because I think it would barely be used yet.</p>
<p>But we are getting there and I wouldn’t even say we are making small
steps, this is all just work to be completed, nothing fundamental about
it. But it may take more than one release for sure.</p>
<p>Mind you, there is not only <code class="docutils literal notranslate"><span class="pre">+</span></code>, there is also <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code>,
and many more operators, all of them will require work. Granted, loop
variables tend to use <code class="docutils literal notranslate"><span class="pre">+</span></code> more often, but any un-optimized operation
will immediately loose a lot of type knowledge.</p>
</div>
</div>
<div class="section" id="improved-annotations">
<h2><a class="toc-backref" href="#id19">Improved Annotations</a><a class="headerlink" href="#improved-annotations" title="永久链接至标题">¶</a></h2>
<p>There are two kinds of annotations, ones for classes and modules, which
actually are stored in a <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> variable, and everything
else is mostly just ignored.</p>
<p>So Nuitka got the criterion wrong, and did one thing for functions, and
the other for everything else. So that annotations in generators,
coroutines and asyncgen ended up with wrong, crashing, and slower code,
due to it updating the module <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>, so that one is
important too if you have to do those.</p>
</div>
<div class="section" id="release-or-not">
<h2><a class="toc-backref" href="#id20">Release or not</a><a class="headerlink" href="#release-or-not" title="永久链接至标题">¶</a></h2>
<p>To release or not. There is at least one bug about star imports that
affects numpy that is solved in develop, and wasn’t back ported, and I
was thinking it only applies to develop, but in fact does to stable. It
makes me want to release even before all these optimization things
happen and are polished, and I might well decide to go with that.</p>
<p>Maybe I only add the closure in-place stuff and the polish the loop SSA
stuff, and then call it a release. It already will solve a lot of
performance issues that exist right now, while staging the ground for
more.</p>
</div>
<div class="section" id="standalone-improvements">
<h2><a class="toc-backref" href="#id21">Standalone Improvements</a><a class="headerlink" href="#standalone-improvements" title="永久链接至标题">¶</a></h2>
<p>Standalone work is also improving. Using pyi files got more apt, and a
few things were added, all of which make sense to be used by people.</p>
<p>But I also have a backlog of issues there however. I will schedule one
sprint for those I guess, where I focus on these. I am neglecting those
somewhat recently.</p>
</div>
<div class="section" id="caching-examined">
<h2><a class="toc-backref" href="#id22">Caching Examined</a><a class="headerlink" href="#caching-examined" title="永久链接至标题">¶</a></h2>
<p>For the static code, I now noticed that it’s compiled for each target
name, due to the build directory being part of the object file for
debug. For gcc 8 there is an option to allow pointing at the original
static C file location, and then <code class="docutils literal notranslate"><span class="pre">ccache</span></code> is more effective, because
object files will be the same.</p>
<p>That’s actually pretty bad, as most of my machines are on <code class="docutils literal notranslate"><span class="pre">gcc-6</span></code> and
makes me think that <code class="docutils literal notranslate"><span class="pre">libnuitka.a</span></code> is really more of an requirement
than ever. I might take some time to get this sorted out.</p>
</div>
<div class="section" id="python3-deprecation-warnings">
<h2><a class="toc-backref" href="#id23">Python3 deprecation warnings</a><a class="headerlink" href="#python3-deprecation-warnings" title="永久链接至标题">¶</a></h2>
<p>So Nuitka supports the <code class="docutils literal notranslate"><span class="pre">no_warnings</span></code> Python flag, and for a long time
I have been annoyed at how it was not working for Python3 in some cases.
The code was manually settign filters, but these would get overridden by
CPython test suites testing warnings. And the code said that there is no
CPython C-API to control it, which is just plain wrong.</p>
<p>So I changed that and it became possible to remove lots of
<code class="docutils literal notranslate"><span class="pre">ignore_stderr</span></code> annotations in CPython test suites, and more
importantly, I can stop adding them for when running older/newer CPython
version with a suite.</p>
</div>
<div class="section" id="twitter">
<h2><a class="toc-backref" href="#id24">Twitter</a><a class="headerlink" href="#twitter" title="永久链接至标题">¶</a></h2>
<p>I continue to be very active there.</p>
<p><a class="reference external" href="https://twitter.com/kayhayen?ref_src=twsrc%5Etfw">Follow &#64;kayhayen</a></p>
<p>And lets not forget, having followers make me happy. So do re-tweets.</p>
<p>Adding Twitter more prominently to the web site is something that is
also going to happen.</p>
</div>
<div class="section" id="help-wanted">
<h2><a class="toc-backref" href="#id25">Help Wanted</a><a class="headerlink" href="#help-wanted" title="永久链接至标题">¶</a></h2>
<p>If you are interested, I am tagging issues <a class="reference external" href="https://github.com/kayhayen/Nuitka/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22">help wanted</a>
and there is a bunch, and very likely at least one <em>you</em> can help with.</p>
<p>Nuitka definitely needs more people to work on it.</p>
</div>
<div class="section" id="donations">
<h2><a class="toc-backref" href="#id26">Donations</a><a class="headerlink" href="#donations" title="永久链接至标题">¶</a></h2>
<p>If you want to help, but cannot spend the time, please consider to
donate to Nuitka, and go here:</p>
<p><a class="reference external" href="/pages/donations.html">Donate to Nuitka</a></p>
</div>
</div>

<div class="section">
    

<div class="section">
  <span style="float: left">
     上一页:
    
    <a href="nuitka-this-week-8.html">
       Nuitka this week #8
    </a>
    
  </span>
  <span>&nbsp;</span>
  <span style="float: right">
     下一页: 
    <a href="nuitka-this-week-10.html">
      Nuitka this week #10 
    </a>
    
  </span>
</div>
  
</div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      通过 Kay Hayen<br/>
    
        &copy; 版权 2022, Kay Hayen and Nuitka Contributors.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>