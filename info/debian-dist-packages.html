<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/">
    <link rel="icon" href="../_static/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="../_static/favicon.png" sizes="32x32" type="image/png">
    <link rel="icon" href="../_static/favicon.ico" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="../_static/apple-touch-icon-iphone.png" sizes="57x57" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad.png" sizes="72x72" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-iphone4.png" sizes="114x114" type="image/png">
    <link rel="icon" href="../_static/apple-touch-icon-ipad3.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="../_static/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Debian packages with Nuitka &#8212; Nuitka the Python Compiler  documentation</title>
      <link rel="stylesheet" href="/_static/css/combined_e6840a1efaf0bb3afd9a2fd6b30cc2e9.css" type="text/css">
      <link rel="canonical" href="https://nuitka.net/info/debian-dist-packages.html">
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script>var DOCUMENTATION_OPTIONS = {
    URL_ROOT: '../',
    VERSION: '',
    LANGUAGE: 'en',
    COLLAPSE_INDEX: false,
    BUILDER: 'html',
    FILE_SUFFIX: '.html',
    LINK_SUFFIX: '.html',
    HAS_SOURCE: false,
    SOURCELINK_SUFFIX: '.txt',
    NAVIGATION_WITH_KEYS: false,
    SHOW_SEARCH_SUMMARY: true,
    ENABLE_SEARCH_SHORTCUTS: true,
};</script>
        <script src="/_static/combined_1f3d291568f0d25fd5e0e83c3075a3a3.js" async=""></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js" async=""></script>
        <script src="../_static/clipboard.min.js" async=""></script>
        <script src="../_static/copybutton.js" async=""></script>
        <link rel="index" title="Index" href="../genindex.html">
    <link rel="alternate" type="application/atom+xml" href="../blog/atom.xml" title="Nuitka Blog">
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> Nuitka the Python Compiler
            <div class="logo_container"><img src="../_static/Nuitka-Logo-Symbol.svg" class="logo" alt="Logo" width="208" height="209">
          </div></a><!-- Empty override file take the place of searchbox.html, which generates search box. -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/support.html">Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Commercial Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/commercial.html">Nuitka Commercial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html">Nuitka Release 1.1 (Draft)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-1-0">Nuitka Release 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#nuitka-release-0-9">Nuitka Release 0.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/Changelog.html#older-releases">Older Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/roadmap.html">Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/developer-manual.html">Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/api-doc.html">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/factory.html">Factory Instructions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Media</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/Presentations.html">Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/Streaming.html">Streaming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/Credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/impressum.html">Impressum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under construction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/pyside2.html">Nuitka PySide2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/donations.html">Donations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/gsoc2019.html">Google Summer of Code 2019</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nuitka the Python Compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Empty override file take the place of sphinx_rtd_theme/breadcrumbs.html, which generates the top nav breadcrumbs. -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <section id="debian-packages-with-nuitka">
<h1>Debian packages with Nuitka<a class="headerlink" href="#debian-packages-with-nuitka" title="Permalink to this heading">&#61633;</a></h1>
<section id="the-problem-in-a-few-words">
<h2>The Problem in a few Words<a class="headerlink" href="#the-problem-in-a-few-words" title="Permalink to this heading">&#61633;</a></h2>
<p>Python from Debian packages is not generally suitable for use on any other OS,
because they are changed such, that they work only on Debian. Instead create a
virtualenv and use a virtualenv with PyPI packages or Anaconda instead. These
are designed to be used on all Linux OSes.</p>
</section>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this heading">&#61633;</a></h2>
<p>Debian and distributions based on it, e.g. Ubuntu and Mint, are
widespread and popular among Linux users, because it&#8217;s very easy to
install, you get a maintained.</p>
<p>As part of the their goals, Debian wants to remove duplication between
packages, have packages in standard places, and generally clean up
things. As a result, data files are moved to <code class="docutils literal notranslate"><span class="pre">/etc</span></code>, used DLLs are in
<code class="docutils literal notranslate"><span class="pre">/usr/lib</span></code>, and to make that possible, patches are applied during
packaging to the source.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">&#61633;</a></h2>
<p>This is the change, that Debian does to certifi. The code is changed,
such that a data file is found not near the Python code, like most
Python packages do it, using <code class="docutils literal notranslate"><span class="pre">importlib.resources</span></code> but rather a hard
coded path is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">python3100</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.10</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">certifi</span><span class="o">/</span><span class="n">core</span><span class="o">.</span><span class="n">py</span>
<span class="o">+++</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="n">dist</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">certifi</span><span class="o">/</span><span class="n">core</span><span class="o">.</span><span class="n">py</span>
<span class="o">@@</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span> <span class="o">+</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span> <span class="o">@@</span>
<span class="s2">"""</span>
<span class="s2">import os</span>

<span class="s2">+DEBIAN_CA_CERTS_PATH = '/etc/ssl/certs/ca-certificates.crt'</span>
<span class="s2">+</span>
<span class="s2">try:</span>
<span class="s2">    from importlib.resources import path as get_path, read_text</span>

<span class="s2">@@ -33,8 +35,7 @@</span>
<span class="s2">            # We also have to hold onto the actual context manager, because</span>
<span class="s2">            # it will do the cleanup whenever it gets garbage collected, so</span>
<span class="s2">            # we will also store that at the global level as well.</span>
<span class="s2">-            _CACERT_CTX = get_path("certifi", "cacert.pem")</span>
<span class="s2">-            _CACERT_PATH = str(_CACERT_CTX.__enter__())</span>
<span class="s2">+            _CACERT_PATH = DEBIAN_CA_CERTS_PATH</span>

<span class="s2">        return _CACERT_PATH</span>

<span class="s2">@@ -51,10 +52,9 @@</span>
<span class="s2">    # If we don't have importlib.resources, then we will just do the old logic</span>
<span class="s2">    # of assuming we're on the filesystem and munge the path directly.</span>
<span class="s2">    def where():</span>
<span class="s2">-        f = os.path.dirname(__file__)</span>
<span class="s2">-</span>
<span class="s2">-        return os.path.join(f, "cacert.pem")</span>
<span class="s2">+        return DEBIAN_CA_CERTS_PATH</span>


<span class="s2">def contents():</span>
<span class="s2">-    return read_text("certifi", "cacert.pem", encoding="ascii")</span>
<span class="s2">+    with open(where(), "r", encoding="ascii") as data:</span>
<span class="s2">+        return data.read()</span>
</pre></div>
</div>
</section>
<section id="consequence">
<h2>Consequence<a class="headerlink" href="#consequence" title="Permalink to this heading">&#61633;</a></h2>
<p>Using Debian for standalone to port things to other OSes, means, that
some of the packages will not find the data files. Nuitka would have to
undo the effect of all these patches, making the code portable again.
That is of course not viable.</p>
</section>
<section id="recommendation">
<h2>Recommendation<a class="headerlink" href="#recommendation" title="Permalink to this heading">&#61633;</a></h2>
<p>For being portable on Linux, generally it is recommended to use a portable
Python distribution.</p>
<p>One way is to use packages from PyPI over system Debian packages, but still with
the Debian python. Nuitka will generally work well with these, even if in some
cases, the latest version may not yet be supported right after its release. This
however leaves you with the problem, that newest Debian Python will not run on
older Linux systems, so you need to also solve that by building on old Debian,
in a chroot, docker container, pbuilder, etc.</p>
<p>The harder way is to use Anaconda over Debian Python. The advantage there is
that similar to Debian, this has a set of supported packages, and even though
they are usually a bit older, chances are that the version used there is also
already well supported by Nuitka. And Anaconda will run on older Linux no
problem, and therefore standalone distributions created with it will as well.</p>
</section>
</section>

<div class="section">
   
</div>

           </div>
          </div>
          <footer>

  <hr>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kay Hayen and Nuitka Contributors.</p>
  </div>

  
<div class="share-button-container">
    <div class="socialbutton-wrapper">

        <a href="https://twitter.com/share?url=https://nuitka.net/info/debian-dist-packages.html&amp;hashtags=nuitka" target="_blank">
            <div class="socialbutton twitter">
                <p class="icon">
                    <img src="/_static/icon-twitter.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="https://www.facebook.com/sharer.php?u=https://nuitka.net/info/debian-dist-packages.html&amp;hashtag=%23nuitka" target="_blank">
            <div class="socialbutton facebook">
                <p class="icon">
                    <img src="/_static/icon-facebook.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <a href="http://www.reddit.com/submit?url=https://nuitka.net/info/debian-dist-packages.html" target="_blank">
            <div class="socialbutton reddit">
                <p class="icon">
                    <img src="/_static/icon-reddit.png" width="24" height="24">
                </p>

                <p class="shares">share...</p>
            </div>
        </a>

        <details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 switcher-container">
            <summary class="sd-summary-title sd-card-header switcher-title">EN<div class="sd-summary-down docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z">
                        </path>
                    </svg>
                </div>
                <div class="sd-summary-up docutils">
                    <svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewbox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z">
                        </path>
                    </svg>
                </div>
            </summary>
            <div class="sd-summary-content sd-card-body switcher-body docutils">
                <blockquote>
                    <div>
                        <div><div class="line"><a class="reference external" href="/zh_CN/info/debian-dist-packages.html">CN</a></div>
                            <div class="line"><a class="reference external" href="/de_DE/info/debian-dist-packages.html">DE</a></div>
                            </div></div>
                </blockquote>
            </div>
        </details>
    </div>
</div>



</footer>
        </div>
      </div>
    </section>
  </div>
  </body>
</html>